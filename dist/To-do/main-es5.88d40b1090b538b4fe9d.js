!function(){function t(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e(t,e){return r(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}(t,e)||a(t,e)||n()}function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(t){if(Array.isArray(t))return t}function i(t){return function(t){if(Array.isArray(t))return u(t)}(t)||o(t)||a(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function s(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=a(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}function a(t,e){if(t){if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t){var e="function"==typeof Map?new Map:void 0;return(c=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return l(t,arguments,w(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),y(r,t)})(t)}function l(t,e,n){return(l=b()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&y(i,n.prototype),i}).apply(null,arguments)}function h(t,e,n){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=w(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e,n){return e&&d(t.prototype,e),n&&d(t,n),t}function v(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function g(t){var e=b();return function(){var n,r=w(t);if(e){var i=w(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m(this,n)}}function m(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_(t):e}function _(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return s});var r=n("os0x"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:"[DEFAULT]",optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService(i);if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(s){if(n)return null;throw s}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService("[DEFAULT]")}catch(l){}try{for(var i=Object(r.h)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=Object(r.e)(o.value,2),a=s[1],u=this.normalizeInstanceIdentifier(s[0]);try{var c=this.getOrInitializeService(u);a.resolve(c)}catch(l){}}}catch(h){e={error:h}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}),t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()})))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t="[DEFAULT]"),this.instances.has(t)},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}(),a=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new s(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){var e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t,r)).scheduler=t,i.work=r,i.pending=!1,i}return p(n,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}},{key:"requestAsyncId",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return setInterval(t.flush.bind(t,this),n)}},{key:"recycleAsyncId",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}},{key:"execute",value:function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}},{key:"_execute",value:function(t,e){var n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}},{key:"_unsubscribe",value:function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}]),n}(function(t){v(n,t);var e=g(n);function n(t,r){return f(this,n),e.call(this)}return p(n,[{key:"schedule",value:function(t){return this}}]),n}(n("quSY").a))},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof e?function(o){return o.pipe(s(function(n,o){return Object(i.a)(t(n,o)).pipe(Object(r.a)(function(t,r){return e(n,t,o,r)}))},n))}:("number"==typeof e&&(n=e),function(e){return e.lift(new a(t,n))})}var a=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;f(this,t),this.project=e,this.concurrent=n}return p(t,[{key:"call",value:function(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}]),t}(),u=function(t){v(n,t);var e=g(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return f(this,n),(i=e.call(this,t)).project=r,i.concurrent=o,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return p(n,[{key:"_next",value:function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}},{key:"_tryNext",value:function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}},{key:"_innerSub",value:function(t){var e=new o.a(this),n=this.destination;n.add(e);var r=Object(o.c)(t,e);r!==e&&n.add(r)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(t){this.destination.next(t)}},{key:"notifyComplete",value:function(){var t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}]),n}(o.b)},"6Uf2":function(t,e,n){"use strict";(function(t){var e,r=n("zIRd"),i=n("os0x"),o=n("qOnz"),s=n("q/0M"),a=n("/6Yf"),u=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(o.F)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(o.z)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),c=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(o.h)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),l=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new u(e)}}catch(n){}return new c},h=l("localStorage"),f=l("sessionStorage"),d=new s.b("@firebase/database"),p=(e=1,function(){return e++}),v=function(t){var e=Object(o.E)(t),n=new o.c;n.update(e);var r=n.digest();return o.f.encodeByteArray(r)},y=function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r="",i=0;i<e.length;i++){var s=e[i];Array.isArray(s)||s&&"object"==typeof s&&"number"==typeof s.length?r+=t.apply(null,s):r+="object"==typeof s?Object(o.F)(s):s,r+=" "}return r},g=null,m=!0,_=function(t,e){Object(o.d)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(d.logLevel=s.a.VERBOSE,g=d.log.bind(d),e&&f.set("logging_enabled",!0)):"function"==typeof t?g=t:(g=null,f.remove("logging_enabled"))},b=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===m&&(m=!1,null===g&&!0===f.get("logging_enabled")&&_(!0)),g){var n=y.apply(null,t);g(n)}},w=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];b.apply(void 0,Object(i.f)([t],e))}},k=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+y.apply(void 0,Object(i.f)(t));d.error(n)},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+y.apply(void 0,Object(i.f)(t));throw d.error(n),new Error(n)},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+y.apply(void 0,Object(i.f)(t));d.warn(n)},O=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},S="[MIN_NAME]",T="[MAX_NAME]",I=function(t,e){if(t===e)return 0;if(t===S||e===T)return-1;if(e===S||t===T)return 1;var n=M(t),r=M(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},x=function(t,e){return t===e?0:t<e?-1:1},A=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(o.F)(e))},j=function t(e){if("object"!=typeof e||null===e)return Object(o.F)(e);var n=[];for(var r in e)n.push(r);n.sort();for(var i="{",s=0;s<n.length;s++)0!==s&&(i+=","),i+=Object(o.F)(n[s]),i+=":",i+=t(e[n[s]]);return i+"}"},P=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function N(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var R=function(t){var e,n,r,i,s;Object(o.d)(!O(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},D=new RegExp("^-?(0*)\\d{1,10}$"),M=function(t){if(D.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},L=function(t){try{t()}catch(e){setTimeout(function(){throw C("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},F=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},V=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function U(){return new V("")}function q(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function B(t){return t.pieces_.length-t.pieceNum_}function H(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new V(t.pieces_,e)}function z(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function W(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Q(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function G(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new V(e,0)}function K(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof V)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new V(n,0)}function Y(t){return t.pieceNum_>=t.pieces_.length}function X(t,e){var n=q(t),r=q(e);if(null===n)return e;if(n===r)return X(H(t),H(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Z(t,e){for(var n=Q(t,0),r=Q(e,0),i=0;i<n.length&&i<r.length;i++){var o=I(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function J(t,e){if(B(t)!==B(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function $(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(B(t)>B(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var tt,et,nt,rt,it,ot,st,at,ut,ct=function(){function t(t,e){this.errorPrefix_=e,this.parts_=Q(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(o.D)(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=Object(o.D)(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=Object(o.D)(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),lt=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ht=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=h.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&h.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(Object(o.d)("string"==typeof t,"typeof type must == string"),Object(o.d)("object"==typeof e,"typeof params must == object"),"websocket"===t)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if("long_polling"!==t)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return N(e,function(t,e){r.push(t+"="+e)}),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}(),ft=function(t,e){var n=dt(t),r=n.namespace;return"firebase.com"===n.domain&&E(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||E("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&C("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new ht(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new V(n.pathString)}},dt=function(t){var e="",n="",r="",o="",s="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(o=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,f)));var d=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var o=Object(i.h)(t.split("&")),s=o.next();!s.done;s=o.next()){var a=s.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):C("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var v=e.indexOf(".");r=e.substring(0,v).toLowerCase(),n=e.substring(v+1),s=r}"ns"in d&&(s=d.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:o,namespace:s}},pt=/[\[\].#$\/\u0000-\u001F\u007F]/,vt=/[\[\].#$\u0000-\u001F\u007F]/,yt=function(t){return"string"==typeof t&&0!==t.length&&!pt.test(t)},gt=function(t){return"string"==typeof t&&0!==t.length&&!vt.test(t)},mt=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!O(t)||t&&"object"==typeof t&&Object(o.h)(t,".sv")},_t=function(t,e,n,r,i){i&&void 0===n||bt(Object(o.l)(t,e,i),n,r)},bt=function t(e,n,r){var i=r instanceof V?new ct(r,e):r;if(void 0===n)throw new Error(e+"contains undefined "+i.toErrorString());if("function"==typeof n)throw new Error(e+"contains a function "+i.toErrorString()+" with contents = "+n.toString());if(O(n))throw new Error(e+"contains "+n.toString()+" "+i.toErrorString());if("string"==typeof n&&n.length>10485760/3&&Object(o.D)(n)>10485760)throw new Error(e+"contains a string greater than 10485760 utf8 bytes "+i.toErrorString()+" ('"+n.substring(0,50)+"...')");if(n&&"object"==typeof n){var s=!1,a=!1;if(N(n,function(n,r){if(".value"===n)s=!0;else if(".priority"!==n&&".sv"!==n&&(a=!0,!yt(n)))throw new Error(e+" contains an invalid key ("+n+") "+i.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');i.push(n),t(e,r,i),i.pop()}),s&&a)throw new Error(e+' contains ".value" child '+i.toErrorString()+" in addition to actual children.")}},wt=function(t,e,n,r,i){if(!i||void 0!==n){var s=Object(o.l)(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(s+" must be an object containing the children to replace.");var a=[];N(n,function(t,e){var n=new V(t);if(bt(s,e,K(r,n)),".priority"===z(n)&&!mt(e))throw new Error(s+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=Q(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!yt(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Z);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&$(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(s,a)}},kt=function(t,e,n,r){if(!r||void 0!==n){if(O(n))throw new Error(Object(o.l)(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!mt(n))throw new Error(Object(o.l)(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Et=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(o.l)(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Ct=function(t,e,n,r){if(!(r&&void 0===n||yt(n)))throw new Error(Object(o.l)(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Ot=function(t,e,n,r){if(!(r&&void 0===n||gt(n)))throw new Error(Object(o.l)(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},St=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Ot(t,e,n,r)},Tt=function(t,e){if(".info"===q(e))throw new Error(t+" failed = Can't modify data under /.info/")},It=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!yt(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),gt(t)}(r))throw new Error(Object(o.l)(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},xt=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(o.l)(t,e,r)+"must be a boolean.")},At=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Object(o.G)("OnDisconnect.cancel",0,1,arguments.length),Object(o.H)("OnDisconnect.cancel",1,t,!0);var e=new o.a;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Object(o.G)("OnDisconnect.remove",0,1,arguments.length),Tt("OnDisconnect.remove",this.path_),Object(o.H)("OnDisconnect.remove",1,t,!0);var e=new o.a;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Object(o.G)("OnDisconnect.set",1,2,arguments.length),Tt("OnDisconnect.set",this.path_),_t("OnDisconnect.set",1,t,this.path_,!1),Object(o.H)("OnDisconnect.set",2,e,!0);var n=new o.a;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Object(o.G)("OnDisconnect.setWithPriority",2,3,arguments.length),Tt("OnDisconnect.setWithPriority",this.path_),_t("OnDisconnect.setWithPriority",1,t,this.path_,!1),kt("OnDisconnect.setWithPriority",2,e,!1),Object(o.H)("OnDisconnect.setWithPriority",3,n,!0);var r=new o.a;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(Object(o.G)("OnDisconnect.update",1,2,arguments.length),Tt("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,C("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}wt("OnDisconnect.update",1,t,this.path_,!1),Object(o.H)("OnDisconnect.update",2,e,!0);var i=new o.a;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),jt=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(o.G)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Pt="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Nt=(tt=0,et=[],function(t){var e,n=t===tt;tt=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=Pt.charAt(t%64),t=Math.floor(t/64);Object(o.d)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===et[e];e--)et[e]=0;et[e]++}else for(e=0;e<12;e++)et[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=Pt.charAt(et[e]);return Object(o.d)(20===i.length,"nextPushId: Length should be 20."),i}),Rt=function(t){if("2147483647"===t)return"-";var e=M(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return T;var o=Pt.charAt(Pt.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},Dt=function(t){if("-2147483648"===t)return S;var e=M(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=Pt.charAt(Pt.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))},Mt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Lt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Mt(S,t),r=new Mt(S,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Mt.MIN},t}(),Ft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return nt},set:function(t){nt=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return I(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(o.e)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Mt.MIN},e.prototype.maxPost=function(){return new Mt(T,nt)},e.prototype.makePost=function(t,e){return Object(o.d)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Mt(t,nt)},e.prototype.toString=function(){return".key"},e}(Lt),Vt=new Ft,Ut=function(t){return"number"==typeof t?"number:"+R(t):"string:"+t},qt=function(t){if(t.isLeafNode()){var e=t.val();Object(o.d)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(o.h)(e,".sv"),"Priority must be a string or number.")}else Object(o.d)(t===rt||t.isEmpty(),"priority of unexpected type.");Object(o.d)(t===rt||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Bt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(o.d)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),qt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return it},set:function(t){it=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return Y(e)?this:".priority"===q(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=q(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(o.d)(".priority"!==r||1===B(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(H(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Ut(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?R(this.value_):this.value_,this.lazyHash_=v(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(o.d)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(o.d)(i>=0,"Unknown leaf type: "+n),Object(o.d)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Ht=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?I(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Mt.MIN},e.prototype.maxPost=function(){return new Mt(T,new Bt("[PRIORITY-POST]",st))},e.prototype.makePost=function(t,e){var n=ot(t);return new Mt(e,new Bt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Lt)),zt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Wt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Gt.EMPTY_NODE,this.right=null!=o?o:Gt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Gt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Gt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Qt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Wt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Gt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Wt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Wt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new zt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new zt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new zt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new zt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Qt,t}(),Kt=Math.log(2),Yt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Kt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Xt=function(t,e,n,r){t.sort(e);var i=function e(r,i){var o,s,a=i-r;if(0===a)return null;if(1===a)return o=t[r],s=n?n(o):o,new Wt(s,o.node,Wt.BLACK,null,null);var u=parseInt(a/2,10)+r,c=e(r,u),l=e(u+1,i);return o=t[u],s=n?n(o):o,new Wt(s,o.node,Wt.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new Wt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,Wt.BLACK):(a(h,Wt.BLACK),a(h,Wt.RED))}return o}(new Yt(t.length));return new Gt(r||e,o)},Zt={},Jt=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(o.d)(Zt&&Ht,"ChildrenNode.ts has not been loaded"),at=at||new t({".priority":Zt},{".priority":Ht})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(o.C)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Gt?e:null},t.prototype.hasIndex=function(t){return Object(o.h)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(o.d)(e!==Vt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,s=[],a=!1,u=n.getIterator(Mt.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),s.push(c),c=u.getNext();r=a?Xt(s,e.getCompare()):Zt;var l=e.toString(),h=Object(i.a)({},this.indexSet_);h[l]=e;var f=Object(i.a)({},this.indexes_);return f[l]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(o.A)(this.indexes_,function(t,i){var s=Object(o.C)(r.indexSet_,i);if(Object(o.d)(s,"Missing index implementation for "+i),t===Zt){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(Mt.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),Xt(a,s.getCompare())}return Zt}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Mt(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(o.A)(this.indexes_,function(t){if(t===Zt)return t;var r=n.get(e.name);return r?t.remove(new Mt(e.name,r)):t}),this.indexSet_)},t}();function $t(t,e){return I(t.name,e.name)}function te(t,e){return I(t,e)}var ee=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&qt(this.priorityNode_),this.children_.isEmpty()&&Object(o.d)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return ut||(ut=new t(new Gt(te),null,Jt.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||ut},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?ut:e},t.prototype.getChild=function(t){var e=q(t);return null===e?this:this.getImmediateChild(e).getChild(H(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(o.d)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Mt(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?ut:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=q(t);if(null===n)return e;Object(o.d)(".priority"!==q(t)||1===B(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(H(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Ht,function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Ut(this.getPriority().val())+":"),this.forEachChild(Ht,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":v(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Mt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Mt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Mt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Mt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Mt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ne?-1:0},t.prototype.withIndex=function(e){if(e===Vt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Vt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Ht),r=e.getIterator(Ht),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Vt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),ne=new(function(t){function e(){return t.call(this,new Gt(te),ee.EMPTY_NODE,Jt.Default)||this}return Object(i.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return ee.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(ee));function re(t,e){if(void 0===e&&(e=null),null===t)return ee.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(o.d)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Bt(t,re(e));if(t instanceof Array){var n=ee.EMPTY_NODE;return N(t,function(e,r){if(Object(o.h)(t,e)&&"."!==e.substring(0,1)){var i=re(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}}),n.updatePriority(re(e))}var r=[],i=!1;if(N(t,function(t,e){if("."!==t.substring(0,1)){var n=re(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Mt(t,n)))}}),0===r.length)return ee.EMPTY_NODE;var s=Xt(r,$t,function(t){return t.name},te);if(i){var a=Xt(r,Ht.getCompare());return new ee(s,re(e),new Jt({".priority":a},{".priority":Ht}))}return new ee(s,re(e),Jt.Default)}Object.defineProperties(Mt,{MIN:{value:new Mt(S,ee.EMPTY_NODE)},MAX:{value:new Mt(T,ne)}}),Ft.__EMPTY_NODE=ee.EMPTY_NODE,Bt.__childrenNodeConstructor=ee,rt=ne,st=ne,ot=re;var ie=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?I(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Mt.MIN},e.prototype.maxPost=function(){return Mt.MAX},e.prototype.makePost=function(t,e){var n=re(t);return new Mt(e,n)},e.prototype.toString=function(){return".value"},e}(Lt)),oe=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(o.d)(!Y(e)&&".priority"!==q(e),"Can't create PathIndex with empty path or .priority key"),n}return Object(i.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?I(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=re(t),r=ee.EMPTY_NODE.updateChild(this.indexPath_,n);return new Mt(e,r)},e.prototype.maxPost=function(){var t=ee.EMPTY_NODE.updateChild(this.indexPath_,ne);return new Mt(T,t)},e.prototype.toString=function(){return Q(this.indexPath_,0).join("/")},e}(Lt),se=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Object(o.G)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Object(o.G)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Object(o.G)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Object(o.G)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Object(o.G)("DataSnapshot.child",0,1,arguments.length),e=String(e),Ot("DataSnapshot.child",1,e,!1);var n=new V(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,Ht)},t.prototype.hasChild=function(t){Object(o.G)("DataSnapshot.hasChild",1,1,arguments.length),Ot("DataSnapshot.hasChild",1,t,!1);var e=new V(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Object(o.G)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(Object(o.G)("DataSnapshot.forEach",1,1,arguments.length),Object(o.H)("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,function(r,i){return e(new t(i,n.ref_.child(r),Ht))})},t.prototype.hasChildren=function(){return Object(o.G)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(o.G)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Object(o.G)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),ae=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(o.F)(this.snapshot.exportVal())},t}(),ue=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),ce=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new ae("value",this,new se(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.d)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new ue(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),le=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Object(o.h)(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new ue(this,t,e):null},t.prototype.createEvent=function(t,e){Object(o.d)(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new ae(t.type,this,new se(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.d)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return i.every(function(t){return e.callbacks_[t]===n.callbacks_[t]})}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}();function he(t){return{type:"value",snapshotNode:t}}function fe(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function de(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function pe(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var ve,ye=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){Object(o.d)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(de(e,a)):Object(o.d)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(fe(e,n)):s.trackChildChange(pe(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Ht,function(t,r){e.hasChild(t)||n.trackChildChange(de(t,r))}),e.isLeafNode()||e.forEachChild(Ht,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(pe(e,r,i))}else n.trackChildChange(fe(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?ee.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),ge=function(){function t(e){this.indexedFilter_=new ye(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Mt(e,n))||(n=ee.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=ee.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(ee.EMPTY_NODE);var i=this;return e.forEachChild(Ht,function(t,e){i.matches(new Mt(t,e))||(r=r.updateImmediateChild(t,ee.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),me=function(){function t(t){this.rangedFilter_=new ge(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Mt(e,n))||(n=ee.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=ee.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=ee.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(ee.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,ee.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(o.d)(u.numChildren()===this.limit_,"");var c=new Mt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),d=r.getChildAfterChild(this.index_,l,this.reverse_);null!=d&&(d.name===e||u.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:s(d,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(pe(e,n,f)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(de(e,f));var v=u.updateImmediateChild(e,ee.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange(fe(d.name,d.node)),v.updateImmediateChild(d.name,d.node)):v}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=i&&(i.trackChildChange(de(l.name,l.node)),i.trackChildChange(fe(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,ee.EMPTY_NODE)):t},t}(),_e=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ht}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return Object(o.d)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(o.d)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:S},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(o.d)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(o.d)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:T},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(o.d)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Ht},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function be(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function we(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function ke(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Ee(t,e,n){var r;return t.index_===Vt?("string"==typeof e&&(e=Rt(e)),r=ke(t,e,n)):r=ke(t,e,null==n?T:Rt(n)),r.startAfterSet_=!0,r}function Ce(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Oe(t,e,n){var r;return t.index_===Vt?("string"==typeof e&&(e=Dt(e)),r=Ce(t,e,n)):r=Ce(t,e,null==n?S:Dt(n)),r.endBeforeSet_=!0,r}function Se(t,e){var n=t.copy();return n.index_=e,n}function Te(t){var e,n={};return t.isDefault()||(t.index_===Ht?e="$priority":t.index_===ie?e="$value":t.index_===Vt?e="$key":(Object(o.d)(t.index_ instanceof oe,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=Object(o.F)(e),t.startSet_&&(n.startAt=Object(o.F)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Object(o.F)(t.indexStartName_))),t.endSet_&&(n.endAt=Object(o.F)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Object(o.F)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}var Ie=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.d)(ve,"Reference.ts has not been loaded"),ve},set:function(t){ve=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Vt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==S)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==T)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Ht){if(null!=e&&!mt(e)||null!=n&&!mt(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(o.d)(t.getIndex()instanceof oe||t.getIndex()===ie,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Object(o.G)("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){Object(o.G)("Query.on",2,4,arguments.length),Et("Query.on",1,e,!1),Object(o.H)("Query.on",2,n,!1);var s=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,s.cancel,s.context);else{var a={};a[e]=n,this.onChildEvent(a,s.cancel,s.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new ce(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new le(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){Object(o.G)("Query.off",0,3,arguments.length),Et("Query.off",1,t,!0),Object(o.H)("Query.off",2,e,!0),Object(o.I)("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var s=e||null;r=new ce(s,null,n||null)}else t&&(e&&((i={})[t]=e),r=new le(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.get=function(){return this.repo.getValue(this)},t.prototype.once=function(e,n,r,i){var s=this;Object(o.G)("Query.once",1,4,arguments.length),Et("Query.once",1,e,!1),Object(o.H)("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new o.a;c.promise.catch(function(){});var l=function t(r){u&&(u=!1,s.off(e,t),n&&n.bind(a.context)(r),c.resolve(r))};return this.on(e,l,function(t){s.off(e,l),a.cancel&&a.cancel.bind(a.context)(t),c.reject(t)}),c.promise},t.prototype.limitToFirst=function(e){if(Object(o.G)("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,be(this.queryParams_,e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Object(o.G)("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,we(this.queryParams_,e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(Object(o.G)("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Ot("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new V(e);if(Y(n))throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new oe(n),i=Se(this.queryParams_,r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){Object(o.G)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=Se(this.queryParams_,Vt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){Object(o.G)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=Se(this.queryParams_,Ht);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){Object(o.G)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=Se(this.queryParams_,ie);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Object(o.G)("Query.startAt",0,2,arguments.length),_t("Query.startAt",1,e,this.path,!0),Ct("Query.startAt",2,n,!0);var r=ke(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.startAfter=function(e,n){void 0===e&&(e=null),Object(o.G)("Query.startAfter",0,2,arguments.length),_t("Query.startAfter",1,e,this.path,!1),Ct("Query.startAfter",2,n,!0);var r=Ee(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAfter: Starting point was already set (by another call to startAt, startAfter or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Object(o.G)("Query.endAt",0,2,arguments.length),_t("Query.endAt",1,e,this.path,!0),Ct("Query.endAt",2,n,!0);var r=Ce(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endBefore=function(e,n){void 0===e&&(e=null),Object(o.G)("Query.endBefore",0,2,arguments.length),_t("Query.endBefore",1,e,this.path,!1),Ct("Query.endBefore",2,n,!0);var r=Oe(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endBefore: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Object(o.G)("Query.equalTo",1,2,arguments.length),_t("Query.equalTo",1,t,this.path,!1),Ct("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Object(o.G)("Query.toString",0,0,arguments.length),this.repo.toString()+W(this.path)},t.prototype.toJSON=function(){return Object(o.G)("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return function(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Ht&&(e.i=t.index_.toString()),e}(this.queryParams_)},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=j(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Object(o.G)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=J(this.path,e.path),s=this.queryIdentifier()===e.queryIdentifier();return r&&i&&s},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Object(o.H)(t,3,r.cancel,!0),r.context=n,Object(o.I)(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(o.l)(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),xe=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),Ae=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=K(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),je=function(t,e,n){return t&&"object"==typeof t?(Object(o.d)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?Pe(t[".sv"],e,n):"object"==typeof t[".sv"]?Ne(t[".sv"],e):void Object(o.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Pe=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(o.d)(!1,"Unexpected server value: "+t)}},Ne=function(t,e,n){t.hasOwnProperty("increment")||Object(o.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(o.d)(!1,"Unexpected increment value: "+r);var i=e.node();if(Object(o.d)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!=typeof s?r:s+r},Re=function(t,e,n,r){return Me(e,new Ae(n,t),r)},De=function(t,e,n){return Me(t,new xe(e),n)};function Me(t,e,n){var r,i=t.getPriority().val(),o=je(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=je(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Bt(a,re(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Bt(o))),u.forEachChild(Ht,function(t,i){var o=Me(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}var Le=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!Y(t)&&this.children.size>0){var e=q(t);return t=H(t),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if(Y(e))this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=q(e);this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=H(e),i.remember(e,n)}},t.prototype.forget=function(t){if(Y(t))return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Ht,function(t,e){n.remember(new V(t),e)}),this.forget(t)}if(this.children.size>0){var r=q(t);return t=H(t),this.children.has(r)&&this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild(function(n,r){var i=new V(t.toString()+"/"+n);r.forEachTree(i,e)})},t.prototype.forEachChild=function(t){this.children.forEach(function(e,n){t(n,e)})},t}(),Fe=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({});function Ve(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Ue,qe=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Fe.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(Y(this.path)){if(null!=this.affectedTree.value)return Object(o.d)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new V(e));return new t(U(),n,this.revert)}return Object(o.d)(q(this.path)===e,"operationForChild called for unrelated child."),new t(H(this.path),this.affectedTree,this.revert)},t}(),Be=function(){function t(t,e){void 0===e&&(Ue||(Ue=new Gt(x)),e=Ue),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return N(e,function(t,e){n=n.set(new V(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:U(),value:this.value};if(Y(t))return null;var n=q(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(H(t),e);return null!=i?{path:K(new V(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(Y(e))return this;var n=q(e),r=this.children.get(n);return null!==r?r.subtree(H(e)):new t(null)},t.prototype.set=function(e,n){if(Y(e))return new t(n,this.children);var r=q(e),i=(this.children.get(r)||new t(null)).set(H(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(Y(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=q(e),r=this.children.get(n);if(r){var i=r.remove(H(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(Y(t))return this.value;var e=q(t),n=this.children.get(e);return n?n.get(H(t)):null},t.prototype.setTree=function(e,n){if(Y(e))return n;var r,i=q(e),o=(this.children.get(i)||new t(null)).setTree(H(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(U(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(K(t,r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,U(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(Y(t))return null;var i=q(t),o=this.children.get(i);return o?o.findOnPath_(H(t),K(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,U(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(Y(e))return this;this.value&&r(n,this.value);var i=q(e),o=this.children.get(i);return o?o.foreachOnPath_(H(e),K(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(U(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(K(t,n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t}(),He=function(){function t(t,e){this.source=t,this.path=e,this.type=Fe.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return Y(this.path)?new t(this.source,U()):new t(this.source,H(this.path))},t}(),ze=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Fe.OVERWRITE}return t.prototype.operationForChild=function(e){return Y(this.path)?new t(this.source,U(),this.snap.getImmediateChild(e)):new t(this.source,H(this.path),this.snap)},t}(),We=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Fe.MERGE}return t.prototype.operationForChild=function(e){if(Y(this.path)){var n=this.children.subtree(new V(e));return n.isEmpty()?null:n.value?new ze(this.source,U(),n.value):new t(this.source,U(),n)}return Object(o.d)(q(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,H(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Qe=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(Y(t))return this.isFullyInitialized()&&!this.filtered_;var e=q(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Ge=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new Qe(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new Qe(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t}(),Ke=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(o.d)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Object(o.d)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,pe(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,de(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,fe(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw Object(o.e)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,pe(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Ye=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Xe=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Qe(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),Ze=function(t,e){this.viewCache=t,this.changes=e},Je=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){Object(o.d)(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Object(o.d)(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var s,a,u=new Ke;if(n.type===Fe.OVERWRITE){var c=n;c.source.fromUser?s=this.applyUserOverwrite_(e,c.path,c.snap,r,i,u):(Object(o.d)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.getServerCache().isFiltered()&&!Y(c.path),s=this.applyServerOverwrite_(e,c.path,c.snap,r,i,a,u))}else if(n.type===Fe.MERGE){var l=n;l.source.fromUser?s=this.applyUserMerge_(e,l.path,l.children,r,i,u):(Object(o.d)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.getServerCache().isFiltered(),s=this.applyServerMerge_(e,l.path,l.children,r,i,a,u))}else if(n.type===Fe.ACK_USER_WRITE){var h=n;s=h.revert?this.revertUserWrite_(e,h.path,r,i,u):this.ackUserWrite_(e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==Fe.LISTEN_COMPLETE)throw Object(o.e)("Unknown operation type: "+n.type);s=this.listenComplete_(e,n.path,r,u)}var f=u.getChanges();return t.maybeAddValueEvent_(e,s,f),new Ze(s,f)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(he(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var s=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,u=void 0;if(Y(e))if(Object(o.d)(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var c=t.getCompleteServerSnap(),l=n.calcCompleteEventChildren(c instanceof ee?c:ee.EMPTY_NODE);a=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var h=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var f=q(e);if(".priority"===f){Object(o.d)(1===B(e),"Can't have a priority with additional path components");var d=s.getNode();u=t.getServerCache().getNode();var p=n.calcEventCacheAfterServerOverwrite(e,d,u);a=null!=p?this.filter_.updatePriority(d,p):s.getNode()}else{var v=H(e),y=void 0;if(s.isCompleteForChild(f)){u=t.getServerCache().getNode();var g=n.calcEventCacheAfterServerOverwrite(e,s.getNode(),u);y=null!=g?s.getNode().getImmediateChild(f).updateChild(v,g):s.getNode().getImmediateChild(f)}else y=n.calcCompleteChild(f,t.getServerCache());a=null!=y?this.filter_.updateChild(s.getNode(),f,y,v,r,i):s.getNode()}}return t.updateEventSnap(a,s.isFullyInitialized()||Y(e),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(Y(e))a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),l,null)}else{var h=q(e);if(!u.isCompleteForPath(e)&&B(e)>1)return t;var f=H(e),d=u.getNode().getImmediateChild(h).updateChild(f,n);a=".priority"===h?c.updatePriority(u.getNode(),d):c.updateChild(u.getNode(),h,d,f,Ye,null)}var p=t.updateServerSnap(a,u.isFullyInitialized()||Y(e),c.filtersNodes()),v=new Xe(r,p,i);return this.generateEventCacheAfterServerEvent_(p,e,r,v,s)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new Xe(r,t,i);if(Y(e))a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var l=q(e);if(".priority"===l)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var h=H(e),f=u.getNode().getImmediateChild(l),d=void 0;if(Y(h))d=n;else{var p=c.getCompleteChild(l);d=null!=p?".priority"===z(h)&&p.getChild(G(h)).isEmpty()?p:p.updateChild(h,n):ee.EMPTY_NODE}if(f.equals(d))s=t;else{var v=this.filter_.updateChild(u.getNode(),l,d,h,c,o);s=t.updateEventSnap(v,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,s){var a=this,u=e;return r.foreach(function(r,c){var l=K(n,r);t.cacheHasChild_(e,q(l))&&(u=a.applyUserOverwrite_(u,l,c,i,o,s))}),r.foreach(function(r,c){var l=K(n,r);t.cacheHasChild_(e,q(l))||(u=a.applyUserOverwrite_(u,l,c,i,o,s))}),u},t.prototype.applyMerge_=function(t,e){return e.foreach(function(e,n){t=t.updateChild(e,n)}),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=Y(e)?n:new Be(null).setTree(e,n);var l=t.getServerCache().getNode();return u.children.inorderTraversal(function(e,n){if(l.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),h=a.applyMerge_(u,n);c=a.applyServerOverwrite_(c,new V(e),h,r,i,o,s)}}),u.children.inorderTraversal(function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!l.hasChild(e)&&!u){var h=t.getServerCache().getNode().getImmediateChild(e),f=a.applyMerge_(h,n);c=a.applyServerOverwrite_(c,new V(e),f,r,i,o,s)}}),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if(Y(e)&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),r,i,s,o);if(Y(e)){var u=new Be(null);return a.getNode().forEachChild(Vt,function(t,e){u=u.set(new V(t),e)}),this.applyServerMerge_(t,e,u,r,i,s,o)}return t}var c=new Be(null);return n.foreach(function(t,n){var r=K(e,t);a.isCompleteForPath(r)&&(c=c.set(t,a.getNode().getChild(r)))}),this.applyServerMerge_(t,e,c,r,i,s,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||Y(e),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,Ye,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var s;if(null!=n.shadowingWrite(e))return t;var a=new Xe(n,t,r),u=t.getEventCache().getNode(),c=void 0;if(Y(e)||".priority"===q(e)){var l=void 0;if(t.getServerCache().isFullyInitialized())l=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();Object(o.d)(h instanceof ee,"serverChildren would be complete if leaf node"),l=n.calcCompleteEventChildren(h)}c=this.filter_.updateFullNode(u,l=l,i)}else{var f=q(e),d=n.calcCompleteChild(f,t.getServerCache());null==d&&t.getServerCache().isCompleteForChild(f)&&(d=u.getImmediateChild(f)),(c=null!=d?this.filter_.updateChild(u,f,d,H(e),a,i):t.getEventCache().getNode().hasChild(f)?this.filter_.updateChild(u,f,ee.EMPTY_NODE,H(e),a,i):u).isEmpty()&&t.getServerCache().isFullyInitialized()&&(s=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(c=this.filter_.updateFullNode(c,s,i))}return s=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(U()),t.updateEventSnap(c,s,this.filter_.filtersNodes())},t}(),$e=function(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()};function tn(t,e,n,r,i,s){var a=r.filter(function(t){return t.type===n});a.sort(function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw Object(o.e)("Should only compare child_ events.");var r=new Mt(e.childName,e.snapshotNode),i=new Mt(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,e,n)}),a.forEach(function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,s);i.forEach(function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))})})}var en,nn=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_.getQueryParams(),i=new ye(r.getIndex()),o=(n=r).loadsAllData()?new ye(n.getIndex()):n.hasLimit()?new me(n):new ge(n);this.processor_=new Je(o);var s=e.getServerCache(),a=e.getEventCache(),u=i.updateFullNode(ee.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(ee.EMPTY_NODE,a.getNode(),null),l=new Qe(u,s.isFullyInitialized(),i.filtersNodes()),h=new Qe(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=new Ge(h,l),this.eventGenerator_=new $e(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteNode=function(){return this.viewCache_.getCompleteEventSnap()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!Y(t)&&!e.getImmediateChild(q(t)).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){Object(o.d)(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach(function(t){var i=t.createCancelEvent(e,r);i&&n.push(i)})}if(t){for(var i=[],s=0;s<this.eventRegistrations_.length;++s){var a=this.eventRegistrations_[s];if(a.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(s+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===Fe.MERGE&&null!==t.source.queryId&&(Object(o.d)(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Object(o.d)(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),Object(o.d)(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Ht,function(t,e){n.push(fe(t,e))}),e.isFullyInitialized()&&n.push(he(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){return function(t,e,n,r){var i=[],o=[];return e.forEach(function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push({type:"child_moved",snapshotNode:e.snapshotNode,childName:e.childName})}),tn(t,i,"child_removed",e,r,n),tn(t,i,"child_added",e,r,n),tn(t,i,"child_moved",o,r,n),tn(t,i,"child_changed",e,r,n),tn(t,i,"value",e,r,n),i}(this.eventGenerator_,t,e,n?[n]:this.eventRegistrations_)},t}(),rn=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.d)(en,"Reference.ts has not been loaded"),en},set:function(t){Object(o.d)(!en,"__referenceConstructor has already been defined"),en=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,s,a=t.source.queryId;if(null!==a){var u=this.views.get(a);return Object(o.d)(null!=u,"SyncTree gave us an op for an invalid query."),u.applyOperation(t,e,n)}var c=[];try{for(var l=Object(i.h)(this.views.values()),h=l.next();!h.done;h=l.next())c=c.concat((u=h.value).applyOperation(t,e,n))}catch(f){r={error:f}}finally{try{h&&!h.done&&(s=l.return)&&s.call(l)}finally{if(r)throw r.error}}return c},t.prototype.getView=function(t,e,n,r){var i=t.queryIdentifier(),o=this.views.get(i);if(!o){var s=e.calcCompleteEventCache(r?n:null),a=!1;s?a=!0:n instanceof ee?(s=e.calcCompleteEventChildren(n),a=!1):(s=ee.EMPTY_NODE,a=!1);var u=new Ge(new Qe(s,a,!1),new Qe(n,r,!1));return new nn(t,u)}return o},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=this.getView(t,n,r,i);return this.views.has(t.queryIdentifier())||this.views.set(t.queryIdentifier(),o),o.addEventRegistration(e),o.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var o,s,a=e.queryIdentifier(),u=[],c=[],l=this.hasCompleteView();if("default"===a)try{for(var h=Object(i.h)(this.views.entries()),f=h.next();!f.done;f=h.next()){var d,p=Object(i.e)(f.value,2),v=p[0];c=c.concat((d=p[1]).removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(v),d.getQuery().getQueryParams().loadsAllData()||u.push(d.getQuery()))}}catch(y){o={error:y}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(o)throw o.error}}else(d=this.views.get(a))&&(c=c.concat(d.removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(a),d.getQuery().getQueryParams().loadsAllData()||u.push(d.getQuery())));return l&&!this.hasCompleteView()&&u.push(new t.__referenceConstructor(e.repo,e.path)),{removed:u,events:c}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=Object(i.h)(this.views.values()),o=r.next();!o.done;o=r.next()){var s=o.value;s.getQuery().getQueryParams().loadsAllData()||n.push(s)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var o=Object(i.h)(this.views.values()),s=o.next();!s.done;s=o.next())r=r||s.value.getCompleteServerCache(t)}catch(a){e={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=Object(i.h)(this.views.values()),r=n.next();!r.done;r=n.next()){var o=r.value;if(o.getQuery().getQueryParams().loadsAllData())return o}}catch(s){t={error:s}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),on=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new Be(null))},t}();function sn(t,e,n){if(Y(e))return new on(new Be(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=X(i,e);return o=o.updateChild(s,n),new on(t.writeTree_.set(i,o))}var a=new Be(n),u=t.writeTree_.setTree(e,a);return new on(u)}function an(t,e,n){var r=t;return N(n,function(t,n){r=sn(r,K(e,t),n)}),r}function un(t,e){if(Y(e))return on.empty();var n=t.writeTree_.setTree(e,new Be(null));return new on(n)}function cn(t,e){return null!=ln(t,e)}function ln(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(X(n.path,e)):null}function hn(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Ht,function(t,n){e.push(new Mt(t,n))}):t.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new Mt(t,n.value))}),e}function fn(t,e){if(Y(e))return t;var n=ln(t,e);return new on(null!=n?new Be(n):t.writeTree_.subtree(e))}function dn(t){return t.writeTree_.isEmpty()}function pn(t,e){return vn(U(),t.writeTree_,e)}function vn(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,i){".priority"===e?(Object(o.d)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=vn(K(t,e),i,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(K(t,".priority"),r)),n}var yn=function(){function t(){this.visibleWrites_=on.empty(),this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new gn(t,this)},t.prototype.addOverwrite=function(t,e,n,r){Object(o.d)(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=sn(this.visibleWrites_,t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){Object(o.d)(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=an(this.visibleWrites_,t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex(function(e){return e.writeId===t});Object(o.d)(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,s=!1,a=this.allWrites_.length-1;i&&a>=0;){var u=this.allWrites_[a];u.visible&&(a>=n&&this.recordContainsPath_(u,r.path)?i=!1:$(r.path,u.path)&&(s=!0)),a--}return!!i&&(s?(this.resetTree_(),!0):(r.snap?this.visibleWrites_=un(this.visibleWrites_,r.path):N(r.children,function(t){e.visibleWrites_=un(e.visibleWrites_,K(r.path,t))}),!0))},t.prototype.getCompleteWriteData=function(t){return ln(this.visibleWrites_,t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=fn(this.visibleWrites_,e);return!i&&dn(o)?n:i||null!=n||cn(o,U())?pn(t.layerTree_(this.allWrites_,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&($(t.path,e)||$(e,t.path))},e),n||ee.EMPTY_NODE):null}var s=ln(this.visibleWrites_,e);if(null!=s)return s;var a=fn(this.visibleWrites_,e);return dn(a)?n:null!=n||cn(a,U())?pn(a,n||ee.EMPTY_NODE):null},t.prototype.calcCompleteEventChildren=function(t,e){var n=ee.EMPTY_NODE,r=ln(this.visibleWrites_,t);if(r)return r.isLeafNode()||r.forEachChild(Ht,function(t,e){n=n.updateImmediateChild(t,e)}),n;if(e){var i=fn(this.visibleWrites_,t);return e.forEachChild(Ht,function(t,e){var r=pn(fn(i,new V(t)),e);n=n.updateImmediateChild(t,r)}),hn(i).forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n}return hn(fn(this.visibleWrites_,t)).forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){Object(o.d)(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=K(t,e);if(cn(this.visibleWrites_,i))return null;var s=fn(this.visibleWrites_,i);return dn(s)?r.getChild(e):pn(s,r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=K(t,e),i=ln(this.visibleWrites_,r);return null!=i?i:n.isCompleteForChild(e)?pn(fn(this.visibleWrites_,r),n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return ln(this.visibleWrites_,t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=fn(this.visibleWrites_,t),u=ln(a,U());if(null!=u)s=u;else{if(null==e)return[];s=pn(a,e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=h.getNext();f&&c.length<r;)0!==l(f,n)&&c.push(f),f=h.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return $(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&$(K(t.path,n),e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,U()),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=on.empty(),i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)$(n,a)?r=sn(r,u=X(n,a),s.snap):$(a,n)&&(u=X(a,n),r=sn(r,U(),s.snap.getChild(u)));else{if(!s.children)throw Object(o.e)("WriteRecord should have .snap or .children");if($(n,a))r=an(r,u=X(n,a),s.children);else if($(a,n))if(Y(u=X(a,n)))r=an(r,U(),s.children);else{var c=Object(o.C)(s.children,q(u));if(c){var l=c.getChild(H(u));r=sn(r,U(),l)}}}}}return r},t}(),gn=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(K(this.treePath_,t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(K(this.treePath_,e),this.writeTree_)},t}(),mn=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=new Be(null),this.pendingWriteTree_=new yn,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new ze({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=Be.fromObject(e);return this.applyOperationToSyncPoints_(new We({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=new Be(null);return null!=n.snap?r=r.set(U(),!0):N(n.children,function(t){r=r.set(new V(t),!0)}),this.applyOperationToSyncPoints_(new qe(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new ze({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))},t.prototype.applyServerMerge=function(t,e){var n=Be.fromObject(e);return this.applyOperationToSyncPoints_(new We({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new He({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=X(s,e),c=new ze(Ve(a),u,n);return this.applyTaggedOperation_(s,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=X(s,e),c=Be.fromObject(n),l=new We(Ve(a),u,c);return this.applyTaggedOperation_(s,l)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,s=i.queryId,a=X(o,e),u=new He(Ve(s),a);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,s=!1;this.syncPointTree_.foreachOnPath(r,function(t,e){var n=X(t,r);i=i||e.getCompleteServerCache(n),s=s||e.hasCompleteView()});var a,u=this.syncPointTree_.get(r);u?(s=s||u.hasCompleteView(),i=i||u.getCompleteServerCache(U())):(u=new rn,this.syncPointTree_=this.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=ee.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=e.getCompleteServerCache(U());n&&(i=i.updateImmediateChild(t,n))}));var c=u.viewExistsForQuery(e);if(!c&&!e.getQueryParams().loadsAllData()){var l=t.makeQueryKey_(e);Object(o.d)(!this.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=t.getNextQueryTag_();this.queryToTagMap.set(l,h),this.tagToQueryMap.set(h,l)}var f=this.pendingWriteTree_.childWrites(r),d=u.addEventRegistration(e,n,f,i,a);if(!c&&!s){var p=u.viewForQuery(e);d=d.concat(this.setupListener_(e,p))}return d},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===e.queryIdentifier()||s.viewExistsForQuery(e))){var u=s.removeEventRegistration(e,n,r);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;a=u.events;var l=-1!==c.findIndex(function(t){return t.getQueryParams().loadsAllData()}),h=this.syncPointTree_.findOnPath(o,function(t,e){return e.hasCompleteView()});if(l&&!h){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var d=this.collectDistinctViewsForSubTree_(f),p=0;p<d.length;++p){var v=d[p],y=v.getQuery(),g=this.createListenerForView_(v);this.listenProvider_.startListening(t.queryForListening_(y),this.tagForQuery_(y),g.hashFn,g.onComplete)}}!h&&c.length>0&&!r&&(l?this.listenProvider_.stopListening(t.queryForListening_(e),null):c.forEach(function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)})),this.removeTags_(c)}return a},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,function(e,n){var r=X(e,t),i=n.getCompleteServerCache(r);if(i)return i});return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.getServerValue=function(t){var e=t.path,n=null;this.syncPointTree_.foreachOnPath(e,function(t,r){var i=X(t,e);n=n||r.getCompleteServerCache(i)});var r=this.syncPointTree_.get(e);r?n=n||r.getCompleteServerCache(U()):(r=new rn,this.syncPointTree_=this.syncPointTree_.set(e,r));var i=null!=n,o=i?new Qe(n,!0,!1):null,s=this.pendingWriteTree_.childWrites(t.path);return r.getView(t,s,i?o.getNode():ee.EMPTY_NODE,i).getCompleteNode()},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),N(n,function(t,e){r=r.concat(e)}),r})},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),s=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),i,s.hashFn,s.onComplete),u=this.syncPointTree_.subtree(r);if(i)Object(o.d)(!u.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!Y(t)&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),N(n,function(t,e){r=r.concat(e)}),r}),l=0;l<c.length;++l){var h=c[l];this.listenProvider_.stopListening(t.queryForListening_(h),this.tagForQuery_(h))}return a},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||ee.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return Object(o.d)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new V(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);Object(o.d)(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(U()))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(Y(t.path))return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(U());null==n&&null!=i&&(n=i.getCompleteServerCache(U()));var o=[],s=q(t.path),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(U());null==n&&null!=o&&(n=o.getCompleteServerCache(U()));var s=[];return e.children.inorderTraversal(function(e,o){var a=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(s=s.concat(i.applyOperationDescendantsHelper_(c,o,a,u)))}),o&&(s=s.concat(o.applyOperation(t,r,n))),s},t.nextQueryTag_=1,t}(),_n=function(){function t(){this.rootNode_=ee.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),bn=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(o.h)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(o.j)(this.counters_)},t}(),wn=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new bn),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),kn=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(i.a)({},t);return this.last_&&N(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),En=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new kn(t);var n=1e4+2e4*Math.random();F(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;N(e,function(e,i){i>0&&Object(o.h)(t.statsToReport_,e)&&(n[e]=i,r=!0)}),r&&this.server_.reportStats(n),F(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Cn=function(){this.eventLists_=[],this.recursionDepth_=0};function On(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||J(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Sn(t,e,n){On(t,n),In(t,function(t){return J(t,e)})}function Tn(t,e,n){On(t,n),In(t,function(t){return $(t,e)||$(e,t)})}function In(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(xn(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function xn(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();g&&b("event: "+n.toString()),L(r)}}}var An=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(o.d)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(i.f)(this.listeners_[t]),o=0;o<r.length;o++)r[o].callback.apply(r[o].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(o.d)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),jn=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.d)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(An),Pn=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(o.t)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.d)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(An),Nn=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&L(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),Rn=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=w(t),this.stats_=wn.getCollection(e),this.urlFn=function(t){return e.connectionURL("long_polling",t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Nn(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(Object(o.v)()||"complete"===document.readyState)t();else{var e=!1,n=function n(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new Dn(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,5),o=r[0],s=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===o)n.id=s,n.password=a;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,2),o=r[0],s=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(o,s)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.hostname&&lt.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(o.v)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(o.F)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(o.g)(e),r=P(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(o.v)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(o.F)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),Dn=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(o.v)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=p(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){b("frame writing exception"),u.stack&&b(u.stack),b(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||b("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;Object(o.v)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){b("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),Mn="";function Ln(t){Mn=t}var Fn=null;"undefined"!=typeof MozWebSocket?Fn=MozWebSocket:"undefined"!=typeof WebSocket&&(Fn=WebSocket);var Vn=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=w(this.connId),this.stats_=wn.getCollection(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!Object(o.v)()&&"undefined"!=typeof location&&location.hostname&&lt.test(location.hostname)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL("websocket",r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,h.set("previous_websocket_failure",!0);try{if(Object(o.v)()){var r={headers:{"User-Agent":"Firebase/5/"+Mn+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},i=process.env,s=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new Fn(this.connURL,[],r)}else this.mySock=new Fn(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(u){this.log_("Error instantiating WebSocket.");var a=u.message||u.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Fn&&!t.forceDisallow_},t.previouslyFailed=function(){return h.isInMemoryStorage||!0===h.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){h.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(o.z)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(o.d)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(o.F)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=P(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),Un=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Rn,Vn]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,o=Vn&&Vn.isAvailable(),s=o&&!Vn.previouslyFailed();if(e.webSocketOnly&&(o||C("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Vn];else{var a=this.transports_=[];try{for(var u=Object(i.h)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),qn=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=w("c:"+this.id+":"),this.transportManager_=new Un(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=F(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=A("t",t),n=A("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=A("t",t),n=A("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=A("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?k("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):k("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&C("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),F(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):F(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(h.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),Bn=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),Hn=function(t){function e(n,r,i,s,a,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=s,l.onServerInfoUpdate_=a,l.authTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=w("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=1e3,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Object(o.v)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),jn.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&Pn.getInstance().on("online",l.onOnline_,l),l}return Object(i.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Object(o.F)(i)),Object(o.d)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new o.a,r={p:t.path.toString(),q:t.queryObject()},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),s=t.path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Object(o.d)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Object(o.d)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(o.h)(t,"w")){var n=Object(o.C)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();C("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(o.n)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(o.y)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Object(o.d)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(o.F)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):k("Unrecognized action received from server: "+Object(o.F)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(o.d)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this,u=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())};this.realtime_={close:h,sendRequest:function(t){Object(o.d)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(t)}};var f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(f).then(function(t){c?b("getToken() completed but was canceled"):(b("getToken() completed. Creating connection."),a.authToken_=t&&t.accessToken,l=new qn(s,a.repoInfo_,a.applicationId_,n,r,i,function(t){C(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")},u))}).then(null,function(e){a.log_("Failed to get token: "+e),c||(t.repoInfo_.nodeAdmin&&C(e),h())})}},e.prototype.interrupt=function(t){b("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){b("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(o.r)(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return j(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new V(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){b("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var o=Object(i.h)(this.listens.values()),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(d){t={error:d}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(o.v)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+Mn.replace(/\./g,"-")]=1,Object(o.t)()?t["framework.cordova"]=1:Object(o.w)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=Pn.getInstance().currentlyOnline();return Object(o.r)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(Bn),zn=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=w("p:rest:"),i.listens_={},i}return Object(i.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(o.d)(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=Te(t.getQueryParams());this.restRequest_(a+".json",l,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(o.C)(s.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=Te(t.getQueryParams()),r=t.path.toString(),i=new o.a;return this.restRequest_(r+".json",n,function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))}),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then(function(i){var s=i&&i.accessToken;s&&(e.auth=s);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(o.B)(e);r.log_("Sending REST request for "+a);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=Object(o.z)(u.responseText)}catch(e){C("Failed to parse JSON response for "+a+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&C("Got unsuccessful REST response for "+a+" Status: "+u.status),n(u.status);n=null}},u.open("GET",a,!0),u.send()})},e}(Bn),Wn=function(){this.children={},this.childCount=0,this.value=null},Qn=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new Wn),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof V?e:new V(e),r=this,i=q(n);null!==i;)r=new t(i,r,Object(o.C)(r.node_.children,i)||new Wn),i=q(n=H(n));return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){Object(o.d)(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;N(this.node_.children,function(r,i){e(new t(r,n,i))})},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild(function(e){e.forEachDescendant(t,!0,n)}),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild(function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)})},t.prototype.path=function(){return new V(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=Object(o.h)(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}(),Gn=function(t){return t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT",t}({}),Kn=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Cn,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new Le,this.transactionQueueTree_=new Qn,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.start=function(){var t=this;if(this.stats_=wn.getCollection(this.repoInfo_),this.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new zn(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var e=this.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(o.F)(e)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}this.persistentConnection_=new Hn(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,e),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),this.statsReporter_=wn.getOrCreateReporter(this.repoInfo_,function(){return new En(t.stats_,t.server_)}),this.infoData_=new _n,this.infoSyncTree_=new mn({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e.path);return s.isEmpty()||(o=t.infoSyncTree_.applyServerOverwrite(e.path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new mn({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);Tn(t.eventQueue_,e.path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})},t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new V(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new V(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var s=[];if(r)if(n){var a=Object(o.A)(e,function(t){return re(t)});s=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var u=re(e);s=this.serverSyncTree_.applyTaggedQueryOverwrite(i,u,r)}else if(n){var c=Object(o.A)(e,function(t){return re(t)});s=this.serverSyncTree_.applyServerMerge(i,c)}else{var l=re(e);s=this.serverSyncTree_.applyServerOverwrite(i,l)}var h=i;s.length>0&&(h=this.rerunTransactions_(i)),Tn(this.eventQueue_,h,s)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;N(t,function(t,n){e.updateInfo_(t,n)})},t.prototype.updateInfo_=function(t,e){var n=new V("/.info/"+t),r=re(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);Tn(this.eventQueue_,n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.getValue=function(t){var e=this,n=this.serverSyncTree_.getServerValue(t);return null!=n?Promise.resolve(new se(n,t.getRef(),t.getQueryParams().getIndex())):this.server_.get(t).then(function(n){var r=re(n),i=e.serverSyncTree_.applyServerOverwrite(t.path,r);return Sn(e.eventQueue_,t.path,i),Promise.resolve(new se(r,t.getRef(),t.getQueryParams().getIndex()))},function(n){return e.log_("get for query "+Object(o.F)(t)+" failed: "+n),Promise.reject(new Error(n))})},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),s=re(e,n),a=this.serverSyncTree_.calcCompleteEventCache(t),u=De(s,a,o),c=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserOverwrite(t,u,c,!0);On(this.eventQueue_,l),this.server_.put(t.toString(),s.val(!0),function(e,n){var o="ok"===e;o||C("set at "+t+" failed: "+e);var s=i.serverSyncTree_.ackUserWrite(c,!o);Tn(i.eventQueue_,t,s),i.callOnCompleteCallback(r,e,n)});var h=this.abortTransactions_(t);this.rerunTransactions_(h),Tn(this.eventQueue_,h,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),s={};if(N(e,function(e,n){i=!1,s[e]=Re(K(t,e),re(n),r.serverSyncTree_,o)}),i)b("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,s,a);On(this.eventQueue_,u),this.server_.merge(t.toString(),e,function(e,i){var o="ok"===e;o||C("update at "+t+" failed: "+e);var s=r.serverSyncTree_.ackUserWrite(a,!o),u=s.length>0?r.rerunTransactions_(t):t;Tn(r.eventQueue_,u,s),r.callOnCompleteCallback(n,e,i)}),N(e,function(e){var n=r.abortTransactions_(K(t,e));r.rerunTransactions_(n)}),Tn(this.eventQueue_,t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new Le;this.onDisconnect_.forEachTree(U(),function(r,i){var o=Re(r,i,t.serverSyncTree_,e);n.remember(r,o)});var r=[];n.forEachTree(U(),function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)}),this.onDisconnect_=new Le,Tn(this.eventQueue_,U(),r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)})},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=re(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)})},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=re(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)})},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(Object(o.r)(e))return b("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,function(i,o){"ok"===i&&N(e,function(e,n){var i=re(n);r.onDisconnect_.remember(K(t,e),i)}),r.callOnCompleteCallback(n,i,o)})},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===q(t.path)?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),Sn(this.eventQueue_,t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===q(t.path)?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),Sn(this.eventQueue_,t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new kn(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce(function(t,e){return Math.max(e.length,t)},0);N(e,function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)})}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),b.apply(void 0,Object(i.f)([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&L(function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}})},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new tr(this))},enumerable:!1,configurable:!0}),t.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},s=new Yn(this,t);s.on("value",i);var a={path:t,update:e,onComplete:n,status:null,order:p(),applyLocally:r,retryCount:0,unwatcher:function(){s.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=this.getLatestState_(t);a.currentInputSnapshot=u;var c=a.update(u.val());if(void 0===c){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var l=new se(a.currentInputSnapshot,new Yn(this,a.path),Ht);a.onComplete(null,!1,l)}}else{bt("transaction failed: Data returned ",c,a.path),a.status=Gn.RUN;var h=this.transactionQueueTree_.subTree(t),f=h.getValue()||[];f.push(a),h.setValue(f);var d=void 0;"object"==typeof c&&null!==c&&Object(o.h)(c,".priority")?(d=Object(o.C)(c,".priority"),Object(o.d)(mt(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(this.serverSyncTree_.calcCompleteEventCache(t)||ee.EMPTY_NODE).getPriority().val();var v=this.generateServerValues(),y=re(c,d),g=De(y,u,v);a.currentOutputSnapshotRaw=y,a.currentOutputSnapshotResolved=g,a.currentWriteId=this.getNextWriteId_();var m=this.serverSyncTree_.applyUserOverwrite(t,g,a.currentWriteId,a.applyLocally);Tn(this.eventQueue_,t,m),this.sendReadyTransactions_()}},t.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||ee.EMPTY_NODE},t.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);Object(o.d)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return t.status===Gn.RUN})&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild(function(t){e.sendReadyTransactions_(t)})},t.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map(function(t){return t.currentWriteId}),i=this.getLatestState_(t,r),s=i,a=i.hash(),u=0;u<e.length;u++){var c=e[u];Object(o.d)(c.status===Gn.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=Gn.SENT,c.retryCount++;var l=X(t,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),f=t;this.server_.put(f.toString(),h,function(r){n.log_("transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<e.length;s++){if(e[s].status=Gn.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[s].currentWriteId)),e[s].onComplete){var a=e[s].currentOutputSnapshotResolved,u=new Yn(n,e[s].path),c=new se(a,u,Ht);o.push(e[s].onComplete.bind(null,null,!0,c))}e[s].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),Tn(n.eventQueue_,t,i),s=0;s<o.length;s++)L(o[s])}else{if("datastale"===r)for(s=0;s<e.length;s++)e[s].status=e[s].status===Gn.SENT_NEEDS_ABORT?Gn.NEEDS_ABORT:Gn.RUN;else for(C("transaction at "+f.toString()+" failed: "+r),s=0;s<e.length;s++)e[s].status=Gn.NEEDS_ABORT,e[s].abortReason=r;n.rerunTransactions_(t)}},a)},t.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},t.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter(function(t){return t.status===Gn.RUN}).map(function(t){return t.currentWriteId}),s=0;s<t.length;s++){var a=t[s],u=X(e,a.path),c=!1,l=void 0;if(Object(o.d)(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===Gn.NEEDS_ABORT)c=!0,l=a.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===Gn.RUN)if(a.retryCount>=25)c=!0,l="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var h=this.getLatestState_(a.path,i);a.currentInputSnapshot=h;var f=t[s].update(h.val());if(void 0!==f){bt("transaction failed: Data returned ",f,a.path);var d=re(f);"object"==typeof f&&null!=f&&Object(o.h)(f,".priority")||(d=d.updatePriority(h.getPriority()));var p=a.currentWriteId,v=this.generateServerValues(),y=De(d,h,v);a.currentOutputSnapshotRaw=d,a.currentOutputSnapshotResolved=y,a.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(p),1),r=(r=r.concat(this.serverSyncTree_.applyUserOverwrite(a.path,y,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(p,!0))}else c=!0,l="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(Tn(this.eventQueue_,e,r),r=[],c&&(t[s].status=Gn.COMPLETED,setTimeout(t[s].unwatcher,Math.floor(0)),t[s].onComplete))if("nodata"===l){var g=new Yn(this,t[s].path),m=new se(t[s].currentInputSnapshot,g,Ht);n.push(t[s].onComplete.bind(null,null,!1,m))}else n.push(t[s].onComplete.bind(null,new Error(l),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),s=0;s<n.length;s++)L(n[s]);this.sendReadyTransactions_()}},t.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=q(t);null!==e&&null===n.getValue();)n=n.subTree(e),e=q(t=H(t));return n},t.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},t.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},t.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==Gn.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},t.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},t.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,s=0;s<e.length;s++)e[s].status===Gn.SENT_NEEDS_ABORT||(e[s].status===Gn.SENT?(Object(o.d)(i===s-1,"All SENT items should be at beginning of queue."),i=s,e[s].status=Gn.SENT_NEEDS_ABORT,e[s].abortReason="set"):(Object(o.d)(e[s].status===Gn.RUN,"Unexpected transaction status in abort"),e[s].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[s].currentWriteId,!0)),e[s].onComplete&&n.push(e[s].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,Tn(this.eventQueue_,t.path(),r),s=0;s<n.length;s++)L(n[s])}},t}(),Yn=function(t){function e(e,n){if(!(e instanceof Kn))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,new _e,!1)||this}return Object(i.c)(e,t),e.prototype.getKey=function(){return Object(o.G)("Reference.key",0,0,arguments.length),Y(this.path)?null:z(this.path)},e.prototype.child=function(t){return Object(o.G)("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof V||(null===q(this.path)?St("Reference.child",1,t,!1):Ot("Reference.child",1,t,!1)),new e(this.repo,K(this.path,t))},e.prototype.getParent=function(){Object(o.G)("Reference.parent",0,0,arguments.length);var t=G(this.path);return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){Object(o.G)("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){Object(o.G)("Reference.set",1,2,arguments.length),Tt("Reference.set",this.path),_t("Reference.set",1,t,this.path,!1),Object(o.H)("Reference.set",2,e,!0);var n=new o.a;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Object(o.G)("Reference.update",1,2,arguments.length),Tt("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,C("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}wt("Reference.update",1,t,this.path,!1),Object(o.H)("Reference.update",2,e,!0);var i=new o.a;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(Object(o.G)("Reference.setWithPriority",2,3,arguments.length),Tt("Reference.setWithPriority",this.path),_t("Reference.setWithPriority",1,t,this.path,!1),kt("Reference.setWithPriority",2,e,!1),Object(o.H)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new o.a;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return Object(o.G)("Reference.remove",0,1,arguments.length),Tt("Reference.remove",this.path),Object(o.H)("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(Object(o.G)("Reference.transaction",1,3,arguments.length),Tt("Reference.transaction",this.path),Object(o.H)("Reference.transaction",1,t,!1),Object(o.H)("Reference.transaction",2,e,!0),xt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new o.a;"function"==typeof e&&r.promise.catch(function(){});var i=function(t,n,i){t?r.reject(t):r.resolve(new jt(n,i)),"function"==typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){Object(o.G)("Reference.setPriority",1,2,arguments.length),Tt("Reference.setPriority",this.path),kt("Reference.setPriority",1,t,!1),Object(o.H)("Reference.setPriority",2,e,!0);var n=new o.a;return this.repo.setWithPriority(K(this.path,".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Object(o.G)("Reference.push",0,2,arguments.length),Tt("Reference.push",this.path),_t("Reference.push",1,t,this.path,!0),Object(o.H)("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=Nt(r),s=this.child(i),a=this.child(i);return n=null!=t?s.set(t,e).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch(function(){}),s},e.prototype.onDisconnect=function(){return Tt("Reference.onDisconnect",this.path),new At(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Ie);Ie.__referenceConstructor=Yn,rn.__referenceConstructor=Yn;var Xn,Zn=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then(function(t){return n.auth_=t})}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(b("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout(function(){return t(null)},0),this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';C(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),Jn=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),$n=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return Xn||(Xn=new t),Xn},t.prototype.interrupt=function(){var t,e,n,r;try{for(var o=Object(i.h)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].interrupt()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,r;try{for(var o=Object(i.h)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].resume()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.applyEmulatorSettings=function(t,e,n){t.repoInfo_=new ht(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new Jn)},t.prototype.databaseFromApp=function(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||E("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),b("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=ft(i,r),a=s.repoInfo,u=void 0;"undefined"!=typeof process&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(o=!0,a=(s=ft(i="http://"+u+"?ns="+a.namespace,r)).repoInfo):o=!s.repoInfo.secure;var c=r&&o?new Jn:new Zn(t,e);return It("Invalid Firebase Database URL",1,s),Y(s.path)||E("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(a,t,c).database},t.prototype.deleteRepo=function(t){var e=Object(o.C)(this.repos_,t.app.name);e&&Object(o.C)(e,t.key)===t||E("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.key]},t.prototype.createRepo=function(t,e,n){var r=Object(o.C)(this.repos_,e.name);r||(this.repos_[e.name]=r={});var i=Object(o.C)(r,t.toURLString());return i&&E("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Kn(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),tr=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return Object(i.b)(e,void 0,void 0,function(){return Object(i.d)(this,function(t){return this.checkDeleted_("delete"),$n.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]})})}},t instanceof Kn||E("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new Yn(this.repo_,U())),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?E("Cannot call useEmulator() after instance has already been initialized."):$n.getInstance().applyEmulatorSettings(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),Object(o.G)("database.ref",0,1,arguments.length),t instanceof Yn?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Object(o.G)(e,1,1,arguments.length);var n=ft(t,this.repo_.repoInfo_.nodeAdmin);It(e,1,n);var r=n.repoInfo;return this.repo_.repoInfo_.isCustomHost()||r.host===this.repo_.repoInfo_.host||E(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&E("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Object(o.G)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){Object(o.G)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),er=Object.freeze({__proto__:null,forceLongPolling:function(){Vn.forceDisallow(),Rn.forceAllow()},forceWebSockets:function(){Rn.forceDisallow()},isWebSocketsAvailable:function(){return Vn.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,i=t.namespace,o=t.nodeAdmin,s=void 0!==o&&o;Ln(t.version);var u=new a.c("auth-internal",new a.b("database-standalone"));return u.setComponent(new a.a("auth-internal",function(){return r},"PRIVATE")),{instance:$n.getInstance().databaseFromApp(e,u,n,s),namespace:i}}}),nr=Hn;Hn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Hn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var rr=Object.freeze({__proto__:null,DataConnection:nr,RealTimeConnection:qn,hijackHash:function(t){var e=Hn.prototype.put;return Hn.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Hn.prototype.put=e}},ConnectionTarget:ht,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){$n.getInstance().forceRestClient(t)}}),ir=tr.ServerValue;!function(e){Ln(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new a.a("database",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return $n.getInstance().databaseFromApp(n,r,e)},"PUBLIC").setServiceProps({Reference:Yn,Query:Ie,Database:tr,DataSnapshot:se,enableLogging:_,INTERNAL:er,ServerValue:ir,TEST_ACCESS:rr}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.9.4"),Object(o.v)()&&(t.exports=n)}(r.a)}).call(this,n("3UD+")(t))},"7Hc7":function(t,e,n){"use strict";n.d(e,"b",function(){return l}),n.d(e,"a",function(){return d});var r=1,i=Promise.resolve(),o={};function s(t){return t in o&&(delete o[t],!0)}var a=function(t){var e=r++;return o[e]=!0,i.then(function(){return s(e)&&t()}),e},u=function(t){s(t)},c=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t,r)).scheduler=t,i.work=r,i}return p(n,[{key:"requestAsyncId",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==r&&r>0?h(w(n.prototype),"requestAsyncId",this).call(this,t,e,r):(t.actions.push(this),t.scheduled||(t.scheduled=a(t.flush.bind(t,null))))}},{key:"recycleAsyncId",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==r&&r>0||null===r&&this.delay>0)return h(w(n.prototype),"recycleAsyncId",this).call(this,t,e,r);0===t.actions.length&&(u(e),t.scheduled=void 0)}}]),n}(n("3N8a").a),l=new(function(t){v(n,t);var e=g(n);function n(){return f(this,n),e.apply(this,arguments)}return p(n,[{key:"flush",value:function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}}}]),n}(n("IjjT").a))(c),d=l},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a"),c=function(t){v(n,t);var e=g(n);function n(t,r,o){var s;switch(f(this,n),(s=e.call(this)).syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=i.a;break;case 1:if(!t){s.destination=i.a;break}if("object"==typeof t){t instanceof n?(s.syncErrorThrowable=t.syncErrorThrowable,s.destination=t,t.add(_(s))):(s.syncErrorThrowable=!0,s.destination=new l(_(s),t));break}default:s.syncErrorThrowable=!0,s.destination=new l(_(s),t,r,o)}return s}return p(n,[{key:s.a,value:function(){return this}},{key:"next",value:function(t){this.isStopped||this._next(t)}},{key:"error",value:function(t){this.isStopped||(this.isStopped=!0,this._error(t))}},{key:"complete",value:function(){this.isStopped||(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,h(w(n.prototype),"unsubscribe",this).call(this))}},{key:"_next",value:function(t){this.destination.next(t)}},{key:"_error",value:function(t){this.destination.error(t),this.unsubscribe()}},{key:"_complete",value:function(){this.destination.complete(),this.unsubscribe()}},{key:"_unsubscribeAndRecycle",value:function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}],[{key:"create",value:function(t,e,r){var i=new n(t,e,r);return i.syncErrorThrowable=!1,i}}]),n}(o.a),l=function(t){v(n,t);var e=g(n);function n(t,o,s,a){var u,c;f(this,n),(u=e.call(this))._parentSubscriber=t;var l=_(u);return Object(r.a)(o)?c=o:o&&(c=o.next,s=o.error,a=o.complete,o!==i.a&&(l=Object.create(o),Object(r.a)(l.unsubscribe)&&u.add(l.unsubscribe.bind(l)),l.unsubscribe=u.unsubscribe.bind(_(u)))),u._context=l,u._next=c,u._error=s,u._complete=a,u}return p(n,[{key:"next",value:function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}},{key:"error",value:function(t){if(!this.isStopped){var e=this._parentSubscriber,n=a.a.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}},{key:"complete",value:function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}},{key:"__tryOrUnsub",value:function(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}},{key:"__tryOrSetError",value:function(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}},{key:"_unsubscribe",value:function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}]),n}(c)},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(function(n){var r=new o.a;return r.add(e.schedule(function(){var i=t[s.a]();r.add(i.subscribe({next:function(t){r.add(e.schedule(function(){return n.next(t)}))},error:function(t){r.add(e.schedule(function(){return n.error(t)}))},complete:function(){r.add(e.schedule(function(){return n.complete()}))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(function(n){var r=new o.a;return r.add(e.schedule(function(){return t.then(function(t){r.add(e.schedule(function(){n.next(t),r.add(e.schedule(function(){return n.complete()}))}))},function(t){r.add(e.schedule(function(){return n.error(t)}))})})),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(function(n){var r,i=new o.a;return i.add(function(){r&&"function"==typeof r.return&&r.return()}),i.add(e.schedule(function(){r=t[u.a](),i.add(e.schedule(function(){if(!n.closed){var t,e;try{var i=r.next();t=i.value,e=i.done}catch(o){return void n.error(o)}e?n.complete():(n.next(t),this.schedule())}}))})),i})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r=n("3N8a"),i=new(n("IjjT").a)(r.a),o=i},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=Array.isArray||function(t){return t&&"number"==typeof t.length}},EQ5u:function(t,e,n){"use strict";n.d(e,"a",function(){return u}),n.d(e,"b",function(){return c});var r,i=n("XNiG"),o=n("HDdC"),s=(n("7o/Q"),n("quSY")),a=n("x+ZX"),u=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this)).source=t,i.subjectFactory=r,i._refCount=0,i._isComplete=!1,i}return p(n,[{key:"_subscribe",value:function(t){return this.getSubject().subscribe(t)}},{key:"getSubject",value:function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}},{key:"connect",value:function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new s.a).add(this.source.subscribe(new l(this.getSubject(),this))),t.closed&&(this._connection=null,t=s.a.EMPTY)),t}},{key:"refCount",value:function(){return Object(a.a)()(this)}}]),n}(o.a),c={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:(r=u.prototype)._subscribe},_isComplete:{value:r._isComplete,writable:!0},getSubject:{value:r.getSubject},connect:{value:r.connect},refCount:{value:r.refCount}},l=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t)).connectable=r,i}return p(n,[{key:"_error",value:function(t){this._unsubscribe(),h(w(n.prototype),"_error",this).call(this,t)}},{key:"_complete",value:function(){this.connectable._isComplete=!0,this._unsubscribe(),h(w(n.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}]),n}(i.b)},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC"),i=new r.a(function(t){return t.complete()});function o(t){return t?function(t){return new r.a(function(e){return t.schedule(function(){return e.complete()})})}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r,i=n("7o/Q"),o=n("2QA8"),s=n("gRHU"),a=n("kJWO"),u=n("SpAZ"),c=n("2fFW"),l=((r=function(){function t(e){f(this,t),this._isScalar=!1,e&&(this._subscribe=e)}return p(t,[{key:"lift",value:function(e){var n=new t;return n.source=this,n.operator=e,n}},{key:"subscribe",value:function(t,e,n){var r=this.operator,a=function(t,e,n){if(t){if(t instanceof i.a)return t;if(t[o.a])return t[o.a]()}return t||e||n?new i.a(t,e,n):new i.a(s.a)}(t,e,n);if(a.add(r?r.call(a,this.source):this.source||c.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),c.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}},{key:"_trySubscribe",value:function(t){try{return this._subscribe(t)}catch(e){c.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){var e=t,n=e.closed,r=e.destination,o=e.isStopped;if(n||o)return!1;t=r&&r instanceof i.a?r:null}return!0}(t)?t.error(e):console.warn(e)}}},{key:"forEach",value:function(t,e){var n=this;return new(e=h(e))(function(e,r){var i;i=n.subscribe(function(e){try{t(e)}catch(n){r(n),i&&i.unsubscribe()}},r,e)})}},{key:"_subscribe",value:function(t){var e=this.source;return e&&e.subscribe(t)}},{key:a.a,value:function(){return this}},{key:"pipe",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?this:(0===(r=e).length?u.a:1===r.length?r[0]:function(t){return r.reduce(function(t,e){return e(t)},t)})(this);var r}},{key:"toPromise",value:function(t){var e=this;return new(t=h(t))(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})}}]),t}()).create=function(t){return new r(t)},r);function h(t){if(t||(t=c.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t}},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=function(){var t=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.now;f(this,t),this.SchedulerAction=e,this.now=n}return p(t,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return new this.SchedulerAction(this,t).schedule(n,e)}}]),t}();return t.now=function(){return Date.now()},t}(),i=function(t){v(n,t);var e=g(n);function n(t){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.now;return f(this,n),(i=e.call(this,t,function(){return n.delegate&&n.delegate!==_(i)?n.delegate.now():o()})).actions=[],i.active=!1,i.scheduled=void 0,i}return p(n,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;return n.delegate&&n.delegate!==this?n.delegate.schedule(t,e,r):h(w(n.prototype),"schedule",this).call(this,t,e,r)}},{key:"flush",value:function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}}]),n}(r)},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.a}),r.a.registerVersion("firebase","8.2.9","app")},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var s=e[e.length-1];return Object(r.a)(s)?(e.pop(),Object(o.a)(e,s)):Object(i.a)(e)}},Lhse:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(function(){throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu"),l=function(t){if(t&&"function"==typeof t[s.a])return l=t,function(t){var e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,function(t){return n.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,i.a),t};if(t&&"function"==typeof t[o.a])return e=t,function(t){for(var n=e[o.a]();;){var r=void 0;try{r=n.next()}catch(i){return t.error(i),t}if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof n.return&&t.add(function(){n.return&&n.return()}),t};var e,n,l,h=Object(c.a)(t)?"an invalid object":"'".concat(t,"'");throw new TypeError("You provided ".concat(h," where a stream was expected. You can provide an Observable, Promise, Array, or Iterable."))}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var a=Number.POSITIVE_INFINITY,u=null,c=e[e.length-1];return Object(i.a)(c)?(u=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(a=e.pop())):"number"==typeof c&&(a=e.pop()),null===u&&1===e.length&&e[0]instanceof r.a?e[0]:Object(o.a)(a)(Object(s.a)(e,u))}},WMd4:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r,i=n("EY2u"),o=n("LRne"),s=n("HDdC"),a=((r=function(){function t(e,n,r){f(this,t),this.kind=e,this.value=n,this.error=r,this.hasValue="N"===e}return p(t,[{key:"observe",value:function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}},{key:"do",value:function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}},{key:"accept",value:function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}},{key:"toObservable",value:function(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return t=this.error,new s.a(function(e){return e.error(t)});case"C":return Object(i.b)()}var t;throw new Error("unexpected notification kind value")}}],[{key:"createNext",value:function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}},{key:"createError",value:function(e){return new t("E",void 0,e)}},{key:"createComplete",value:function(){return t.completeNotification}}]),t}()).completeNotification=new r("C"),r.undefinedValueNotification=new r("N",void 0),r)},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8"),c=function(t){v(n,t);var e=g(n);function n(t){var r;return f(this,n),(r=e.call(this,t)).destination=t,r}return n}(i.a),l=function(){var t=function(t){v(n,t);var e=g(n);function n(){var t;return f(this,n),(t=e.call(this)).observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return p(n,[{key:u.a,value:function(){return new c(this)}},{key:"lift",value:function(t){var e=new d(this,this);return e.operator=t,e}},{key:"next",value:function(t){if(this.closed)throw new s.a;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)}},{key:"error",value:function(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0}},{key:"complete",value:function(){if(this.closed)throw new s.a;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0}},{key:"unsubscribe",value:function(){this.isStopped=!0,this.closed=!0,this.observers=null}},{key:"_trySubscribe",value:function(t){if(this.closed)throw new s.a;return h(w(n.prototype),"_trySubscribe",this).call(this,t)}},{key:"_subscribe",value:function(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}},{key:"asObservable",value:function(){var t=new r.a;return t.source=this,t}}]),n}(r.a);return t.create=function(t,e){return new d(t,e)},t}(),d=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this)).destination=t,i.source=r,i}return p(n,[{key:"next",value:function(t){var e=this.destination;e&&e.next&&e.next(t)}},{key:"error",value:function(t){var e=this.destination;e&&e.error&&this.destination.error(t)}},{key:"complete",value:function(){var t=this.destination;t&&t.complete&&this.destination.complete()}},{key:"_subscribe",value:function(t){return this.source?this.source.subscribe(t):o.a.EMPTY}}]),n}(l)},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Y7HM:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("DH7j");function i(t){return!Object(r.a)(t)&&t-parseFloat(t)+1>=0}},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this)).subject=t,i.subscriber=r,i.closed=!1,i}return p(n,[{key:"unsubscribe",value:function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}}}]),n}(n("quSY").a)},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},fXoL:function(t,n,r){"use strict";r.d(n,"a",function(){return an}),r.d(n,"b",function(){return lu}),r.d(n,"c",function(){return ou}),r.d(n,"d",function(){return ru}),r.d(n,"e",function(){return iu}),r.d(n,"f",function(){return nc}),r.d(n,"g",function(){return Qu}),r.d(n,"h",function(){return ha}),r.d(n,"i",function(){return wu}),r.d(n,"j",function(){return Ds}),r.d(n,"k",function(){return du}),r.d(n,"l",function(){return Vs}),r.d(n,"m",function(){return _r}),r.d(n,"n",function(){return La}),r.d(n,"o",function(){return io}),r.d(n,"p",function(){return Tn}),r.d(n,"q",function(){return B}),r.d(n,"r",function(){return sn}),r.d(n,"s",function(){return bo}),r.d(n,"t",function(){return ia}),r.d(n,"u",function(){return sa}),r.d(n,"v",function(){return fu}),r.d(n,"w",function(){return wa}),r.d(n,"x",function(){return Ku}),r.d(n,"y",function(){return ba}),r.d(n,"z",function(){return qu}),r.d(n,"A",function(){return Cu}),r.d(n,"B",function(){return In}),r.d(n,"C",function(){return cu}),r.d(n,"D",function(){return uu}),r.d(n,"E",function(){return Va}),r.d(n,"F",function(){return Bs}),r.d(n,"G",function(){return qs}),r.d(n,"H",function(){return Er}),r.d(n,"I",function(){return zs}),r.d(n,"J",function(){return pr}),r.d(n,"K",function(){return xn}),r.d(n,"L",function(){return Zu}),r.d(n,"M",function(){return ga}),r.d(n,"N",function(){return ju}),r.d(n,"O",function(){return un}),r.d(n,"P",function(){return Qs}),r.d(n,"Q",function(){return Ws}),r.d(n,"R",function(){return Ea}),r.d(n,"S",function(){return G}),r.d(n,"T",function(){return Bu}),r.d(n,"U",function(){return Vu}),r.d(n,"V",function(){return O}),r.d(n,"W",function(){return En}),r.d(n,"X",function(){return Fu}),r.d(n,"Y",function(){return tc}),r.d(n,"Z",function(){return Nu}),r.d(n,"ab",function(){return hu}),r.d(n,"bb",function(){return so}),r.d(n,"cb",function(){return Es}),r.d(n,"db",function(){return fr}),r.d(n,"eb",function(){return Yn}),r.d(n,"fb",function(){return Fn}),r.d(n,"gb",function(){return Un}),r.d(n,"hb",function(){return zn}),r.d(n,"ib",function(){return Bn}),r.d(n,"jb",function(){return qn}),r.d(n,"kb",function(){return Hn}),r.d(n,"lb",function(){return _s}),r.d(n,"mb",function(){return $u}),r.d(n,"nb",function(){return bs}),r.d(n,"ob",function(){return ws}),r.d(n,"pb",function(){return Vn}),r.d(n,"qb",function(){return J}),r.d(n,"rb",function(){return xo}),r.d(n,"sb",function(){return Wo}),r.d(n,"tb",function(){return Ho}),r.d(n,"ub",function(){return zo}),r.d(n,"vb",function(){return ms}),r.d(n,"wb",function(){return Rt}),r.d(n,"xb",function(){return k}),r.d(n,"yb",function(){return Ln}),r.d(n,"zb",function(){return ko}),r.d(n,"Ab",function(){return xt}),r.d(n,"Bb",function(){return Ps}),r.d(n,"Cb",function(){return ci}),r.d(n,"Db",function(){return Po}),r.d(n,"Eb",function(){return os}),r.d(n,"Fb",function(){return Za}),r.d(n,"Gb",function(){return ct}),r.d(n,"Hb",function(){return yt}),r.d(n,"Ib",function(){return P}),r.d(n,"Jb",function(){return N}),r.d(n,"Kb",function(){return dt}),r.d(n,"Lb",function(){return gt}),r.d(n,"Mb",function(){return Mo}),r.d(n,"Nb",function(){return qo}),r.d(n,"Ob",function(){return Uo}),r.d(n,"Pb",function(){return Vo}),r.d(n,"Qb",function(){return Bo}),r.d(n,"Rb",function(){return nn}),r.d(n,"Sb",function(){return ps}),r.d(n,"Tb",function(){return kn}),r.d(n,"Ub",function(){return rn}),r.d(n,"Vb",function(){return nu}),r.d(n,"Wb",function(){return Qo}),r.d(n,"Xb",function(){return Ja}),r.d(n,"Yb",function(){return Yo}),r.d(n,"Zb",function(){return Jo}),r.d(n,"ac",function(){return Zo}),r.d(n,"bc",function(){return Lo}),r.d(n,"cc",function(){return $o}),r.d(n,"dc",function(){return ts}),r.d(n,"ec",function(){return Ya}),r.d(n,"fc",function(){return Do}),r.d(n,"gc",function(){return Jt}),r.d(n,"hc",function(){return vr}),r.d(n,"ic",function(){return pt}),r.d(n,"jc",function(){return is}),r.d(n,"kc",function(){return Ro}),r.d(n,"lc",function(){return hs}),r.d(n,"mc",function(){return fs}),r.d(n,"nc",function(){return ds}),r.d(n,"oc",function(){return Xa});var o=r("XNiG"),a=r("quSY"),u=r("HDdC"),d=r("VRyK"),y=r("w1tV");function m(t){for(var e in t)if(t[e]===m)return e;throw Error("Could not find renamed property on target object.")}function b(t,e){for(var n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function k(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(k).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return"".concat(t.overriddenName);if(t.name)return"".concat(t.name);var e=t.toString();if(null==e)return""+e;var n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function E(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}var C=m({__forward_ref__:m});function O(t){return t.__forward_ref__=O,t.toString=function(){return k(this())},t}function S(t){return T(t)?t():t}function T(t){return"function"==typeof t&&t.hasOwnProperty(C)&&t.__forward_ref__===O}var I=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this,function(t,e){return"".concat(t?"NG0".concat(t,": "):"").concat(e)}(t,r))).code=t,i}return n}(c(Error));function x(t){return"string"==typeof t?t:null==t?"":String(t)}function A(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():x(t)}function j(t,e){var n=e?" in ".concat(e):"";throw new I("201","No provider for ".concat(A(t)," found").concat(n))}function P(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function N(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function R(t){return D(t,F)||D(t,U)}function D(t,e){return t.hasOwnProperty(e)?t[e]:null}function M(t){return t&&(t.hasOwnProperty(V)||t.hasOwnProperty(q))?t[V]:null}var L,F=m({"\u0275prov":m}),V=m({"\u0275inj":m}),U=m({ngInjectableDef:m}),q=m({ngInjectorDef:m}),B=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function H(t){var e=L;return L=t,e}function z(t,e,n){var r=R(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&B.Optional?null:void 0!==e?e:void j(k(t),"Injector")}function W(t){return{toString:t}.toString()}var Q=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),G=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({}),K="undefined"!=typeof globalThis&&globalThis,Y="undefined"!=typeof window&&window,X="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Z="undefined"!=typeof global&&global,J=K||Z||Y||X,$={},tt=[],et=m({"\u0275cmp":m}),nt=m({"\u0275dir":m}),rt=m({"\u0275pipe":m}),it=m({"\u0275mod":m}),ot=m({"\u0275loc":m}),st=m({"\u0275fac":m}),at=m({__NG_ELEMENT_ID__:m}),ut=0;function ct(t){return W(function(){var e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Q.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||tt,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||G.Emulated,id:"c",styles:t.styles||tt,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=ut++,n.inputs=vt(t.inputs,e),n.outputs=vt(t.outputs),i&&i.forEach(function(t){return t(n)}),n.directiveDefs=r?function(){return("function"==typeof r?r():r).map(lt)}:null,n.pipeDefs=o?function(){return("function"==typeof o?o():o).map(ht)}:null,n})}function lt(t){return mt(t)||function(t){return t[nt]||null}(t)}function ht(t){return function(t){return t[rt]||null}(t)}var ft={};function dt(t){var e={type:t.type,bootstrap:t.bootstrap||tt,declarations:t.declarations||tt,imports:t.imports||tt,exports:t.exports||tt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&W(function(){ft[t.id]=t.type}),e}function pt(t,e){return W(function(){var n=_t(t,!0);n.declarations=e.declarations||tt,n.imports=e.imports||tt,n.exports=e.exports||tt})}function vt(t,e){if(null==t)return $;var n={};for(var r in t)if(t.hasOwnProperty(r)){var i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}var yt=ct;function gt(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function mt(t){return t[et]||null}function _t(t,e){var n=t[it]||null;if(!n&&!0===e)throw new Error("Type ".concat(k(t)," does not have '\u0275mod' property."));return n}function bt(t){return Array.isArray(t)&&"object"==typeof t[1]}function wt(t){return Array.isArray(t)&&!0===t[1]}function kt(t){return 0!=(8&t.flags)}function Et(t){return 2==(2&t.flags)}function Ct(t){return 1==(1&t.flags)}function Ot(t){return null!==t.template}function St(t,e){return t.hasOwnProperty(st)?t[st]:null}var Tt,It=function(){function t(e,n,r){f(this,t),this.previousValue=e,this.currentValue=n,this.firstChange=r}return p(t,[{key:"isFirstChange",value:function(){return this.firstChange}}]),t}();function xt(){return At}function At(t){return t.type.prototype.ngOnChanges&&(t.setInput=Pt),jt}function jt(){var t=Nt(this),e=null==t?void 0:t.current;if(e){var n=t.previous;if(n===$)t.previous=e;else for(var r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Pt(t,e,n,r){var i=Nt(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:$,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new It(u&&u.currentValue,e,s===$),t[r]=e}function Nt(t){return t.__ngSimpleChanges__||null}function Rt(t){Tt=t}function Dt(t){return!!t.listen}xt.ngInherit=!0;var Mt={createRenderer:function(t,e){return void 0!==Tt?Tt:"undefined"!=typeof document?document:void 0}};function Lt(t){for(;Array.isArray(t);)t=t[0];return t}function Ft(t,e){return Lt(e[t])}function Vt(t,e){return Lt(e[t.index])}function Ut(t,e){return t.data[e]}function qt(t,e){var n=e[t];return bt(n)?n:n[0]}function Bt(t){var e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Ht(t){return 4==(4&t[2])}function zt(t){return 128==(128&t[2])}function Wt(t,e){return null==e?null:t[e]}function Qt(t){t[18]=0}function Gt(t,e){t[5]+=e;for(var n=t,r=t[3];null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}var Kt={lFrame:pe(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Yt(){return Kt.bindingsEnabled}function Xt(){return Kt.lFrame.lView}function Zt(){return Kt.lFrame.tView}function Jt(t){Kt.lFrame.contextLView=t}function $t(){for(var t=te();null!==t&&64===t.type;)t=t.parent;return t}function te(){return Kt.lFrame.currentTNode}function ee(t,e){var n=Kt.lFrame;n.currentTNode=t,n.isParent=e}function ne(){return Kt.lFrame.isParent}function re(){Kt.lFrame.isParent=!1}function ie(){return Kt.isInCheckNoChangesMode}function oe(t){Kt.isInCheckNoChangesMode=t}function se(){return Kt.lFrame.bindingIndex++}function ae(t){Kt.lFrame.currentDirectiveIndex=t}function ue(){return Kt.lFrame.currentQueryIndex}function ce(t){Kt.lFrame.currentQueryIndex=t}function le(t){var e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function he(t,e,n){if(n&B.SkipSelf){for(var r=e,i=t;!(null!==(r=r.parent)||n&B.Host||(r=le(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}var o=Kt.lFrame=de();return o.currentTNode=e,o.lView=t,!0}function fe(t){var e=de(),n=t[1];Kt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function de(){var t=Kt.lFrame,e=null===t?null:t.child;return null===e?pe(t):e}function pe(t){var e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function ve(){var t=Kt.lFrame;return Kt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var ye=ve;function ge(){var t=ve();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function me(){return Kt.lFrame.selectedIndex}function _e(t){Kt.lFrame.selectedIndex=t}function be(){var t=Kt.lFrame;return Ut(t.tView,t.selectedIndex)}function we(t,e){for(var n=e.directiveStart,r=e.directiveEnd;n<r;n++){var i=t.data[n].type.prototype,o=i.ngAfterContentInit,s=i.ngAfterContentChecked,a=i.ngAfterViewInit,u=i.ngAfterViewChecked,c=i.ngOnDestroy;o&&(t.contentHooks||(t.contentHooks=[])).push(-n,o),s&&((t.contentHooks||(t.contentHooks=[])).push(n,s),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,s)),a&&(t.viewHooks||(t.viewHooks=[])).push(-n,a),u&&((t.viewHooks||(t.viewHooks=[])).push(n,u),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,u)),null!=c&&(t.destroyHooks||(t.destroyHooks=[])).push(n,c)}}function ke(t,e,n){Oe(t,e,3,n)}function Ee(t,e,n,r){(3&t[2])===n&&Oe(t,e,n,r)}function Ce(t,e){var n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Oe(t,e,n,r){for(var i=null!=r?r:-1,o=e.length-1,s=0,a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(Se(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function Se(t,e,n,r){var i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}var Te=function t(e,n,r){f(this,t),this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r};function Ie(t,e,n){for(var r=Dt(t),i=0;i<n.length;){var o=n[i];if("number"==typeof o){if(0!==o)break;i++;var s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{var c=o,l=n[++i];Ae(c)?r&&t.setProperty(e,c,l):r?t.setAttribute(e,c,l):e.setAttribute(c,l),i++}}return i}function xe(t){return 3===t||4===t||6===t}function Ae(t){return 64===t.charCodeAt(0)}function je(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else for(var n=-1,r=0;r<e.length;r++){var i=e[r];"number"==typeof i?n=i:0===n||Pe(t,n,i,null,-1===n||2===n?e[++r]:null)}return t}function Pe(t,e,n,r,i){var o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){var a=t[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<t.length;){var u=t[o];if("number"==typeof u)break;if(u===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Ne(t){return-1!==t}function Re(t){return 32767&t}function De(t,e){for(var n=t>>16,r=e;n>0;)r=r[15],n--;return r}var Me=!0;function Le(t){var e=Me;return Me=t,e}var Fe=0;function Ve(t,e){var n=qe(t,e);if(-1!==n)return n;var r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Ue(r.data,t),Ue(e,null),Ue(r.blueprint,null));var i=Be(t,e),o=t.injectorIndex;if(Ne(i))for(var s=Re(i),a=De(i,e),u=a[1].data,c=0;c<8;c++)e[o+c]=a[s+c]|u[s+c];return e[o+8]=i,o}function Ue(t,e){t.push(0,0,0,0,0,0,0,0,e)}function qe(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Be(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;for(var n=0,r=null,i=e;null!==i;){var o=i[1],s=o.type;if(null===(r=2===s?o.declTNode:1===s?i[6]:null))return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function He(t,e,n){!function(t,e,n){var r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(at)&&(r=n[at]),null==r&&(r=n[at]=Fe++);var i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function ze(t,e,n){if(n&B.Optional)return t;j(e,"NodeInjector")}function We(t,e,n,r){if(n&B.Optional&&void 0===r&&(r=null),0==(n&(B.Self|B.Host))){var i=t[9],o=H(void 0);try{return i?i.get(e,r,n&B.Optional):z(e,r,n&B.Optional)}finally{H(o)}}return ze(r,e,n)}function Qe(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:B.Default,i=arguments.length>4?arguments[4]:void 0;if(null!==t){var o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;var e=t.hasOwnProperty(at)?t[at]:void 0;return"number"==typeof e?e>=0?255&e:Ke:e}(n);if("function"==typeof o){if(!he(e,t,r))return r&B.Host?ze(i,n,r):We(e,n,r,i);try{var s=o();if(null!=s||r&B.Optional)return s;j(n)}finally{ye()}}else if("number"==typeof o){var a=null,u=qe(t,e),c=-1,l=r&B.Host?e[16][6]:null;for((-1===u||r&B.SkipSelf)&&(-1!==(c=-1===u?Be(t,e):e[u+8])&&$e(r,!1)?(a=e[1],u=Re(c),e=De(c,e)):u=-1);-1!==u;){var h=e[1];if(Je(o,u,h.data)){var f=Ye(u,e,n,a,r,l);if(f!==Ge)return f}-1!==(c=e[u+8])&&$e(r,e[1].data[u+8]===l)&&Je(o,u,e)?(a=h,u=Re(c),e=De(c,e)):u=-1}}}return We(e,n,r,i)}var Ge={};function Ke(){return new tn($t(),Xt())}function Ye(t,e,n,r,i,o){var s=e[1],a=s.data[t+8],u=Xe(a,s,n,null==r?Et(a)&&Me:r!=s&&0!=(3&a.type),i&B.Host&&o===a);return null!==u?Ze(e,s,u,a):Ge}function Xe(t,e,n,r,i){for(var o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd,h=r?a:a+c;h<l;h++){var f=s[h];if(h<u&&n===f||h>=u&&f.type===n)return h}if(i){var d=s[u];if(d&&Ot(d)&&d.type===n)return u}return null}function Ze(t,e,n,r){var i=t[n],o=e.data;if(i instanceof Te){var s=i;s.resolving&&function(t,e){throw new I("200","Circular dependency in DI detected for ".concat(t))}(A(o[n]));var a=Le(s.canSeeViewProviders);s.resolving=!0;var u=s.injectImpl?H(s.injectImpl):null;he(t,r,B.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){var r=e.type.prototype,i=r.ngOnChanges,o=r.ngOnInit,s=r.ngDoCheck;if(i){var a=At(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,a),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,a)}o&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,o),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s))}(n,o[n],e)}finally{null!==u&&H(u),Le(a),s.resolving=!1,ye()}}return i}function Je(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function $e(t,e){return!(t&B.Self||t&B.Host&&e)}var tn=function(){function t(e,n){f(this,t),this._tNode=e,this._lView=n}return p(t,[{key:"get",value:function(t,e){return Qe(this._tNode,this._lView,t,void 0,e)}}]),t}();function en(t){var e=t;if(T(t))return function(){var t=en(S(e));return t?t():null};var n=St(e);if(null===n){var r=M(e);n=r&&r.factory}return n||null}function nn(t){return W(function(){for(var e=t.prototype.constructor,n=e[st]||en(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;i&&i!==r;){var o=i[st]||en(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return function(t){return new t}})}function rn(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;var n=t.attrs;if(n)for(var r=n.length,i=0;i<r;){var o=n[i];if(xe(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(o===e)return n[i+1];i+=2}}return null}($t(),t)}function on(t,e,n){return W(function(){var r=function(t){return function(){if(t){var e=t.apply(void 0,arguments);for(var n in e)this[n]=e[n]}}}(e);function i(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(this instanceof i)return r.apply(this,e),this;var o=l(i,e);return s.annotation=o,s;function s(t,e,n){for(var r=t.hasOwnProperty("__parameters__")?t.__parameters__:Object.defineProperty(t,"__parameters__",{value:[]}).__parameters__;r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(o),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var sn=function(){function t(e,n){f(this,t),this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=P({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}return p(t,[{key:"toString",value:function(){return"InjectionToken ".concat(this._desc)}}]),t}(),an=new sn("AnalyzeForEntryComponents"),un=Function;function cn(t,e){void 0===e&&(e=t);for(var n=0;n<t.length;n++){var r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),cn(r,e)):e!==t&&e.push(r)}return e}function ln(t,e){t.forEach(function(t){return Array.isArray(t)?ln(t,e):e(t)})}function hn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function fn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function dn(t,e){for(var n=[],r=0;r<t;r++)n.push(e);return n}function pn(t,e){var n=vn(t,e);if(n>=0)return t[1|n]}function vn(t,e){return function(t,e,n){for(var r=0,i=t.length>>1;i!==r;){var o=r+(i-r>>1),s=t[o<<1];if(e===s)return o<<1;s>e?i=o:r=o+1}return~(i<<1)}(t,e)}var yn,gn={},mn=/\n/gm,_n=m({provide:String,useValue:m});function bn(t){var e=yn;return yn=t,e}function wn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:B.Default;if(void 0===yn)throw new Error("inject() must be called from an injection context");return null===yn?z(t,void 0,e):yn.get(t,e&B.Optional?null:void 0,e)}function kn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:B.Default;return(L||wn)(S(t),e)}var En=kn;function Cn(t){for(var e=[],n=0;n<t.length;n++){var r=S(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");for(var i=void 0,o=B.Default,s=0;s<r.length;s++){var a=r[s],u=a.__NG_DI_FLAG__;"number"==typeof u?-1===u?i=a.token:o|=u:i=a}e.push(kn(i,o))}else e.push(kn(r))}return e}function On(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}var Sn,Tn=On(on("Inject",function(t){return{token:t}}),-1),In=On(on("Optional"),8),xn=On(on("SkipSelf"),4);function An(t){var e;return(null===(e=function(){if(void 0===Sn&&(Sn=null,J.trustedTypes))try{Sn=J.trustedTypes.createPolicy("angular",{createHTML:function(t){return t},createScript:function(t){return t},createScriptURL:function(t){return t}})}catch(e){}return Sn}())||void 0===e?void 0:e.createHTML(t))||t}var jn=function(){function t(e){f(this,t),this.changingThisBreaksApplicationSecurity=e}return p(t,[{key:"toString",value:function(){return"SafeValue must use [property]=binding: ".concat(this.changingThisBreaksApplicationSecurity," (see https://g.co/ng/security#xss)")}}]),t}(),Pn=function(t){v(n,t);var e=g(n);function n(){return f(this,n),e.apply(this,arguments)}return p(n,[{key:"getTypeName",value:function(){return"HTML"}}]),n}(jn),Nn=function(t){v(n,t);var e=g(n);function n(){return f(this,n),e.apply(this,arguments)}return p(n,[{key:"getTypeName",value:function(){return"Style"}}]),n}(jn),Rn=function(t){v(n,t);var e=g(n);function n(){return f(this,n),e.apply(this,arguments)}return p(n,[{key:"getTypeName",value:function(){return"Script"}}]),n}(jn),Dn=function(t){v(n,t);var e=g(n);function n(){return f(this,n),e.apply(this,arguments)}return p(n,[{key:"getTypeName",value:function(){return"URL"}}]),n}(jn),Mn=function(t){v(n,t);var e=g(n);function n(){return f(this,n),e.apply(this,arguments)}return p(n,[{key:"getTypeName",value:function(){return"ResourceURL"}}]),n}(jn);function Ln(t){return t instanceof jn?t.changingThisBreaksApplicationSecurity:t}function Fn(t,e){var n=Vn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error("Required a safe ".concat(e,", got a ").concat(n," (see https://g.co/ng/security#xss)"))}return n===e}function Vn(t){return t instanceof jn&&t.getTypeName()||null}function Un(t){return new Pn(t)}function qn(t){return new Nn(t)}function Bn(t){return new Rn(t)}function Hn(t){return new Dn(t)}function zn(t){return new Mn(t)}var Wn=function(){function t(e){f(this,t),this.inertDocumentHelper=e}return p(t,[{key:"getInertBodyElement",value:function(t){t="<body><remove></remove>"+t;try{var e=(new window.DOMParser).parseFromString(An(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(n){return null}}}]),t}(),Qn=function(){function t(e){if(f(this,t),this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){var n=this.inertDocument.createElement("html");this.inertDocument.appendChild(n);var r=this.inertDocument.createElement("body");n.appendChild(r)}}return p(t,[{key:"getInertBodyElement",value:function(t){var e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=An(t),e;var n=this.inertDocument.createElement("body");return n.innerHTML=An(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}},{key:"stripCustomNsAttrs",value:function(t){for(var e=t.attributes,n=e.length-1;0<n;n--){var r=e.item(n).name;"xmlns:ns1"!==r&&0!==r.indexOf("ns1:")||t.removeAttribute(r)}for(var i=t.firstChild;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}]),t}(),Gn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Kn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Yn(t){return(t=String(t)).match(Gn)||t.match(Kn)?t:"unsafe:"+t}function Xn(t){var e,n={},r=s(t.split(","));try{for(r.s();!(e=r.n()).done;){n[e.value]=!0}}catch(i){r.e(i)}finally{r.f()}return n}function Zn(){for(var t={},e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var s=o[i];for(var a in s)s.hasOwnProperty(a)&&(t[a]=!0)}return t}var Jn,$n=Xn("area,br,col,hr,img,wbr"),tr=Xn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),er=Xn("rp,rt"),nr=Zn(er,tr),rr=Zn($n,Zn(tr,Xn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Zn(er,Xn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),nr),ir=Xn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),or=Xn("srcset"),sr=Zn(ir,or,Xn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Xn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ar=Xn("script,style,template"),ur=function(){function t(){f(this,t),this.sanitizedSomething=!1,this.buf=[]}return p(t,[{key:"sanitizeChildren",value:function(t){for(var e=t.firstChild,n=!0;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);var r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}},{key:"startElement",value:function(t){var e=t.nodeName.toLowerCase();if(!rr.hasOwnProperty(e))return this.sanitizedSomething=!0,!ar.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);for(var n,r=t.attributes,i=0;i<r.length;i++){var o=r.item(i),s=o.name,a=s.toLowerCase();if(sr.hasOwnProperty(a)){var u=o.value;ir[a]&&(u=Yn(u)),or[a]&&(n=u,u=(n=String(n)).split(",").map(function(t){return Yn(t.trim())}).join(", ")),this.buf.push(" ",s,'="',hr(u),'"')}else this.sanitizedSomething=!0}return this.buf.push(">"),!0}},{key:"endElement",value:function(t){var e=t.nodeName.toLowerCase();rr.hasOwnProperty(e)&&!$n.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}},{key:"chars",value:function(t){this.buf.push(hr(t))}},{key:"checkClobberedElement",value:function(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: ".concat(t.outerHTML));return e}}]),t}(),cr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,lr=/([^\#-~ |!])/g;function hr(t){return t.replace(/&/g,"&amp;").replace(cr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(lr,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function fr(t,e){var n=null;try{Jn=Jn||function(t){var e=new Qn(t);return function(){try{return!!(new window.DOMParser).parseFromString(An(""),"text/html")}catch(t){return!1}}()?new Wn(e):e}(t);var r=e?String(e):"";n=Jn.getInertBodyElement(r);var i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Jn.getInertBodyElement(r)}while(r!==o);return An((new ur).sanitizeChildren(dr(n)||n))}finally{if(n)for(var s=dr(n)||n;s.firstChild;)s.removeChild(s.firstChild)}}function dr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var pr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function vr(t){var e,n=(e=Xt())&&e[12];return n?n.sanitize(pr.URL,t)||"":Fn(t,"URL")?Ln(t):Yn(x(t))}function yr(t){return t.ngDebugContext}function gr(t){return t.ngOriginalError}function mr(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];t.error.apply(t,n)}var _r=function(){function t(){f(this,t),this._console=console}return p(t,[{key:"handleError",value:function(t){var e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||mr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}},{key:"_findContext",value:function(t){return t?yr(t)?yr(t):this._findContext(gr(t)):null}},{key:"_findOriginalError",value:function(t){for(var e=gr(t);e&&gr(e);)e=gr(e);return e}}]),t}();function br(t,e){t.__ngContext__=e}var wr=("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(J);function kr(t){return t instanceof Function?t():t}var Er=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function Cr(t,e){return(void 0)(t,e)}function Or(t){var e=t[3];return wt(e)?e[3]:e}function Sr(t){return Ir(t[13])}function Tr(t){return Ir(t[4])}function Ir(t){for(;null!==t&&!wt(t);)t=t[4];return t}function xr(t,e,n,r,i){if(null!=r){var o,s=!1;wt(r)?o=r:bt(r)&&(s=!0,r=r[0]);var a=Lt(r);0===t&&null!==n?null==i?Lr(e,n,a):Mr(e,n,a,i||null,!0):1===t&&null!==n?Mr(e,n,a,i||null,!0):2===t?function(t,e,n){var r=Vr(t,e);r&&function(t,e,n,r){Dt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){var o=n[7];o!==Lt(n)&&xr(e,t,r,o,i);for(var s=10;s<n.length;s++){var a=n[s];Gr(a[1],a,t,e,r,o)}}(e,t,o,n,i)}}function Ar(t,e,n){return Dt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function jr(t,e){var n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Gt(i,-1)),n.splice(r,1)}function Pr(t,e){if(!(t.length<=10)){var n,r=10+e,i=t[r];if(i){var o=i[17];null!==o&&o!==t&&jr(o,i),e>0&&(t[r-1][4]=i[4]);var s=fn(t,10+e);Gr(i[1],n=i,n[11],2,null,null),n[0]=null,n[6]=null;var a=s[19];null!==a&&a.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}}function Nr(t,e){if(!(256&e[2])){var n=e[11];Dt(n)&&n.destroyNode&&Gr(t,e,n,3,null,null),function(t){var e=t[13];if(!e)return Rr(t[1],t);for(;e;){var n=null;if(bt(e))n=e[13];else{var r=e[10];r&&(n=r)}if(!n){for(;e&&!e[4]&&e!==t;)bt(e)&&Rr(e[1],e),e=e[3];null===e&&(e=t),bt(e)&&Rr(e[1],e),n=e&&e[4]}e=n}}(e)}}function Rr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){var n;if(null!=t&&null!=(n=t.destroyHooks))for(var r=0;r<n.length;r+=2){var i=e[n[r]];if(!(i instanceof Te)){var o=n[r+1];if(Array.isArray(o))for(var s=0;s<o.length;s+=2)o[s+1].call(i[o[s]]);else o.call(i)}}}(t,e),function(t,e){var n=t.cleanup,r=e[7],i=-1;if(null!==n)for(var o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){var s=n[o+1],a="function"==typeof s?s(e):Lt(e[s]),u=r[i=n[o+2]],c=n[o+3];"boolean"==typeof c?a.removeEventListener(n[o],u,c):c>=0?r[i=c]():r[i=-c].unsubscribe(),o+=2}else{var l=r[i=n[o+1]];n[o].call(l)}if(null!==r){for(var h=i+1;h<r.length;h++)(0,r[h])();e[7]=null}}(t,e),1===e[1].type&&Dt(e[11])&&e[11].destroy();var n=e[17];if(null!==n&&wt(e[3])){n!==e[3]&&jr(n,e);var r=e[19];null!==r&&r.detachView(t)}}}function Dr(t,e,n){return function(t,e,n){for(var r=e;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){var i=t.data[r.directiveStart].encapsulation;if(i===G.None||i===G.Emulated)return null}return Vt(r,n)}(t,e.parent,n)}function Mr(t,e,n,r,i){Dt(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Lr(t,e,n){Dt(t)?t.appendChild(e,n):e.appendChild(n)}function Fr(t,e,n,r,i){null!==r?Mr(t,e,n,r,i):Lr(t,e,n)}function Vr(t,e){return Dt(t)?t.parentNode(e):e.parentNode}function Ur(t,e,n){return qr(t,e,n)}var qr=function(t,e,n){return 40&t.type?Vt(t,n):null};function Br(t,e,n,r){var i=Dr(t,r,e),o=e[11],s=Ur(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(var a=0;a<n.length;a++)Fr(o,i,n[a],s,!1);else Fr(o,i,n,s,!1)}function Hr(t,e){if(null!==e){var n=e.type;if(3&n)return Vt(e,t);if(4&n)return Wr(-1,t[e.index]);if(8&n){var r=e.child;if(null!==r)return Hr(t,r);var i=t[e.index];return wt(i)?Wr(-1,i):Lt(i)}if(32&n)return Cr(e,t)()||Lt(t[e.index]);var o=zr(t,e);return null!==o?Array.isArray(o)?o[0]:Hr(Or(t[16]),o):Hr(t,e.next)}return null}function zr(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Wr(t,e){var n=10+t+1;if(n<e.length){var r=e[n],i=r[1].firstChild;if(null!==i)return Hr(r,i)}return e[7]}function Qr(t,e,n,r,i,o,s){for(;null!=n;){var a=r[n.index],u=n.type;if(s&&0===e&&(a&&br(Lt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Qr(t,e,n.child,r,i,o,!1),xr(e,t,i,a,o);else if(32&u){for(var c=Cr(n,r),l=void 0;l=c();)xr(e,t,i,l,o);xr(e,t,i,a,o)}else 16&u?Kr(t,e,r,n,i,o):xr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Gr(t,e,n,r,i,o){Qr(n,r,t.firstChild,e,i,o,!1)}function Kr(t,e,n,r,i,o){var s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(var u=0;u<a.length;u++)xr(e,t,i,a[u],o);else Qr(t,e,a,s[3],i,o,!0)}function Yr(t,e,n){Dt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Xr(t,e,n){Dt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Zr(t,e,n){for(var r=t.length;;){var i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){var o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Jr(t,e,n){for(var r=0;r<t.length;){var i=t[r++];if(n&&"class"===i){if(-1!==Zr((i=t[r]).toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function $r(t){return 4===t.type&&"ng-template"!==t.value}function ti(t,e,n){return e===(4!==t.type||n?t.value:"ng-template")}function ei(t,e,n){for(var r=4,i=t.attrs||[],o=function(t){for(var e=0;e<t.length;e++)if(xe(t[e]))return e;return t.length}(i),s=!1,a=0;a<e.length;a++){var u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!ti(t,u,n)||""===u&&1===e.length){if(ni(r))return!1;s=!0}}else{var c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Jr(t.attrs,c,n)){if(ni(r))return!1;s=!0}continue}var l=ri(8&r?"class":u,i,$r(t),n);if(-1===l){if(ni(r))return!1;s=!0;continue}if(""!==c){var h;h=l>o?"":i[l+1].toLowerCase();var f=8&r?h:null;if(f&&-1!==Zr(f,c,0)||2&r&&c!==h){if(ni(r))return!1;s=!0}}}}else{if(!s&&!ni(r)&&!ni(u))return!1;if(s&&ni(u))continue;s=!1,r=u|1&r}}return ni(r)||s}function ni(t){return 0==(1&t)}function ri(t,e,n,r){if(null===e)return-1;var i=0;if(r||!n){for(var o=!1;i<e.length;){var s=e[i];if(s===t)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){for(var a=e[++i];"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function(t,e){var n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){var r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function ii(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=0;r<e.length;r++)if(ei(t,e[r],n))return!0;return!1}function oi(t,e){t:for(var n=0;n<e.length;n++){var r=e[n];if(t.length===r.length){for(var i=0;i<t.length;i++)if(t[i]!==r[i])continue t;return!0}}return!1}function si(t,e){return t?":not("+e.trim()+")":e}function ai(t){for(var e=t[0],n=1,r=2,i="",o=!1;n<t.length;){var s=t[n];if("string"==typeof s)if(2&r){var a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||ni(s)||(e+=si(o,i),i=""),r=s,o=o||!ni(r);n++}return""!==i&&(e+=si(o,i)),e}var ui={};function ci(t){li(Zt(),Xt(),me()+t,ie())}function li(t,e,n,r){if(!r)if(3==(3&e[2])){var i=t.preOrderCheckHooks;null!==i&&ke(e,i,n)}else{var o=t.preOrderHooks;null!==o&&Ee(e,o,0,n)}_e(n)}function hi(t,e){return t<<17|e<<2}function fi(t){return t>>17&32767}function di(t){return 2|t}function pi(t){return(131068&t)>>2}function vi(t,e){return-131069&t|e<<2}function yi(t){return 1|t}function gi(t,e){var n=t.contentQueries;if(null!==n)for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1];if(-1!==o){var s=t.data[o];ce(i),s.contentQueries(2,e[o],o)}}}function mi(t,e,n,r,i,o,s,a,u,c){var l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Qt(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function _i(t,e,n,r,i){var o,s,a=t.data[e];if(null===a)a=function(t,e,n,r,i){var o=te(),s=ne(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),Kt.lFrame.inI18n&&(a.flags|=64);else if(64&a.type){a.type=n,a.value=r,a.attrs=i;var u=(o=Kt.lFrame,s=o.currentTNode,o.isParent?s:s.parent);a.injectorIndex=null===u?-1:u.injectorIndex}return ee(a,!0),a}function bi(t,e,n,r){if(0===n)return-1;for(var i=e.length,o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function wi(t,e,n){fe(e);try{var r=t.viewQuery;null!==r&&Xi(1,r,n);var i=t.template;null!==i&&Ci(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&gi(t,e),t.staticViewQueries&&Xi(2,t.viewQuery,n);var o=t.components;null!==o&&function(t,e){for(var n=0;n<e.length;n++)Wi(t,e[n])}(e,o)}catch(s){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),s}finally{e[2]&=-5,ge()}}function ki(t,e,n,r){var i=e[2];if(256!=(256&i)){fe(e);var o=ie();try{Qt(e),Kt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Ci(t,e,n,2,r);var s=3==(3&i);if(!o)if(s){var a=t.preOrderCheckHooks;null!==a&&ke(e,a,null)}else{var u=t.preOrderHooks;null!==u&&Ee(e,u,0,null),Ce(e,0)}if(function(t){for(var e=Sr(t);null!==e;e=Tr(e))if(e[2])for(var n=e[9],r=0;r<n.length;r++){var i=n[r],o=i[3];0==(1024&i[2])&&Gt(o,1),i[2]|=1024}}(e),function(t){for(var e=Sr(t);null!==e;e=Tr(e))for(var n=10;n<e.length;n++){var r=e[n],i=r[1];zt(r)&&ki(i,r,i.template,r[8])}}(e),null!==t.contentQueries&&gi(t,e),!o)if(s){var c=t.contentCheckHooks;null!==c&&ke(e,c)}else{var l=t.contentHooks;null!==l&&Ee(e,l,1),Ce(e,1)}!function(t,e){var n,r,i,o=t.hostBindingOpCodes;if(null!==o)try{for(var s=0;s<o.length;s++){var a=o[s];if(a<0)_e(~a);else{var u=a,c=o[++s],l=o[++s];n=c,r=u,i=void 0,(i=Kt.lFrame).bindingIndex=i.bindingRootIndex=n,ae(r),l(2,e[u])}}}finally{_e(-1)}}(t,e);var h=t.components;null!==h&&function(t,e){for(var n=0;n<e.length;n++)Hi(t,e[n])}(e,h);var f=t.viewQuery;if(null!==f&&Xi(2,f,r),!o)if(s){var d=t.viewCheckHooks;null!==d&&ke(e,d)}else{var p=t.viewHooks;null!==p&&Ee(e,p,2),Ce(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Gt(e[3],-1))}finally{ge()}}}function Ei(t,e,n,r){var i=e[10],o=!ie(),s=Ht(e);try{o&&!s&&i.begin&&i.begin(),s&&wi(t,e,r),ki(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function Ci(t,e,n,r,i){var o=me();try{_e(-1),2&r&&e.length>20&&li(t,e,20,ie()),n(r,i)}finally{_e(o)}}function Oi(t,e,n){Yt()&&(function(t,e,n,r){var i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Ve(n,e),br(r,e);for(var s=n.initialInputs,a=i;a<o;a++){var u=t.data[a],c=Ot(u);c&&Vi(e,n,u);var l=Ze(e,t,a,n);br(l,e),null!==s&&Ui(0,a-i,l,u,0,s),c&&(qt(n.index,e)[8]=l)}}(t,e,n,Vt(n,e)),128==(128&n.flags)&&function(t,e,n){var r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Kt.lFrame.currentDirectiveIndex;try{_e(o);for(var a=r;a<i;a++){var u=t.data[a],c=e[a];ae(a),null===u.hostBindings&&0===u.hostVars&&null===u.hostAttrs||Ri(u,c)}}finally{_e(-1),ae(s)}}(t,e,n))}function Si(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Vt,r=e.localNames;if(null!==r)for(var i=e.index+1,o=0;o<r.length;o+=2){var s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}function Ti(t){var e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Ii(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Ii(t,e,n,r,i,o,s,a,u,c){var l=20+r,h=l+i,f=function(t,e){for(var n=[],r=0;r<e;r++)n.push(r<t?null:ui);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function xi(t,e,n,r){var i=Ji(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&$i(t).push(r,i.length-1))}function Ai(t,e,n){for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function ji(t,e,n,r,i,o,s,a){var u,c,l=Vt(e,n),h=e.inputs;!a&&null!=h&&(u=h[r])?(eo(t,n,u,r,i),Et(e)&&function(t,e){var n=qt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(c=r)?"className":"for"===c?"htmlFor":"formaction"===c?"formAction":"innerHtml"===c?"innerHTML":"readonly"===c?"readOnly":"tabindex"===c?"tabIndex":c,i=null!=s?s(i,e.value||"",r):i,Dt(o)?o.setProperty(l,r,i):Ae(r)||(l.setProperty?l.setProperty(r,i):l[r]=i))}function Pi(t,e,n,r){var i=!1;if(Yt()){var o=function(t,e,n){var r=t.directiveRegistry,i=null;if(r)for(var o=0;o<r.length;o++){var s=r[o];ii(n,s.selectors,!1)&&(i||(i=[]),He(Ve(n,e),t,s.type),Ot(s)?(Di(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,Li(n,t.data.length,o.length);for(var a=0;a<o.length;a++){var u=o[a];u.providersResolver&&u.providersResolver(u)}for(var c=!1,l=!1,h=bi(t,e,o.length,null),f=0;f<o.length;f++){var d=o[f];n.mergedAttrs=je(n.mergedAttrs,d.hostAttrs),Fi(t,n,e,h,d),Mi(h,d,s),null!==d.contentQueries&&(n.flags|=8),null===d.hostBindings&&null===d.hostAttrs&&0===d.hostVars||(n.flags|=128);var p=d.type.prototype;!c&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),c=!0),l||!p.ngOnChanges&&!p.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),l=!0),h++}!function(t,e){for(var n=e.directiveEnd,r=t.data,i=e.attrs,o=[],s=null,a=null,u=e.directiveStart;u<n;u++){var c=r[u],l=c.inputs,h=null===i||$r(e)?null:qi(l,i);o.push(h),s=Ai(l,u,s),a=Ai(c.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e)for(var r=t.localNames=[],i=0;i<e.length;i+=2){var o=n[e[i+1]];if(null==o)throw new I("301","Export of name '".concat(e[i+1],"' not found!"));r.push(e[i],o)}}(n,r,s)}return n.mergedAttrs=je(n.mergedAttrs,n.attrs),i}function Ni(t,e,n,r,i,o){var s=o.hostBindings;if(s){var a=t.hostBindingOpCodes;null===a&&(a=t.hostBindingOpCodes=[]);var u=~e.index;(function(t){for(var e=t.length;e>0;){var n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(a)!=u&&a.push(u),a.push(r,i,s)}}function Ri(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Di(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Mi(t,e,n){if(n){if(e.exportAs)for(var r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Ot(e)&&(n[""]=t)}}function Li(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Fi(t,e,n,r,i){t.data[r]=i;var o=i.factory||(i.factory=St(i.type)),s=new Te(o,Ot(i),null);t.blueprint[r]=s,n[r]=s,Ni(t,e,0,r,bi(t,n,i.hostVars,ui),i)}function Vi(t,e,n){var r=Vt(e,t),i=Ti(n),o=t[10],s=Qi(t,mi(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Ui(t,e,n,r,i,o){var s=o[e];if(null!==s)for(var a=r.setInput,u=0;u<s.length;){var c=s[u++],l=s[u++],h=s[u++];null!==a?r.setInput(n,h,c,l):n[l]=h}}function qi(t,e){for(var n=null,r=0;r<e.length;){var i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Bi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Hi(t,e){var n=qt(e,t);if(zt(n)){var r=n[1];80&n[2]?ki(r,n,r.template,n[8]):n[5]>0&&zi(n)}}function zi(t){for(var e=Sr(t);null!==e;e=Tr(e))for(var n=10;n<e.length;n++){var r=e[n];if(1024&r[2]){var i=r[1];ki(i,r,i.template,r[8])}else r[5]>0&&zi(r)}var o=t[1].components;if(null!==o)for(var s=0;s<o.length;s++){var a=qt(o[s],t);zt(a)&&a[5]>0&&zi(a)}}function Wi(t,e){var n=qt(e,t),r=n[1];!function(t,e){for(var n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),wi(r,n,n[8])}function Qi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Gi(t){for(;t;){t[2]|=64;var e=Or(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Ki(t,e,n){var r=e[10];r.begin&&r.begin();try{ki(t,e,t.template,n)}catch(i){throw to(e,i),i}finally{r.end&&r.end()}}function Yi(t){!function(t){for(var e=0;e<t.components.length;e++){var n=t.components[e],r=Bt(n),i=r[1];Ei(i,r,i.template,n)}}(t[8])}function Xi(t,e,n){ce(0),e(t,n)}var Zi=Promise.resolve(null);function Ji(t){return t[7]||(t[7]=[])}function $i(t){return t.cleanup||(t.cleanup=[])}function to(t,e){var n=t[9],r=n?n.get(_r,null):null;r&&r.handleError(e)}function eo(t,e,n,r,i){for(var o=0;o<n.length;){var s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function no(t,e,n){var r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(var s=0;s<e.length;s++){var a=e[s];"number"==typeof a?o=a:1==o?i=E(i,a):2==o&&(r=E(r,a+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var ro,io=new sn("INJECTOR",-1),oo=function(){function t(){f(this,t)}return p(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gn;if(e===gn){var n=new Error("NullInjectorError: No provider for ".concat(k(t),"!"));throw n.name="NullInjectorError",n}return e}}]),t}(),so=new sn("Set Injector scope."),ao={},uo={},co=[];function lo(){return void 0===ro&&(ro=new oo),ro}function ho(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return new fo(t,n,e||lo(),r)}var fo=function(){function t(e,n,r){var i=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;f(this,t),this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;var s=[];n&&ln(n,function(t){return i.processProvider(t,e,n)}),ln([e],function(t){return i.processInjectorType(t,[],s)}),this.records.set(io,yo(void 0,this));var a=this.records.get(so);this.scope=null!=a?a.value:null,this.source=o||("object"==typeof e?null:k(e))}return p(t,[{key:"destroyed",get:function(){return this._destroyed}},{key:"destroy",value:function(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(function(t){return t.ngOnDestroy()})}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gn,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:B.Default;this.assertNotDestroyed();var r,i=bn(this);try{if(!(n&B.SkipSelf)){var o=this.records.get(t);if(void 0===o){var s=("function"==typeof(r=t)||"object"==typeof r&&r instanceof sn)&&R(t);o=s&&this.injectableDefInScope(s)?yo(po(t),ao):null,this.records.set(t,o)}if(null!=o)return this.hydrate(t,o)}return(n&B.Self?lo():this.parent).get(t,e=n&B.Optional&&e===gn?null:e)}catch(a){if("NullInjectorError"===a.name){if((a.ngTempTokenPath=a.ngTempTokenPath||[]).unshift(k(t)),i)throw a;return function(t,e,n,r){var i=t.ngTempTokenPath;throw e.__source&&i.unshift(e.__source),t.message=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;var i=k(e);if(Array.isArray(e))i=e.map(k).join(" -> ");else if("object"==typeof e){var o=[];for(var s in e)if(e.hasOwnProperty(s)){var a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):k(a)))}i="{".concat(o.join(", "),"}")}return"".concat(n).concat(r?"("+r+")":"","[").concat(i,"]: ").concat(t.replace(mn,"\n  "))}("\n"+t.message,i,"R3InjectorError",r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(a,t,0,this.source)}throw a}finally{bn(i)}}},{key:"_resolveInjectorDefTypes",value:function(){var t=this;this.injectorDefTypes.forEach(function(e){return t.get(e)})}},{key:"toString",value:function(){var t=[];return this.records.forEach(function(e,n){return t.push(k(n))}),"R3Injector[".concat(t.join(", "),"]")}},{key:"assertNotDestroyed",value:function(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}},{key:"processInjectorType",value:function(t,e,n){var r=this;if(!(t=S(t)))return!1;var i=M(t),o=null==i&&t.ngModule||void 0,s=void 0===o?t:o,a=-1!==n.indexOf(s);if(void 0!==o&&(i=M(o)),null==i)return!1;if(null!=i.imports&&!a){var u;n.push(s);try{ln(i.imports,function(t){r.processInjectorType(t,e,n)&&(void 0===u&&(u=[]),u.push(t))})}finally{}if(void 0!==u)for(var c=function(t){var e=u[t],n=e.ngModule,i=e.providers;ln(i,function(t){return r.processProvider(t,n,i||co)})},l=0;l<u.length;l++)c(l)}this.injectorDefTypes.add(s),this.records.set(s,yo(i.factory,ao));var h=i.providers;if(null!=h&&!a){var f=t;ln(h,function(t){return r.processProvider(t,f,h)})}return void 0!==o&&void 0!==t.providers}},{key:"processProvider",value:function(t,e,n){var r=mo(t=S(t))?t:S(t&&t.provide),i=function(t,e,n){return go(t)?yo(void 0,t.useValue):yo(vo(t),ao)}(t);if(mo(t)||!0!==t.multi)this.records.get(r);else{var o=this.records.get(r);o||((o=yo(void 0,ao,!0)).factory=function(){return Cn(o.multi)},this.records.set(r,o)),r=t,o.multi.push(t)}this.records.set(r,i)}},{key:"hydrate",value:function(t,e){var n;return e.value===ao&&(e.value=uo,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}},{key:"injectableDefInScope",value:function(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}]),t}();function po(t){var e=R(t),n=null!==e?e.factory:St(t);if(null!==n)return n;var r=M(t);if(null!==r)return r.factory;if(t instanceof sn)throw new Error("Token ".concat(k(t)," is missing a \u0275prov definition."));if(t instanceof Function)return function(t){var e=t.length;if(e>0){var n=dn(e,"?");throw new Error("Can't resolve all parameters for ".concat(k(t),": (").concat(n.join(", "),")."))}var r=function(t){var e=t&&(t[F]||t[U]);if(e){var n=function(t){if(t.hasOwnProperty("name"))return t.name;var e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn('DEPRECATED: DI is instantiating a token "'.concat(n,'" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "').concat(n,'" class.')),e}return null}(t);return null!==r?function(){return r.factory(t)}:function(){return new t}}(t);throw new Error("unreachable")}function vo(t,e,n){var r,o;if(mo(t)){var s=S(t);return St(s)||po(s)}if(go(t))r=function(){return S(t.useValue)};else if((o=t)&&o.useFactory)r=function(){return t.useFactory.apply(t,i(Cn(t.deps||[])))};else if(function(t){return!(!t||!t.useExisting)}(t))r=function(){return kn(S(t.useExisting))};else{var a=S(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return St(a)||po(a);r=function(){return l(a,i(Cn(t.deps)))}}return r}function yo(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{factory:t,value:e,multi:n?[]:void 0}}function go(t){return null!==t&&"object"==typeof t&&_n in t}function mo(t){return"function"==typeof t}var _o=function(t,e,n){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0,i=ho(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)},bo=function(){var t=function(){function t(){f(this,t)}return p(t,null,[{key:"create",value:function(t,e){return Array.isArray(t)?_o(t,e,""):_o(t.providers,t.parent,t.name||"")}}]),t}();return t.THROW_IF_NOT_FOUND=gn,t.NULL=new oo,t.\u0275prov=P({token:t,providedIn:"any",factory:function(){return kn(io)}}),t.__NG_ELEMENT_ID__=-1,t}();function wo(t,e){we(Bt(t)[1],$t())}function ko(t){for(var e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0,r=[t];e;){var i=void 0;if(Ot(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);var o=t;o.inputs=Eo(t.inputs),o.declaredInputs=Eo(t.declaredInputs),o.outputs=Eo(t.outputs);var s=i.hostBindings;s&&So(t,s);var a=i.viewQuery,u=i.contentQueries;if(a&&Co(t,a),u&&Oo(t,u),b(t.inputs,i.inputs),b(t.declaredInputs,i.declaredInputs),b(t.outputs,i.outputs),Ot(i)&&i.data.animation){var c=t.data;c.animation=(c.animation||[]).concat(i.data.animation)}}var l=i.features;if(l)for(var h=0;h<l.length;h++){var f=l[h];f&&f.ngInherit&&f(t),f===ko&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){for(var e=0,n=null,r=t.length-1;r>=0;r--){var i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=je(i.hostAttrs,n=je(n,i.hostAttrs))}}(r)}function Eo(t){return t===$?{}:t===tt?[]:t}function Co(t,e){var n=t.viewQuery;t.viewQuery=n?function(t,r){e(t,r),n(t,r)}:e}function Oo(t,e){var n=t.contentQueries;t.contentQueries=n?function(t,r,i){e(t,r,i),n(t,r,i)}:e}function So(t,e){var n=t.hostBindings;t.hostBindings=n?function(t,r){e(t,r),n(t,r)}:e}var To=null;function Io(){if(!To){var t=J.Symbol;if(t&&t.iterator)To=t.iterator;else for(var e=Object.getOwnPropertyNames(Map.prototype),n=0;n<e.length;++n){var r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(To=r)}}return To}function xo(t){return!!Ao(t)&&(Array.isArray(t)||!(t instanceof Map)&&Io()in t)}function Ao(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function jo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Po(t,e,n,r){var i=Xt();return jo(i,se(),e)&&(Zt(),function(t,e,n,r,i,o){var s=Vt(t,e);!function(t,e,n,r,i,o,s){if(null==o)Dt(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{var a=null==s?x(o):s(o,r||"",i);Dt(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(be(),i,t,e,n,r)),Po}function No(t,e,n,r){return jo(t,se(),n)?e+x(n)+r:ui}function Ro(t,e,n,r,i,o,s,a){var u=Xt(),c=Zt(),l=t+20,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){var c=e.consts,l=_i(e,t,4,s||null,Wt(c,a));Pi(e,n,l,Wt(c,u)),we(e,l);var h=l.tViews=Ii(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];ee(h,!1);var f=u[11].createComment("");Br(c,u,f,h),br(f,u),Qi(u,u[l]=Bi(f,u,f,h)),Ct(h)&&Oi(c,u,h),null!=s&&Si(u,h,a)}function Do(t){return function(t,e){return t[e]}(Kt.lFrame.contextLView,20+t)}function Mo(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:B.Default,n=Xt();return null===n?kn(t,e):Qe($t(),n,S(t),e)}function Lo(t,e,n){var r=Xt();return jo(r,se(),e)&&ji(Zt(),be(),r,t,e,r[11],n,!1),Lo}function Fo(t,e,n,r,i){var o=i?"class":"style";eo(t,n,e.inputs[o],o,r)}function Vo(t,e,n,r){var i=Xt(),o=Zt(),s=20+t,a=i[11],u=i[s]=Ar(a,e,Kt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){var a=e.consts,u=_i(e,t,2,i,Wt(a,o));return Pi(e,n,u,Wt(a,s)),null!==u.attrs&&no(u,u.attrs,!1),null!==u.mergedAttrs&&no(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];ee(c,!0);var l=c.mergedAttrs;null!==l&&Ie(a,u,l);var h=c.classes;null!==h&&Xr(a,u,h);var f=c.styles;null!==f&&Yr(a,u,f),64!=(64&c.flags)&&Br(o,i,u,c),0===Kt.lFrame.elementDepthCount&&br(u,i),Kt.lFrame.elementDepthCount++,Ct(c)&&(Oi(o,i,c),function(t,e,n){if(kt(e))for(var r=e.directiveEnd,i=e.directiveStart;i<r;i++){var o=t.data[i];o.contentQueries&&o.contentQueries(1,n[i],i)}}(o,c,i)),null!==r&&Si(i,c)}function Uo(){var t=$t();ne()?re():ee(t=t.parent,!1);var e=t;Kt.lFrame.elementDepthCount--;var n=Zt();n.firstCreatePass&&(we(n,t),kt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Fo(n,e,Xt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Fo(n,e,Xt(),e.stylesWithoutHost,!1)}function qo(t,e,n,r){Vo(t,e,n,r),Uo()}function Bo(){return Xt()}function Ho(t){return!!t&&"function"==typeof t.then}function zo(t){return!!t&&"function"==typeof t.subscribe}var Wo=zo;function Qo(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i=Xt(),o=Zt(),s=$t();return function(t,e,n,r,i,o){var s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7?arguments[7]:void 0,u=Ct(r),c=t.firstCreatePass&&$i(t),l=Ji(e),h=!0;if(3&r.type){var f=Vt(r,e),d=a?a(f):$,p=d.target||f,v=l.length,y=a?function(t){return a(Lt(t[r.index])).target}:r.index;if(Dt(n)){var g=null;if(!a&&u&&(g=function(t,e,n,r){var i=t.cleanup;if(null!=i)for(var o=0;o<i.length-1;o+=2){var s=i[o];if(s===n&&i[o+1]===r){var a=e[7],u=i[o+2];return a.length>u?a[u]:null}"string"==typeof s&&(o+=2)}return null}(t,e,i,r.index)),null!==g)(g.__ngLastListenerFn__||g).__ngNextListenerFn__=o,g.__ngLastListenerFn__=o,h=!1;else{o=Ko(r,e,o,!1);var m=n.listen(d.name||p,i,o);l.push(o,m),c&&c.push(i,y,v,v+1)}}else o=Ko(r,e,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,y,v,s)}else o=Ko(r,e,o,!1);var _,b=r.outputs;if(h&&null!==b&&(_=b[i])){var w=_.length;if(w)for(var k=0;k<w;k+=2){var E=e[_[k]][_[k+1]].subscribe(o),C=l.length;l.push(o,E),c&&c.push(i,r.index,C,-(C+1))}}}(o,i,i[11],s,t,e,n,r),Qo}function Go(t,e,n){try{return!1!==e(n)}catch(r){return to(t,r),!1}}function Ko(t,e,n,r){return function i(o){if(o===Function)return n;var s=2&t.flags?qt(t.index,e):e;0==(32&e[2])&&Gi(s);for(var a=Go(e,n,o),u=i.__ngNextListenerFn__;u;)a=Go(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Yo(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(t){return(Kt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Kt.lFrame.contextLView))[8]}(t)}function Xo(t,e){for(var n=null,r=function(t){var e=t.attrs;if(null!=e){var n=e.indexOf(5);if(0==(1&n))return e[n+1]}return null}(t),i=0;i<e.length;i++){var o=e[i];if("*"!==o){if(null===r?ii(t,o,!0):oi(r,o))return i}else n=i}return n}function Zo(t){var e=Xt()[16][6];if(!e.projection)for(var n=e.projection=dn(t?t.length:1,null),r=n.slice(),i=e.child;null!==i;){var o=t?Xo(i,t):0;null!==o&&(r[o]?r[o].projectionNext=i:n[o]=i,r[o]=i),i=i.next}}function Jo(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=Xt(),i=Zt(),o=_i(i,20+t,16,null,n||null);null===o.projection&&(o.projection=e),re(),64!=(64&o.flags)&&function(t,e,n){Kr(e[11],0,e,n,Dr(t,n,e),Ur(n.parent||e[6],n,e))}(i,r,o)}function $o(t,e,n){return ts(t,"",e,"",n),$o}function ts(t,e,n,r,i){var o=Xt(),s=No(o,e,n,r);return s!==ui&&ji(Zt(),be(),o,t,s,o[11],i,!1),ts}var es=[];function ns(t,e,n,r,i){for(var o=t[n+1],s=null===e,a=r?fi(o):pi(o),u=!1;0!==a&&(!1===u||s);){var c=t[a+1];rs(t[a],e)&&(u=!0,t[a+1]=r?yi(c):di(c)),a=r?fi(c):pi(c)}u&&(t[n+1]=r?di(o):yi(o))}function rs(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&vn(t,e)>=0}function is(t,e,n){return ss(t,e,n,!1),is}function os(t,e){return ss(t,e,null,!0),os}function ss(t,e,n,r){var i,o,s=Xt(),a=Zt(),u=(i=Kt.lFrame,o=i.bindingIndex,i.bindingIndex=i.bindingIndex+2,o);a.firstUpdatePass&&function(t,e,n,r){var i=t.data;if(null===i[n+1]){var o=i[me()],s=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(t.flags&(e?16:32))})(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){var i=function(t){var e=Kt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t),o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=us(n=as(null,t,e,n,r),e.attrs,r),o=null);else{var s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=as(i,t,e,n,r),null===o){var a=function(t,e,n){var r=n?e.classBindings:e.styleBindings;if(0!==pi(r))return t[fi(r)]}(t,e,r);void 0!==a&&Array.isArray(a)&&function(t,e,n,r){t[fi(n?e.classBindings:e.styleBindings)]=r}(t,e,r,a=us(a=as(null,t,e,a[1],r),e.attrs,r))}else o=function(t,e,n){for(var r,i=e.directiveEnd,o=1+e.directiveStylingLast;o<i;o++)r=us(r,t[o].hostAttrs,n);return us(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){var s=o?e.classBindings:e.styleBindings,a=fi(s),u=pi(s);t[r]=n;var c,l=!1;if(Array.isArray(n)){var h=n;(null===(c=h[1])||vn(h,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){var f=fi(t[a+1]);t[r+1]=hi(f,a),0!==f&&(t[f+1]=vi(t[f+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=hi(a,0),0!==a&&(t[a+1]=vi(t[a+1],r)),a=r;else t[r+1]=hi(u,0),0===a?a=r:t[u+1]=vi(t[u+1],r),u=r;l&&(t[r+1]=di(t[r+1])),ns(t,c,r,!0),ns(t,c,r,!1),function(t,e,n,r,i){var o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&vn(o,e)>=0&&(n[r+1]=yi(n[r+1]))}(e,c,t,r,o),s=hi(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}(a,t,u,r),e!==ui&&jo(s,u,e)&&function(t,e,n,r,i,o,s,a){if(3&e.type){var u=t.data,c=u[a+1];ls(1==(1&c)?cs(u,e,n,i,pi(c),s):void 0)||(ls(o)||2==(2&c)&&(o=cs(u,null,n,i,a,s)),function(t,e,n,r,i){var o=Dt(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{var s=-1===r.indexOf("-")?void 0:Er.DashCase;if(null==i)o?t.removeStyle(n,r,s):n.style.removeProperty(r);else{var a="string"==typeof i&&i.endsWith("!important");a&&(i=i.slice(0,-10),s|=Er.Important),o?t.setStyle(n,r,i,s):n.style.setProperty(r,i,a?"important":"")}}}(r,s,Ft(me(),n),i,o))}}(a,a.data[me()],s,s[11],t,s[u+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=k(Ln(t)))),t}(e,n),r,u)}function as(t,e,n,r,i){var o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(r=us(r,(o=e[a]).hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function us(t,e,n){var r,i,o,s,a=n?1:2,u=-1;if(null!==e)for(var c=0;c<e.length;c++){var l=e[c];"number"==typeof l?u=l:u===a&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),r=t,i=l,o=!!n||e[++c],s=void 0,(s=vn(r,i))>=0?r[1|s]=o:function(t,e,n,r){var i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(r,s=~s,i,o))}return void 0===t?null:t}function cs(t,e,n,r,i,o){for(var s,a=null===e;i>0;){var u=t[i],c=Array.isArray(u),l=c?u[1]:u,h=null===l,f=n[i+1];f===ui&&(f=h?es:void 0);var d=h?pn(f,r):l===r?f:void 0;if(c&&!ls(d)&&(d=pn(u,r)),ls(d)&&(s=d,a))return s;var p=t[i+1];i=a?fi(p):pi(p)}if(null!==e){var v=o?e.residualClasses:e.residualStyles;null!=v&&(s=pn(v,r))}return s}function ls(t){return void 0!==t}function hs(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Xt(),r=Zt(),i=t+20,o=r.firstCreatePass?_i(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return Dt(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Br(r,n,s,o),ee(o,!1)}function fs(t){return ds("",t,""),fs}function ds(t,e,n){var r=Xt(),i=No(r,t,e,n);return i!==ui&&function(t,e,n){var r=Ft(e,t);!function(t,e,n){Dt(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,me(),i),ds}function ps(t,e,n){var r=Xt();return jo(r,se(),e)&&ji(Zt(),be(),r,t,e,r[11],n,!0),ps}var vs=void 0,ys=["en",[["a","p"],["AM","PM"],vs],[["AM","PM"],vs,vs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],vs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],vs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",vs,"{1} 'at' {0}",vs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){var e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}],gs={};function ms(t,e,n){"string"!=typeof e&&(n=e,e=t[Es.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),gs[e]=t,n&&(gs[e][Es.ExtraData]=n)}function _s(t){var e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t),n=ks(e);if(n)return n;var r=e.split("-")[0];if(n=ks(r))return n;if("en"===r)return ys;throw new Error('Missing locale data for the locale "'.concat(t,'".'))}function bs(t){return _s(t)[Es.CurrencyCode]||null}function ws(t){return _s(t)[Es.PluralCase]}function ks(t){return t in gs||(gs[t]=J.ng&&J.ng.common&&J.ng.common.locales&&J.ng.common.locales[t]),gs[t]}var Es=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});function Cs(t){var e;null==(e=t)&&function(t,e,n,r){throw new Error("ASSERTION ERROR: ".concat("Expected localeId to be defined"," [Expected=> null != ").concat(e," <=Actual]"))}(0,e),"string"==typeof t&&t.toLowerCase().replace(/_/g,"-")}function Os(t,e,n,r,i){if(t=S(t),Array.isArray(t))for(var o=0;o<t.length;o++)Os(t[o],e,n,r,i);else{var s=Zt(),a=Xt(),u=mo(t)?t:S(t.provide),c=vo(t),l=$t(),h=1048575&l.providerIndexes,f=l.directiveStart,d=l.providerIndexes>>20;if(mo(t)||!t.multi){var p=new Te(c,i,Mo),v=Is(u,e,i?h:h+d,f);-1===v?(He(Ve(l,a),s,u),Ss(s,t,e.length),e.push(u),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),n.push(p),a.push(p)):(n[v]=p,a[v]=p)}else{var y=Is(u,e,h+d,f),g=Is(u,e,h,h+d),m=y>=0&&n[y],_=g>=0&&n[g];if(i&&!_||!i&&!m){He(Ve(l,a),s,u);var b=function(t,e,n,r,i){var o=new Te(t,n,Mo);return o.multi=[],o.index=e,o.componentProviders=0,Ts(o,i,r&&!n),o}(i?As:xs,n.length,i,r,c);!i&&_&&(n[g].providerFactory=b),Ss(s,t,e.length,0),e.push(u),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),n.push(b),a.push(b)}else Ss(s,t,y>-1?y:g,Ts(n[i?g:y],c,!i&&r));!i&&r&&_&&n[g].componentProviders++}}}function Ss(t,e,n,r){var i=mo(e);if(i||e.useClass){var o=(e.useClass||e).prototype.ngOnDestroy;if(o){var s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){var a=s.indexOf(n);-1===a?s.push(n,[r,o]):s[a+1].push(r,o)}else s.push(n,o)}}}function Ts(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Is(t,e,n,r){for(var i=n;i<r;i++)if(e[i]===t)return i;return-1}function xs(t,e,n,r){return js(this.multi,[])}function As(t,e,n,r){var i,o=this.multi;if(this.providerFactory){var s=this.providerFactory.componentProviders,a=Ze(n,n[1],this.providerFactory.index,r);js(o,i=a.slice(0,s));for(var u=s;u<a.length;u++)i.push(a[u])}else js(o,i=[]);return i}function js(t,e){for(var n=0;n<t.length;n++)e.push((0,t[n])());return e}function Ps(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n){n.providersResolver=function(n,r){return function(t,e,n){var r=Zt();if(r.firstCreatePass){var i=Ot(t);Os(n,r.data,r.blueprint,i,!0),Os(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}}var Ns=function t(){f(this,t)},Rs=function(){function t(){f(this,t)}return p(t,[{key:"resolveComponentFactory",value:function(t){throw function(t){var e=Error("No component factory found for ".concat(k(t),". Did you add it to @NgModule.entryComponents?"));return e.ngComponent=t,e}(t)}}]),t}(),Ds=function(){var t=function t(){f(this,t)};return t.NULL=new Rs,t}();function Ms(){}function Ls(t,e){return new Vs(Vt(t,e))}var Fs=function(){return Ls($t(),Xt())},Vs=function(){var t=function t(e){f(this,t),this.nativeElement=e};return t.__NG_ELEMENT_ID__=Fs,t}();function Us(t){return t instanceof Vs?t.nativeElement:t}var qs=function t(){f(this,t)},Bs=function(){var t=function t(){f(this,t)};return t.__NG_ELEMENT_ID__=function(){return Hs()},t}(),Hs=function(){var t=Xt(),e=qt($t().index,t);return function(t){return t[11]}(bt(e)?e:t)},zs=function(){var t=function t(){f(this,t)};return t.\u0275prov=P({token:t,providedIn:"root",factory:function(){return null}}),t}(),Ws=function t(e){f(this,t),this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")},Qs=new Ws("11.2.2"),Gs=function(){function t(){f(this,t)}return p(t,[{key:"supports",value:function(t){return xo(t)}},{key:"create",value:function(t){return new Ys(t)}}]),t}(),Ks=function(t,e){return e},Ys=function(){function t(e){f(this,t),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Ks}return p(t,[{key:"forEachItem",value:function(t){var e;for(e=this._itHead;null!==e;e=e._next)t(e)}},{key:"forEachOperation",value:function(t){for(var e=this._itHead,n=this._removalsHead,r=0,i=null;e||n;){var o=!n||e&&e.currentIndex<$s(n,r,i)?e:n,s=$s(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);var u=s-r,c=a-r;if(u!=c){for(var l=0;l<u;l++){var h=l<i.length?i[l]:i[l]=0,f=h+l;c<=f&&f<u&&(i[l]=h+1)}i[o.previousIndex]=c-u}}s!==a&&t(o,s,a)}}},{key:"forEachPreviousItem",value:function(t){var e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}},{key:"forEachAddedItem",value:function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}},{key:"forEachMovedItem",value:function(t){var e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}},{key:"forEachRemovedItem",value:function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}},{key:"forEachIdentityChange",value:function(t){var e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}},{key:"diff",value:function(t){if(null==t&&(t=[]),!xo(t))throw new Error("Error trying to diff '".concat(k(t),"'. Only arrays and iterables are allowed"));return this.check(t)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(t){var e=this;this._reset();var n,r,i,o=this._itHead,s=!1;if(Array.isArray(t)){this.length=t.length;for(var a=0;a<this.length;a++)r=t[a],i=this._trackByFn(a,r),null!==o&&Object.is(o.trackById,i)?(s&&(o=this._verifyReinsertion(o,r,i,a)),Object.is(o.item,r)||this._addIdentityChange(o,r)):(o=this._mismatch(o,r,i,a),s=!0),o=o._next}else n=0,function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)e(t[n]);else for(var r,i=t[Io()]();!(r=i.next()).done;)e(r.value)}(t,function(t){i=e._trackByFn(n,t),null!==o&&Object.is(o.trackById,i)?(s&&(o=e._verifyReinsertion(o,t,i,n)),Object.is(o.item,t)||e._addIdentityChange(o,t)):(o=e._mismatch(o,t,i,n),s=!0),o=o._next,n++}),this.length=n;return this._truncate(o),this.collection=t,this.isDirty}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}},{key:"_reset",value:function(){if(this.isDirty){var t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(t,e,n,r){var i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new Xs(e,n),i,r),t}},{key:"_verifyReinsertion",value:function(t,e,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}},{key:"_truncate",value:function(t){for(;null!==t;){var e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);var r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}},{key:"_moveAfter",value:function(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}},{key:"_addAfter",value:function(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}},{key:"_insertAfter",value:function(t,e,n){var r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Js),this._linkedRecords.put(t),t.currentIndex=n,t}},{key:"_remove",value:function(t){return this._addToRemovals(this._unlink(t))}},{key:"_unlink",value:function(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);var e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}},{key:"_addToMoves",value:function(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}},{key:"_addToRemovals",value:function(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Js),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}},{key:"_addIdentityChange",value:function(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}]),t}(),Xs=function t(e,n){f(this,t),this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},Zs=function(){function t(){f(this,t),this._head=null,this._tail=null}return p(t,[{key:"add",value:function(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}},{key:"get",value:function(t,e){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}},{key:"remove",value:function(t){var e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}]),t}(),Js=function(){function t(){f(this,t),this.map=new Map}return p(t,[{key:"put",value:function(t){var e=t.trackById,n=this.map.get(e);n||(n=new Zs,this.map.set(e,n)),n.add(t)}},{key:"get",value:function(t,e){var n=this.map.get(t);return n?n.get(t,e):null}},{key:"remove",value:function(t){var e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}},{key:"isEmpty",get:function(){return 0===this.map.size}},{key:"clear",value:function(){this.map.clear()}}]),t}();function $s(t,e,n){var r=t.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+e+i}var ta=function(){function t(){f(this,t)}return p(t,[{key:"supports",value:function(t){return t instanceof Map||Ao(t)}},{key:"create",value:function(){return new ea}}]),t}(),ea=function(){function t(){f(this,t),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return p(t,[{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}},{key:"forEachItem",value:function(t){var e;for(e=this._mapHead;null!==e;e=e._next)t(e)}},{key:"forEachPreviousItem",value:function(t){var e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}},{key:"forEachChangedItem",value:function(t){var e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}},{key:"forEachAddedItem",value:function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}},{key:"forEachRemovedItem",value:function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}},{key:"diff",value:function(t){if(t){if(!(t instanceof Map||Ao(t)))throw new Error("Error trying to diff '".concat(k(t),"'. Only maps and objects are allowed"))}else t=new Map;return this.check(t)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(t){var e=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(t,function(t,r){if(n&&n.key===r)e._maybeAddToChanges(n,t),e._appendAfter=n,n=n._next;else{var i=e._getOrCreateRecordForKey(r,t);n=e._insertBeforeOrAppend(n,i)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(t,e){if(t){var n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}},{key:"_getOrCreateRecordForKey",value:function(t,e){if(this._records.has(t)){var n=this._records.get(t);this._maybeAddToChanges(n,e);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var o=new na(t);return this._records.set(t,o),o.currentValue=e,this._addToAdditions(o),o}},{key:"_reset",value:function(){if(this.isDirty){var t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}},{key:"_addToAdditions",value:function(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}},{key:"_addToChanges",value:function(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}},{key:"_forEach",value:function(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(function(n){return e(t[n],n)})}}]),t}(),na=function t(e){f(this,t),this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null};function ra(){return new ia([new Gs])}var ia=function(){var t=function(){function t(e){f(this,t),this.factories=e}return p(t,[{key:"find",value:function(t){var e,n=this.factories.find(function(e){return e.supports(t)});if(null!=n)return n;throw new Error("Cannot find a differ supporting object '".concat(t,"' of type '").concat((e=t).name||typeof e,"'"))}}],[{key:"create",value:function(e,n){if(null!=n){var r=n.factories.slice();e=e.concat(r)}return new t(e)}},{key:"extend",value:function(e){return{provide:t,useFactory:function(n){return t.create(e,n||ra())},deps:[[t,new xn,new In]]}}}]),t}();return t.\u0275prov=P({token:t,providedIn:"root",factory:ra}),t}();function oa(){return new sa([new ta])}var sa=function(){var t=function(){function t(e){f(this,t),this.factories=e}return p(t,[{key:"find",value:function(t){var e=this.factories.find(function(e){return e.supports(t)});if(e)return e;throw new Error("Cannot find a differ supporting object '".concat(t,"'"))}}],[{key:"create",value:function(e,n){if(n){var r=n.factories.slice();e=e.concat(r)}return new t(e)}},{key:"extend",value:function(e){return{provide:t,useFactory:function(n){return t.create(e,n||oa())},deps:[[t,new xn,new In]]}}}]),t}();return t.\u0275prov=P({token:t,providedIn:"root",factory:oa}),t}();function aa(t,e,n,r){for(var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];null!==n;){var s=e[n.index];if(null!==s&&r.push(Lt(s)),wt(s))for(var a=10;a<s.length;a++){var u=s[a],c=u[1].firstChild;null!==c&&aa(u[1],u,c,r)}var l=n.type;if(8&l)aa(t,e,n.child,r);else if(32&l)for(var h=Cr(n,e),f=void 0;f=h();)r.push(f);else if(16&l){var d=zr(e,n);if(Array.isArray(d))r.push.apply(r,i(d));else{var p=Or(e[16]);aa(p[1],p,d,r,!0)}}n=o?n.projectionNext:n.next}return r}var ua=function(){function t(e,n){f(this,t),this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}return p(t,[{key:"rootNodes",get:function(){var t=this._lView,e=t[1];return aa(e,t,e.firstChild,[])}},{key:"context",get:function(){return this._lView[8]}},{key:"destroyed",get:function(){return 256==(256&this._lView[2])}},{key:"destroy",value:function(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){var t=this._lView[3];if(wt(t)){var e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Pr(t,n),fn(e,n))}this._attachedToViewContainer=!1}Nr(this._lView[1],this._lView)}},{key:"onDestroy",value:function(t){xi(this._lView[1],this._lView,null,t)}},{key:"markForCheck",value:function(){Gi(this._cdRefInjectingView||this._lView)}},{key:"detach",value:function(){this._lView[2]&=-129}},{key:"reattach",value:function(){this._lView[2]|=128}},{key:"detectChanges",value:function(){Ki(this._lView[1],this._lView,this.context)}},{key:"checkNoChanges",value:function(){!function(t,e,n){oe(!0);try{Ki(t,e,n)}finally{oe(!1)}}(this._lView[1],this._lView,this.context)}},{key:"attachToViewContainerRef",value:function(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}},{key:"detachFromAppRef",value:function(){var t;this._appRef=null,Gr(this._lView[1],t=this._lView,t[11],2,null,null)}},{key:"attachToAppRef",value:function(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}]),t}(),ca=function(t){v(n,t);var e=g(n);function n(t){var r;return f(this,n),(r=e.call(this,t))._view=t,r}return p(n,[{key:"detectChanges",value:function(){Yi(this._view)}},{key:"checkNoChanges",value:function(){!function(t){oe(!0);try{Yi(t)}finally{oe(!1)}}(this._view)}},{key:"context",get:function(){return null}}]),n}(ua),la=fa,ha=function(){var t=function t(){f(this,t)};return t.__NG_ELEMENT_ID__=la,t.__ChangeDetectorRef__=!0,t}();function fa(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,e,n){if(!n&&Et(t)){var r=qt(t.index,e);return new ua(r,r)}return 47&t.type?new ua(e[16],e):null}($t(),Xt(),t)}var da=[new ta],pa=new ia([new Gs]),va=new sa(da),ya=function(){return _a($t(),Xt())},ga=function(){var t=function t(){f(this,t)};return t.__NG_ELEMENT_ID__=ya,t}(),ma=function(t){v(n,t);var e=g(n);function n(t,r,i){var o;return f(this,n),(o=e.call(this))._declarationLView=t,o._declarationTContainer=r,o.elementRef=i,o}return p(n,[{key:"createEmbeddedView",value:function(t){var e=this._declarationTContainer.tViews,n=mi(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];var r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),wi(e,n,t),new ua(n)}}]),n}(ga);function _a(t,e){return 4&t.type?new ma(e,t,Ls(t,e)):null}var ba=function t(){f(this,t)},wa=function t(){f(this,t)},ka=function(){return Ta($t(),Xt())},Ea=function(){var t=function t(){f(this,t)};return t.__NG_ELEMENT_ID__=ka,t}(),Ca=function(t){v(n,t);var e=g(n);function n(t,r,i){var o;return f(this,n),(o=e.call(this))._lContainer=t,o._hostTNode=r,o._hostLView=i,o}return p(n,[{key:"element",get:function(){return Ls(this._hostTNode,this._hostLView)}},{key:"injector",get:function(){return new tn(this._hostTNode,this._hostLView)}},{key:"parentInjector",get:function(){var t=Be(this._hostTNode,this._hostLView);if(Ne(t)){var e=De(t,this._hostLView),n=Re(t);return new tn(e[1].data[n+8],e)}return new tn(null,this._hostLView)}},{key:"clear",value:function(){for(;this.length>0;)this.remove(this.length-1)}},{key:"get",value:function(t){var e=Oa(this._lContainer);return null!==e&&e[t]||null}},{key:"length",get:function(){return this._lContainer.length-10}},{key:"createEmbeddedView",value:function(t,e,n){var r=t.createEmbeddedView(e||{});return this.insert(r,n),r}},{key:"createComponent",value:function(t,e,n,r,i){var o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){var s=o.get(ba,null);s&&(i=s)}var a=t.create(o,r,void 0,i);return this.insert(a.hostView,e),a}},{key:"insert",value:function(t,e){var r=t._lView,i=r[1];if(wt(r[3])){var o=this.indexOf(t);if(-1!==o)this.detach(o);else{var s=r[3],a=new n(s,s[6],s[3]);a.detach(a.indexOf(t))}}var u=this._adjustIndex(e),c=this._lContainer;!function(t,e,n,r){var i=10+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-10?(e[4]=n[i],hn(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;var s=e[17];null!==s&&n!==s&&function(t,e){var n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);var a=e[19];null!==a&&a.insertView(t),e[2]|=128}(i,r,c,u);var l=Wr(u,c),h=r[11],f=Vr(h,c[7]);return null!==f&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Gr(t,r,n,1,i,o)}(i,c[6],h,r,f,l),t.attachToViewContainerRef(),hn(Sa(c),u,t),t}},{key:"move",value:function(t,e){return this.insert(t,e)}},{key:"indexOf",value:function(t){var e=Oa(this._lContainer);return null!==e?e.indexOf(t):-1}},{key:"remove",value:function(t){var e=this._adjustIndex(t,-1),n=Pr(this._lContainer,e);n&&(fn(Sa(this._lContainer),e),Nr(n[1],n))}},{key:"detach",value:function(t){var e=this._adjustIndex(t,-1),n=Pr(this._lContainer,e);return n&&null!=fn(Sa(this._lContainer),e)?new ua(n):null}},{key:"_adjustIndex",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==t?this.length+e:t}}]),n}(Ea);function Oa(t){return t[8]}function Sa(t){return t[8]||(t[8]=[])}function Ta(t,e){var n,r=e[t.index];if(wt(r))n=r;else{var i;if(8&t.type)i=Lt(r);else{var o=e[11];i=o.createComment("");var s=Vt(t,e);Mr(o,Vr(o,s),i,function(t,e){return Dt(t)?t.nextSibling(e):e.nextSibling}(o,s),!1)}e[t.index]=n=Bi(r,e,i,t),Qi(e,n)}return new Ca(n,t,e)}var Ia={},xa=function(t){v(n,t);var e=g(n);function n(t){var r;return f(this,n),(r=e.call(this)).ngModule=t,r}return p(n,[{key:"resolveComponentFactory",value:function(t){var e=mt(t);return new Pa(e,this.ngModule)}}]),n}(Ds);function Aa(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}var ja=new sn("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return wr}}),Pa=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this)).componentDef=t,i.ngModule=r,i.componentType=t.type,i.selector=t.selectors.map(ai).join(","),i.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],i.isBoundToModule=!!r,i}return p(n,[{key:"inputs",get:function(){return Aa(this.componentDef.inputs)}},{key:"outputs",get:function(){return Aa(this.componentDef.outputs)}},{key:"create",value:function(t,e,n,r){var i,o,s=(r=r||this.ngModule)?function(t,e){return{get:function(n,r,i){var o=t.get(n,Ia,i);return o!==Ia||r===Ia?o:e.get(n,r,i)}}}(t,r.injector):t,a=s.get(qs,Mt),u=s.get(zs,null),c=a.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",h=n?function(t,e,n){if(Dt(t))return t.selectRootElement(e,n===G.ShadowDom);var r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(c,n,this.componentDef.encapsulation):Ar(a.createRenderer(null,this.componentDef),l,function(t){var e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(l)),f=this.componentDef.onPush?576:528,d={components:[],scheduler:wr,clean:Zi,playerHandler:null,flags:0},p=Ii(0,null,null,1,0,null,null,null,null,null),v=mi(null,p,d,f,null,null,a,c,u,s);fe(v);try{var y=function(t,e,n,r,i,o){var s=n[1];n[20]=t;var a=_i(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(no(a,u,!0),null!==t&&(Ie(i,t,u),null!==a.classes&&Xr(i,t,a.classes),null!==a.styles&&Yr(i,t,a.styles)));var c=r.createRenderer(t,e),l=mi(n,Ti(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(He(Ve(a,n),s,e.type),Di(s,a),Li(a,n.length,1)),Qi(n,l),n[20]=l}(h,this.componentDef,v,a,c);if(h)if(n)Ie(c,h,["ng-version",Qs.full]);else{var g=function(t){for(var e=[],n=[],r=1,i=2;r<t.length;){var o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!ni(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]),m=g.attrs,_=g.classes;m&&Ie(c,h,m),_&&_.length>0&&Xr(c,h,_.join(" "))}if(o=Ut(p,20),void 0!==e)for(var b=o.projection=[],w=0;w<this.ngContentSelectors.length;w++){var k=e[w];b.push(null!=k?Array.from(k):null)}i=function(t,e,n,r,i){var o=n[1],s=function(t,e,n){var r=$t();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Fi(t,r,e,bi(t,e,1,null),n));var i=Ze(e,t,r.directiveStart,r);br(i,e);var o=Vt(r,e);return o&&br(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(function(t){return t(s,e)}),e.contentQueries){var a=$t();e.contentQueries(1,s,a.directiveStart)}var u=$t();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(_e(u.index),Ni(n[1],u,0,u.directiveStart,u.directiveEnd,e),Ri(e,s)),s}(y,this.componentDef,v,d,[wo]),wi(p,v,null)}finally{ge()}return new Na(this.componentType,i,Ls(o,v),v,o)}}]),n}(Ns),Na=function(t){v(n,t);var e=g(n);function n(t,r,i,o,s){var a;return f(this,n),(a=e.call(this)).location=i,a._rootLView=o,a._tNode=s,a.instance=r,a.hostView=a.changeDetectorRef=new ca(o),a.componentType=t,a}return p(n,[{key:"injector",get:function(){return new tn(this._tNode,this._rootLView)}},{key:"destroy",value:function(){this.hostView.destroy()}},{key:"onDestroy",value:function(t){this.hostView.onDestroy(t)}}]),n}(function(){return function t(){f(this,t)}}()),Ra=new Map,Da=function(t){v(n,t);var e=g(n);function n(t,r){var i;f(this,n),(i=e.call(this))._parent=r,i._bootstrapComponents=[],i.injector=_(i),i.destroyCbs=[],i.componentFactoryResolver=new xa(_(i));var o=_t(t),s=t[ot]||null;return s&&Cs(s),i._bootstrapComponents=kr(o.bootstrap),i._r3Injector=ho(t,r,[{provide:ba,useValue:_(i)},{provide:Ds,useValue:i.componentFactoryResolver}],k(t)),i._r3Injector._resolveInjectorDefTypes(),i.instance=i.get(t),i}return p(n,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bo.THROW_IF_NOT_FOUND,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:B.Default;return t===bo||t===ba||t===io?this:this._r3Injector.get(t,e,n)}},{key:"destroy",value:function(){var t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(function(t){return t()}),this.destroyCbs=null}},{key:"onDestroy",value:function(t){this.destroyCbs.push(t)}}]),n}(ba),Ma=function(t){v(n,t);var e=g(n);function n(t){var r,i,o;return f(this,n),(r=e.call(this)).moduleType=t,null!==_t(t)&&(i=t,o=new Set,function t(e){var n=_t(e,!0),r=n.id;null!==r&&(function(t,e,n){if(e&&e!==n)throw new Error("Duplicate module registered for ".concat(t," - ").concat(k(e)," vs ").concat(k(e.name)))}(r,Ra.get(r),e),Ra.set(r,e));var i,a=s(kr(n.imports));try{for(a.s();!(i=a.n()).done;){var u=i.value;o.has(u)||(o.add(u),t(u))}}catch(c){a.e(c)}finally{a.f()}}(i)),r}return p(n,[{key:"create",value:function(t){return new Da(this.moduleType,t)}}]),n}(wa),La=function(t){v(n,t);var e=g(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return f(this,n),(t=e.call(this)).__isAsync=r,t}return p(n,[{key:"emit",value:function(t){h(w(n.prototype),"next",this).call(this,t)}},{key:"subscribe",value:function(t,e,r){var i,o=function(t){return null},s=function(){return null};t&&"object"==typeof t?(i=this.__isAsync?function(e){setTimeout(function(){return t.next(e)})}:function(e){t.next(e)},t.error&&(o=this.__isAsync?function(e){setTimeout(function(){return t.error(e)})}:function(e){t.error(e)}),t.complete&&(s=this.__isAsync?function(){setTimeout(function(){return t.complete()})}:function(){t.complete()})):(i=this.__isAsync?function(e){setTimeout(function(){return t(e)})}:function(e){t(e)},e&&(o=this.__isAsync?function(t){setTimeout(function(){return e(t)})}:function(t){e(t)}),r&&(s=this.__isAsync?function(){setTimeout(function(){return r()})}:function(){r()}));var u=h(w(n.prototype),"subscribe",this).call(this,i,o,s);return t instanceof a.a&&t.add(u),u}}]),n}(o.a);function Fa(){return this._results[Io()]()}var Va=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];f(this,t),this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;var n=Io(),r=t.prototype;r[n]||(r[n]=Fa)}return p(t,[{key:"changes",get:function(){return this._changes||(this._changes=new La)}},{key:"get",value:function(t){return this._results[t]}},{key:"map",value:function(t){return this._results.map(t)}},{key:"filter",value:function(t){return this._results.filter(t)}},{key:"find",value:function(t){return this._results.find(t)}},{key:"reduce",value:function(t,e){return this._results.reduce(t,e)}},{key:"forEach",value:function(t){this._results.forEach(t)}},{key:"some",value:function(t){return this._results.some(t)}},{key:"toArray",value:function(){return this._results.slice()}},{key:"toString",value:function(){return this._results.toString()}},{key:"reset",value:function(t,e){this.dirty=!1;var n=cn(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++){var i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(this._results,n,e))&&(this._results=n,this.length=n.length,this.last=n[this.length-1],this.first=n[0])}},{key:"notifyOnChanges",value:function(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}},{key:"setDirty",value:function(){this.dirty=!0}},{key:"destroy",value:function(){this.changes.complete(),this.changes.unsubscribe()}}]),t}(),Ua=function(){function t(e){f(this,t),this.queryList=e,this.matches=null}return p(t,[{key:"clone",value:function(){return new t(this.queryList)}},{key:"setDirty",value:function(){this.queryList.setDirty()}}]),t}(),qa=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];f(this,t),this.queries=e}return p(t,[{key:"createEmbeddedView",value:function(e){var n=e.queries;if(null!==n){for(var r=null!==e.contentQueries?e.contentQueries[0]:n.length,i=[],o=0;o<r;o++){var s=n.getByIndex(o);i.push(this.queries[s.indexInDeclarationView].clone())}return new t(i)}return null}},{key:"insertView",value:function(t){this.dirtyQueriesWithMatches(t)}},{key:"detachView",value:function(t){this.dirtyQueriesWithMatches(t)}},{key:"dirtyQueriesWithMatches",value:function(t){for(var e=0;e<this.queries.length;e++)null!==eu(t,e).matches&&this.queries[e].setDirty()}}]),t}(),Ba=function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;f(this,t),this.predicate=e,this.flags=n,this.read=r},Ha=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];f(this,t),this.queries=e}return p(t,[{key:"elementStart",value:function(t,e){for(var n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}},{key:"elementEnd",value:function(t){for(var e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}},{key:"embeddedTView",value:function(e){for(var n=null,r=0;r<this.length;r++){var i=null!==n?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,null!==n?n.push(o):n=[o])}return null!==n?new t(n):null}},{key:"template",value:function(t,e){for(var n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}},{key:"getByIndex",value:function(t){return this.queries[t]}},{key:"length",get:function(){return this.queries.length}},{key:"track",value:function(t){this.queries.push(t)}}]),t}(),za=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;f(this,t),this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}return p(t,[{key:"elementStart",value:function(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}},{key:"elementEnd",value:function(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}},{key:"template",value:function(t,e){this.elementStart(t,e)}},{key:"embeddedTView",value:function(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}},{key:"isApplyingToNode",value:function(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){for(var e=this._declarationNodeIndex,n=t.parent;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}},{key:"matchTNode",value:function(t,e){var n=this.metadata.predicate;if(Array.isArray(n))for(var r=0;r<n.length;r++){var i=n[r];this.matchTNodeWithReadOption(t,e,Wa(e,i)),this.matchTNodeWithReadOption(t,e,Xe(e,t,i,!1,!1))}else n===ga?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Xe(e,t,n,!1,!1))}},{key:"matchTNodeWithReadOption",value:function(t,e,n){if(null!==n){var r=this.metadata.read;if(null!==r)if(r===Vs||r===Ea||r===ga&&4&e.type)this.addMatch(e.index,-2);else{var i=Xe(e,t,r,!1,!1);null!==i&&this.addMatch(e.index,i)}else this.addMatch(e.index,n)}}},{key:"addMatch",value:function(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}]),t}();function Wa(t,e){var n=t.localNames;if(null!==n)for(var r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Qa(t,e,n,r){return-1===n?function(t,e){return 11&t.type?Ls(t,e):4&t.type?_a(t,e):null}(e,t):-2===n?function(t,e,n){return n===Vs?Ls(e,t):n===ga?_a(e,t):n===Ea?Ta(e,t):void 0}(t,e,r):Ze(t,t[1],n,e)}function Ga(t,e,n,r){var i=e[19].queries[r];if(null===i.matches){for(var o=t.data,s=n.matches,a=[],u=0;u<s.length;u+=2){var c=s[u];a.push(c<0?null:Qa(e,o[c],s[u+1],n.metadata.read))}i.matches=a}return i.matches}function Ka(t,e,n,r){var i=t.queries.getByIndex(n),o=i.matches;if(null!==o)for(var s=Ga(t,e,i,n),a=0;a<o.length;a+=2){var u=o[a];if(u>0)r.push(s[a/2]);else{for(var c=o[a+1],l=e[-u],h=10;h<l.length;h++){var f=l[h];f[17]===f[3]&&Ka(f[1],f,c,r)}if(null!==l[9])for(var d=l[9],p=0;p<d.length;p++){var v=d[p];Ka(v[1],v,c,r)}}}return r}function Ya(t){var e=Xt(),n=Zt(),r=ue();ce(r+1);var i=eu(n,r);if(t.dirty&&Ht(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{var o=i.crossesNgTemplate?Ka(n,e,r,[]):Ga(n,e,i,r);t.reset(o,Us),t.notifyOnChanges()}return!0}return!1}function Xa(t,e,n){var r=Zt();r.firstCreatePass&&(tu(r,new Ba(t,e,n),-1),2==(2&e)&&(r.staticViewQueries=!0)),$a(r,Xt(),e)}function Za(t,e,n,r){var i=Zt();if(i.firstCreatePass){var o=$t();tu(i,new Ba(e,n,r),o.index),function(t,e){var n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}$a(i,Xt(),n)}function Ja(){return t=Xt(),e=ue(),t[19].queries[e].queryList;var t,e}function $a(t,e,n){var r=new Va(4==(4&n));xi(t,e,r,r.destroy),null===e[19]&&(e[19]=new qa),e[19].queries.push(new Ua(r))}function tu(t,e,n){null===t.queries&&(t.queries=new Ha),t.queries.track(new za(e,n))}function eu(t,e){return t.queries.getByIndex(e)}function nu(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B.Default,e=fa(!0);if(null!=e||t&B.Optional)return e;j("ChangeDetectorRef")}var ru=new sn("Application Initializer"),iu=function(){var t=function(){function t(e){var n=this;f(this,t),this.appInits=e,this.resolve=Ms,this.reject=Ms,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(t,e){n.resolve=t,n.reject=e})}return p(t,[{key:"runInitializers",value:function(){var t=this;if(!this.initialized){var e=[],n=function(){t.done=!0,t.resolve()};if(this.appInits)for(var r=0;r<this.appInits.length;r++){var i=this.appInits[r]();Ho(i)&&e.push(i)}Promise.all(e).then(function(){n()}).catch(function(e){t.reject(e)}),0===e.length&&n(),this.initialized=!0}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(kn(ru,8))},t.\u0275prov=P({token:t,factory:t.\u0275fac}),t}(),ou=new sn("AppId"),su={provide:ou,useFactory:function(){return"".concat(au()).concat(au()).concat(au())},deps:[]};function au(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var uu=new sn("Platform Initializer"),cu=new sn("Platform ID"),lu=new sn("appBootstrapListener"),hu=function(){var t=function(){function t(){f(this,t)}return p(t,[{key:"log",value:function(t){console.log(t)}},{key:"warn",value:function(t){console.warn(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=P({token:t,factory:t.\u0275fac}),t}(),fu=new sn("LocaleId"),du=new sn("DefaultCurrencyCode"),pu=function t(e,n){f(this,t),this.ngModuleFactory=e,this.componentFactories=n},vu=function(t){return new Ma(t)},yu=vu,gu=function(t){return Promise.resolve(vu(t))},mu=function(t){var e=vu(t),n=kr(_t(t).declarations).reduce(function(t,e){var n=mt(e);return n&&t.push(new Pa(n)),t},[]);return new pu(e,n)},_u=mu,bu=function(t){return Promise.resolve(mu(t))},wu=function(){var t=function(){function t(){f(this,t),this.compileModuleSync=yu,this.compileModuleAsync=gu,this.compileModuleAndAllComponentsSync=_u,this.compileModuleAndAllComponentsAsync=bu}return p(t,[{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(t){}},{key:"getModuleId",value:function(t){}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=P({token:t,factory:t.\u0275fac}),t}(),ku=Promise.resolve(0);function Eu(t){"undefined"==typeof Zone?ku.then(function(){t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}var Cu=function(){function t(e){var n,r,i=e.enableLongStackTrace,o=void 0!==i&&i,s=e.shouldCoalesceEventChangeDetection,a=void 0!==s&&s,u=e.shouldCoalesceRunChangeDetection,c=void 0!==u&&u;if(f(this,t),this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new La(!1),this.onMicrotaskEmpty=new La(!1),this.onStable=new La(!1),this.onError=new La(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=!c&&a,this.shouldCoalesceRunChangeDetection=c,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){var t=J.requestAnimationFrame,e=J.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){var n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);var r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,r=function(){!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(J,function(){t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",function(){t.lastRequestAnimationFrameId=-1,Tu(t),Su(t)},void 0,function(){},function(){})),t.fakeTopEventTask.invoke()}),Tu(t))}(n)},(n=this)._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(t,e,i,o,s,a){try{return Iu(n),t.invokeTask(i,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&r(),xu(n)}},onInvoke:function(t,e,i,o,s,a,u){try{return Iu(n),t.invoke(i,o,s,a,u)}finally{n.shouldCoalesceRunChangeDetection&&r(),xu(n)}},onHasTask:function(t,e,r,i){t.hasTask(r,i),e===r&&("microTask"==i.change?(n._hasPendingMicrotasks=i.microTask,Tu(n),Su(n)):"macroTask"==i.change&&(n.hasPendingMacrotasks=i.macroTask))},onHandleError:function(t,e,r,i){return t.handleError(r,i),n.runOutsideAngular(function(){return n.onError.emit(i)}),!1}})}return p(t,[{key:"run",value:function(t,e,n){return this._inner.run(t,e,n)}},{key:"runTask",value:function(t,e,n,r){var i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Ou,Ms,Ms);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}},{key:"runGuarded",value:function(t,e,n){return this._inner.runGuarded(t,e,n)}},{key:"runOutsideAngular",value:function(t){return this._outer.run(t)}}],[{key:"isInAngularZone",value:function(){return!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!t.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(t.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),t}(),Ou={};function Su(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(function(){return t.onStable.emit(null)})}finally{t.isStable=!0}}}function Tu(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Iu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function xu(t){t._nesting--,Su(t)}var Au=function(){function t(){f(this,t),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new La,this.onMicrotaskEmpty=new La,this.onStable=new La,this.onError=new La}return p(t,[{key:"run",value:function(t,e,n){return t.apply(e,n)}},{key:"runGuarded",value:function(t,e,n){return t.apply(e,n)}},{key:"runOutsideAngular",value:function(t){return t()}},{key:"runTask",value:function(t,e,n,r){return t.apply(e,n)}}]),t}(),ju=function(){var t=function(){function t(e){var n=this;f(this,t),this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(function(){n.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}return p(t,[{key:"_watchAngularEvents",value:function(){var t=this;this._ngZone.onUnstable.subscribe({next:function(){t._didWork=!0,t._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){t._ngZone.onStable.subscribe({next:function(){Cu.assertNotInAngularZone(),Eu(function(){t._isZoneStable=!0,t._runCallbacksIfReady()})}})})}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var t=this;if(this.isStable())Eu(function(){for(;0!==t._callbacks.length;){var e=t._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(t._didWork)}t._didWork=!1});else{var e=this.getPendingTasks();this._callbacks=this._callbacks.filter(function(t){return!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)}),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(function(t){return{source:t.source,creationLocation:t.creationLocation,data:t.data}}):[]}},{key:"addCallback",value:function(t,e,n){var r=this,i=-1;e&&e>0&&(i=setTimeout(function(){r._callbacks=r._callbacks.filter(function(t){return t.timeoutId!==i}),t(r._didWork,r.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:i,updateCb:n})}},{key:"whenStable",value:function(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(t,e,n){return[]}}]),t}();return t.\u0275fac=function(e){return new(e||t)(kn(Cu))},t.\u0275prov=P({token:t,factory:t.\u0275fac}),t}(),Pu=function(){var t=function(){function t(){f(this,t),this._applications=new Map,Du.addToWindow(this)}return p(t,[{key:"registerApplication",value:function(t,e){this._applications.set(t,e)}},{key:"unregisterApplication",value:function(t){this._applications.delete(t)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(t){return this._applications.get(t)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Du.findTestabilityInTree(this,t,e)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=P({token:t,factory:t.\u0275fac}),t}();function Nu(t){Du=t}var Ru,Du=new(function(){function t(){f(this,t)}return p(t,[{key:"addToWindow",value:function(t){}},{key:"findTestabilityInTree",value:function(t,e,n){return null}}]),t}()),Mu=!0,Lu=!1;function Fu(){return Lu=!0,Mu}function Vu(){if(Lu)throw new Error("Cannot enable prod mode after platform setup.");Mu=!1}var Uu=new sn("AllowMultipleToken"),qu=function t(e,n){f(this,t),this.name=e,this.token=n};function Bu(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r="Platform: ".concat(e),i=new sn(r);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=Hu();if(!o||o.injector.get(Uu,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{var s=n.concat(e).concat({provide:i,useValue:!0},{provide:so,useValue:"platform"});!function(t){if(Ru&&!Ru.destroyed&&!Ru.injector.get(Uu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ru=t.get(zu);var e=t.get(uu,null);e&&e.forEach(function(t){return t()})}(bo.create({providers:s,name:r}))}return function(t){var e=Hu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Hu(){return Ru&&!Ru.destroyed?Ru:null}var zu=function(){var t=function(){function t(e){f(this,t),this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return p(t,[{key:"bootstrapModuleFactory",value:function(t,e){var n,r,i=this,o=(n=e?e.ngZone:void 0,r={ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1},"noop"===n?new Au:("zone.js"===n?void 0:n)||new Cu({enableLongStackTrace:Fu(),shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)})),s=[{provide:Cu,useValue:o}];return o.run(function(){var e=bo.create({providers:s,parent:i.injector,name:t.moduleType.name}),n=t.create(e),r=n.injector.get(_r,null);if(!r)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return o.runOutsideAngular(function(){var t=o.onError.subscribe({next:function(t){r.handleError(t)}});n.onDestroy(function(){Gu(i._modules,n),t.unsubscribe()})}),function(t,e,r){try{var o=((s=n.injector.get(iu)).runInitializers(),s.donePromise.then(function(){return Cs(n.injector.get(fu,"en-US")||"en-US"),i._moduleDoBootstrap(n),n}));return Ho(o)?o.catch(function(n){throw e.runOutsideAngular(function(){return t.handleError(n)}),n}):o}catch(a){throw e.runOutsideAngular(function(){return t.handleError(a)}),a}var s}(r,o)})}},{key:"bootstrapModule",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Wu({},n);return function(t,e,n){var r=new Ma(n);return Promise.resolve(r)}(0,0,t).then(function(t){return e.bootstrapModuleFactory(t,r)})}},{key:"_moduleDoBootstrap",value:function(t){var e=t.injector.get(Qu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(function(t){return e.bootstrap(t)});else{if(!t.instance.ngDoBootstrap)throw new Error("The module ".concat(k(t.instance.constructor),' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.'));t.instance.ngDoBootstrap(e)}this._modules.push(t)}},{key:"onDestroy",value:function(t){this._destroyListeners.push(t)}},{key:"injector",get:function(){return this._injector}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(function(t){return t.destroy()}),this._destroyListeners.forEach(function(t){return t()}),this._destroyed=!0}},{key:"destroyed",get:function(){return this._destroyed}}]),t}();return t.\u0275fac=function(e){return new(e||t)(kn(bo))},t.\u0275prov=P({token:t,factory:t.\u0275fac}),t}();function Wu(t,e){return Array.isArray(e)?e.reduce(Wu,t):Object.assign(Object.assign({},t),e)}var Qu=function(){var t=function(){function t(e,n,r,i,o){var s=this;f(this,t),this._zone=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:function(){s._zone.run(function(){s.tick()})}});var a=new u.a(function(t){s._stable=s._zone.isStable&&!s._zone.hasPendingMacrotasks&&!s._zone.hasPendingMicrotasks,s._zone.runOutsideAngular(function(){t.next(s._stable),t.complete()})}),c=new u.a(function(t){var e;s._zone.runOutsideAngular(function(){e=s._zone.onStable.subscribe(function(){Cu.assertNotInAngularZone(),Eu(function(){s._stable||s._zone.hasPendingMacrotasks||s._zone.hasPendingMicrotasks||(s._stable=!0,t.next(!0))})})});var n=s._zone.onUnstable.subscribe(function(){Cu.assertInAngularZone(),s._stable&&(s._stable=!1,s._zone.runOutsideAngular(function(){t.next(!1)}))});return function(){e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(d.a)(a,c.pipe(Object(y.a)()))}return p(t,[{key:"bootstrap",value:function(t,e){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=t instanceof Ns?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);var i=n.isBoundToModule?void 0:this._injector.get(ba),o=n.create(bo.NULL,[],e||n.selector,i),s=o.location.nativeElement,a=o.injector.get(ju,null),u=a&&o.injector.get(Pu);return a&&u&&u.registerApplication(s,a),o.onDestroy(function(){r.detachView(o.hostView),Gu(r.components,o),u&&u.unregisterApplication(s)}),this._loadComponent(o),o}},{key:"tick",value:function(){var t=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;var e,n=s(this._views);try{for(n.s();!(e=n.n()).done;){e.value.detectChanges()}}catch(r){n.e(r)}finally{n.f()}}catch(i){this._zone.runOutsideAngular(function(){return t._exceptionHandler.handleError(i)})}finally{this._runningTick=!1}}},{key:"attachView",value:function(t){var e=t;this._views.push(e),e.attachToAppRef(this)}},{key:"detachView",value:function(t){var e=t;Gu(this._views,e),e.detachFromAppRef()}},{key:"_loadComponent",value:function(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(lu,[]).concat(this._bootstrapListeners).forEach(function(e){return e(t)})}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach(function(t){return t.destroy()}),this._onMicrotaskEmptySubscription.unsubscribe()}},{key:"viewCount",get:function(){return this._views.length}}]),t}();return t.\u0275fac=function(e){return new(e||t)(kn(Cu),kn(bo),kn(_r),kn(Ds),kn(iu))},t.\u0275prov=P({token:t,factory:t.\u0275fac}),t}();function Gu(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}var Ku=function t(){f(this,t)},Yu=function t(){f(this,t)},Xu={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},Zu=function(){var t=function(){function t(e,n){f(this,t),this._compiler=e,this._config=n||Xu}return p(t,[{key:"load",value:function(t){return this.loadAndCompile(t)}},{key:"loadAndCompile",value:function(t){var n=this,i=e(t.split("#"),2),o=i[0],s=i[1];return void 0===s&&(s="default"),r("zn8P")(o).then(function(t){return t[s]}).then(function(t){return Ju(t,o,s)}).then(function(t){return n._compiler.compileModuleAsync(t)})}},{key:"loadFactory",value:function(t){var n=e(t.split("#"),2),i=n[0],o=n[1],s="NgFactory";return void 0===o&&(o="default",s=""),r("zn8P")(this._config.factoryPathPrefix+i+this._config.factoryPathSuffix).then(function(t){return t[o+s]}).then(function(t){return Ju(t,i,o)})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(kn(wu),kn(Yu,8))},t.\u0275prov=P({token:t,factory:t.\u0275fac}),t}();function Ju(t,e,n){if(!t)throw new Error("Cannot find '".concat(n,"' in '").concat(e,"'"));return t}var $u=function(t){return null},tc=Bu(null,"core",[{provide:cu,useValue:"unknown"},{provide:zu,deps:[bo]},{provide:Pu,deps:[]},{provide:hu,deps:[]}]),ec=[{provide:Qu,useClass:Qu,deps:[Cu,bo,_r,Ds,iu]},{provide:ja,deps:[Cu],useFactory:function(t){var e=[];return t.onStable.subscribe(function(){for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:iu,useClass:iu,deps:[[new In,ru]]},{provide:wu,useClass:wu,deps:[]},su,{provide:ia,useFactory:function(){return pa},deps:[]},{provide:sa,useFactory:function(){return va},deps:[]},{provide:fu,useFactory:function(t){return Cs(t=t||"undefined"!=typeof $localize&&$localize.locale||"en-US"),t},deps:[[new Tn(fu),new In,new xn]]},{provide:du,useValue:"USD"}],nc=function(){var t=function t(e){f(this,t)};return t.\u0275mod=dt({type:t}),t.\u0275inj=N({factory:function(e){return new(e||t)(kn(Qu))},providers:ec}),t}()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a"),o={closed:!0,next:function(t){},error:function(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete:function(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(function(n){var r=new i.a,o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r="function"==typeof Symbol&&Symbol.observable||"@@observable"},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}var o=function(){function t(e,n){f(this,t),this.project=e,this.thisArg=n}return p(t,[{key:"call",value:function(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}]),t}(),s=function(t){v(n,t);var e=g(n);function n(t,r,i){var o;return f(this,n),(o=e.call(this,t)).project=r,o.count=0,o.thisArg=i||_(o),o}return p(n,[{key:"_next",value:function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}]),n}(r.a)},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}}},os0x:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"h",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return l}),n.d(e,"g",function(){return h});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t}function h(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"a",function(){return a});var r=n("7o/Q"),i=n("WMd4");function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n.lift(new s(t,e))}}var s=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;f(this,t),this.scheduler=e,this.delay=n}return p(t,[{key:"call",value:function(t,e){return e.subscribe(new a(t,this.scheduler,this.delay))}}]),t}(),a=function(t){v(n,t);var e=g(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return f(this,n),(i=e.call(this,t)).scheduler=r,i.delay=o,i}return p(n,[{key:"scheduleMessage",value:function(t){this.destination.add(this.scheduler.schedule(n.dispatch,this.delay,new u(t,this.destination)))}},{key:"_next",value:function(t){this.scheduleMessage(i.a.createNext(t))}},{key:"_error",value:function(t){this.scheduleMessage(i.a.createError(t)),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleMessage(i.a.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(t){var e=t.notification,n=t.destination;e.observe(n),this.unsubscribe()}}]),n}(r.a),u=function t(e,n){f(this,t),this.notification=e,this.destination=n}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return f}),n.d(e,"d",function(){return d});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return f}),n.d(e,"b",function(){return C}),n.d(e,"c",function(){return L}),n.d(e,"d",function(){return i}),n.d(e,"e",function(){return o}),n.d(e,"f",function(){return a}),n.d(e,"g",function(){return u}),n.d(e,"h",function(){return P}),n.d(e,"i",function(){return F}),n.d(e,"j",function(){return l}),n.d(e,"k",function(){return h}),n.d(e,"l",function(){return B}),n.d(e,"m",function(){return d}),n.d(e,"n",function(){return j}),n.d(e,"o",function(){return y}),n.d(e,"p",function(){return g}),n.d(e,"q",function(){return _}),n.d(e,"r",function(){return R}),n.d(e,"s",function(){return b}),n.d(e,"t",function(){return p}),n.d(e,"u",function(){return v}),n.d(e,"v",function(){return k}),n.d(e,"w",function(){return m}),n.d(e,"x",function(){return w}),n.d(e,"y",function(){return A}),n.d(e,"z",function(){return T}),n.d(e,"A",function(){return D}),n.d(e,"B",function(){return M}),n.d(e,"C",function(){return N}),n.d(e,"D",function(){return Q}),n.d(e,"E",function(){return W}),n.d(e,"F",function(){return I}),n.d(e,"G",function(){return q}),n.d(e,"H",function(){return H}),n.d(e,"I",function(){return z});var r=n("os0x"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var f=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())}function v(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function y(){return"object"==typeof self&&self.self===self}function g(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function m(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _(){return d().indexOf("Electron/")>=0}function b(){var t=d();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w(){return d().indexOf("MSAppHost/")>=0}function k(){return!1}var E=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,C.prototype.create),o}return Object(r.c)(e,t),e}(Error),C=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?O(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new E(i,a,r);return u},t}();function O(t,e){return t.replace(S,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var S=/\{\$([^}]+)}/g;function T(t){return JSON.parse(t)}function I(t){return JSON.stringify(t)}var x=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=T(c(o[0])||""),n=T(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},A=function(t){var e=x(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},j=function(t){var e=x(t).claims;return"object"==typeof e&&!0===e.admin};function P(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function N(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function R(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function D(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function M(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var L=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function F(t,e){var n=new V(t,e);return n.subscribe.bind(n)}var V=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=U),void 0===r.error&&(r.error=U),void 0===r.complete&&(r.complete=U);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function U(){}var q=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function B(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}function H(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(B(t,e,r)+"must be a valid function.")}function z(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(B(t,e,r)+"must be a valid context object.")}var W=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},Q=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t,r)).scheduler=t,i.work=r,i}return p(n,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e>0?h(w(n.prototype),"schedule",this).call(this,t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}},{key:"execute",value:function(t,e){return e>0||this.closed?h(w(n.prototype),"execute",this).call(this,t,e):this._execute(t,e)}},{key:"requestAsyncId",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==r&&r>0||null===r&&this.delay>0?h(w(n.prototype),"requestAsyncId",this).call(this,t,e,r):t.flush(this)}}]),n}(n("3N8a").a),i=new(function(t){v(n,t);var e=g(n);function n(){return f(this,n),e.apply(this,arguments)}return n}(n("IjjT").a))(r),o=i},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r,i,o=n("DH7j"),s=n("XoHu"),a=n("n6bG"),u=function(){function t(t){return Error.call(this),this.message=t?"".concat(t.length," errors occurred during unsubscription:\n").concat(t.map(function(t,e){return"".concat(e+1,") ").concat(t.toString())}).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),c=((i=function(){function t(e){f(this,t),this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return p(t,[{key:"unsubscribe",value:function(){var e;if(!this.closed){var n=this._parentOrParents,r=this._ctorUnsubscribe,i=this._unsubscribe,c=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(var h=0;h<n.length;++h)n[h].remove(this);if(Object(a.a)(i)){r&&(this._unsubscribe=void 0);try{i.call(this)}catch(v){e=v instanceof u?l(v.errors):[v]}}if(Object(o.a)(c))for(var f=-1,d=c.length;++f<d;){var p=c[f];if(Object(s.a)(p))try{p.unsubscribe()}catch(v){e=e||[],v instanceof u?e=e.concat(l(v.errors)):e.push(v)}}if(e)throw new u(e)}}},{key:"add",value:function(e){var n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof t){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n}},{key:"remove",value:function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}]),t}()).EMPTY=((r=new i).closed=!0,r),i);function l(t){return t.reduce(function(t,e){return t.concat(e instanceof u?e.errors:e)},[])}},spgP:function(t,e,s){"use strict";(function(t){s.d(e,"a",function(){return N}),s.d(e,"b",function(){return S}),s.d(e,"c",function(){return O}),s.d(e,"d",function(){return b}),s.d(e,"e",function(){return C}),s.d(e,"f",function(){return j}),s.d(e,"g",function(){return I}),s.d(e,"h",function(){return w}),s.d(e,"i",function(){return E}),s.d(e,"j",function(){return x});var u=s("qgXg"),c=s("D0XW"),l=s("vkgz"),h=s("tf+s"),d=s("pxpQ"),v=s("fXoL"),y=s("Jgta");function g(){}var m=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.b;f(this,t),this.zone=e,this.delegate=n}return p(t,[{key:"now",value:function(){return this.delegate.now()}},{key:"schedule",value:function(t,e,n){var r=this.zone;return this.delegate.schedule(function(e){var n=this;r.runGuarded(function(){t.apply(n,[e])})},e,n)}}]),t}(),_=function(){function t(e){f(this,t),this.zone=e,this.task=null}return p(t,[{key:"call",value:function(t,e){var n=this.unscheduleTask.bind(this);return this.task=this.zone.run(function(){return Zone.current.scheduleMacroTask("firebaseZoneBlock",g,{},g,g)}),e.pipe(Object(l.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}},{key:"unscheduleTask",value:function(){var t=this;setTimeout(function(){null!=t.task&&"scheduled"===t.task.state&&(t.task.invoke(),t.task=null)},10)}}]),t}(),b=function t(e){f(this,t),this.ngZone=e,this.outsideAngular=e.runOutsideAngular(function(){return new m(Zone.current)}),this.insideAngular=e.run(function(){return new m(Zone.current,c.b)})};function w(t){return function(e){return(e=e.lift(new _(t.ngZone))).pipe(Object(h.a)(t.outsideAngular),Object(d.b)(t.insideAngular))}}var k=["ngOnDestroy"],E=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Proxy(t,{get:function(o,s){return n.runOutsideAngular(function(){var o;if(t[s])return(null===(o=null==r?void 0:r.spy)||void 0===o?void 0:o.get)&&r.spy.get(s,t[s]),t[s];if(k.indexOf(s)>-1)return function(){};var a=e.toPromise().then(function(t){var e=t&&t[s];return"function"==typeof e?e.bind(t):e&&e.then?e.then(function(t){return n.run(function(){return t})}):n.run(function(){return e})});return new Proxy(function(){},{get:function(t,e){return a[e]},apply:function(t,e,n){return a.then(function(t){var e,o=t&&t.apply(void 0,i(n));return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(s,n,o),o})}})})}})},C=function(t,e){e.forEach(function(e){Object.getOwnPropertyNames(e.prototype||e).forEach(function(n){Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},O=new v.r("angularfire2.app.options"),S=new v.r("angularfire2.app.nameOrConfig"),T=new v.Q("6.1.4");function I(e,n,r){var i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";var o=y.a.apps.filter(function(t){return t&&t.name===i.name})[0]||n.runOutsideAngular(function(){return y.a.initializeApp(e,i)});try{JSON.stringify(e)!==JSON.stringify(o.options)&&A("error","".concat(o.name," Firebase App already initialized with different options").concat(t.hot?", you may need to reload as Firebase is not HMR aware.":"."))}catch(s){}return o}var x=function(){A("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},A=function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Object(v.X)()&&"undefined"!=typeof console&&(e=console)[t].apply(e,r)};function j(e,s,u,c,l){var h,f=globalThis.\u0275AngularfireInstanceCache.get(e)||[],d=r(h=f)||o(h)||a(h)||n(),p=d[0],v=d.slice(1);if(p){try{l.some(function(t,e){var n=v[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&A("error","".concat(s," was already initialized on the ").concat(u.name," Firebase App instance with different settings.").concat(t.hot?" You may need to reload as Firebase is not HMR aware.":""))}catch(g){}return p}var y=c();return globalThis.\u0275AngularfireInstanceCache.set(e,[y].concat(i(l))),y}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);var P={provide:function t(){f(this,t)},useFactory:I,deps:[O,v.A,[new v.B,S]]},N=function(){var t=function(){function t(e){f(this,t),y.a.registerVersion("angularfire",T.full,e.toString()),y.a.registerVersion("angular",v.P.full)}return p(t,null,[{key:"initializeApp",value:function(e,n){return{ngModule:t,providers:[{provide:O,useValue:e},{provide:S,useValue:n}]}}}]),t}();return t.\u0275mod=v.Kb({type:t}),t.\u0275inj=v.Jb({factory:function(e){return new(e||t)(v.Tb(v.C))},providers:[P]}),t}()}).call(this,s("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("7Hc7"),o=n("Y7HM"),s=function(t){v(n,t);var e=g(n);function n(t){var r,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.a;return f(this,n),(r=e.call(this)).source=t,r.delayTime=s,r.scheduler=a,(!Object(o.a)(s)||s<0)&&(r.delayTime=0),a&&"function"==typeof a.schedule||(r.scheduler=i.a),r}return p(n,[{key:"_subscribe",value:function(t){return this.scheduler.schedule(n.dispatch,this.delayTime,{source:this.source,subscriber:t})}}],[{key:"create",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.a;return new n(t,e,r)}},{key:"dispatch",value:function(t){var e=t.source,n=t.subscriber;return this.add(e.subscribe(n))}}]),n}(r.a);function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n.lift(new u(t,e))}}var u=function(){function t(e,n){f(this,t),this.scheduler=e,this.delay=n}return p(t,[{key:"call",value:function(t,e){return new s(e,this.delay,this.scheduler).subscribe(t)}}]),t}()},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}var a=function(){function t(e,n,r){f(this,t),this.nextOrObserver=e,this.error=n,this.complete=r}return p(t,[{key:"call",value:function(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}]),t}(),u=function(t){v(n,t);var e=g(n);function n(t,r,s,a){var u;return f(this,n),(u=e.call(this,t))._tapNext=i,u._tapError=i,u._tapComplete=i,u._tapError=s||i,u._tapComplete=a||i,Object(o.a)(r)?(u._context=_(u),u._tapNext=r):r&&(u._context=r,u._tapNext=r.next||i,u._tapError=r.error||i,u._tapComplete=r.complete||i),u}return p(n,[{key:"_next",value:function(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}},{key:"_error",value:function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}},{key:"_complete",value:function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}]),n}(r.a)},w1tV:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("EQ5u"),i=n("x+ZX"),o=n("XNiG");function s(){return new o.a}function a(){return function(t){return Object(i.a)()((e=s,function(t){var n;n="function"==typeof e?e:function(){return e};var i=Object.create(t,r.b);return i.source=t,i.subjectFactory=n,i})(t));var e}}},"x+ZX":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(){return function(t){return t.lift(new o(t))}}var o=function(){function t(e){f(this,t),this.connectable=e}return p(t,[{key:"call",value:function(t,e){var n=this.connectable;n._refCount++;var r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}]),t}(),s=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t)).connectable=r,i}return p(n,[{key:"_unsubscribe",value:function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null}}]),n}(r.a)},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},zIRd:function(t,e,n){"use strict";var r,i,o=n("os0x"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),d=new u.b("@firebase/app"),p=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.j)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){d.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();p.prototype.name&&p.prototype.options||p.prototype.delete||console.log("dc");var v=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name="[DEFAULT]");var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.h)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=f[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void d.warn(c.join(" "))}o(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.2.9",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||"[DEFAULT]",!Object(s.h)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return d.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.k)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(p);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.k)(e,t)},createSubscribe:s.i,ErrorFactory:s.b,deepExtend:s.k}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.o)()&&void 0!==self.firebase){d.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var g=self.firebase.SDK_VERSION;g&&g.indexOf("LITE")>=0&&d.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var m=v.initializeApp;v.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.u)()&&d.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),m.apply(void 0,t)};var _=v;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new y(t)},"PRIVATE")),t.registerVersion(h,"0.6.15",void 0),t.registerVersion("fire-js","")}(_),e.a=_},zUnb:function(n,r,o){"use strict";o.r(r);var a=o("fXoL"),u=null;function c(){return u}var l,d=new a.r("DocumentToken"),y=((l=function t(){f(this,t)}).\u0275fac=function(t){return new(t||l)},l.\u0275prov=Object(a.Ib)({factory:b,token:l,providedIn:"platform"}),l);function b(){return Object(a.Tb)(C)}var k,E=new a.r("Location Initialized"),C=((k=function(t){v(n,t);var e=g(n);function n(t){var r;return f(this,n),(r=e.call(this))._doc=t,r._init(),r}return p(n,[{key:"_init",value:function(){this.location=c().getLocation(),this._history=c().getHistory()}},{key:"getBaseHrefFromDOM",value:function(){return c().getBaseHref(this._doc)}},{key:"onPopState",value:function(t){c().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}},{key:"onHashChange",value:function(t){c().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}},{key:"href",get:function(){return this.location.href}},{key:"protocol",get:function(){return this.location.protocol}},{key:"hostname",get:function(){return this.location.hostname}},{key:"port",get:function(){return this.location.port}},{key:"pathname",get:function(){return this.location.pathname},set:function(t){this.location.pathname=t}},{key:"search",get:function(){return this.location.search}},{key:"hash",get:function(){return this.location.hash}},{key:"pushState",value:function(t,e,n){O()?this._history.pushState(t,e,n):this.location.hash=n}},{key:"replaceState",value:function(t,e,n){O()?this._history.replaceState(t,e,n):this.location.hash=n}},{key:"forward",value:function(){this._history.forward()}},{key:"back",value:function(){this._history.back()}},{key:"getState",value:function(){return this._history.state}}]),n}(y)).\u0275fac=function(t){return new(t||k)(a.Tb(d))},k.\u0275prov=Object(a.Ib)({factory:S,token:k,providedIn:"platform"}),k);function O(){return!!window.history.pushState}function S(){return new C(Object(a.Tb)(d))}function T(t,e){if(0==t.length)return e;if(0==e.length)return t;var n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function I(t){var e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function x(t){return t&&"?"!==t[0]?"?"+t:t}var A,j=((A=function t(){f(this,t)}).\u0275fac=function(t){return new(t||A)},A.\u0275prov=Object(a.Ib)({factory:P,token:A,providedIn:"root"}),A);function P(t){var e=Object(a.Tb)(d).location;return new L(Object(a.Tb)(y),e&&e.origin||"")}var N,R,D,M=new a.r("appBaseHref"),L=((D=function(t){v(n,t);var e=g(n);function n(t,r){var i;if(f(this,n),(i=e.call(this))._platformLocation=t,null==r&&(r=i._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return i._baseHref=r,m(i)}return p(n,[{key:"onPopState",value:function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"prepareExternalUrl",value:function(t){return T(this._baseHref,t)}},{key:"path",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._platformLocation.pathname+x(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?"".concat(e).concat(n):e}},{key:"pushState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+x(r));this._platformLocation.pushState(t,e,i)}},{key:"replaceState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+x(r));this._platformLocation.replaceState(t,e,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),n}(j)).\u0275fac=function(t){return new(t||D)(a.Tb(y),a.Tb(M,8))},D.\u0275prov=a.Ib({token:D,factory:D.\u0275fac}),D),F=((R=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this))._platformLocation=t,i._baseHref="",null!=r&&(i._baseHref=r),i}return p(n,[{key:"onPopState",value:function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"path",value:function(){var t=this._platformLocation.hash;return null==t&&(t="#"),t.length>0?t.substring(1):t}},{key:"prepareExternalUrl",value:function(t){var e=T(this._baseHref,t);return e.length>0?"#"+e:e}},{key:"pushState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+x(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}},{key:"replaceState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+x(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),n}(j)).\u0275fac=function(t){return new(t||R)(a.Tb(y),a.Tb(M,8))},R.\u0275prov=a.Ib({token:R,factory:R.\u0275fac}),R),V=((N=function(){function t(e,n){var r=this;f(this,t),this._subject=new a.n,this._urlChangeListeners=[],this._platformStrategy=e;var i=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=I(q(i)),this._platformStrategy.onPopState(function(t){r._subject.emit({url:r.path(!0),pop:!0,state:t.state,type:t.type})})}return p(t,[{key:"path",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.normalize(this._platformStrategy.path(t))}},{key:"getState",value:function(){return this._platformLocation.getState()}},{key:"isCurrentPathEqualTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.path()==this.normalize(t+x(e))}},{key:"normalize",value:function(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,q(e)))}},{key:"prepareExternalUrl",value:function(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}},{key:"go",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+x(e)),n)}},{key:"replaceState",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+x(e)),n)}},{key:"forward",value:function(){this._platformStrategy.forward()}},{key:"back",value:function(){this._platformStrategy.back()}},{key:"onUrlChange",value:function(t){var e=this;this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(function(t){e._notifyUrlChangeListeners(t.url,t.state)}))}},{key:"_notifyUrlChangeListeners",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;this._urlChangeListeners.forEach(function(n){return n(t,e)})}},{key:"subscribe",value:function(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}]),t}()).\u0275fac=function(t){return new(t||N)(a.Tb(j),a.Tb(y))},N.normalizeQueryParams=x,N.joinWithSlash=T,N.stripTrailingSlash=I,N.\u0275prov=Object(a.Ib)({factory:U,token:N,providedIn:"root"}),N);function U(){return new V(Object(a.Tb)(j),Object(a.Tb)(y))}function q(t){return t.replace(/\/index.html$/,"")}var B,H,z,W,Q=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),G=a.ob,K=function t(){f(this,t)},Y=((H=function(t){v(n,t);var e=g(n);function n(t){var r;return f(this,n),(r=e.call(this)).locale=t,r}return p(n,[{key:"getPluralCategory",value:function(t,e){switch(G(e||this.locale)(t)){case Q.Zero:return"zero";case Q.One:return"one";case Q.Two:return"two";case Q.Few:return"few";case Q.Many:return"many";default:return"other"}}}]),n}(K)).\u0275fac=function(t){return new(t||H)(a.Tb(a.v))},H.\u0275prov=a.Ib({token:H,factory:H.\u0275fac}),H),X=((B=function(){function t(e,n,r,i){f(this,t),this._iterableDiffers=e,this._keyValueDiffers=n,this._ngEl=r,this._renderer=i,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}return p(t,[{key:"klass",set:function(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}},{key:"ngClass",set:function(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Object(a.rb)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}},{key:"ngDoCheck",value:function(){if(this._iterableDiffer){var t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){var e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}},{key:"_applyKeyValueChanges",value:function(t){var e=this;t.forEachAddedItem(function(t){return e._toggleClass(t.key,t.currentValue)}),t.forEachChangedItem(function(t){return e._toggleClass(t.key,t.currentValue)}),t.forEachRemovedItem(function(t){t.previousValue&&e._toggleClass(t.key,!1)})}},{key:"_applyIterableChanges",value:function(t){var e=this;t.forEachAddedItem(function(t){if("string"!=typeof t.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got ".concat(Object(a.xb)(t.item)));e._toggleClass(t.item,!0)}),t.forEachRemovedItem(function(t){return e._toggleClass(t.item,!1)})}},{key:"_applyClasses",value:function(t){var e=this;t&&(Array.isArray(t)||t instanceof Set?t.forEach(function(t){return e._toggleClass(t,!0)}):Object.keys(t).forEach(function(n){return e._toggleClass(n,!!t[n])}))}},{key:"_removeClasses",value:function(t){var e=this;t&&(Array.isArray(t)||t instanceof Set?t.forEach(function(t){return e._toggleClass(t,!1)}):Object.keys(t).forEach(function(t){return e._toggleClass(t,!1)}))}},{key:"_toggleClass",value:function(t,e){var n=this;(t=t.trim())&&t.split(/\s+/g).forEach(function(t){e?n._renderer.addClass(n._ngEl.nativeElement,t):n._renderer.removeClass(n._ngEl.nativeElement,t)})}}]),t}()).\u0275fac=function(t){return new(t||B)(a.Mb(a.t),a.Mb(a.u),a.Mb(a.l),a.Mb(a.F))},B.\u0275dir=a.Hb({type:B,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),B),Z=function(){function t(e,n,r,i){f(this,t),this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}return p(t,[{key:"first",get:function(){return 0===this.index}},{key:"last",get:function(){return this.index===this.count-1}},{key:"even",get:function(){return this.index%2==0}},{key:"odd",get:function(){return!this.even}}]),t}(),J=((z=function(){function t(e,n,r){f(this,t),this._viewContainer=e,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}return p(t,[{key:"ngForOf",set:function(t){this._ngForOf=t,this._ngForOfDirty=!0}},{key:"ngForTrackBy",get:function(){return this._trackByFn},set:function(t){this._trackByFn=t}},{key:"ngForTemplate",set:function(t){t&&(this._template=t)}},{key:"ngDoCheck",value:function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error("Cannot find a differ supporting object '".concat(t,"' of type '").concat((e=t).name||typeof e,"'. NgFor only supports binding to Iterables such as Arrays."))}}var e;if(this._differ){var n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}},{key:"_applyChanges",value:function(t){var e=this,n=[];t.forEachOperation(function(t,r,i){if(null==t.previousIndex){var o=e._viewContainer.createEmbeddedView(e._template,new Z(null,e._ngForOf,-1,-1),null===i?void 0:i),s=new $(t,o);n.push(s)}else if(null==i)e._viewContainer.remove(null===r?void 0:r);else if(null!==r){var a=e._viewContainer.get(r);e._viewContainer.move(a,i);var u=new $(t,a);n.push(u)}});for(var r=0;r<n.length;r++)this._perViewChange(n[r].view,n[r].record);for(var i=0,o=this._viewContainer.length;i<o;i++){var s=this._viewContainer.get(i);s.context.index=i,s.context.count=o,s.context.ngForOf=this._ngForOf}t.forEachIdentityChange(function(t){e._viewContainer.get(t.currentIndex).context.$implicit=t.item})}},{key:"_perViewChange",value:function(t,e){t.context.$implicit=e.item}}],[{key:"ngTemplateContextGuard",value:function(t,e){return!0}}]),t}()).\u0275fac=function(t){return new(t||z)(a.Mb(a.R),a.Mb(a.M),a.Mb(a.t))},z.\u0275dir=a.Hb({type:z,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),z),$=function t(e,n){f(this,t),this.record=e,this.view=n},tt=((W=function(){function t(e,n){f(this,t),this._viewContainer=e,this._context=new et,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}return p(t,[{key:"ngIf",set:function(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}},{key:"ngIfThen",set:function(t){nt("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}},{key:"ngIfElse",set:function(t){nt("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}},{key:"_updateView",value:function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}}],[{key:"ngTemplateContextGuard",value:function(t,e){return!0}}]),t}()).\u0275fac=function(t){return new(t||W)(a.Mb(a.R),a.Mb(a.M))},W.\u0275dir=a.Hb({type:W,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),W),et=function t(){f(this,t),this.$implicit=null,this.ngIf=null};function nt(t,e){if(e&&!e.createEmbeddedView)throw new Error("".concat(t," must be a TemplateRef, but received '").concat(Object(a.xb)(e),"'."))}var rt,it=((rt=function t(){f(this,t)}).\u0275mod=a.Kb({type:rt}),rt.\u0275inj=a.Jb({factory:function(t){return new(t||rt)},providers:[{provide:K,useClass:Y}]}),rt);function ot(t){return"server"===t}var st,at=((st=function t(){f(this,t)}).\u0275prov=Object(a.Ib)({token:st,providedIn:"root",factory:function(){return new ut(Object(a.Tb)(d),window)}}),st),ut=function(){function t(e,n){f(this,t),this.document=e,this.window=n,this.offset=function(){return[0,0]}}return p(t,[{key:"setOffset",value:function(t){this.offset=Array.isArray(t)?function(){return t}:t}},{key:"getScrollPosition",value:function(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}},{key:"scrollToPosition",value:function(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}},{key:"scrollToAnchor",value:function(t){var e;if(this.supportsScrolling()){var n=null!==(e=this.document.getElementById(t))&&void 0!==e?e:this.document.getElementsByName(t)[0];void 0!==n&&(this.scrollToElement(n),this.attemptFocus(n))}}},{key:"setHistoryScrollRestoration",value:function(t){if(this.supportScrollRestoration()){var e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}},{key:"scrollToElement",value:function(t){var e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}},{key:"attemptFocus",value:function(t){return t.focus(),this.document.activeElement===t}},{key:"supportScrollRestoration",value:function(){try{if(!this.supportsScrolling())return!1;var t=ct(this.window.history)||ct(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(e){return!1}}},{key:"supportsScrolling",value:function(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}]),t}();function ct(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}var lt,ht,ft,dt,pt=function(t){v(r,t);var n=g(r);function r(){return f(this,r),n.apply(this,arguments)}return p(r,[{key:"getProperty",value:function(t,e){return t[e]}},{key:"log",value:function(t){window.console&&window.console.log&&window.console.log(t)}},{key:"logGroup",value:function(t){window.console&&window.console.group&&window.console.group(t)}},{key:"logGroupEnd",value:function(){window.console&&window.console.groupEnd&&window.console.groupEnd()}},{key:"onAndCancel",value:function(t,e,n){return t.addEventListener(e,n,!1),function(){t.removeEventListener(e,n,!1)}}},{key:"dispatchEvent",value:function(t,e){t.dispatchEvent(e)}},{key:"remove",value:function(t){return t.parentNode&&t.parentNode.removeChild(t),t}},{key:"getValue",value:function(t){return t.value}},{key:"createElement",value:function(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"isElementNode",value:function(t){return t.nodeType===Node.ELEMENT_NODE}},{key:"isShadowRoot",value:function(t){return t instanceof DocumentFragment}},{key:"getGlobalEventTarget",value:function(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}},{key:"getHistory",value:function(){return window.history}},{key:"getLocation",value:function(){return window.location}},{key:"getBaseHref",value:function(t){var e,n=vt||(vt=document.querySelector("base"))?vt.getAttribute("href"):null;return null==n?null:(e=n,lt||(lt=document.createElement("a")),lt.setAttribute("href",e),"/"===lt.pathname.charAt(0)?lt.pathname:"/"+lt.pathname)}},{key:"resetBaseElement",value:function(){vt=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"performanceNow",value:function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}},{key:"supportsCookies",value:function(){return!0}},{key:"getCookie",value:function(t){return function(t,n){n=encodeURIComponent(n);var r,i=s(t.split(";"));try{for(i.s();!(r=i.n()).done;){var o=r.value,a=o.indexOf("="),u=e(-1==a?[o,""]:[o.slice(0,a),o.slice(a+1)],2),c=u[0],l=u[1];if(c.trim()===n)return decodeURIComponent(l)}}catch(h){i.e(h)}finally{i.f()}return null}(document.cookie,t)}}],[{key:"makeCurrent",value:function(){var t;t=new r,u||(u=t)}}]),r}(function(t){v(n,t);var e=g(n);function n(){return f(this,n),e.call(this)}return p(n,[{key:"supportsDOMEvents",value:function(){return!0}}]),n}(function(){return function t(){f(this,t)}}())),vt=null,yt=new a.r("TRANSITION_ID"),gt=[{provide:a.d,useFactory:function(t,e,n){return function(){n.get(a.e).donePromise.then(function(){var n=c();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(function(e){return e.getAttribute("ng-transition")===t}).forEach(function(t){return n.remove(t)})})}},deps:[yt,d,a.s],multi:!0}],mt=function(){function t(){f(this,t)}return p(t,[{key:"addToWindow",value:function(t){a.qb.getAngularTestability=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},a.qb.getAllAngularTestabilities=function(){return t.getAllTestabilities()},a.qb.getAllAngularRootElements=function(){return t.getAllRootElements()},a.qb.frameworkStabilizers||(a.qb.frameworkStabilizers=[]),a.qb.frameworkStabilizers.push(function(t){var e=a.qb.getAllAngularTestabilities(),n=e.length,r=!1,i=function(e){r=r||e,0==--n&&t(r)};e.forEach(function(t){t.whenStable(i)})})}},{key:"findTestabilityInTree",value:function(t,e,n){if(null==e)return null;var r=t.getTestability(e);return null!=r?r:n?c().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}],[{key:"init",value:function(){Object(a.Z)(new t)}}]),t}(),_t=new a.r("EventManagerPlugins"),bt=((ht=function(){function t(e,n){var r=this;f(this,t),this._zone=n,this._eventNameToPlugin=new Map,e.forEach(function(t){return t.manager=r}),this._plugins=e.slice().reverse()}return p(t,[{key:"addEventListener",value:function(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}},{key:"addGlobalEventListener",value:function(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(t){var e=this._eventNameToPlugin.get(t);if(e)return e;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(t))return this._eventNameToPlugin.set(t,i),i}throw new Error("No event manager plugin found for event ".concat(t))}}]),t}()).\u0275fac=function(t){return new(t||ht)(a.Tb(_t),a.Tb(a.A))},ht.\u0275prov=a.Ib({token:ht,factory:ht.\u0275fac}),ht),wt=function(){function t(e){f(this,t),this._doc=e}return p(t,[{key:"addGlobalEventListener",value:function(t,e,n){var r=c().getGlobalEventTarget(this._doc,t);if(!r)throw new Error("Unsupported event target ".concat(r," for event ").concat(e));return this.addEventListener(r,e,n)}}]),t}(),kt=((dt=function(){function t(){f(this,t),this._stylesSet=new Set}return p(t,[{key:"addStyles",value:function(t){var e=this,n=new Set;t.forEach(function(t){e._stylesSet.has(t)||(e._stylesSet.add(t),n.add(t))}),this.onStylesAdded(n)}},{key:"onStylesAdded",value:function(t){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),t}()).\u0275fac=function(t){return new(t||dt)},dt.\u0275prov=a.Ib({token:dt,factory:dt.\u0275fac}),dt),Et=((ft=function(t){v(n,t);var e=g(n);function n(t){var r;return f(this,n),(r=e.call(this))._doc=t,r._hostNodes=new Set,r._styleNodes=new Set,r._hostNodes.add(t.head),r}return p(n,[{key:"_addStylesToHost",value:function(t,e){var n=this;t.forEach(function(t){var r=n._doc.createElement("style");r.textContent=t,n._styleNodes.add(e.appendChild(r))})}},{key:"addHost",value:function(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}},{key:"removeHost",value:function(t){this._hostNodes.delete(t)}},{key:"onStylesAdded",value:function(t){var e=this;this._hostNodes.forEach(function(n){return e._addStylesToHost(t,n)})}},{key:"ngOnDestroy",value:function(){this._styleNodes.forEach(function(t){return c().remove(t)})}}]),n}(kt)).\u0275fac=function(t){return new(t||ft)(a.Tb(d))},ft.\u0275prov=a.Ib({token:ft,factory:ft.\u0275fac}),ft),Ct={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ot=/%COMP%/g;function St(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];Array.isArray(i)?St(t,i,n):(i=i.replace(Ot,t),n.push(i))}return n}function Tt(t){return function(e){if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}var It,xt,At,jt,Pt=((It=function(){function t(e,n,r){f(this,t),this.eventManager=e,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Nt(e)}return p(t,[{key:"createRenderer",value:function(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case a.S.Emulated:var n=this.rendererByCompId.get(e.id);return n||(n=new Rt(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n;case 1:case a.S.ShadowDom:return new Dt(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){var r=St(e.id,e.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||It)(a.Tb(bt),a.Tb(Et),a.Tb(a.c))},It.\u0275prov=a.Ib({token:It,factory:It.\u0275fac}),It),Nt=function(){function t(e){f(this,t),this.eventManager=e,this.data=Object.create(null)}return p(t,[{key:"destroy",value:function(){}},{key:"createElement",value:function(t,e){return e?document.createElementNS(Ct[e]||e,t):document.createElement(t)}},{key:"createComment",value:function(t){return document.createComment(t)}},{key:"createText",value:function(t){return document.createTextNode(t)}},{key:"appendChild",value:function(t,e){t.appendChild(e)}},{key:"insertBefore",value:function(t,e,n){t&&t.insertBefore(e,n)}},{key:"removeChild",value:function(t,e){t&&t.removeChild(e)}},{key:"selectRootElement",value:function(t,e){var n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error('The selector "'.concat(t,'" did not match any elements'));return e||(n.textContent=""),n}},{key:"parentNode",value:function(t){return t.parentNode}},{key:"nextSibling",value:function(t){return t.nextSibling}},{key:"setAttribute",value:function(t,e,n,r){if(r){e=r+":"+e;var i=Ct[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}},{key:"removeAttribute",value:function(t,e,n){if(n){var r=Ct[n];r?t.removeAttributeNS(r,e):t.removeAttribute("".concat(n,":").concat(e))}else t.removeAttribute(e)}},{key:"addClass",value:function(t,e){t.classList.add(e)}},{key:"removeClass",value:function(t,e){t.classList.remove(e)}},{key:"setStyle",value:function(t,e,n,r){r&(a.H.DashCase|a.H.Important)?t.style.setProperty(e,n,r&a.H.Important?"important":""):t.style[e]=n}},{key:"removeStyle",value:function(t,e,n){n&a.H.DashCase?t.style.removeProperty(e):t.style[e]=""}},{key:"setProperty",value:function(t,e,n){t[e]=n}},{key:"setValue",value:function(t,e){t.nodeValue=e}},{key:"listen",value:function(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Tt(n)):this.eventManager.addEventListener(t,e,Tt(n))}}]),t}(),Rt=function(t){v(n,t);var e=g(n);function n(t,r,i,o){var s;f(this,n),(s=e.call(this,t)).component=i;var a=St(o+"-"+i.id,i.styles,[]);return r.addStyles(a),s.contentAttr="_ngcontent-%COMP%".replace(Ot,o+"-"+i.id),s.hostAttr="_nghost-%COMP%".replace(Ot,o+"-"+i.id),s}return p(n,[{key:"applyToHost",value:function(t){h(w(n.prototype),"setAttribute",this).call(this,t,this.hostAttr,"")}},{key:"createElement",value:function(t,e){var r=h(w(n.prototype),"createElement",this).call(this,t,e);return h(w(n.prototype),"setAttribute",this).call(this,r,this.contentAttr,""),r}}]),n}(Nt),Dt=function(t){v(n,t);var e=g(n);function n(t,r,i,o){var s;f(this,n),(s=e.call(this,t)).sharedStylesHost=r,s.hostEl=i,s.shadowRoot=i.attachShadow({mode:"open"}),s.sharedStylesHost.addHost(s.shadowRoot);for(var a=St(o.id,o.styles,[]),u=0;u<a.length;u++){var c=document.createElement("style");c.textContent=a[u],s.shadowRoot.appendChild(c)}return s}return p(n,[{key:"nodeOrShadowRoot",value:function(t){return t===this.hostEl?this.shadowRoot:t}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(t,e){return h(w(n.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(t),e)}},{key:"insertBefore",value:function(t,e,r){return h(w(n.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(t),e,r)}},{key:"removeChild",value:function(t,e){return h(w(n.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(t),e)}},{key:"parentNode",value:function(t){return this.nodeOrShadowRoot(h(w(n.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(t)))}}]),n}(Nt),Mt=((xt=function(t){v(n,t);var e=g(n);function n(t){return f(this,n),e.call(this,t)}return p(n,[{key:"supports",value:function(t){return!0}},{key:"addEventListener",value:function(t,e,n){var r=this;return t.addEventListener(e,n,!1),function(){return r.removeEventListener(t,e,n)}}},{key:"removeEventListener",value:function(t,e,n){return t.removeEventListener(e,n)}}]),n}(wt)).\u0275fac=function(t){return new(t||xt)(a.Tb(d))},xt.\u0275prov=a.Ib({token:xt,factory:xt.\u0275fac}),xt),Lt=["alt","control","meta","shift"],Ft={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Vt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ut={alt:function(t){return t.altKey},control:function(t){return t.ctrlKey},meta:function(t){return t.metaKey},shift:function(t){return t.shiftKey}},qt=((At=function(t){v(n,t);var e=g(n);function n(t){return f(this,n),e.call(this,t)}return p(n,[{key:"supports",value:function(t){return null!=n.parseEventName(t)}},{key:"addEventListener",value:function(t,e,r){var i=n.parseEventName(e),o=n.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return c().onAndCancel(t,i.domEventName,o)})}}],[{key:"parseEventName",value:function(t){var e=t.toLowerCase().split("."),r=e.shift();if(0===e.length||"keydown"!==r&&"keyup"!==r)return null;var i=n._normalizeKey(e.pop()),o="";if(Lt.forEach(function(t){var n=e.indexOf(t);n>-1&&(e.splice(n,1),o+=t+".")}),o+=i,0!=e.length||0===i.length)return null;var s={};return s.domEventName=r,s.fullKey=o,s}},{key:"getEventFullKey",value:function(t){var e="",n=function(t){var e=t.key;if(null==e){if(null==(e=t.keyIdentifier))return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Vt.hasOwnProperty(e)&&(e=Vt[e]))}return Ft[e]||e}(t);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),Lt.forEach(function(r){r!=n&&(0,Ut[r])(t)&&(e+=r+".")}),e+=n}},{key:"eventCallback",value:function(t,e,r){return function(i){n.getEventFullKey(i)===t&&r.runGuarded(function(){return e(i)})}}},{key:"_normalizeKey",value:function(t){switch(t){case"esc":return"escape";default:return t}}}]),n}(wt)).\u0275fac=function(t){return new(t||At)(a.Tb(d))},At.\u0275prov=a.Ib({token:At,factory:At.\u0275fac}),At),Bt=[{provide:a.C,useValue:"browser"},{provide:a.D,useValue:function(){pt.makeCurrent(),mt.init()},multi:!0},{provide:d,useFactory:function(){return Object(a.wb)(document),document},deps:[]}],Ht=Object(a.T)(a.Y,"browser",Bt),zt=[[],{provide:a.bb,useValue:"root"},{provide:a.m,useFactory:function(){return new a.m},deps:[]},{provide:_t,useClass:Mt,multi:!0,deps:[d,a.A,a.C]},{provide:_t,useClass:qt,multi:!0,deps:[d]},[],{provide:Pt,useClass:Pt,deps:[bt,Et,a.c]},{provide:a.G,useExisting:Pt},{provide:kt,useExisting:Et},{provide:Et,useClass:Et,deps:[d]},{provide:a.N,useClass:a.N,deps:[a.A]},{provide:bt,useClass:bt,deps:[_t,a.A]},[]],Wt=((jt=function(){function t(e){if(f(this,t),e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return p(t,null,[{key:"withServerTransition",value:function(e){return{ngModule:t,providers:[{provide:a.c,useValue:e.appId},{provide:yt,useExisting:a.c},gt]}}}]),t}()).\u0275mod=a.Kb({type:jt}),jt.\u0275inj=a.Jb({factory:function(t){return new(t||jt)(a.Tb(jt,12))},providers:zt,imports:[it,a.f]}),jt);"undefined"!=typeof window&&window;var Qt=o("XNiG"),Gt=o("quSY"),Kt=o("LRne");function Yt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.length?n.some(function(e){return t[e]}):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}var Xt=o("vkgz"),Zt=o("7o/Q"),Jt=o("D0XW"),$t=function(){function t(e,n){f(this,t),this.dueTime=e,this.scheduler=n}return p(t,[{key:"call",value:function(t,e){return e.subscribe(new te(t,this.dueTime,this.scheduler))}}]),t}(),te=function(t){v(n,t);var e=g(n);function n(t,r,i){var o;return f(this,n),(o=e.call(this,t)).dueTime=r,o.scheduler=i,o.debouncedSubscription=null,o.lastValue=null,o.hasValue=!1,o}return p(n,[{key:"_next",value:function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(ee,this.dueTime,this))}},{key:"_complete",value:function(){this.debouncedNext(),this.destination.complete()}},{key:"debouncedNext",value:function(){if(this.clearDebounce(),this.hasValue){var t=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}},{key:"clearDebounce",value:function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}]),n}(Zt.a);function ee(t){t.debouncedNext()}function ne(t,e){return function(n){return n.lift(new re(t,e))}}var re=function(){function t(e,n){f(this,t),this.predicate=e,this.thisArg=n}return p(t,[{key:"call",value:function(t,e){return e.subscribe(new ie(t,this.predicate,this.thisArg))}}]),t}(),ie=function(t){v(n,t);var e=g(n);function n(t,r,i){var o;return f(this,n),(o=e.call(this,t)).predicate=r,o.thisArg=i,o.count=0,o}return p(n,[{key:"_next",value:function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}]),n}(Zt.a),oe=o("lJxs"),se=function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t}(),ae=o("EY2u");function ue(t){return function(e){return 0===t?Object(ae.b)():e.lift(new le(t))}}var ce,le=function(){function t(e){if(f(this,t),this.total=e,this.total<0)throw new se}return p(t,[{key:"call",value:function(t,e){return e.subscribe(new he(t,this.total))}}]),t}(),he=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t)).total=r,i.count=0,i}return p(n,[{key:"_next",value:function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}]),n}(Zt.a);function fe(t){return null!=t&&"false"!="".concat(t)}function de(t){return Array.isArray(t)?t:[t]}function pe(t){return null==t?"":"string"==typeof t?t:"".concat(t,"px")}function ve(t){return t instanceof a.l?t.nativeElement:t}try{ce="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(gT){ce=!1}var ye,ge,me,_e,be,we=((be=function t(e){f(this,t),this._platformId=e,this.isBrowser=this._platformId?"browser"===this._platformId:"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!ce)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}).\u0275fac=function(t){return new(t||be)(a.Tb(a.C))},be.\u0275prov=Object(a.Ib)({factory:function(){return new be(Object(a.Tb)(a.C))},token:be,providedIn:"root"}),be),ke=((_e=function t(){f(this,t)}).\u0275mod=a.Kb({type:_e}),_e.\u0275inj=a.Jb({factory:function(t){return new(t||_e)}}),_e);function Ee(t){return function(){if(null==ye&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){return ye=!0}}))}finally{ye=ye||!1}return ye}()?t:!!t.capture}var Ce=o("HDdC"),Oe=function(t){v(n,t);var e=g(n);function n(){var t;return f(this,n),(t=e.apply(this,arguments))._origin="program",t}return p(n,[{key:"setFocusOrigin",value:function(t){return this._origin=t,this}},{key:"setActiveItem",value:function(t){h(w(n.prototype),"setActiveItem",this).call(this,t),this.activeItem&&this.activeItem.focus(this._origin)}}]),n}(function(){function t(e){var n=this;f(this,t),this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Qt.a,this._typeaheadSubscription=Gt.a.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=function(t){return t.disabled},this._pressedLetters=[],this.tabOut=new Qt.a,this.change=new Qt.a,e instanceof a.E&&e.changes.subscribe(function(t){if(n._activeItem){var e=t.toArray().indexOf(n._activeItem);e>-1&&e!==n._activeItemIndex&&(n._activeItemIndex=e)}})}return p(t,[{key:"skipPredicate",value:function(t){return this._skipPredicateFn=t,this}},{key:"withWrap",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._wrap=t,this}},{key:"withVerticalOrientation",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._vertical=t,this}},{key:"withHorizontalOrientation",value:function(t){return this._horizontal=t,this}},{key:"withAllowedModifierKeys",value:function(t){return this._allowedModifierKeys=t,this}},{key:"withTypeAhead",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200;return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(Object(Xt.a)(function(e){return t._pressedLetters.push(e)}),function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jt.a;return function(n){return n.lift(new $t(t,e))}}(e),ne(function(){return t._pressedLetters.length>0}),Object(oe.a)(function(){return t._pressedLetters.join("")})).subscribe(function(e){for(var n=t._getItemsArray(),r=1;r<n.length+1;r++){var i=(t._activeItemIndex+r)%n.length,o=n[i];if(!t._skipPredicateFn(o)&&0===o.getLabel().toUpperCase().trim().indexOf(e)){t.setActiveItem(i);break}}t._pressedLetters=[]}),this}},{key:"withHomeAndEnd",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._homeAndEnd=t,this}},{key:"setActiveItem",value:function(t){var e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}},{key:"onKeydown",value:function(t){var e=this,n=t.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(function(n){return!t[n]||e._allowedModifierKeys.indexOf(n)>-1});switch(n){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;default:return void((r||Yt(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(n>=65&&n<=90||n>=48&&n<=57)&&this._letterKeyStream.next(String.fromCharCode(n))))}this._pressedLetters=[],t.preventDefault()}},{key:"activeItemIndex",get:function(){return this._activeItemIndex}},{key:"activeItem",get:function(){return this._activeItem}},{key:"isTyping",value:function(){return this._pressedLetters.length>0}},{key:"setFirstItemActive",value:function(){this._setActiveItemByIndex(0,1)}},{key:"setLastItemActive",value:function(){this._setActiveItemByIndex(this._items.length-1,-1)}},{key:"setNextItemActive",value:function(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}},{key:"setPreviousItemActive",value:function(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}},{key:"updateActiveItem",value:function(t){var e=this._getItemsArray(),n="number"==typeof t?t:e.indexOf(t),r=e[n];this._activeItem=null==r?null:r,this._activeItemIndex=n}},{key:"_setActiveItemByDelta",value:function(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}},{key:"_setActiveInWrapMode",value:function(t){for(var e=this._getItemsArray(),n=1;n<=e.length;n++){var r=(this._activeItemIndex+t*n+e.length)%e.length;if(!this._skipPredicateFn(e[r]))return void this.setActiveItem(r)}}},{key:"_setActiveInDefaultMode",value:function(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}},{key:"_setActiveItemByIndex",value:function(t,e){var n=this._getItemsArray();if(n[t]){for(;this._skipPredicateFn(n[t]);)if(!n[t+=e])return;this.setActiveItem(t)}}},{key:"_getItemsArray",value:function(){return this._items instanceof a.E?this._items.toArray():this._items}}]),t}());function Se(t){return 0===t.buttons}"undefined"!=typeof Element&&Element;var Te,Ie=new a.r("cdk-focus-monitor-default-options"),xe=Ee({passive:!0,capture:!0}),Ae=((Te=function(){function t(e,n,r,i){var o=this;f(this,t),this._ngZone=e,this._platform=n,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._documentKeydownListener=function(){o._lastTouchTarget=null,o._setOriginForCurrentEventQueue("keyboard")},this._documentMousedownListener=function(t){if(!o._lastTouchTarget){var e=Se(t)?"keyboard":"mouse";o._setOriginForCurrentEventQueue(e)}},this._documentTouchstartListener=function(t){null!=o._touchTimeoutId&&clearTimeout(o._touchTimeoutId),o._lastTouchTarget=je(t),o._touchTimeoutId=setTimeout(function(){return o._lastTouchTarget=null},650)},this._windowFocusListener=function(){o._windowFocused=!0,o._windowFocusTimeoutId=setTimeout(function(){return o._windowFocused=!1})},this._rootNodeFocusAndBlurListener=function(t){for(var e=je(t),n="focus"===t.type?o._onFocus:o._onBlur,r=e;r;r=r.parentElement)n.call(o,t,r)},this._document=r,this._detectionMode=(null==i?void 0:i.detectionMode)||0}return p(t,[{key:"monitor",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=ve(t);if(!this._platform.isBrowser||1!==n.nodeType)return Object(Kt.a)(null);var r=function(t){if(function(){if(null==me){var t="undefined"!=typeof document?document.head:null;me=!(!t||!t.createShadowRoot&&!t.attachShadow)}return me}()){var e=t.getRootNode?t.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(n)||this._getDocument(),i=this._elementInfo.get(n);if(i)return e&&(i.checkChildren=!0),i.subject;var o={checkChildren:e,subject:new Qt.a,rootNode:r};return this._elementInfo.set(n,o),this._registerGlobalListeners(o),o.subject}},{key:"stopMonitoring",value:function(t){var e=ve(t),n=this._elementInfo.get(e);n&&(n.subject.complete(),this._setClasses(e),this._elementInfo.delete(e),this._removeGlobalListeners(n))}},{key:"focusVia",value:function(t,n,r){var i=this,o=ve(t);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(function(t){var r=e(t,2),o=r[0],s=r[1];return i._originChanged(o,n,s)}):(this._setOriginForCurrentEventQueue(n),"function"==typeof o.focus&&o.focus(r))}},{key:"ngOnDestroy",value:function(){var t=this;this._elementInfo.forEach(function(e,n){return t.stopMonitoring(n)})}},{key:"_getDocument",value:function(){return this._document||document}},{key:"_getWindow",value:function(){return this._getDocument().defaultView||window}},{key:"_toggleClass",value:function(t,e,n){n?t.classList.add(e):t.classList.remove(e)}},{key:"_getFocusOrigin",value:function(t){return this._origin?this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(t)?"touch":"program"}},{key:"_setClasses",value:function(t,e){this._toggleClass(t,"cdk-focused",!!e),this._toggleClass(t,"cdk-touch-focused","touch"===e),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===e),this._toggleClass(t,"cdk-mouse-focused","mouse"===e),this._toggleClass(t,"cdk-program-focused","program"===e)}},{key:"_setOriginForCurrentEventQueue",value:function(t){var e=this;this._ngZone.runOutsideAngular(function(){e._origin=t,0===e._detectionMode&&(e._originTimeoutId=setTimeout(function(){return e._origin=null},1))})}},{key:"_wasCausedByTouch",value:function(t){var e=je(t);return this._lastTouchTarget instanceof Node&&e instanceof Node&&(e===this._lastTouchTarget||e.contains(this._lastTouchTarget))}},{key:"_onFocus",value:function(t,e){var n=this._elementInfo.get(e);n&&(n.checkChildren||e===je(t))&&this._originChanged(e,this._getFocusOrigin(t),n)}},{key:"_onBlur",value:function(t,e){var n=this._elementInfo.get(e);!n||n.checkChildren&&t.relatedTarget instanceof Node&&e.contains(t.relatedTarget)||(this._setClasses(e),this._emitOrigin(n.subject,null))}},{key:"_emitOrigin",value:function(t,e){this._ngZone.run(function(){return t.next(e)})}},{key:"_registerGlobalListeners",value:function(t){var e=this;if(this._platform.isBrowser){var n=t.rootNode,r=this._rootNodeFocusListenerCount.get(n)||0;r||this._ngZone.runOutsideAngular(function(){n.addEventListener("focus",e._rootNodeFocusAndBlurListener,xe),n.addEventListener("blur",e._rootNodeFocusAndBlurListener,xe)}),this._rootNodeFocusListenerCount.set(n,r+1),1==++this._monitoredElementCount&&this._ngZone.runOutsideAngular(function(){var t=e._getDocument(),n=e._getWindow();t.addEventListener("keydown",e._documentKeydownListener,xe),t.addEventListener("mousedown",e._documentMousedownListener,xe),t.addEventListener("touchstart",e._documentTouchstartListener,xe),n.addEventListener("focus",e._windowFocusListener)})}}},{key:"_removeGlobalListeners",value:function(t){var e=t.rootNode;if(this._rootNodeFocusListenerCount.has(e)){var n=this._rootNodeFocusListenerCount.get(e);n>1?this._rootNodeFocusListenerCount.set(e,n-1):(e.removeEventListener("focus",this._rootNodeFocusAndBlurListener,xe),e.removeEventListener("blur",this._rootNodeFocusAndBlurListener,xe),this._rootNodeFocusListenerCount.delete(e))}if(!--this._monitoredElementCount){var r=this._getDocument(),i=this._getWindow();r.removeEventListener("keydown",this._documentKeydownListener,xe),r.removeEventListener("mousedown",this._documentMousedownListener,xe),r.removeEventListener("touchstart",this._documentTouchstartListener,xe),i.removeEventListener("focus",this._windowFocusListener),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._touchTimeoutId),clearTimeout(this._originTimeoutId)}}},{key:"_originChanged",value:function(t,e,n){this._setClasses(t,e),this._emitOrigin(n.subject,e),this._lastFocusOrigin=e}},{key:"_getClosestElementsInfo",value:function(t){var e=[];return this._elementInfo.forEach(function(n,r){(r===t||n.checkChildren&&r.contains(t))&&e.push([r,n])}),e}}]),t}()).\u0275fac=function(t){return new(t||Te)(a.Tb(a.A),a.Tb(we),a.Tb(d,8),a.Tb(Ie,8))},Te.\u0275prov=Object(a.Ib)({factory:function(){return new Te(Object(a.Tb)(a.A),Object(a.Tb)(we),Object(a.Tb)(d,8),Object(a.Tb)(Ie,8))},token:Te,providedIn:"root"}),Te);function je(t){return t.composedPath?t.composedPath()[0]:t.target}var Pe,Ne,Re,De=((Pe=function(){function t(e,n){f(this,t),this._platform=e,this._document=n}return p(t,[{key:"getHighContrastMode",value:function(){if(!this._platform.isBrowser)return 0;var t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);var e=this._document.defaultView||window,n=e&&e.getComputedStyle?e.getComputedStyle(t):null,r=(n&&n.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),r){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}},{key:"_applyBodyHighContrastModeCssClasses",value:function(){if(this._platform.isBrowser&&this._document.body){var t=this._document.body.classList;t.remove("cdk-high-contrast-active"),t.remove("cdk-high-contrast-black-on-white"),t.remove("cdk-high-contrast-white-on-black");var e=this.getHighContrastMode();1===e?(t.add("cdk-high-contrast-active"),t.add("cdk-high-contrast-black-on-white")):2===e&&(t.add("cdk-high-contrast-active"),t.add("cdk-high-contrast-white-on-black"))}}}]),t}()).\u0275fac=function(t){return new(t||Pe)(a.Tb(we),a.Tb(d))},Pe.\u0275prov=Object(a.Ib)({factory:function(){return new Pe(Object(a.Tb)(we),Object(a.Tb)(d))},token:Pe,providedIn:"root"}),Pe),Me=new a.r("cdk-dir-doc",{providedIn:"root",factory:function(){return Object(a.W)(d)}}),Le=((Re=function(){function t(e){if(f(this,t),this.value="ltr",this.change=new a.n,e){var n=e.documentElement?e.documentElement.dir:null,r=(e.body?e.body.dir:null)||n;this.value="ltr"===r||"rtl"===r?r:"ltr"}}return p(t,[{key:"ngOnDestroy",value:function(){this.change.complete()}}]),t}()).\u0275fac=function(t){return new(t||Re)(a.Tb(Me,8))},Re.\u0275prov=Object(a.Ib)({factory:function(){return new Re(Object(a.Tb)(Me,8))},token:Re,providedIn:"root"}),Re),Fe=((Ne=function t(){f(this,t)}).\u0275mod=a.Kb({type:Ne}),Ne.\u0275inj=a.Jb({factory:function(t){return new(t||Ne)}}),Ne),Ve=new a.Q("11.2.1"),Ue=o("bHdf");function qe(){return Object(Ue.a)(1)(Object(Kt.a).apply(void 0,arguments))}var Be=o("z+Ro");function He(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[e.length-1];return Object(Be.a)(r)?(e.pop(),function(t){return qe(e,t,r)}):function(t){return qe(e,t)}}var ze=function t(){f(this,t)};function We(t,e){return{type:7,name:t,definitions:e,options:{}}}function Qe(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:4,styles:e,timings:t}}function Ge(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:2,steps:t,options:e}}function Ke(t){return{type:6,styles:t,offset:null}}function Ye(t,e,n){return{type:0,name:t,styles:e,options:n}}function Xe(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:1,expr:t,animation:e,options:n}}function Ze(t){Promise.resolve(null).then(t)}var Je=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;f(this,t),this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+n}return p(t,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(t){return t()}),this._onDoneFns=[])}},{key:"onStart",value:function(t){this._onStartFns.push(t)}},{key:"onDone",value:function(t){this._onDoneFns.push(t)}},{key:"onDestroy",value:function(t){this._onDestroyFns.push(t)}},{key:"hasStarted",value:function(){return this._started}},{key:"init",value:function(){}},{key:"play",value:function(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}},{key:"triggerMicrotask",value:function(){var t=this;Ze(function(){return t._onFinish()})}},{key:"_onStart",value:function(){this._onStartFns.forEach(function(t){return t()}),this._onStartFns=[]}},{key:"pause",value:function(){}},{key:"restart",value:function(){}},{key:"finish",value:function(){this._onFinish()}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(function(t){return t()}),this._onDestroyFns=[])}},{key:"reset",value:function(){}},{key:"setPosition",value:function(t){this._position=this.totalTime?t*this.totalTime:1}},{key:"getPosition",value:function(){return this.totalTime?this._position/this.totalTime:1}},{key:"triggerCallback",value:function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(function(t){return t()}),e.length=0}}]),t}(),$e=function(){function t(e){var n=this;f(this,t),this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;var r=0,i=0,o=0,s=this.players.length;0==s?Ze(function(){return n._onFinish()}):this.players.forEach(function(t){t.onDone(function(){++r==s&&n._onFinish()}),t.onDestroy(function(){++i==s&&n._onDestroy()}),t.onStart(function(){++o==s&&n._onStart()})}),this.totalTime=this.players.reduce(function(t,e){return Math.max(t,e.totalTime)},0)}return p(t,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(t){return t()}),this._onDoneFns=[])}},{key:"init",value:function(){this.players.forEach(function(t){return t.init()})}},{key:"onStart",value:function(t){this._onStartFns.push(t)}},{key:"_onStart",value:function(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(function(t){return t()}),this._onStartFns=[])}},{key:"onDone",value:function(t){this._onDoneFns.push(t)}},{key:"onDestroy",value:function(t){this._onDestroyFns.push(t)}},{key:"hasStarted",value:function(){return this._started}},{key:"play",value:function(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(function(t){return t.play()})}},{key:"pause",value:function(){this.players.forEach(function(t){return t.pause()})}},{key:"restart",value:function(){this.players.forEach(function(t){return t.restart()})}},{key:"finish",value:function(){this._onFinish(),this.players.forEach(function(t){return t.finish()})}},{key:"destroy",value:function(){this._onDestroy()}},{key:"_onDestroy",value:function(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(function(t){return t.destroy()}),this._onDestroyFns.forEach(function(t){return t()}),this._onDestroyFns=[])}},{key:"reset",value:function(){this.players.forEach(function(t){return t.reset()}),this._destroyed=!1,this._finished=!1,this._started=!1}},{key:"setPosition",value:function(t){var e=t*this.totalTime;this.players.forEach(function(t){var n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}},{key:"getPosition",value:function(){var t=this.players.reduce(function(t,e){return null===t||e.totalTime>t.totalTime?e:t},null);return null!=t?t.getPosition():0}},{key:"beforeDestroy",value:function(){this.players.forEach(function(t){t.beforeDestroy&&t.beforeDestroy()})}},{key:"triggerCallback",value:function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(function(t){return t()}),e.length=0}}]),t}();function tn(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function en(t){switch(t.length){case 0:return new Je;case 1:return t[0];default:return new $e(t)}}function nn(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=[],a=[],u=-1,c=null;if(r.forEach(function(t){var n=t.offset,r=n==u,l=r&&c||{};Object.keys(t).forEach(function(n){var r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,s),a){case"!":a=i[n];break;case"*":a=o[n];break;default:a=e.normalizeStyleValue(n,r,a,s)}l[r]=a}),r||a.push(l),c=l,u=n}),s.length){var l="\n - ";throw new Error("Unable to animate due to the following errors:".concat(l).concat(s.join(l)))}return a}function rn(t,e,n,r){switch(e){case"start":t.onStart(function(){return r(n&&on(n,"start",t))});break;case"done":t.onDone(function(){return r(n&&on(n,"done",t))});break;case"destroy":t.onDestroy(function(){return r(n&&on(n,"destroy",t))})}}function on(t,e,n){var r=n.totalTime,i=sn(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),o=t._data;return null!=o&&(i._data=o),i}function sn(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6?arguments[6]:void 0;return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function an(t,e,n){var r;return t instanceof Map?(r=t.get(e))||t.set(e,r=n):(r=t[e])||(r=t[e]=n),r}function un(t){var e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}var cn=function(t,e){return!1},ln=function(t,e){return!1},hn=function(t,e,n){return[]},fn=tn();(fn||"undefined"!=typeof Element)&&(cn=function(t,e){return t.contains(e)},ln=function(){if(fn||Element.prototype.matches)return function(t,e){return t.matches(e)};var t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?function(t,n){return e.apply(t,[n])}:ln}(),hn=function(t,e,n){var r=[];if(n)for(var i=t.querySelectorAll(e),o=0;o<i.length;o++)r.push(i[o]);else{var s=t.querySelector(e);s&&r.push(s)}return r});var dn=null,pn=!1;function vn(t){dn||(dn=("undefined"!=typeof document?document.body:null)||{},pn=!!dn.style&&"WebkitAppearance"in dn.style);var e=!0;return dn.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(!(e=t in dn.style)&&pn)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in dn.style),e}var yn=ln,gn=cn,mn=hn;function _n(t){var e={};return Object.keys(t).forEach(function(n){var r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}var bn,wn=((bn=function(){function t(){f(this,t)}return p(t,[{key:"validateStyleProperty",value:function(t){return vn(t)}},{key:"matchesElement",value:function(t,e){return yn(t,e)}},{key:"containsElement",value:function(t,e){return gn(t,e)}},{key:"query",value:function(t,e,n){return mn(t,e,n)}},{key:"computeStyle",value:function(t,e,n){return n||""}},{key:"animate",value:function(t,e,n,r,i){return new Je(n,r)}}]),t}()).\u0275fac=function(t){return new(t||bn)},bn.\u0275prov=a.Ib({token:bn,factory:bn.\u0275fac}),bn),kn=function(){var t=function t(){f(this,t)};return t.NOOP=new wn,t}();function En(t){if("number"==typeof t)return t;var e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Cn(parseFloat(e[1]),e[2])}function Cn(t,e){switch(e){case"s":return 1e3*t;default:return t}}function On(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){var r,i=0,o="";if("string"==typeof t){var s=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===s)return e.push('The provided timing value "'.concat(t,'" is invalid.')),{duration:0,delay:0,easing:""};r=Cn(parseFloat(s[1]),s[2]);var a=s[3];null!=a&&(i=Cn(parseFloat(a),s[4]));var u=s[5];u&&(o=u)}else r=t;if(!n){var c=!1,l=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),c=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),c=!0),c&&e.splice(l,0,'The provided timing value "'.concat(t,'" is invalid.'))}return{duration:r,delay:i,easing:o}}(t,e,n)}function Sn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).forEach(function(n){e[n]=t[n]}),e}function Tn(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e)for(var r in t)n[r]=t[r];else Sn(t,n);return n}function In(t,e,n){return n?e+":"+n+";":""}function xn(t){for(var e="",n=0;n<t.style.length;n++){var r=t.style.item(n);e+=In(0,r,t.style.getPropertyValue(r))}for(var i in t.style)t.style.hasOwnProperty(i)&&!i.startsWith("_")&&(e+=In(0,i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[i]));t.setAttribute("style",e)}function An(t,e,n){t.style&&(Object.keys(e).forEach(function(r){var i=Fn(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),tn()&&xn(t))}function jn(t,e){t.style&&(Object.keys(e).forEach(function(e){var n=Fn(e);t.style[n]=""}),tn()&&xn(t))}function Pn(t){return Array.isArray(t)?1==t.length?t[0]:Ge(t):t}var Nn=new RegExp("{{\\s*(.+?)\\s*}}","g");function Rn(t){var e=[];if("string"==typeof t){for(var n;n=Nn.exec(t);)e.push(n[1]);Nn.lastIndex=0}return e}function Dn(t,e,n){var r=t.toString(),i=r.replace(Nn,function(t,r){var i=e[r];return e.hasOwnProperty(r)||(n.push("Please provide a value for the animation param ".concat(r)),i=""),i.toString()});return i==r?t:i}function Mn(t){for(var e=[],n=t.next();!n.done;)e.push(n.value),n=t.next();return e}var Ln=/-+([a-z0-9])/g;function Fn(t){return t.replace(Ln,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e[1].toUpperCase()})}function Vn(t,e){return 0===t||0===e}function Un(t,e,n){var r=Object.keys(n);if(r.length&&e.length){var i=e[0],o=[];if(r.forEach(function(t){i.hasOwnProperty(t)||o.push(t),i[t]=n[t]}),o.length)for(var s=function(){var n=e[a];o.forEach(function(e){n[e]=Bn(t,e)})},a=1;a<e.length;a++)s()}return e}function qn(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error("Unable to resolve animation metadata node #".concat(e.type))}}function Bn(t,e){return window.getComputedStyle(t)[e]}var Hn=new Set(["true","1"]),zn=new Set(["false","0"]);function Wn(t,e){var n=Hn.has(t)||zn.has(t),r=Hn.has(e)||zn.has(e);return function(i,o){var s="*"==t||t==i,a="*"==e||e==o;return!s&&n&&"boolean"==typeof i&&(s=i?Hn.has(t):zn.has(t)),!a&&r&&"boolean"==typeof o&&(a=o?Hn.has(e):zn.has(e)),s&&a}}var Qn=new RegExp("s*:selfs*,?","g");function Gn(t,e,n){return new Kn(t).build(e,n)}var Kn=function(){function t(e){f(this,t),this._driver=e}return p(t,[{key:"build",value:function(t,e){var n=new Yn(e);return this._resetContextStyleTimingState(n),qn(this,Pn(t),n)}},{key:"_resetContextStyleTimingState",value:function(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}},{key:"visitTrigger",value:function(t,e){var n=this,r=e.queryCount=0,i=e.depCount=0,o=[],s=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(function(t){if(n._resetContextStyleTimingState(e),0==t.type){var a=t,u=a.name;u.toString().split(/\s*,\s*/).forEach(function(t){a.name=t,o.push(n.visitState(a,e))}),a.name=u}else if(1==t.type){var c=n.visitTransition(t,e);r+=c.queryCount,i+=c.depCount,s.push(c)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:o,transitions:s,queryCount:r,depCount:i,options:null}}},{key:"visitState",value:function(t,e){var n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){var i=new Set,o=r||{};if(n.styles.forEach(function(t){if(Xn(t)){var e=t;Object.keys(e).forEach(function(t){Rn(e[t]).forEach(function(t){o.hasOwnProperty(t)||i.add(t)})})}}),i.size){var s=Mn(i.values());e.errors.push('state("'.concat(t.name,'", ...) must define default values for all the following style substitutions: ').concat(s.join(", ")))}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}},{key:"visitTransition",value:function(t,e){e.queryCount=0,e.depCount=0;var n,r,i,o=qn(this,Pn(t.animation),e);return{type:1,matchers:(n=t.expr,r=e.errors,i=[],"string"==typeof n?n.split(/\s*,\s*/).forEach(function(t){return function(t,e,n){if(":"==t[0]){var r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return function(t,e){return parseFloat(e)>parseFloat(t)};case":decrement":return function(t,e){return parseFloat(e)<parseFloat(t)};default:return e.push('The transition alias value "'.concat(t,'" is not supported')),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}var i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return n.push('The provided transition expression "'.concat(t,'" is not supported')),e;var o=i[1],s=i[2],a=i[3];e.push(Wn(o,a)),"<"!=s[0]||"*"==o&&"*"==a||e.push(Wn(a,o))}(t,i,r)}):i.push(n),i),animation:o,queryCount:e.queryCount,depCount:e.depCount,options:Zn(t.options)}}},{key:"visitSequence",value:function(t,e){var n=this;return{type:2,steps:t.steps.map(function(t){return qn(n,t,e)}),options:Zn(t.options)}}},{key:"visitGroup",value:function(t,e){var n=this,r=e.currentTime,i=0,o=t.steps.map(function(t){e.currentTime=r;var o=qn(n,t,e);return i=Math.max(i,e.currentTime),o});return e.currentTime=i,{type:3,steps:o,options:Zn(t.options)}}},{key:"visitAnimate",value:function(t,e){var n,r=function(t,e){var n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return Jn(On(t,e).duration,0,"");var r=t;if(r.split(/\s+/).some(function(t){return"{"==t.charAt(0)&&"{"==t.charAt(1)})){var i=Jn(0,0,"");return i.dynamic=!0,i.strValue=r,i}return Jn((n=n||On(r,e)).duration,n.delay,n.easing)}(t.timings,e.errors);e.currentAnimateTimings=r;var i=t.styles?t.styles:Ke({});if(5==i.type)n=this.visitKeyframes(i,e);else{var o=t.styles,s=!1;if(!o){s=!0;var a={};r.easing&&(a.easing=r.easing),o=Ke(a)}e.currentTime+=r.duration+r.delay;var u=this.visitStyle(o,e);u.isEmptyStep=s,n=u}return e.currentAnimateTimings=null,{type:4,timings:r,style:n,options:null}}},{key:"visitStyle",value:function(t,e){var n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}},{key:"_makeStyleAst",value:function(t,e){var n=[];Array.isArray(t.styles)?t.styles.forEach(function(t){"string"==typeof t?"*"==t?n.push(t):e.errors.push("The provided style string value ".concat(t," is not allowed.")):n.push(t)}):n.push(t.styles);var r=!1,i=null;return n.forEach(function(t){if(Xn(t)){var e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(var o in e)if(e[o].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}},{key:"_validateStyleAst",value:function(t,e){var n=this,r=e.currentAnimateTimings,i=e.currentTime,o=e.currentTime;r&&o>0&&(o-=r.duration+r.delay),t.styles.forEach(function(t){"string"!=typeof t&&Object.keys(t).forEach(function(r){if(n._driver.validateStyleProperty(r)){var s,a,u,c,l,h=e.collectedStyles[e.currentQuerySelector],f=h[r],d=!0;f&&(o!=i&&o>=f.startTime&&i<=f.endTime&&(e.errors.push('The CSS property "'.concat(r,'" that exists between the times of "').concat(f.startTime,'ms" and "').concat(f.endTime,'ms" is also being animated in a parallel animation between the times of "').concat(o,'ms" and "').concat(i,'ms"')),d=!1),o=f.startTime),d&&(h[r]={startTime:o,endTime:i}),e.options&&(s=t[r],a=e.options,u=e.errors,c=a.params||{},(l=Rn(s)).length&&l.forEach(function(t){c.hasOwnProperty(t)||u.push("Unable to resolve the local animation param ".concat(t," in the given list of values"))}))}else e.errors.push('The provided animation property "'.concat(r,'" is not a supported CSS property for animations'))})})}},{key:"visitKeyframes",value:function(t,e){var n=this,r={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),r;var i=0,o=[],s=!1,a=!1,u=0,c=t.steps.map(function(t){var r=n._makeStyleAst(t,e),c=null!=r.offset?r.offset:function(t){if("string"==typeof t)return null;var e=null;if(Array.isArray(t))t.forEach(function(t){if(Xn(t)&&t.hasOwnProperty("offset")){var n=t;e=parseFloat(n.offset),delete n.offset}});else if(Xn(t)&&t.hasOwnProperty("offset")){var n=t;e=parseFloat(n.offset),delete n.offset}return e}(r.styles),l=0;return null!=c&&(i++,l=r.offset=c),a=a||l<0||l>1,s=s||l<u,u=l,o.push(l),r});a&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),s&&e.errors.push("Please ensure that all keyframe offsets are in order");var l=t.steps.length,h=0;i>0&&i<l?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==i&&(h=1/(l-1));var f=l-1,d=e.currentTime,p=e.currentAnimateTimings,v=p.duration;return c.forEach(function(t,i){var s=h>0?i==f?1:h*i:o[i],a=s*v;e.currentTime=d+p.delay+a,p.duration=a,n._validateStyleAst(t,e),t.offset=s,r.styles.push(t)}),r}},{key:"visitReference",value:function(t,e){return{type:8,animation:qn(this,Pn(t.animation),e),options:Zn(t.options)}}},{key:"visitAnimateChild",value:function(t,e){return e.depCount++,{type:9,options:Zn(t.options)}}},{key:"visitAnimateRef",value:function(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Zn(t.options)}}},{key:"visitQuery",value:function(t,n){var r=n.currentQuerySelector,i=t.options||{};n.queryCount++,n.currentQuery=t;var o=e(function(t){var e=!!t.split(/\s*,\s*/).find(function(t){return":self"==t});return e&&(t=t.replace(Qn,"")),[t=t.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,function(t){return".ng-trigger-"+t.substr(1)}).replace(/:animating/g,".ng-animating"),e]}(t.selector),2),s=o[0],a=o[1];n.currentQuerySelector=r.length?r+" "+s:s,an(n.collectedStyles,n.currentQuerySelector,{});var u=qn(this,Pn(t.animation),n);return n.currentQuery=null,n.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:a,animation:u,originalSelector:t.selector,options:Zn(t.options)}}},{key:"visitStagger",value:function(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");var n="full"===t.timings?{duration:0,delay:0,easing:"full"}:On(t.timings,e.errors,!0);return{type:12,animation:qn(this,Pn(t.animation),e),timings:n,options:null}}}]),t}(),Yn=function t(e){f(this,t),this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null};function Xn(t){return!Array.isArray(t)&&"object"==typeof t}function Zn(t){var e;return t?(t=Sn(t)).params&&(t.params=(e=t.params)?Sn(e):null):t={},t}function Jn(t,e,n){return{duration:t,delay:e,easing:n}}function $n(t,e,n,r,i,o){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}var tr=function(){function t(){f(this,t),this._map=new Map}return p(t,[{key:"consume",value:function(t){var e=this._map.get(t);return e?this._map.delete(t):e=[],e}},{key:"append",value:function(t,e){var n,r=this._map.get(t);r||this._map.set(t,r=[]),(n=r).push.apply(n,i(e))}},{key:"has",value:function(t){return this._map.has(t)}},{key:"clear",value:function(){this._map.clear()}}]),t}(),er=new RegExp(":enter","g"),nr=new RegExp(":leave","g");function rr(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},a=arguments.length>7?arguments[7]:void 0,u=arguments.length>8?arguments[8]:void 0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[];return(new ir).buildKeyframes(t,e,n,r,i,o,s,a,u,c)}var ir=function(){function t(){f(this,t)}return p(t,[{key:"buildKeyframes",value:function(t,e,n,r,i,o,s,a,u){var c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[];u=u||new tr;var l=new sr(t,e,u,r,i,c,[]);l.options=a,l.currentTimeline.setStyles([o],null,l.errors,a),qn(this,n,l);var h=l.timelines.filter(function(t){return t.containsAnimation()});if(h.length&&Object.keys(s).length){var f=h[h.length-1];f.allowOnlyTimelineStyles()||f.setStyles([s],null,l.errors,a)}return h.length?h.map(function(t){return t.buildKeyframes()}):[$n(e,[],[],[],0,0,"",!1)]}},{key:"visitTrigger",value:function(t,e){}},{key:"visitState",value:function(t,e){}},{key:"visitTransition",value:function(t,e){}},{key:"visitAnimateChild",value:function(t,e){var n=e.subInstructions.consume(e.element);if(n){var r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);i!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}},{key:"visitAnimateRef",value:function(t,e){var n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}},{key:"_visitSubInstructions",value:function(t,e,n){var r=e.currentTimeline.currentTime,i=null!=n.duration?En(n.duration):null,o=null!=n.delay?En(n.delay):null;return 0!==i&&t.forEach(function(t){var n=e.appendInstructionToTimeline(t,i,o);r=Math.max(r,n.duration+n.delay)}),r}},{key:"visitReference",value:function(t,e){e.updateOptions(t.options,!0),qn(this,t.animation,e),e.previousNode=t}},{key:"visitSequence",value:function(t,e){var n=this,r=e.subContextCount,i=e,o=t.options;if(o&&(o.params||o.delay)&&((i=e.createSubContext(o)).transformIntoNewTimeline(),null!=o.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=or);var s=En(o.delay);i.delayNextStep(s)}t.steps.length&&(t.steps.forEach(function(t){return qn(n,t,i)}),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),e.previousNode=t}},{key:"visitGroup",value:function(t,e){var n=this,r=[],i=e.currentTimeline.currentTime,o=t.options&&t.options.delay?En(t.options.delay):0;t.steps.forEach(function(s){var a=e.createSubContext(t.options);o&&a.delayNextStep(o),qn(n,s,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(function(t){return e.currentTimeline.mergeTimelineCollectedStyles(t)}),e.transformIntoNewTimeline(i),e.previousNode=t}},{key:"_visitTiming",value:function(t,e){if(t.dynamic){var n=t.strValue;return On(e.params?Dn(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}},{key:"visitAnimate",value:function(t,e){var n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());var i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}},{key:"visitStyle",value:function(t,e){var n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();var i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}},{key:"visitKeyframes",value:function(t,e){var n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,o=e.createSubContext().currentTimeline;o.easing=n.easing,t.styles.forEach(function(t){o.forwardTime((t.offset||0)*i),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(r+i),e.previousNode=t}},{key:"visitQuery",value:function(t,e){var n=this,r=e.currentTimeline.currentTime,i=t.options||{},o=i.delay?En(i.delay):0;o&&(6===e.previousNode.type||0==r&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=or);var s=r,a=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!i.optional,e.errors);e.currentQueryTotal=a.length;var u=null;a.forEach(function(r,i){e.currentQueryIndex=i;var a=e.createSubContext(t.options,r);o&&a.delayNextStep(o),r===e.element&&(u=a.currentTimeline),qn(n,t.animation,a),a.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,a.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),u&&(e.currentTimeline.mergeTimelineCollectedStyles(u),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}},{key:"visitStagger",value:function(t,e){var n=e.parentContext,r=e.currentTimeline,i=t.timings,o=Math.abs(i.duration),s=o*(e.currentQueryTotal-1),a=o*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=s-a;break;case"full":a=n.currentStaggerTime}var u=e.currentTimeline;a&&u.delayNextStep(a);var c=u.currentTime;qn(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}]),t}(),or={},sr=function(){function t(e,n,r,i,o,s,a,u){f(this,t),this._driver=e,this.element=n,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=or,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=u||new ar(this._driver,n,0),a.push(this.currentTimeline)}return p(t,[{key:"params",get:function(){return this.options.params}},{key:"updateOptions",value:function(t,e){var n=this;if(t){var r=t,i=this.options;null!=r.duration&&(i.duration=En(r.duration)),null!=r.delay&&(i.delay=En(r.delay));var o=r.params;if(o){var s=i.params;s||(s=this.options.params={}),Object.keys(o).forEach(function(t){e&&s.hasOwnProperty(t)||(s[t]=Dn(o[t],s,n.errors))})}}}},{key:"_copyOptions",value:function(){var t={};if(this.options){var e=this.options.params;if(e){var n=t.params={};Object.keys(e).forEach(function(t){n[t]=e[t]})}}return t}},{key:"createSubContext",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=n||this.element,o=new t(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}},{key:"transformIntoNewTimeline",value:function(t){return this.previousNode=or,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}},{key:"appendInstructionToTimeline",value:function(t,e,n){var r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new ur(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}},{key:"incrementTime",value:function(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}},{key:"delayNextStep",value:function(t){t>0&&this.currentTimeline.delayNextStep(t)}},{key:"invokeQuery",value:function(t,e,n,r,o,s){var a=[];if(r&&a.push(this.element),t.length>0){t=(t=t.replace(er,"."+this._enterClassName)).replace(nr,"."+this._leaveClassName);var u=this._driver.query(this.element,t,1!=n);0!==n&&(u=n<0?u.slice(u.length+n,u.length):u.slice(0,n)),a.push.apply(a,i(u))}return o||0!=a.length||s.push('`query("'.concat(e,'")` returned zero elements. (Use `query("').concat(e,'", { optional: true })` if you wish to allow this.)')),a}}]),t}(),ar=function(){function t(e,n,r,i){f(this,t),this._driver=e,this.element=n,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}return p(t,[{key:"containsAnimation",value:function(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}},{key:"getCurrentStyleProperties",value:function(){return Object.keys(this._currentKeyframe)}},{key:"currentTime",get:function(){return this.startTime+this.duration}},{key:"delayNextStep",value:function(t){var e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}},{key:"fork",value:function(e,n){return this.applyStylesToKeyframe(),new t(this._driver,e,n||this.currentTime,this._elementTimelineStylesLookup)}},{key:"_loadKeyframe",value:function(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}},{key:"forwardFrame",value:function(){this.duration+=1,this._loadKeyframe()}},{key:"forwardTime",value:function(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}},{key:"_updateStyle",value:function(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}},{key:"allowOnlyTimelineStyles",value:function(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}},{key:"applyEmptyStep",value:function(t){var e=this;t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(function(t){e._backFill[t]=e._globalTimelineStyles[t]||"*",e._currentKeyframe[t]="*"}),this._currentEmptyStepKeyframe=this._currentKeyframe}},{key:"setStyles",value:function(t,e,n,r){var i=this;e&&(this._previousKeyframe.easing=e);var o=r&&r.params||{},s=function(t,e){var n,r={};return t.forEach(function(t){"*"===t?(n=n||Object.keys(e)).forEach(function(t){r[t]="*"}):Tn(t,!1,r)}),r}(t,this._globalTimelineStyles);Object.keys(s).forEach(function(t){var e=Dn(s[t],o,n);i._pendingStyles[t]=e,i._localTimelineStyles.hasOwnProperty(t)||(i._backFill[t]=i._globalTimelineStyles.hasOwnProperty(t)?i._globalTimelineStyles[t]:"*"),i._updateStyle(t,e)})}},{key:"applyStylesToKeyframe",value:function(){var t=this,e=this._pendingStyles,n=Object.keys(e);0!=n.length&&(this._pendingStyles={},n.forEach(function(n){t._currentKeyframe[n]=e[n]}),Object.keys(this._localTimelineStyles).forEach(function(e){t._currentKeyframe.hasOwnProperty(e)||(t._currentKeyframe[e]=t._localTimelineStyles[e])}))}},{key:"snapshotCurrentStyles",value:function(){var t=this;Object.keys(this._localTimelineStyles).forEach(function(e){var n=t._localTimelineStyles[e];t._pendingStyles[e]=n,t._updateStyle(e,n)})}},{key:"getFinalKeyframe",value:function(){return this._keyframes.get(this.duration)}},{key:"properties",get:function(){var t=[];for(var e in this._currentKeyframe)t.push(e);return t}},{key:"mergeTimelineCollectedStyles",value:function(t){var e=this;Object.keys(t._styleSummary).forEach(function(n){var r=e._styleSummary[n],i=t._styleSummary[n];(!r||i.time>r.time)&&e._updateStyle(n,i.value)})}},{key:"buildKeyframes",value:function(){var t=this;this.applyStylesToKeyframe();var e=new Set,n=new Set,r=1===this._keyframes.size&&0===this.duration,i=[];this._keyframes.forEach(function(o,s){var a=Tn(o,!0);Object.keys(a).forEach(function(t){var r=a[t];"!"==r?e.add(t):"*"==r&&n.add(t)}),r||(a.offset=s/t.duration),i.push(a)});var o=e.size?Mn(e.values()):[],s=n.size?Mn(n.values()):[];if(r){var a=i[0],u=Sn(a);a.offset=0,u.offset=1,i=[a,u]}return $n(this.element,i,o,s,this.duration,this.startTime,this.easing,!1)}}]),t}(),ur=function(t){v(n,t);var e=g(n);function n(t,r,i,o,s,a){var u,c=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return f(this,n),(u=e.call(this,t,r,a.delay)).element=r,u.keyframes=i,u.preStyleProps=o,u.postStyleProps=s,u._stretchStartingKeyframe=c,u.timings={duration:a.duration,delay:a.delay,easing:a.easing},u}return p(n,[{key:"containsAnimation",value:function(){return this.keyframes.length>1}},{key:"buildKeyframes",value:function(){var t=this.keyframes,e=this.timings,n=e.delay,r=e.duration,i=e.easing;if(this._stretchStartingKeyframe&&n){var o=[],s=r+n,a=n/s,u=Tn(t[0],!1);u.offset=0,o.push(u);var c=Tn(t[0],!1);c.offset=cr(a),o.push(c);for(var l=t.length-1,h=1;h<=l;h++){var f=Tn(t[h],!1);f.offset=cr((n+f.offset*r)/s),o.push(f)}r=s,n=0,i="",t=o}return $n(this.element,t,this.preStyleProps,this.postStyleProps,r,n,i,!0)}}]),n}(ar);function cr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=Math.pow(10,e-1);return Math.round(t*n)/n}var lr=function t(){f(this,t)},hr=function(t){v(n,t);var e=g(n);function n(){return f(this,n),e.apply(this,arguments)}return p(n,[{key:"normalizePropertyName",value:function(t,e){return Fn(t)}},{key:"normalizeStyleValue",value:function(t,e,n,r){var i="",o=n.toString().trim();if(fr[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{var s=n.match(/^[+-]?[\d\.]+([a-z]*)$/);s&&0==s[1].length&&r.push("Please provide a CSS unit value for ".concat(t,":").concat(n))}return o+i}}]),n}(lr),fr=function(t){var e={};return t.forEach(function(t){return e[t]=!0}),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(","));function dr(t,e,n,r,i,o,s,a,u,c,l,h,f){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:f}}var pr={},vr=function(){function t(e,n,r){f(this,t),this._triggerName=e,this.ast=n,this._stateStyles=r}return p(t,[{key:"match",value:function(t,e,n,r){return function(t,e,n,r,i){return t.some(function(t){return t(e,n,r,i)})}(this.ast.matchers,t,e,n,r)}},{key:"buildStyles",value:function(t,e,n){var r=this._stateStyles["*"],i=this._stateStyles[t],o=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):o}},{key:"build",value:function(t,e,n,r,i,o,s,a,u,c){var l=[],h=this.ast.options&&this.ast.options.params||pr,f=this.buildStyles(n,s&&s.params||pr,l),d=a&&a.params||pr,p=this.buildStyles(r,d,l),v=new Set,y=new Map,g=new Map,m="void"===r,_={params:Object.assign(Object.assign({},h),d)},b=c?[]:rr(t,e,this.ast.animation,i,o,f,p,_,u,l),w=0;if(b.forEach(function(t){w=Math.max(t.duration+t.delay,w)}),l.length)return dr(e,this._triggerName,n,r,m,f,p,[],[],y,g,w,l);b.forEach(function(t){var n=t.element,r=an(y,n,{});t.preStyleProps.forEach(function(t){return r[t]=!0});var i=an(g,n,{});t.postStyleProps.forEach(function(t){return i[t]=!0}),n!==e&&v.add(n)});var k=Mn(v.values());return dr(e,this._triggerName,n,r,m,f,p,b,k,y,g,w)}}]),t}(),yr=function(){function t(e,n){f(this,t),this.styles=e,this.defaultParams=n}return p(t,[{key:"buildStyles",value:function(t,e){var n={},r=Sn(this.defaultParams);return Object.keys(t).forEach(function(e){var n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(function(t){if("string"!=typeof t){var i=t;Object.keys(i).forEach(function(t){var o=i[t];o.length>1&&(o=Dn(o,r,e)),n[t]=o})}}),n}}]),t}(),gr=function(){function t(e,n){var r=this;f(this,t),this.name=e,this.ast=n,this.transitionFactories=[],this.states={},n.states.forEach(function(t){r.states[t.name]=new yr(t.style,t.options&&t.options.params||{})}),mr(this.states,"true","1"),mr(this.states,"false","0"),n.transitions.forEach(function(t){r.transitionFactories.push(new vr(e,t,r.states))}),this.fallbackTransition=new vr(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[function(t,e){return!0}],options:null,queryCount:0,depCount:0},this.states)}return p(t,[{key:"containsQueries",get:function(){return this.ast.queryCount>0}},{key:"matchTransition",value:function(t,e,n,r){return this.transitionFactories.find(function(i){return i.match(t,e,n,r)})||null}},{key:"matchStyles",value:function(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}]),t}();function mr(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}var _r=new tr,br=function(){function t(e,n,r){f(this,t),this.bodyNode=e,this._driver=n,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}return p(t,[{key:"register",value:function(t,e){var n=[],r=Gn(this._driver,e,n);if(n.length)throw new Error("Unable to build the animation due to the following errors: ".concat(n.join("\n")));this._animations[t]=r}},{key:"_buildPlayer",value:function(t,e,n){var r=t.element,i=nn(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}},{key:"create",value:function(t,e){var n,r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=[],s=this._animations[t],a=new Map;if(s?(n=rr(this._driver,e,s,"ng-enter","ng-leave",{},{},i,_r,o)).forEach(function(t){var e=an(a,t.element,{});t.postStyleProps.forEach(function(t){return e[t]=null})}):(o.push("The requested animation doesn't exist or has already been destroyed"),n=[]),o.length)throw new Error("Unable to create the animation due to the following errors: ".concat(o.join("\n")));a.forEach(function(t,e){Object.keys(t).forEach(function(n){t[n]=r._driver.computeStyle(e,n,"*")})});var u=en(n.map(function(t){var e=a.get(t.element);return r._buildPlayer(t,{},e)}));return this._playersById[t]=u,u.onDestroy(function(){return r.destroy(t)}),this.players.push(u),u}},{key:"destroy",value:function(t){var e=this._getPlayer(t);e.destroy(),delete this._playersById[t];var n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}},{key:"_getPlayer",value:function(t){var e=this._playersById[t];if(!e)throw new Error("Unable to find the timeline player referenced by ".concat(t));return e}},{key:"listen",value:function(t,e,n,r){var i=sn(e,"","","");return rn(this._getPlayer(t),n,i,r),function(){}}},{key:"command",value:function(t,e,n,r){if("register"!=n)if("create"!=n){var i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}else this.create(t,e,r[0]||{});else this.register(t,r[0])}}]),t}(),wr=[],kr={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Er={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Cr=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";f(this,t),this.namespaceId=n;var r,i=e&&e.hasOwnProperty("value");if(this.value=null!=(r=i?e.value:e)?r:null,i){var o=Sn(e);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}return p(t,[{key:"params",get:function(){return this.options.params}},{key:"absorbOptions",value:function(t){var e=t.params;if(e){var n=this.options.params;Object.keys(e).forEach(function(t){null==n[t]&&(n[t]=e[t])})}}}]),t}(),Or=new Cr("void"),Sr=function(){function t(e,n,r){f(this,t),this.id=e,this.hostElement=n,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Nr(n,this._hostClassName)}return p(t,[{key:"listen",value:function(t,e,n,r){var i,o=this;if(!this._triggers.hasOwnProperty(e))throw new Error('Unable to listen on the animation trigger event "'.concat(n,'" because the animation trigger "').concat(e,"\" doesn't exist!"));if(null==n||0==n.length)throw new Error('Unable to listen on the animation trigger "'.concat(e,'" because the provided event is undefined!'));if("start"!=(i=n)&&"done"!=i)throw new Error('The provided animation trigger event "'.concat(n,'" for the animation trigger "').concat(e,'" is not supported!'));var s=an(this._elementListeners,t,[]),a={name:e,phase:n,callback:r};s.push(a);var u=an(this._engine.statesByElement,t,{});return u.hasOwnProperty(e)||(Nr(t,"ng-trigger"),Nr(t,"ng-trigger-"+e),u[e]=Or),function(){o._engine.afterFlush(function(){var t=s.indexOf(a);t>=0&&s.splice(t,1),o._triggers[e]||delete u[e]})}}},{key:"register",value:function(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}},{key:"_getTrigger",value:function(t){var e=this._triggers[t];if(!e)throw new Error('The provided animation trigger "'.concat(t,'" has not been registered!'));return e}},{key:"trigger",value:function(t,e,n){var r=this,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=this._getTrigger(e),s=new Ir(this.id,e,t),a=this._engine.statesByElement.get(t);a||(Nr(t,"ng-trigger"),Nr(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,a={}));var u=a[e],c=new Cr(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&u&&c.absorbOptions(u.options),a[e]=c,u||(u=Or),"void"===c.value||u.value!==c.value){var l=an(this._engine.playersByElement,t,[]);l.forEach(function(t){t.namespaceId==r.id&&t.triggerName==e&&t.queued&&t.destroy()});var h=o.matchTransition(u.value,c.value,t,c.params),f=!1;if(!h){if(!i)return;h=o.fallbackTransition,f=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:h,fromState:u,toState:c,player:s,isFallbackTransition:f}),f||(Nr(t,"ng-animate-queued"),s.onStart(function(){Rr(t,"ng-animate-queued")})),s.onDone(function(){var e=r.players.indexOf(s);e>=0&&r.players.splice(e,1);var n=r._engine.playersByElement.get(t);if(n){var i=n.indexOf(s);i>=0&&n.splice(i,1)}}),this.players.push(s),l.push(s),s}if(!function(t,e){var n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(var i=0;i<n.length;i++){var o=n[i];if(!e.hasOwnProperty(o)||t[o]!==e[o])return!1}return!0}(u.params,c.params)){var d=[],p=o.matchStyles(u.value,u.params,d),v=o.matchStyles(c.value,c.params,d);d.length?this._engine.reportError(d):this._engine.afterFlush(function(){jn(t,p),An(t,v)})}}},{key:"deregister",value:function(t){var e=this;delete this._triggers[t],this._engine.statesByElement.forEach(function(e,n){delete e[t]}),this._elementListeners.forEach(function(n,r){e._elementListeners.set(r,n.filter(function(e){return e.name!=t}))})}},{key:"clearElementCache",value:function(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);var e=this._engine.playersByElement.get(t);e&&(e.forEach(function(t){return t.destroy()}),this._engine.playersByElement.delete(t))}},{key:"_signalRemovalForInnerTriggers",value:function(t,e){var n=this,r=this._engine.driver.query(t,".ng-trigger",!0);r.forEach(function(t){if(!t.__ng_removed){var r=n._engine.fetchNamespacesByElement(t);r.size?r.forEach(function(n){return n.triggerLeaveAnimation(t,e,!1,!0)}):n.clearElementCache(t)}}),this._engine.afterFlushAnimationsDone(function(){return r.forEach(function(t){return n.clearElementCache(t)})})}},{key:"triggerLeaveAnimation",value:function(t,e,n,r){var i=this,o=this._engine.statesByElement.get(t);if(o){var s=[];if(Object.keys(o).forEach(function(e){if(i._triggers[e]){var n=i.trigger(t,e,"void",r);n&&s.push(n)}}),s.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&en(s).onDone(function(){return i._engine.processLeaveNode(t)}),!0}return!1}},{key:"prepareLeaveAnimationListeners",value:function(t){var e=this,n=this._elementListeners.get(t),r=this._engine.statesByElement.get(t);if(n&&r){var i=new Set;n.forEach(function(n){var o=n.name;if(!i.has(o)){i.add(o);var s=e._triggers[o].fallbackTransition,a=r[o]||Or,u=new Cr("void"),c=new Ir(e.id,o,t);e._engine.totalQueuedPlayers++,e._queue.push({element:t,triggerName:o,transition:s,fromState:a,toState:u,player:c,isFallbackTransition:!0})}})}}},{key:"removeNode",value:function(t,e){var n=this,r=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),!this.triggerLeaveAnimation(t,e,!0)){var i=!1;if(r.totalAnimations){var o=r.players.length?r.playersByQueriedElement.get(t):[];if(o&&o.length)i=!0;else for(var s=t;s=s.parentNode;)if(r.statesByElement.get(s)){i=!0;break}}if(this.prepareLeaveAnimationListeners(t),i)r.markElementAsRemoved(this.id,t,!1,e);else{var a=t.__ng_removed;a&&a!==kr||(r.afterFlush(function(){return n.clearElementCache(t)}),r.destroyInnerAnimations(t),r._onRemovalComplete(t,e))}}}},{key:"insertNode",value:function(t,e){Nr(t,this._hostClassName)}},{key:"drainQueuedTransitions",value:function(t){var e=this,n=[];return this._queue.forEach(function(r){var i=r.player;if(!i.destroyed){var o=r.element,s=e._elementListeners.get(o);s&&s.forEach(function(e){if(e.name==r.triggerName){var n=sn(o,r.triggerName,r.fromState.value,r.toState.value);n._data=t,rn(r.player,e.phase,n,e.callback)}}),i.markedForDestroy?e._engine.afterFlush(function(){i.destroy()}):n.push(r)}}),this._queue=[],n.sort(function(t,n){var r=t.transition.ast.depCount,i=n.transition.ast.depCount;return 0==r||0==i?r-i:e._engine.driver.containsElement(t.element,n.element)?1:-1})}},{key:"destroy",value:function(t){this.players.forEach(function(t){return t.destroy()}),this._signalRemovalForInnerTriggers(this.hostElement,t)}},{key:"elementContainsData",value:function(t){var e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(function(e){return e.element===t})||e}}]),t}(),Tr=function(){function t(e,n,r){f(this,t),this.bodyNode=e,this.driver=n,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=function(t,e){}}return p(t,[{key:"_onRemovalComplete",value:function(t,e){this.onRemovalComplete(t,e)}},{key:"queuedPlayers",get:function(){var t=[];return this._namespaceList.forEach(function(e){e.players.forEach(function(e){e.queued&&t.push(e)})}),t}},{key:"createNamespace",value:function(t,e){var n=new Sr(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}},{key:"_balanceNamespaceList",value:function(t,e){var n=this._namespaceList.length-1;if(n>=0){for(var r=!1,i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}},{key:"register",value:function(t,e){var n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}},{key:"registerTrigger",value:function(t,e,n){var r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}},{key:"destroy",value:function(t,e){var n=this;if(t){var r=this._fetchNamespace(t);this.afterFlush(function(){n.namespacesByHostElement.delete(r.hostElement),delete n._namespaceLookup[t];var e=n._namespaceList.indexOf(r);e>=0&&n._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(function(){return r.destroy(e)})}}},{key:"_fetchNamespace",value:function(t){return this._namespaceLookup[t]}},{key:"fetchNamespacesByElement",value:function(t){var e=new Set,n=this.statesByElement.get(t);if(n)for(var r=Object.keys(n),i=0;i<r.length;i++){var o=n[r[i]].namespaceId;if(o){var s=this._fetchNamespace(o);s&&e.add(s)}}return e}},{key:"trigger",value:function(t,e,n,r){if(xr(e)){var i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}},{key:"insertNode",value:function(t,e,n,r){if(xr(e)){var i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;var o=this.collectedLeaveElements.indexOf(e);o>=0&&this.collectedLeaveElements.splice(o,1)}if(t){var s=this._fetchNamespace(t);s&&s.insertNode(e,n)}r&&this.collectEnterElement(e)}}},{key:"collectEnterElement",value:function(t){this.collectedEnterElements.push(t)}},{key:"markElementAsDisabled",value:function(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Nr(t,"ng-animate-disabled")):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Rr(t,"ng-animate-disabled"))}},{key:"removeNode",value:function(t,e,n,r){if(xr(e)){var i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){var o=this.namespacesByHostElement.get(e);o&&o.id!==t&&o.removeNode(e,r)}}else this._onRemovalComplete(e,r)}},{key:"markElementAsRemoved",value:function(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}},{key:"listen",value:function(t,e,n,r,i){return xr(e)?this._fetchNamespace(t).listen(e,n,r,i):function(){}}},{key:"_buildInstruction",value:function(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}},{key:"destroyInnerAnimations",value:function(t){var e=this,n=this.driver.query(t,".ng-trigger",!0);n.forEach(function(t){return e.destroyActiveAnimationsForElement(t)}),0!=this.playersByQueriedElement.size&&(n=this.driver.query(t,".ng-animating",!0)).forEach(function(t){return e.finishActiveQueriedAnimationOnElement(t)})}},{key:"destroyActiveAnimationsForElement",value:function(t){var e=this.playersByElement.get(t);e&&e.forEach(function(t){t.queued?t.markedForDestroy=!0:t.destroy()})}},{key:"finishActiveQueriedAnimationOnElement",value:function(t){var e=this.playersByQueriedElement.get(t);e&&e.forEach(function(t){return t.finish()})}},{key:"whenRenderingDone",value:function(){var t=this;return new Promise(function(e){if(t.players.length)return en(t.players).onDone(function(){return e()});e()})}},{key:"processLeaveNode",value:function(t){var e=this,n=t.__ng_removed;if(n&&n.setForRemoval){if(t.__ng_removed=kr,n.namespaceId){this.destroyInnerAnimations(t);var r=this._fetchNamespace(n.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,n.setForRemoval)}this.driver.matchesElement(t,".ng-animate-disabled")&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(function(t){e.markElementAsDisabled(t,!1)})}},{key:"flush",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=[];if(this.newHostElements.size&&(this.newHostElements.forEach(function(e,n){return t._balanceNamespaceList(e,n)}),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(var r=0;r<this.collectedEnterElements.length;r++)Nr(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){var i=[];try{n=this._flushAnimations(i,e)}finally{for(var o=0;o<i.length;o++)i[o]()}}else for(var s=0;s<this.collectedLeaveElements.length;s++)this.processLeaveNode(this.collectedLeaveElements[s]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(function(t){return t()}),this._flushFns=[],this._whenQuietFns.length){var a=this._whenQuietFns;this._whenQuietFns=[],n.length?en(n).onDone(function(){a.forEach(function(t){return t()})}):a.forEach(function(t){return t()})}}},{key:"reportError",value:function(t){throw new Error("Unable to process animations due to the following failed trigger transitions\n ".concat(t.join("\n")))}},{key:"_flushAnimations",value:function(t,e){var n=this,r=new tr,o=[],s=new Map,a=[],u=new Map,c=new Map,l=new Map,h=new Set;this.disabledNodes.forEach(function(t){h.add(t);for(var e=n.driver.query(t,".ng-animate-queued",!0),r=0;r<e.length;r++)h.add(e[r])});var f=this.bodyNode,d=Array.from(this.statesByElement.keys()),p=Pr(d,this.collectedEnterElements),v=new Map,y=0;p.forEach(function(t,e){var n="ng-enter"+y++;v.set(e,n),t.forEach(function(t){return Nr(t,n)})});for(var g=[],m=new Set,_=new Set,b=0;b<this.collectedLeaveElements.length;b++){var w=this.collectedLeaveElements[b],k=w.__ng_removed;k&&k.setForRemoval&&(g.push(w),m.add(w),k.hasAnimation?this.driver.query(w,".ng-star-inserted",!0).forEach(function(t){return m.add(t)}):_.add(w))}var E=new Map,C=Pr(d,Array.from(m));C.forEach(function(t,e){var n="ng-leave"+y++;E.set(e,n),t.forEach(function(t){return Nr(t,n)})}),t.push(function(){p.forEach(function(t,e){var n=v.get(e);t.forEach(function(t){return Rr(t,n)})}),C.forEach(function(t,e){var n=E.get(e);t.forEach(function(t){return Rr(t,n)})}),g.forEach(function(t){n.processLeaveNode(t)})});for(var O=[],S=[],T=this._namespaceList.length-1;T>=0;T--)this._namespaceList[T].drainQueuedTransitions(e).forEach(function(t){var e=t.player,i=t.element;if(O.push(e),n.collectedEnterElements.length){var s=i.__ng_removed;if(s&&s.setForMove)return void e.destroy()}var h=!f||!n.driver.containsElement(f,i),d=E.get(i),p=v.get(i),y=n._buildInstruction(t,r,p,d,h);if(y.errors&&y.errors.length)S.push(y);else{if(h)return e.onStart(function(){return jn(i,y.fromStyles)}),e.onDestroy(function(){return An(i,y.toStyles)}),void o.push(e);if(t.isFallbackTransition)return e.onStart(function(){return jn(i,y.fromStyles)}),e.onDestroy(function(){return An(i,y.toStyles)}),void o.push(e);y.timelines.forEach(function(t){return t.stretchStartingKeyframe=!0}),r.append(i,y.timelines),a.push({instruction:y,player:e,element:i}),y.queriedElements.forEach(function(t){return an(u,t,[]).push(e)}),y.preStyleProps.forEach(function(t,e){var n=Object.keys(t);if(n.length){var r=c.get(e);r||c.set(e,r=new Set),n.forEach(function(t){return r.add(t)})}}),y.postStyleProps.forEach(function(t,e){var n=Object.keys(t),r=l.get(e);r||l.set(e,r=new Set),n.forEach(function(t){return r.add(t)})})}});if(S.length){var I=[];S.forEach(function(t){I.push("@".concat(t.triggerName," has failed due to:\n")),t.errors.forEach(function(t){return I.push("- ".concat(t,"\n"))})}),O.forEach(function(t){return t.destroy()}),this.reportError(I)}var x=new Map,A=new Map;a.forEach(function(t){var e=t.element;r.has(e)&&(A.set(e,e),n._beforeAnimationBuild(t.player.namespaceId,t.instruction,x))}),o.forEach(function(t){var e=t.element;n._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(function(t){an(x,e,[]).push(t),t.destroy()})});var j=g.filter(function(t){return Lr(t,c,l)}),P=new Map;jr(P,this.driver,_,l,"*").forEach(function(t){Lr(t,c,l)&&j.push(t)});var N=new Map;p.forEach(function(t,e){jr(N,n.driver,new Set(t),c,"!")}),j.forEach(function(t){var e=P.get(t),n=N.get(t);P.set(t,Object.assign(Object.assign({},e),n))});var R=[],D=[],M={};a.forEach(function(t){var e=t.element,i=t.player,a=t.instruction;if(r.has(e)){if(h.has(e))return i.onDestroy(function(){return An(e,a.toStyles)}),i.disabled=!0,i.overrideTotalTime(a.totalTime),void o.push(i);var u=M;if(A.size>1){for(var c=e,l=[];c=c.parentNode;){var f=A.get(c);if(f){u=f;break}l.push(c)}l.forEach(function(t){return A.set(t,u)})}var d=n._buildAnimation(i.namespaceId,a,x,s,N,P);if(i.setRealPlayer(d),u===M)R.push(i);else{var p=n.playersByElement.get(u);p&&p.length&&(i.parentPlayer=en(p)),o.push(i)}}else jn(e,a.fromStyles),i.onDestroy(function(){return An(e,a.toStyles)}),D.push(i),h.has(e)&&o.push(i)}),D.forEach(function(t){var e=s.get(t.element);if(e&&e.length){var n=en(e);t.setRealPlayer(n)}}),o.forEach(function(t){t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(var L=0;L<g.length;L++){var F=g[L],V=F.__ng_removed;if(Rr(F,"ng-leave"),!V||!V.hasAnimation){var U=[];if(u.size){var q=u.get(F);q&&q.length&&U.push.apply(U,i(q));for(var B=this.driver.query(F,".ng-animating",!0),H=0;H<B.length;H++){var z=u.get(B[H]);z&&z.length&&U.push.apply(U,i(z))}}var W=U.filter(function(t){return!t.destroyed});W.length?Dr(this,F,W):this.processLeaveNode(F)}}return g.length=0,R.forEach(function(t){n.players.push(t),t.onDone(function(){t.destroy();var e=n.players.indexOf(t);n.players.splice(e,1)}),t.play()}),R}},{key:"elementContainsData",value:function(t,e){var n=!1,r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}},{key:"afterFlush",value:function(t){this._flushFns.push(t)}},{key:"afterFlushAnimationsDone",value:function(t){this._whenQuietFns.push(t)}},{key:"_getPreviousPlayers",value:function(t,e,n,r,i){var o=[];if(e){var s=this.playersByQueriedElement.get(t);s&&(o=s)}else{var a=this.playersByElement.get(t);if(a){var u=!i||"void"==i;a.forEach(function(t){t.queued||(u||t.triggerName==r)&&o.push(t)})}}return(n||r)&&(o=o.filter(function(t){return!(n&&n!=t.namespaceId||r&&r!=t.triggerName)})),o}},{key:"_beforeAnimationBuild",value:function(t,e,n){var r,i=this,o=e.element,a=e.isRemovalTransition?void 0:t,u=e.isRemovalTransition?void 0:e.triggerName,c=s(e.timelines);try{var l=function(){var t=r.value.element,s=t!==o,c=an(n,t,[]);i._getPreviousPlayers(t,s,a,u,e.toState).forEach(function(t){var e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),c.push(t)})};for(c.s();!(r=c.n()).done;)l()}catch(h){c.e(h)}finally{c.f()}jn(o,e.fromStyles)}},{key:"_buildAnimation",value:function(t,e,n,r,i,o){var s=this,a=e.triggerName,u=e.element,c=[],l=new Set,h=new Set,f=e.timelines.map(function(e){var f=e.element;l.add(f);var d=f.__ng_removed;if(d&&d.removedBeforeQueried)return new Je(e.duration,e.delay);var p,v,y=f!==u,g=(p=(n.get(f)||wr).map(function(t){return t.getRealPlayer()}),v=[],Mr(p,v),v).filter(function(t){return!!t.element&&t.element===f}),m=i.get(f),_=o.get(f),b=nn(0,s._normalizer,0,e.keyframes,m,_),w=s._buildPlayer(e,b,g);if(e.subTimeline&&r&&h.add(f),y){var k=new Ir(t,a,f);k.setRealPlayer(w),c.push(k)}return w});c.forEach(function(t){an(s.playersByQueriedElement,t.element,[]).push(t),t.onDone(function(){return function(t,e,n){var r;if(t instanceof Map){if(r=t.get(e)){if(r.length){var i=r.indexOf(n);r.splice(i,1)}0==r.length&&t.delete(e)}}else if(r=t[e]){if(r.length){var o=r.indexOf(n);r.splice(o,1)}0==r.length&&delete t[e]}return r}(s.playersByQueriedElement,t.element,t)})}),l.forEach(function(t){return Nr(t,"ng-animating")});var d=en(f);return d.onDestroy(function(){l.forEach(function(t){return Rr(t,"ng-animating")}),An(u,e.toStyles)}),h.forEach(function(t){an(r,t,[]).push(d)}),d}},{key:"_buildPlayer",value:function(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new Je(t.duration,t.delay)}}]),t}(),Ir=function(){function t(e,n,r){f(this,t),this.namespaceId=e,this.triggerName=n,this.element=r,this._player=new Je,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}return p(t,[{key:"setRealPlayer",value:function(t){var e=this;this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(function(n){e._queuedCallbacks[n].forEach(function(e){return rn(t,n,void 0,e)})}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}},{key:"getRealPlayer",value:function(){return this._player}},{key:"overrideTotalTime",value:function(t){this.totalTime=t}},{key:"syncPlayerEvents",value:function(t){var e=this,n=this._player;n.triggerCallback&&t.onStart(function(){return n.triggerCallback("start")}),t.onDone(function(){return e.finish()}),t.onDestroy(function(){return e.destroy()})}},{key:"_queueEvent",value:function(t,e){an(this._queuedCallbacks,t,[]).push(e)}},{key:"onDone",value:function(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}},{key:"onStart",value:function(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}},{key:"onDestroy",value:function(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}},{key:"init",value:function(){this._player.init()}},{key:"hasStarted",value:function(){return!this.queued&&this._player.hasStarted()}},{key:"play",value:function(){!this.queued&&this._player.play()}},{key:"pause",value:function(){!this.queued&&this._player.pause()}},{key:"restart",value:function(){!this.queued&&this._player.restart()}},{key:"finish",value:function(){this._player.finish()}},{key:"destroy",value:function(){this.destroyed=!0,this._player.destroy()}},{key:"reset",value:function(){!this.queued&&this._player.reset()}},{key:"setPosition",value:function(t){this.queued||this._player.setPosition(t)}},{key:"getPosition",value:function(){return this.queued?0:this._player.getPosition()}},{key:"triggerCallback",value:function(t){var e=this._player;e.triggerCallback&&e.triggerCallback(t)}}]),t}();function xr(t){return t&&1===t.nodeType}function Ar(t,e){var n=t.style.display;return t.style.display=null!=e?e:"none",n}function jr(t,e,n,r,i){var o=[];n.forEach(function(t){return o.push(Ar(t))});var s=[];r.forEach(function(n,r){var o={};n.forEach(function(t){var n=o[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=Er,s.push(r))}),t.set(r,o)});var a=0;return n.forEach(function(t){return Ar(t,o[a++])}),s}function Pr(t,e){var n=new Map;if(t.forEach(function(t){return n.set(t,[])}),0==e.length)return n;var r=new Set(e),i=new Map;function o(t){if(!t)return 1;var e=i.get(t);if(e)return e;var s=t.parentNode;return e=n.has(s)?s:r.has(s)?1:o(s),i.set(t,e),e}return e.forEach(function(t){var e=o(t);1!==e&&n.get(e).push(t)}),n}function Nr(t,e){if(t.classList)t.classList.add(e);else{var n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function Rr(t,e){if(t.classList)t.classList.remove(e);else{var n=t.$$classes;n&&delete n[e]}}function Dr(t,e,n){en(n).onDone(function(){return t.processLeaveNode(e)})}function Mr(t,e){for(var n=0;n<t.length;n++){var r=t[n];r instanceof $e?Mr(r.players,e):e.push(r)}}function Lr(t,e,n){var r=n.get(t);if(!r)return!1;var i=e.get(t);return i?r.forEach(function(t){return i.add(t)}):e.set(t,r),n.delete(t),!0}var Fr=function(){function t(e,n,r){var i=this;f(this,t),this.bodyNode=e,this._driver=n,this._triggerCache={},this.onRemovalComplete=function(t,e){},this._transitionEngine=new Tr(e,n,r),this._timelineEngine=new br(e,n,r),this._transitionEngine.onRemovalComplete=function(t,e){return i.onRemovalComplete(t,e)}}return p(t,[{key:"registerTrigger",value:function(t,e,n,r,i){var o=t+"-"+r,s=this._triggerCache[o];if(!s){var a=[],u=Gn(this._driver,i,a);if(a.length)throw new Error('The animation trigger "'.concat(r,'" has failed to build due to the following errors:\n - ').concat(a.join("\n - ")));s=function(t,e){return new gr(t,e)}(r,u),this._triggerCache[o]=s}this._transitionEngine.registerTrigger(e,r,s)}},{key:"register",value:function(t,e){this._transitionEngine.register(t,e)}},{key:"destroy",value:function(t,e){this._transitionEngine.destroy(t,e)}},{key:"onInsert",value:function(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}},{key:"onRemove",value:function(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}},{key:"disableAnimations",value:function(t,e){this._transitionEngine.markElementAsDisabled(t,e)}},{key:"process",value:function(t,n,r,i){if("@"==r.charAt(0)){var o=e(un(r),2),s=o[0],a=o[1];this._timelineEngine.command(s,n,a,i)}else this._transitionEngine.trigger(t,n,r,i)}},{key:"listen",value:function(t,n,r,i,o){if("@"==r.charAt(0)){var s=e(un(r),2),a=s[0],u=s[1];return this._timelineEngine.listen(a,n,u,o)}return this._transitionEngine.listen(t,n,r,i,o)}},{key:"flush",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this._transitionEngine.flush(t)}},{key:"players",get:function(){return this._transitionEngine.players.concat(this._timelineEngine.players)}},{key:"whenRenderingDone",value:function(){return this._transitionEngine.whenRenderingDone()}}]),t}();function Vr(t,e){var n=null,r=null;return Array.isArray(e)&&e.length?(n=qr(e[0]),e.length>1&&(r=qr(e[e.length-1]))):e&&(n=qr(e)),n||r?new Ur(t,n,r):null}var Ur=function(){var t=function(){function t(e,n,r){f(this,t),this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;var i=t.initialStylesByElement.get(e);i||t.initialStylesByElement.set(e,i={}),this._initialStyles=i}return p(t,[{key:"start",value:function(){this._state<1&&(this._startStyles&&An(this._element,this._startStyles,this._initialStyles),this._state=1)}},{key:"finish",value:function(){this.start(),this._state<2&&(An(this._element,this._initialStyles),this._endStyles&&(An(this._element,this._endStyles),this._endStyles=null),this._state=1)}},{key:"destroy",value:function(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(jn(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(jn(this._element,this._endStyles),this._endStyles=null),An(this._element,this._initialStyles),this._state=3)}}]),t}();return t.initialStylesByElement=new WeakMap,t}();function qr(t){for(var e=null,n=Object.keys(t),r=0;r<n.length;r++){var i=n[r];Br(i)&&((e=e||{})[i]=t[i])}return e}function Br(t){return"display"===t||"position"===t}var Hr=function(){function t(e,n,r,i,o,s,a){var u=this;f(this,t),this._element=e,this._name=n,this._duration=r,this._delay=i,this._easing=o,this._fillMode=s,this._onDoneFn=a,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=function(t){return u._handleCallback(t)}}return p(t,[{key:"apply",value:function(){var t,e,n;t=this._element,e="".concat(this._duration,"ms ").concat(this._easing," ").concat(this._delay,"ms 1 normal ").concat(this._fillMode," ").concat(this._name),(n=Yr(t,"").trim()).length&&(function(t,e){for(var n=0;n<t.length;n++)t.charAt(n)}(n),e="".concat(n,", ").concat(e)),Kr(t,"",e),Gr(this._element,this._eventFn,!1),this._startTime=Date.now()}},{key:"pause",value:function(){zr(this._element,this._name,"paused")}},{key:"resume",value:function(){zr(this._element,this._name,"running")}},{key:"setPosition",value:function(t){var e=Wr(this._element,this._name);this._position=t*this._duration,Kr(this._element,"Delay","-".concat(this._position,"ms"),e)}},{key:"getPosition",value:function(){return this._position}},{key:"_handleCallback",value:function(t){var e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}},{key:"finish",value:function(){this._finished||(this._finished=!0,this._onDoneFn(),Gr(this._element,this._eventFn,!0))}},{key:"destroy",value:function(){var t,e,n,r;this._destroyed||(this._destroyed=!0,this.finish(),t=this._element,e=this._name,n=Yr(t,"").split(","),(r=Qr(n,e))>=0&&(n.splice(r,1),Kr(t,"",n.join(","))))}}]),t}();function zr(t,e,n){Kr(t,"PlayState",n,Wr(t,e))}function Wr(t,e){var n=Yr(t,"");return n.indexOf(",")>0?Qr(n.split(","),e):Qr([n],e)}function Qr(t,e){for(var n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function Gr(t,e,n){n?t.removeEventListener("animationend",e):t.addEventListener("animationend",e)}function Kr(t,e,n,r){var i="animation"+e;if(null!=r){var o=t.style[i];if(o.length){var s=o.split(",");s[r]=n,n=s.join(",")}}t.style[i]=n}function Yr(t,e){return t.style["animation"+e]||""}var Xr=function(){function t(e,n,r,i,o,s,a,u){f(this,t),this.element=e,this.keyframes=n,this.animationName=r,this._duration=i,this._delay=o,this._finalStyles=a,this._specialStyles=u,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=s||"linear",this.totalTime=i+o,this._buildStyler()}return p(t,[{key:"onStart",value:function(t){this._onStartFns.push(t)}},{key:"onDone",value:function(t){this._onDoneFns.push(t)}},{key:"onDestroy",value:function(t){this._onDestroyFns.push(t)}},{key:"destroy",value:function(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(function(t){return t()}),this._onDestroyFns=[])}},{key:"_flushDoneFns",value:function(){this._onDoneFns.forEach(function(t){return t()}),this._onDoneFns=[]}},{key:"_flushStartFns",value:function(){this._onStartFns.forEach(function(t){return t()}),this._onStartFns=[]}},{key:"finish",value:function(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}},{key:"setPosition",value:function(t){this._styler.setPosition(t)}},{key:"getPosition",value:function(){return this._styler.getPosition()}},{key:"hasStarted",value:function(){return this._state>=2}},{key:"init",value:function(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}},{key:"play",value:function(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}},{key:"pause",value:function(){this.init(),this._styler.pause()}},{key:"restart",value:function(){this.reset(),this.play()}},{key:"reset",value:function(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}},{key:"_buildStyler",value:function(){var t=this;this._styler=new Hr(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",function(){return t.finish()})}},{key:"triggerCallback",value:function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(function(t){return t()}),e.length=0}},{key:"beforeDestroy",value:function(){var t=this;this.init();var e={};if(this.hasStarted()){var n=this._state>=3;Object.keys(this._finalStyles).forEach(function(r){"offset"!=r&&(e[r]=n?t._finalStyles[r]:Bn(t.element,r))})}this.currentSnapshot=e}}]),t}(),Zr=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this)).element=t,i._startingStyles={},i.__initialized=!1,i._styles=_n(r),i}return p(n,[{key:"init",value:function(){var t=this;!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(function(e){t._startingStyles[e]=t.element.style[e]}),h(w(n.prototype),"init",this).call(this))}},{key:"play",value:function(){var t=this;this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(function(e){return t.element.style.setProperty(e,t._styles[e])}),h(w(n.prototype),"play",this).call(this))}},{key:"destroy",value:function(){var t=this;this._startingStyles&&(Object.keys(this._startingStyles).forEach(function(e){var n=t._startingStyles[e];n?t.element.style.setProperty(e,n):t.element.style.removeProperty(e)}),this._startingStyles=null,h(w(n.prototype),"destroy",this).call(this))}}]),n}(Je),Jr=function(){function t(){f(this,t),this._count=0,this._head=document.querySelector("head")}return p(t,[{key:"validateStyleProperty",value:function(t){return vn(t)}},{key:"matchesElement",value:function(t,e){return yn(t,e)}},{key:"containsElement",value:function(t,e){return gn(t,e)}},{key:"query",value:function(t,e,n){return mn(t,e,n)}},{key:"computeStyle",value:function(t,e,n){return window.getComputedStyle(t)[e]}},{key:"buildKeyframeElement",value:function(t,e,n){n=n.map(function(t){return _n(t)});var r="@keyframes ".concat(e," {\n"),i="";n.forEach(function(t){i=" ";var e=parseFloat(t.offset);r+="".concat(i).concat(100*e,"% {\n"),i+=" ",Object.keys(t).forEach(function(e){var n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+="".concat(i,"animation-timing-function: ").concat(n,";\n")));default:return void(r+="".concat(i).concat(e,": ").concat(n,";\n"))}}),r+="".concat(i,"}\n")}),r+="}\n";var o=document.createElement("style");return o.textContent=r,o}},{key:"animate",value:function(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],s=o.filter(function(t){return t instanceof Xr}),a={};Vn(n,r)&&s.forEach(function(t){var e=t.currentSnapshot;Object.keys(e).forEach(function(t){return a[t]=e[t]})});var u=function(t){var e={};return t&&(Array.isArray(t)?t:[t]).forEach(function(t){Object.keys(t).forEach(function(n){"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=Un(t,e,a));if(0==n)return new Zr(t,u);var c="gen_css_kf_"+this._count++,l=this.buildKeyframeElement(t,c,e);document.querySelector("head").appendChild(l);var h=Vr(t,e),f=new Xr(t,e,c,n,r,i,u,h);return f.onDestroy(function(){var t;(t=l).parentNode.removeChild(t)}),f}}]),t}(),$r=function(){function t(e,n,r,i){f(this,t),this.element=e,this.keyframes=n,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}return p(t,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(t){return t()}),this._onDoneFns=[])}},{key:"init",value:function(){this._buildPlayer(),this._preparePlayerBeforeStart()}},{key:"_buildPlayer",value:function(){var t=this;if(!this._initialized){this._initialized=!0;var e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",function(){return t._onFinish()})}}},{key:"_preparePlayerBeforeStart",value:function(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}},{key:"_triggerWebAnimation",value:function(t,e,n){return t.animate(e,n)}},{key:"onStart",value:function(t){this._onStartFns.push(t)}},{key:"onDone",value:function(t){this._onDoneFns.push(t)}},{key:"onDestroy",value:function(t){this._onDestroyFns.push(t)}},{key:"play",value:function(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(function(t){return t()}),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}},{key:"pause",value:function(){this.init(),this.domPlayer.pause()}},{key:"finish",value:function(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}},{key:"reset",value:function(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}},{key:"_resetDomPlayerState",value:function(){this.domPlayer&&this.domPlayer.cancel()}},{key:"restart",value:function(){this.reset(),this.play()}},{key:"hasStarted",value:function(){return this._started}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(function(t){return t()}),this._onDestroyFns=[])}},{key:"setPosition",value:function(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}},{key:"getPosition",value:function(){return this.domPlayer.currentTime/this.time}},{key:"totalTime",get:function(){return this._delay+this._duration}},{key:"beforeDestroy",value:function(){var t=this,e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(function(n){"offset"!=n&&(e[n]=t._finished?t._finalKeyframe[n]:Bn(t.element,n))}),this.currentSnapshot=e}},{key:"triggerCallback",value:function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(function(t){return t()}),e.length=0}}]),t}(),ti=function(){function t(){f(this,t),this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(ei().toString()),this._cssKeyframesDriver=new Jr}return p(t,[{key:"validateStyleProperty",value:function(t){return vn(t)}},{key:"matchesElement",value:function(t,e){return yn(t,e)}},{key:"containsElement",value:function(t,e){return gn(t,e)}},{key:"query",value:function(t,e,n){return mn(t,e,n)}},{key:"computeStyle",value:function(t,e,n){return window.getComputedStyle(t)[e]}},{key:"overrideWebAnimationsSupport",value:function(t){this._isNativeImpl=t}},{key:"animate",value:function(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],s=arguments.length>6?arguments[6]:void 0;if(!s&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,o);var a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);var u={},c=o.filter(function(t){return t instanceof $r});Vn(n,r)&&c.forEach(function(t){var e=t.currentSnapshot;Object.keys(e).forEach(function(t){return u[t]=e[t]})});var l=Vr(t,e=Un(t,e=e.map(function(t){return Tn(t,!1)}),u));return new $r(t,e,a,l)}}]),t}();function ei(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}var ni,ri=((ni=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this))._nextAnimationId=0,i._renderer=t.createRenderer(r.body,{id:"0",encapsulation:a.S.None,styles:[],data:{animation:[]}}),i}return p(n,[{key:"build",value:function(t){var e=this._nextAnimationId.toString();this._nextAnimationId++;var n=Array.isArray(t)?Ge(t):t;return si(this._renderer,null,e,"register",[n]),new ii(e,this._renderer)}}]),n}(ze)).\u0275fac=function(t){return new(t||ni)(a.Tb(a.G),a.Tb(d))},ni.\u0275prov=a.Ib({token:ni,factory:ni.\u0275fac}),ni),ii=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this))._id=t,i._renderer=r,i}return p(n,[{key:"create",value:function(t,e){return new oi(this._id,t,e||{},this._renderer)}}]),n}(function(){return function t(){f(this,t)}}()),oi=function(){function t(e,n,r,i){f(this,t),this.id=e,this.element=n,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}return p(t,[{key:"_listen",value:function(t,e){return this._renderer.listen(this.element,"@@".concat(this.id,":").concat(t),e)}},{key:"_command",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return si(this._renderer,this.element,this.id,t,n)}},{key:"onDone",value:function(t){this._listen("done",t)}},{key:"onStart",value:function(t){this._listen("start",t)}},{key:"onDestroy",value:function(t){this._listen("destroy",t)}},{key:"init",value:function(){this._command("init")}},{key:"hasStarted",value:function(){return this._started}},{key:"play",value:function(){this._command("play"),this._started=!0}},{key:"pause",value:function(){this._command("pause")}},{key:"restart",value:function(){this._command("restart")}},{key:"finish",value:function(){this._command("finish")}},{key:"destroy",value:function(){this._command("destroy")}},{key:"reset",value:function(){this._command("reset")}},{key:"setPosition",value:function(t){this._command("setPosition",t)}},{key:"getPosition",value:function(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}]),t}();function si(t,e,n,r,i){return t.setProperty(e,"@@".concat(n,":").concat(r),i)}var ai,ui,ci,li,hi=((ai=function(){function t(e,n,r){f(this,t),this.delegate=e,this.engine=n,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=function(t,e){e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}return p(t,[{key:"createRenderer",value:function(t,e){var n=this,r=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){var i=this._rendererCache.get(r);return i||(i=new fi("",r,this.engine),this._rendererCache.set(r,i)),i}var o=e.id,s=e.id+"-"+this._currentId;return this._currentId++,this.engine.register(s,t),e.data.animation.forEach(function e(r){Array.isArray(r)?r.forEach(e):n.engine.registerTrigger(o,s,t,r.name,r)}),new di(this,s,r,this.engine)}},{key:"begin",value:function(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}},{key:"_scheduleCountTask",value:function(){var t=this;this.promise.then(function(){t._microtaskId++})}},{key:"scheduleListenerCallback",value:function(t,n,r){var i=this;t>=0&&t<this._microtaskId?this._zone.run(function(){return n(r)}):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(function(){i._zone.run(function(){i._animationCallbacksBuffer.forEach(function(t){var n=e(t,2);(0,n[0])(n[1])}),i._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([n,r]))}},{key:"end",value:function(){var t=this;this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(function(){t._scheduleCountTask(),t.engine.flush(t._microtaskId)}),this.delegate.end&&this.delegate.end()}},{key:"whenRenderingDone",value:function(){return this.engine.whenRenderingDone()}}]),t}()).\u0275fac=function(t){return new(t||ai)(a.Tb(a.G),a.Tb(Fr),a.Tb(a.A))},ai.\u0275prov=a.Ib({token:ai,factory:ai.\u0275fac}),ai),fi=function(){function t(e,n,r){f(this,t),this.namespaceId=e,this.delegate=n,this.engine=r,this.destroyNode=this.delegate.destroyNode?function(t){return n.destroyNode(t)}:null}return p(t,[{key:"data",get:function(){return this.delegate.data}},{key:"destroy",value:function(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}},{key:"createElement",value:function(t,e){return this.delegate.createElement(t,e)}},{key:"createComment",value:function(t){return this.delegate.createComment(t)}},{key:"createText",value:function(t){return this.delegate.createText(t)}},{key:"appendChild",value:function(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}},{key:"insertBefore",value:function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}},{key:"removeChild",value:function(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}},{key:"selectRootElement",value:function(t,e){return this.delegate.selectRootElement(t,e)}},{key:"parentNode",value:function(t){return this.delegate.parentNode(t)}},{key:"nextSibling",value:function(t){return this.delegate.nextSibling(t)}},{key:"setAttribute",value:function(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}},{key:"removeAttribute",value:function(t,e,n){this.delegate.removeAttribute(t,e,n)}},{key:"addClass",value:function(t,e){this.delegate.addClass(t,e)}},{key:"removeClass",value:function(t,e){this.delegate.removeClass(t,e)}},{key:"setStyle",value:function(t,e,n,r){this.delegate.setStyle(t,e,n,r)}},{key:"removeStyle",value:function(t,e,n){this.delegate.removeStyle(t,e,n)}},{key:"setProperty",value:function(t,e,n){"@"==e.charAt(0)&&"@.disabled"==e?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}},{key:"setValue",value:function(t,e){this.delegate.setValue(t,e)}},{key:"listen",value:function(t,e,n){return this.delegate.listen(t,e,n)}},{key:"disableAnimations",value:function(t,e){this.engine.disableAnimations(t,e)}}]),t}(),di=function(t){v(r,t);var n=g(r);function r(t,e,i,o){var s;return f(this,r),(s=n.call(this,e,i,o)).factory=t,s.namespaceId=e,s}return p(r,[{key:"setProperty",value:function(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&"@.disabled"==e?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}},{key:"listen",value:function(t,n,r){var i,o,s=this;if("@"==n.charAt(0)){var a,u=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t),c=n.substr(1),l="";return"@"!=c.charAt(0)&&(o=(i=c).indexOf("."),c=(a=e([i.substring(0,o),i.substr(o+1)],2))[0],l=a[1]),this.engine.listen(this.namespaceId,u,c,l,function(t){s.factory.scheduleListenerCallback(t._data||-1,r,t)})}return this.delegate.listen(t,n,r)}}]),r}(fi),pi=((ui=function(t){v(n,t);var e=g(n);function n(t,r,i){return f(this,n),e.call(this,t.body,r,i)}return n}(Fr)).\u0275fac=function(t){return new(t||ui)(a.Tb(d),a.Tb(kn),a.Tb(lr))},ui.\u0275prov=a.Ib({token:ui,factory:ui.\u0275fac}),ui),vi=new a.r("AnimationModuleType"),yi=[{provide:kn,useFactory:function(){return"function"==typeof ei()?new ti:new Jr}},{provide:vi,useValue:"BrowserAnimations"},{provide:ze,useClass:ri},{provide:lr,useFactory:function(){return new hr}},{provide:Fr,useClass:pi},{provide:a.G,useFactory:function(t,e,n){return new hi(t,e,n)},deps:[Pt,Fr,a.A]}],gi=((ci=function t(){f(this,t)}).\u0275mod=a.Kb({type:ci}),ci.\u0275inj=a.Jb({factory:function(t){return new(t||ci)},providers:yi,imports:[Wt]}),ci),mi=new a.Q("11.2.1"),_i=new a.r("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}}),bi=((li=function(){function t(e,n,r){f(this,t),this._hasDoneGlobalChecks=!1,this._document=r,e._applyBodyHighContrastModeCssClasses(),this._sanityChecks=n,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}return p(t,[{key:"_getWindow",value:function(){var t=this._document.defaultView||window;return"object"==typeof t&&t?t:null}},{key:"_checksAreEnabled",value:function(){return Object(a.X)()&&!this._isTestEnv()}},{key:"_isTestEnv",value:function(){var t=this._getWindow();return t&&(t.__karma__||t.jasmine)}},{key:"_checkDoctypeIsDefined",value:function(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype)&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}},{key:"_checkThemeIsPresent",value:function(){if(this._checksAreEnabled()&&!1!==this._sanityChecks&&this._sanityChecks.theme&&this._document.body&&"function"==typeof getComputedStyle){var t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);var e=getComputedStyle(t);e&&"none"!==e.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}}},{key:"_checkCdkVersionMatch",value:function(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&mi.full!==Ve.full&&console.warn("The Angular Material version ("+mi.full+") does not match the Angular CDK version ("+Ve.full+").\nPlease ensure the versions of these two packages exactly match.")}}]),t}()).\u0275mod=a.Kb({type:li}),li.\u0275inj=a.Jb({factory:function(t){return new(t||li)(a.Tb(De),a.Tb(_i,8),a.Tb(d))},imports:[[Fe],Fe]}),li);try{"undefined"!=typeof Intl}catch(gT){!1}var wi,ki,Ei,Ci=function(){function t(e,n,r){f(this,t),this._renderer=e,this.element=n,this.config=r,this.state=3}return p(t,[{key:"fadeOut",value:function(){this._renderer.fadeOutRipple(this)}}]),t}(),Oi={enterDuration:450,exitDuration:400},Si=Ee({passive:!0}),Ti=["mousedown","touchstart"],Ii=["mouseup","mouseleave","touchend","touchcancel"],xi=function(){function t(e,n,r,i){f(this,t),this._target=e,this._ngZone=n,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=ve(r))}return p(t,[{key:"fadeInRipple",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=Object.assign(Object.assign({},Oi),r.animation);r.centered&&(t=i.left+i.width/2,e=i.top+i.height/2);var s=r.radius||function(t,e,n){var r=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),i=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(r*r+i*i)}(t,e,i),a=t-i.left,u=e-i.top,c=o.enterDuration,l=document.createElement("div");l.classList.add("mat-ripple-element"),l.style.left=a-s+"px",l.style.top=u-s+"px",l.style.height=2*s+"px",l.style.width=2*s+"px",null!=r.color&&(l.style.backgroundColor=r.color),l.style.transitionDuration="".concat(c,"ms"),this._containerElement.appendChild(l),window.getComputedStyle(l).getPropertyValue("opacity"),l.style.transform="scale(1)";var h=new Ci(this,l,r);return h.state=0,this._activeRipples.add(h),r.persistent||(this._mostRecentTransientRipple=h),this._runTimeoutOutsideZone(function(){var t=h===n._mostRecentTransientRipple;h.state=1,r.persistent||t&&n._isPointerDown||h.fadeOut()},c),h}},{key:"fadeOutRipple",value:function(t){var e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),e){var n=t.element,r=Object.assign(Object.assign({},Oi),t.config.animation);n.style.transitionDuration="".concat(r.exitDuration,"ms"),n.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(function(){t.state=3,n.parentNode.removeChild(n)},r.exitDuration)}}},{key:"fadeOutAll",value:function(){this._activeRipples.forEach(function(t){return t.fadeOut()})}},{key:"setupTriggerEvents",value:function(t){var e=ve(t);e&&e!==this._triggerElement&&(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(Ti))}},{key:"handleEvent",value:function(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Ii),this._pointerUpEventsRegistered=!0)}},{key:"_onMousedown",value:function(t){var e=Se(t),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;this._target.rippleDisabled||e||n||(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}},{key:"_onTouchStart",value:function(t){if(!this._target.rippleDisabled){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;for(var e=t.changedTouches,n=0;n<e.length;n++)this.fadeInRipple(e[n].clientX,e[n].clientY,this._target.rippleConfig)}}},{key:"_onPointerUp",value:function(){this._isPointerDown&&(this._isPointerDown=!1,this._activeRipples.forEach(function(t){!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}},{key:"_runTimeoutOutsideZone",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._ngZone.runOutsideAngular(function(){return setTimeout(t,e)})}},{key:"_registerEvents",value:function(t){var e=this;this._ngZone.runOutsideAngular(function(){t.forEach(function(t){e._triggerElement.addEventListener(t,e,Si)})})}},{key:"_removeTriggerEvents",value:function(){var t=this;this._triggerElement&&(Ti.forEach(function(e){t._triggerElement.removeEventListener(e,t,Si)}),this._pointerUpEventsRegistered&&Ii.forEach(function(e){t._triggerElement.removeEventListener(e,t,Si)}))}}]),t}(),Ai=new a.r("mat-ripple-global-options"),ji=((Ei=function(){function t(e,n,r,i,o){f(this,t),this._elementRef=e,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=i||{},this._rippleRenderer=new xi(this,n,e,r)}return p(t,[{key:"disabled",get:function(){return this._disabled},set:function(t){this._disabled=t,this._setupTriggerEventsIfEnabled()}},{key:"trigger",get:function(){return this._trigger||this._elementRef.nativeElement},set:function(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}},{key:"ngOnInit",value:function(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}},{key:"ngOnDestroy",value:function(){this._rippleRenderer._removeTriggerEvents()}},{key:"fadeOutAll",value:function(){this._rippleRenderer.fadeOutAll()}},{key:"rippleConfig",get:function(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}},{key:"rippleDisabled",get:function(){return this.disabled||!!this._globalOptions.disabled}},{key:"_setupTriggerEventsIfEnabled",value:function(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}},{key:"launch",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,e,Object.assign(Object.assign({},this.rippleConfig),n)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}]),t}()).\u0275fac=function(t){return new(t||Ei)(a.Mb(a.l),a.Mb(a.A),a.Mb(we),a.Mb(Ai,8),a.Mb(vi,8))},Ei.\u0275dir=a.Hb({type:Ei,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,e){2&t&&a.Eb("mat-ripple-unbounded",e.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),Ei),Pi=((ki=function t(){f(this,t)}).\u0275mod=a.Kb({type:ki}),ki.\u0275inj=a.Jb({factory:function(t){return new(t||ki)},imports:[[bi,ke],bi]}),ki),Ni=((wi=function t(){f(this,t)}).\u0275mod=a.Kb({type:wi}),wi.\u0275inj=a.Jb({factory:function(t){return new(t||wi)},imports:[[Pi,bi],bi]}),wi),Ri=o("Cfvw"),Di=o("9ppp"),Mi=function(t){v(n,t);var e=g(n);function n(t){var r;return f(this,n),(r=e.call(this))._value=t,r}return p(n,[{key:"value",get:function(){return this.getValue()}},{key:"_subscribe",value:function(t){var e=h(w(n.prototype),"_subscribe",this).call(this,t);return e&&!e.closed&&t.next(this._value),e}},{key:"getValue",value:function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Di.a;return this._value}},{key:"next",value:function(t){h(w(n.prototype),"next",this).call(this,this._value=t)}}]),n}(Qt.a),Li=o("DH7j"),Fi=function(t){v(n,t);var e=g(n);function n(){return f(this,n),e.apply(this,arguments)}return p(n,[{key:"notifyNext",value:function(t,e,n,r,i){this.destination.next(e)}},{key:"notifyError",value:function(t,e){this.destination.error(t)}},{key:"notifyComplete",value:function(t){this.destination.complete()}}]),n}(Zt.a),Vi=function(t){v(n,t);var e=g(n);function n(t,r,i){var o;return f(this,n),(o=e.call(this)).parent=t,o.outerValue=r,o.outerIndex=i,o.index=0,o}return p(n,[{key:"_next",value:function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}},{key:"_error",value:function(t){this.parent.notifyError(t,this),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(this),this.unsubscribe()}}]),n}(Zt.a),Ui=o("SeVD");function qi(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Vi(t,n,r);if(!i.closed)return e instanceof Ce.a?e.subscribe(i):Object(Ui.a)(e)(i)}var Bi=o("yCtX"),Hi={},zi=function(){function t(e){f(this,t),this.resultSelector=e}return p(t,[{key:"call",value:function(t,e){return e.subscribe(new Wi(t,this.resultSelector))}}]),t}(),Wi=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t)).resultSelector=r,i.active=0,i.values=[],i.observables=[],i}return p(n,[{key:"_next",value:function(t){this.values.push(Hi),this.observables.push(t)}},{key:"_complete",value:function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++)this.add(qi(this,t[n],void 0,n))}}},{key:"notifyComplete",value:function(t){0==(this.active-=1)&&this.destination.complete()}},{key:"notifyNext",value:function(t,e,n){var r=this.values,i=this.toRespond?r[n]===Hi?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}},{key:"_tryResultSelector",value:function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}]),n}(Fi),Qi=function(){function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t}();function Gi(t){return new Ce.a(function(e){var n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(Ri.a)(n):Object(ae.b)()).subscribe(e)})}var Ki=o("EQ5u"),Yi=o("zx2A");function Xi(t,e){return"function"==typeof e?function(n){return n.pipe(Xi(function(n,r){return Object(Ri.a)(t(n,r)).pipe(Object(oe.a)(function(t,i){return e(n,t,r,i)}))}))}:function(e){return e.lift(new Zi(t))}}var Zi=function(){function t(e){f(this,t),this.project=e}return p(t,[{key:"call",value:function(t,e){return e.subscribe(new Ji(t,this.project))}}]),t}(),Ji=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t)).project=r,i.index=0,i}return p(n,[{key:"_next",value:function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}},{key:"_innerSub",value:function(t){var e=this.innerSubscription;e&&e.unsubscribe();var n=new Yi.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(Yi.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}},{key:"_complete",value:function(){var t=this.innerSubscription;t&&!t.closed||h(w(n.prototype),"_complete",this).call(this),this.unsubscribe()}},{key:"_unsubscribe",value:function(){this.innerSubscription=void 0}},{key:"notifyComplete",value:function(){this.innerSubscription=void 0,this.isStopped&&h(w(n.prototype),"_complete",this).call(this)}},{key:"notifyNext",value:function(t){this.destination.next(t)}}]),n}(Yi.b);function $i(t,e){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new to(t,e,n))}}var to=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];f(this,t),this.accumulator=e,this.seed=n,this.hasSeed=r}return p(t,[{key:"call",value:function(t,e){return e.subscribe(new eo(t,this.accumulator,this.seed,this.hasSeed))}}]),t}(),eo=function(t){v(n,t);var e=g(n);function n(t,r,i,o){var s;return f(this,n),(s=e.call(this,t)).accumulator=r,s._seed=i,s.hasSeed=o,s.index=0,s}return p(n,[{key:"seed",get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t}},{key:"_next",value:function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}},{key:"_tryNext",value:function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(r){this.destination.error(r)}this.seed=e,this.destination.next(e)}}]),n}(Zt.a);function no(t){return function(e){var n=new ro(t),r=e.lift(n);return n.caught=r}}var ro=function(){function t(e){f(this,t),this.selector=e}return p(t,[{key:"call",value:function(t,e){return e.subscribe(new io(t,this.selector,this.caught))}}]),t}(),io=function(t){v(n,t);var e=g(n);function n(t,r,i){var o;return f(this,n),(o=e.call(this,t)).selector=r,o.caught=i,o}return p(n,[{key:"error",value:function(t){if(!this.isStopped){var e;try{e=this.selector(t,this.caught)}catch(o){return void h(w(n.prototype),"error",this).call(this,o)}this._unsubscribeAndRecycle();var r=new Yi.a(this);this.add(r);var i=Object(Yi.c)(e,r);i!==r&&this.add(i)}}}]),n}(Yi.b),oo=o("5+tZ");function so(t,e){return Object(oo.a)(t,e,1)}function ao(t){return function(e){return 0===t?Object(ae.b)():e.lift(new uo(t))}}var uo=function(){function t(e){if(f(this,t),this.total=e,this.total<0)throw new se}return p(t,[{key:"call",value:function(t,e){return e.subscribe(new co(t,this.total))}}]),t}(),co=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t)).total=r,i.ring=new Array,i.count=0,i}return p(n,[{key:"_next",value:function(t){var e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}},{key:"_complete",value:function(){var t=this.destination,e=this.count;if(e>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var o=e++%n;t.next(r[o])}t.complete()}}]),n}(Zt.a);function lo(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:po;return function(e){return e.lift(new ho(t))}}var ho=function(){function t(e){f(this,t),this.errorFactory=e}return p(t,[{key:"call",value:function(t,e){return e.subscribe(new fo(t,this.errorFactory))}}]),t}(),fo=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t)).errorFactory=r,i.hasValue=!1,i}return p(n,[{key:"_next",value:function(t){this.hasValue=!0,this.destination.next(t)}},{key:"_complete",value:function(){if(this.hasValue)return this.destination.complete();var t;try{t=this.errorFactory()}catch(lE){t=lE}this.destination.error(t)}}]),n}(Zt.a);function po(){return new Qi}function vo(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(e){return e.lift(new yo(t))}}var yo=function(){function t(e){f(this,t),this.defaultValue=e}return p(t,[{key:"call",value:function(t,e){return e.subscribe(new go(t,this.defaultValue))}}]),t}(),go=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t)).defaultValue=r,i.isEmpty=!0,i}return p(n,[{key:"_next",value:function(t){this.isEmpty=!1,this.destination.next(t)}},{key:"_complete",value:function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}]),n}(Zt.a),mo=o("SpAZ");function _o(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?ne(function(e,n){return t(e,n,r)}):mo.a,ue(1),n?vo(e):lo(function(){return new Qi}))}}var bo=o("x+ZX"),wo=function(){function t(e){f(this,t),this.callback=e}return p(t,[{key:"call",value:function(t,e){return e.subscribe(new ko(t,this.callback))}}]),t}(),ko=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t)).add(new Gt.a(r)),i}return n}(Zt.a),Eo=function t(e,n){f(this,t),this.id=e,this.url=n},Co=function(t){v(n,t);var e=g(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"imperative",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return f(this,n),(i=e.call(this,t,r)).navigationTrigger=o,i.restoredState=s,i}return p(n,[{key:"toString",value:function(){return"NavigationStart(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(Eo),Oo=function(t){v(n,t);var e=g(n);function n(t,r,i){var o;return f(this,n),(o=e.call(this,t,r)).urlAfterRedirects=i,o}return p(n,[{key:"toString",value:function(){return"NavigationEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"')")}}]),n}(Eo),So=function(t){v(n,t);var e=g(n);function n(t,r,i){var o;return f(this,n),(o=e.call(this,t,r)).reason=i,o}return p(n,[{key:"toString",value:function(){return"NavigationCancel(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(Eo),To=function(t){v(n,t);var e=g(n);function n(t,r,i){var o;return f(this,n),(o=e.call(this,t,r)).error=i,o}return p(n,[{key:"toString",value:function(){return"NavigationError(id: ".concat(this.id,", url: '").concat(this.url,"', error: ").concat(this.error,")")}}]),n}(Eo),Io=function(t){v(n,t);var e=g(n);function n(t,r,i,o){var s;return f(this,n),(s=e.call(this,t,r)).urlAfterRedirects=i,s.state=o,s}return p(n,[{key:"toString",value:function(){return"RoutesRecognized(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Eo),xo=function(t){v(n,t);var e=g(n);function n(t,r,i,o){var s;return f(this,n),(s=e.call(this,t,r)).urlAfterRedirects=i,s.state=o,s}return p(n,[{key:"toString",value:function(){return"GuardsCheckStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Eo),Ao=function(t){v(n,t);var e=g(n);function n(t,r,i,o,s){var a;return f(this,n),(a=e.call(this,t,r)).urlAfterRedirects=i,a.state=o,a.shouldActivate=s,a}return p(n,[{key:"toString",value:function(){return"GuardsCheckEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,", shouldActivate: ").concat(this.shouldActivate,")")}}]),n}(Eo),jo=function(t){v(n,t);var e=g(n);function n(t,r,i,o){var s;return f(this,n),(s=e.call(this,t,r)).urlAfterRedirects=i,s.state=o,s}return p(n,[{key:"toString",value:function(){return"ResolveStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Eo),Po=function(t){v(n,t);var e=g(n);function n(t,r,i,o){var s;return f(this,n),(s=e.call(this,t,r)).urlAfterRedirects=i,s.state=o,s}return p(n,[{key:"toString",value:function(){return"ResolveEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Eo),No=function(){function t(e){f(this,t),this.route=e}return p(t,[{key:"toString",value:function(){return"RouteConfigLoadStart(path: ".concat(this.route.path,")")}}]),t}(),Ro=function(){function t(e){f(this,t),this.route=e}return p(t,[{key:"toString",value:function(){return"RouteConfigLoadEnd(path: ".concat(this.route.path,")")}}]),t}(),Do=function(){function t(e){f(this,t),this.snapshot=e}return p(t,[{key:"toString",value:function(){return"ChildActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),Mo=function(){function t(e){f(this,t),this.snapshot=e}return p(t,[{key:"toString",value:function(){return"ChildActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),Lo=function(){function t(e){f(this,t),this.snapshot=e}return p(t,[{key:"toString",value:function(){return"ActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),Fo=function(){function t(e){f(this,t),this.snapshot=e}return p(t,[{key:"toString",value:function(){return"ActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),Vo=function(){function t(e,n,r){f(this,t),this.routerEvent=e,this.position=n,this.anchor=r}return p(t,[{key:"toString",value:function(){return"Scroll(anchor: '".concat(this.anchor,"', position: '").concat(this.position?"".concat(this.position[0],", ").concat(this.position[1]):null,"')")}}]),t}(),Uo=function(){function t(e){f(this,t),this.params=e||{}}return p(t,[{key:"has",value:function(t){return Object.prototype.hasOwnProperty.call(this.params,t)}},{key:"get",value:function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e[0]:e}return null}},{key:"getAll",value:function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e:[e]}return[]}},{key:"keys",get:function(){return Object.keys(this.params)}}]),t}();function qo(t){return new Uo(t)}function Bo(t){var e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Ho(t,e,n){var r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;for(var i={},o=0;o<r.length;o++){var s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function zo(t,e){var n,r=t?Object.keys(t):void 0,i=e?Object.keys(e):void 0;if(!r||!i||r.length!=i.length)return!1;for(var o=0;o<r.length;o++)if(!Wo(t[n=r[o]],e[n]))return!1;return!0}function Wo(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;var n=i(t).sort(),r=i(e).sort();return n.every(function(t,e){return r[e]===t})}return t===e}function Qo(t){return Array.prototype.concat.apply([],t)}function Go(t){return t.length>0?t[t.length-1]:null}function Ko(t,e){for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Yo(t){return Object(a.sb)(t)?t:Object(a.tb)(t)?Object(Ri.a)(Promise.resolve(t)):Object(Kt.a)(t)}function Xo(t,e,n){return n?function(t,e){return zo(t,e)}(t.queryParams,e.queryParams)&&Zo(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(function(n){return Wo(t[n],e[n])})}(t.queryParams,e.queryParams)&&Jo(t.root,e.root)}function Zo(t,e){if(!rs(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(var n in e.children){if(!t.children[n])return!1;if(!Zo(t.children[n],e.children[n]))return!1}return!0}function Jo(t,e){return $o(t,e,e.segments)}function $o(t,e,n){if(t.segments.length>n.length)return!!rs(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!rs(t.segments,n))return!1;for(var r in e.children){if(!t.children[r])return!1;if(!Jo(t.children[r],e.children[r]))return!1}return!0}var i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!rs(t.segments,i)&&!!t.children.primary&&$o(t.children.primary,e,o)}var ts=function(){function t(e,n,r){f(this,t),this.root=e,this.queryParams=n,this.fragment=r}return p(t,[{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=qo(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){return ss.serialize(this)}}]),t}(),es=function(){function t(e,n){var r=this;f(this,t),this.segments=e,this.children=n,this.parent=null,Ko(n,function(t,e){return t.parent=r})}return p(t,[{key:"hasChildren",value:function(){return this.numberOfChildren>0}},{key:"numberOfChildren",get:function(){return Object.keys(this.children).length}},{key:"toString",value:function(){return as(this)}}]),t}(),ns=function(){function t(e,n){f(this,t),this.path=e,this.parameters=n}return p(t,[{key:"parameterMap",get:function(){return this._parameterMap||(this._parameterMap=qo(this.parameters)),this._parameterMap}},{key:"toString",value:function(){return ps(this)}}]),t}();function rs(t,e){return t.length===e.length&&t.every(function(t,n){return t.path===e[n].path})}var is=function t(){f(this,t)},os=function(){function t(){f(this,t)}return p(t,[{key:"parse",value:function(t){var e=new _s(t);return new ts(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}},{key:"serialize",value:function(t){var e,n,r;return"/".concat(us(t.root,!0)).concat((n=t.queryParams,r=Object.keys(n).map(function(t){var e=n[t];return Array.isArray(e)?e.map(function(e){return"".concat(ls(t),"=").concat(ls(e))}).join("&"):"".concat(ls(t),"=").concat(ls(e))}),r.length?"?".concat(r.join("&")):"")).concat("string"==typeof t.fragment?"#".concat((e=t.fragment,encodeURI(e))):"")}}]),t}(),ss=new os;function as(t){return t.segments.map(function(t){return ps(t)}).join("/")}function us(t,e){if(!t.hasChildren())return as(t);if(e){var n=t.children.primary?us(t.children.primary,!1):"",r=[];return Ko(t.children,function(t,e){"primary"!==e&&r.push("".concat(e,":").concat(us(t,!1)))}),r.length>0?"".concat(n,"(").concat(r.join("//"),")"):n}var i=function(t,e){var n=[];return Ko(t.children,function(t,r){"primary"===r&&(n=n.concat(e(t,r)))}),Ko(t.children,function(t,r){"primary"!==r&&(n=n.concat(e(t,r)))}),n}(t,function(e,n){return"primary"===n?[us(t.children.primary,!1)]:["".concat(n,":").concat(us(e,!1))]});return 1===Object.keys(t.children).length&&null!=t.children.primary?"".concat(as(t),"/").concat(i[0]):"".concat(as(t),"/(").concat(i.join("//"),")")}function cs(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ls(t){return cs(t).replace(/%3B/gi,";")}function hs(t){return cs(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function fs(t){return decodeURIComponent(t)}function ds(t){return fs(t.replace(/\+/g,"%20"))}function ps(t){return"".concat(hs(t.path)).concat((e=t.parameters,Object.keys(e).map(function(t){return";".concat(hs(t),"=").concat(hs(e[t]))}).join("")));var e}var vs=/^[^\/()?;=#]+/;function ys(t){var e=t.match(vs);return e?e[0]:""}var gs=/^[^=?&#]+/,ms=/^[^?&#]+/,_s=function(){function t(e){f(this,t),this.url=e,this.remaining=e}return p(t,[{key:"parseRootSegment",value:function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new es([],{}):new es([],this.parseChildren())}},{key:"parseQueryParams",value:function(){var t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}},{key:"parseFragment",value:function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}},{key:"parseChildren",value:function(){if(""===this.remaining)return{};this.consumeOptional("/");var t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());var e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));var n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new es(t,e)),n}},{key:"parseSegment",value:function(){var t=ys(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '".concat(this.remaining,"'."));return this.capture(t),new ns(fs(t),this.parseMatrixParams())}},{key:"parseMatrixParams",value:function(){for(var t={};this.consumeOptional(";");)this.parseParam(t);return t}},{key:"parseParam",value:function(t){var e=ys(this.remaining);if(e){this.capture(e);var n="";if(this.consumeOptional("=")){var r=ys(this.remaining);r&&(n=r,this.capture(n))}t[fs(e)]=fs(n)}}},{key:"parseQueryParam",value:function(t){var e=function(t){var e=t.match(gs);return e?e[0]:""}(this.remaining);if(e){this.capture(e);var n="";if(this.consumeOptional("=")){var r=function(t){var e=t.match(ms);return e?e[0]:""}(this.remaining);r&&(n=r,this.capture(n))}var i=ds(e),o=ds(n);if(t.hasOwnProperty(i)){var s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}}},{key:"parseParens",value:function(t){var e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var n=ys(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error("Cannot parse url '".concat(this.url,"'"));var i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i="primary");var o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new es([],o),this.consumeOptional("//")}return e}},{key:"peekStartsWith",value:function(t){return this.remaining.startsWith(t)}},{key:"consumeOptional",value:function(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}},{key:"capture",value:function(t){if(!this.consumeOptional(t))throw new Error('Expected "'.concat(t,'".'))}}]),t}(),bs=function(){function t(e){f(this,t),this._root=e}return p(t,[{key:"root",get:function(){return this._root.value}},{key:"parent",value:function(t){var e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}},{key:"children",value:function(t){var e=ws(t,this._root);return e?e.children.map(function(t){return t.value}):[]}},{key:"firstChild",value:function(t){var e=ws(t,this._root);return e&&e.children.length>0?e.children[0].value:null}},{key:"siblings",value:function(t){var e=ks(t,this._root);return e.length<2?[]:e[e.length-2].children.map(function(t){return t.value}).filter(function(e){return e!==t})}},{key:"pathFromRoot",value:function(t){return ks(t,this._root).map(function(t){return t.value})}}]),t}();function ws(t,e){if(t===e.value)return e;var n,r=s(e.children);try{for(r.s();!(n=r.n()).done;){var i=ws(t,n.value);if(i)return i}}catch(o){r.e(o)}finally{r.f()}return null}function ks(t,e){if(t===e.value)return[e];var n,r=s(e.children);try{for(r.s();!(n=r.n()).done;){var i=ks(t,n.value);if(i.length)return i.unshift(e),i}}catch(o){r.e(o)}finally{r.f()}return[]}var Es=function(){function t(e,n){f(this,t),this.value=e,this.children=n}return p(t,[{key:"toString",value:function(){return"TreeNode(".concat(this.value,")")}}]),t}();function Cs(t){var e={};return t&&t.children.forEach(function(t){return e[t.value.outlet]=t}),e}var Os=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t)).snapshot=r,js(_(i),t),i}return p(n,[{key:"toString",value:function(){return this.snapshot.toString()}}]),n}(bs);function Ss(t,e){var n=function(t,e){var n=new xs([],{},{},"",{},"primary",e,null,t.root,-1,{});return new As("",new Es(n,[]))}(t,e),r=new Mi([new ns("",{})]),i=new Mi({}),o=new Mi({}),s=new Mi({}),a=new Mi(""),u=new Ts(r,i,s,a,o,"primary",e,n.root);return u.snapshot=n.root,new Os(new Es(u,[]),n)}var Ts=function(){function t(e,n,r,i,o,s,a,u){f(this,t),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this._futureSnapshot=u}return p(t,[{key:"routeConfig",get:function(){return this._futureSnapshot.routeConfig}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=this.params.pipe(Object(oe.a)(function(t){return qo(t)}))),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(oe.a)(function(t){return qo(t)}))),this._queryParamMap}},{key:"toString",value:function(){return this.snapshot?this.snapshot.toString():"Future(".concat(this._futureSnapshot,")")}}]),t}();function Is(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emptyOnly",n=t.pathFromRoot,r=0;if("always"!==e)for(r=n.length-1;r>=1;){var i=n[r],o=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function(t){return t.reduce(function(t,e){return{params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}},{params:{},data:{},resolve:{}})}(n.slice(r))}var xs=function(){function t(e,n,r,i,o,s,a,u,c,l,h){f(this,t),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._urlSegment=c,this._lastPathIndex=l,this._resolve=h}return p(t,[{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=qo(this.params)),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=qo(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){return"Route(url:'".concat(this.url.map(function(t){return t.toString()}).join("/"),"', path:'").concat(this.routeConfig?this.routeConfig.path:"","')")}}]),t}(),As=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this,r)).url=t,js(_(i),r),i}return p(n,[{key:"toString",value:function(){return Ps(this._root)}}]),n}(bs);function js(t,e){e.value._routerState=t,e.children.forEach(function(e){return js(t,e)})}function Ps(t){var e=t.children.length>0?" { ".concat(t.children.map(Ps).join(", ")," } "):"";return"".concat(t.value).concat(e)}function Ns(t){if(t.snapshot){var e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,zo(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),zo(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!zo(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),zo(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Rs(t,e){return zo(t.params,e.params)&&function(t,e){return rs(t,e)&&t.every(function(t,n){return zo(t.parameters,e[n].parameters)})}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Rs(t.parent,e.parent))}function Ds(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){var r=n.value;r._futureSnapshot=e.value;var i=function(t,e,n){return e.children.map(function(e){var r,i=s(n.children);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(t.shouldReuseRoute(e.value,o.value.snapshot))return Ds(t,e,o)}}catch(a){i.e(a)}finally{i.f()}return Ds(t,e)})}(t,e,n);return new Es(r,i)}var o=t.retrieve(e.value);if(o){var a=o.route;return Ms(e,a),a}var u,c=new Ts(new Mi((u=e.value).url),new Mi(u.params),new Mi(u.queryParams),new Mi(u.fragment),new Mi(u.data),u.outlet,u.component,u),l=e.children.map(function(e){return Ds(t,e)});return new Es(c,l)}function Ms(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(var n=0;n<t.children.length;++n)Ms(t.children[n],e.children[n])}function Ls(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Fs(t){return"object"==typeof t&&null!=t&&t.outlets}function Vs(t,e,n,r,i){var o={};return r&&Ko(r,function(t,e){o[e]=Array.isArray(t)?t.map(function(t){return"".concat(t)}):"".concat(t)}),new ts(n.root===t?e:Us(n.root,t,e),o,i)}function Us(t,e,n){var r={};return Ko(t.children,function(t,i){r[i]=t===e?n:Us(t,e,n)}),new es(t.segments,r)}var qs=function(){function t(e,n,r){if(f(this,t),this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Ls(r[0]))throw new Error("Root segment cannot have matrix parameters");var i=r.find(Fs);if(i&&i!==Go(r))throw new Error("{outlets:{}} has to be the last command")}return p(t,[{key:"toRoot",value:function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}]),t}(),Bs=function t(e,n,r){f(this,t),this.segmentGroup=e,this.processChildren=n,this.index=r};function Hs(t,e,n){if(t||(t=new es([],{})),0===t.segments.length&&t.hasChildren())return zs(t,e,n);var r=function(t,e,n){for(var r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};i<t.segments.length;){if(r>=n.length)return o;var s=t.segments[i],a=n[r];if(Fs(a))break;var u="".concat(a),c=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&c&&"object"==typeof c&&void 0===c.outlets){if(!Ks(u,c,s))return o;r+=2}else{if(!Ks(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){var o=new es(t.segments.slice(0,r.pathIndex),{});return o.children.primary=new es(t.segments.slice(r.pathIndex),t.children),zs(o,0,i)}return r.match&&0===i.length?new es(t.segments,{}):r.match&&!t.hasChildren()?Ws(t,e,n):r.match?zs(t,0,i):Ws(t,e,n)}function zs(t,e,n){if(0===n.length)return new es(t.segments,{});var r=function(t){return Fs(t[0])?t[0].outlets:{primary:t}}(n),i={};return Ko(r,function(n,r){"string"==typeof n&&(n=[n]),null!==n&&(i[r]=Hs(t.children[r],e,n))}),Ko(t.children,function(t,e){void 0===r[e]&&(i[e]=t)}),new es(t.segments,i)}function Ws(t,e,n){for(var r=t.segments.slice(0,e),i=0;i<n.length;){var o=n[i];if(Fs(o)){var s=Qs(o.outlets);return new es(r,s)}if(0===i&&Ls(n[0]))r.push(new ns(t.segments[e].path,Gs(n[0]))),i++;else{var a=Fs(o)?o.outlets.primary:"".concat(o),u=i<n.length-1?n[i+1]:null;a&&u&&Ls(u)?(r.push(new ns(a,Gs(u))),i+=2):(r.push(new ns(a,{})),i++)}}return new es(r,{})}function Qs(t){var e={};return Ko(t,function(t,n){"string"==typeof t&&(t=[t]),null!==t&&(e[n]=Ws(new es([],{}),0,t))}),e}function Gs(t){var e={};return Ko(t,function(t,n){return e[n]="".concat(t)}),e}function Ks(t,e,n){return t==n.path&&zo(e,n.parameters)}var Ys=function(){function t(e,n,r,i){f(this,t),this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i}return p(t,[{key:"activate",value:function(t){var e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Ns(this.futureState.root),this.activateChildRoutes(e,n,t)}},{key:"deactivateChildRoutes",value:function(t,e,n){var r=this,i=Cs(e);t.children.forEach(function(t){var e=t.value.outlet;r.deactivateRoutes(t,i[e],n),delete i[e]}),Ko(i,function(t,e){r.deactivateRouteAndItsChildren(t,n)})}},{key:"deactivateRoutes",value:function(t,e,n){var r=t.value,i=e?e.value:null;if(r===i)if(r.component){var o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}},{key:"deactivateRouteAndItsChildren",value:function(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}},{key:"detachAndStoreRouteSubtree",value:function(t,e){var n=e.getContext(t.value.outlet);if(n&&n.outlet){var r=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:r,route:t,contexts:i})}}},{key:"deactivateRouteAndOutlet",value:function(t,e){for(var n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=Cs(t),o=0,s=Object.keys(i);o<s.length;o++){var a=s[o];this.deactivateRouteAndItsChildren(i[a],r)}n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}},{key:"activateChildRoutes",value:function(t,e,n){var r=this,i=Cs(e);t.children.forEach(function(t){r.activateRoutes(t,i[t.value.outlet],n),r.forwardEvent(new Fo(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Mo(t.value.snapshot))}},{key:"activateRoutes",value:function(t,e,n){var r=t.value,i=e?e.value:null;if(Ns(r),r===i)if(r.component){var o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,n);else if(r.component){var s=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){var a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Xs(a.route)}else{var u=function(t){for(var e=t.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(r.snapshot),c=u?u.module.componentFactoryResolver:null;s.attachRef=null,s.route=r,s.resolver=c,s.outlet&&s.outlet.activateWith(r,c),this.activateChildRoutes(t,null,s.children)}}else this.activateChildRoutes(t,null,n)}}]),t}();function Xs(t){Ns(t.value),t.children.forEach(Xs)}var Zs=function t(e,n){f(this,t),this.routes=e,this.module=n};function Js(t){return"function"==typeof t}function $s(t){return t instanceof ts}var ta=Symbol("INITIAL_VALUE");function ea(){return Xi(function(t){return function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,i;return Object(Be.a)(e[e.length-1])&&(i=e.pop()),"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&Object(Li.a)(e[0])&&(e=e[0]),Object(Bi.a)(e,i).lift(new zi(r))}(t.map(function(t){return t.pipe(ue(1),He(ta))})).pipe($i(function(t,e){var n=!1;return e.reduce(function(t,r,i){if(t!==ta)return t;if(r===ta&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||$s(r))return r}return t},t)},ta),ne(function(t){return t!==ta}),Object(oe.a)(function(t){return $s(t)?t:!0===t}),ue(1))})}var na,ra=((na=function t(){f(this,t)}).\u0275fac=function(t){return new(t||na)},na.\u0275cmp=a.Gb({type:na,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&a.Nb(0,"router-outlet")},directives:function(){return[Za]},encapsulation:2}),na);function ia(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=0;n<t.length;n++){var r=t[n];oa(r,sa(e,r))}}function oa(t,e){t.children&&ia(t.children,e)}function sa(t,e){return e?t||e.path?t&&!e.path?"".concat(t,"/"):!t&&e.path?e.path:"".concat(t,"/").concat(e.path):"":t}function aa(t){var e=t.children&&t.children.map(aa),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=ra),n}function ua(t){return t.outlet||"primary"}function ca(t,e){var n=t.filter(function(t){return ua(t)===e});return n.push.apply(n,i(t.filter(function(t){return ua(t)!==e}))),n}var la={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function ha(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},la):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};var i=(e.matcher||Ho)(n,t,e);if(!i)return Object.assign({},la);var o={};Ko(i.posParams,function(t,e){o[e]=t.path});var s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function fa(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"corrected";if(n.length>0&&function(t,e,n){return n.some(function(n){return da(t,e,n)&&"primary"!==ua(n)})}(t,n,r)){var o=new es(e,function(t,e,n,r){var i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;var o,a=s(n);try{for(a.s();!(o=a.n()).done;){var u=o.value;if(""===u.path&&"primary"!==ua(u)){var c=new es([],{});c._sourceSegment=t,c._segmentIndexShift=e.length,i[ua(u)]=c}}}catch(l){a.e(l)}finally{a.f()}return i}(t,e,r,new es(n,t.children)));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(function(n){return da(t,e,n)})}(t,n,r)){var a=new es(t.segments,function(t,e,n,r,i,o){var a,u={},c=s(r);try{for(c.s();!(a=c.n()).done;){var l=a.value;if(da(t,n,l)&&!i[ua(l)]){var h=new es([],{});h._sourceSegment=t,h._segmentIndexShift="legacy"===o?t.segments.length:e.length,u[ua(l)]=h}}}catch(f){c.e(f)}finally{c.f()}return Object.assign(Object.assign({},i),u)}(t,e,n,r,t.children,i));return a._sourceSegment=t,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:n}}var u=new es(t.segments,t.children);return u._sourceSegment=t,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:n}}function da(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function pa(t,e,n,r){return!!(ua(t)===r||"primary"!==r&&da(e,n,t))&&("**"===t.path||ha(e,t,n).matched)}function va(t,e,n){return 0===e.length&&!t.children[n]}var ya=function t(e){f(this,t),this.segmentGroup=e||null},ga=function t(e){f(this,t),this.urlTree=e};function ma(t){return new Ce.a(function(e){return e.error(new ya(t))})}function _a(t){return new Ce.a(function(e){return e.error(new ga(t))})}function ba(t){return new Ce.a(function(e){return e.error(new Error("Only absolute redirects can have named outlets. redirectTo: '".concat(t,"'")))})}var wa=function(){function t(e,n,r,i,o){f(this,t),this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=e.get(a.y)}return p(t,[{key:"apply",value:function(){var t=this,e=fa(this.urlTree.root,[],[],this.config).segmentGroup,n=new es(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,n,"primary").pipe(Object(oe.a)(function(e){return t.createUrlTree(ka(e),t.urlTree.queryParams,t.urlTree.fragment)})).pipe(no(function(e){if(e instanceof ga)return t.allowRedirects=!1,t.match(e.urlTree);if(e instanceof ya)throw t.noMatchError(e);throw e}))}},{key:"match",value:function(t){var e=this;return this.expandSegmentGroup(this.ngModule,this.config,t.root,"primary").pipe(Object(oe.a)(function(n){return e.createUrlTree(ka(n),t.queryParams,t.fragment)})).pipe(no(function(t){if(t instanceof ya)throw e.noMatchError(t);throw t}))}},{key:"noMatchError",value:function(t){return new Error("Cannot match any routes. URL Segment: '".concat(t.segmentGroup,"'"))}},{key:"createUrlTree",value:function(t,e,n){var r=t.segments.length>0?new es([],{primary:t}):t;return new ts(r,e,n)}},{key:"expandSegmentGroup",value:function(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(oe.a)(function(t){return new es([],t)})):this.expandSegment(t,n,e,n.segments,r,!0)}},{key:"expandChildren",value:function(t,e,n){for(var r=this,i=[],o=0,s=Object.keys(n.children);o<s.length;o++){var a=s[o];"primary"===a?i.unshift(a):i.push(a)}return Object(Ri.a)(i).pipe(so(function(i){var o=n.children[i],s=ca(e,i);return r.expandSegmentGroup(t,s,o,i).pipe(Object(oe.a)(function(t){return{segment:t,outlet:i}}))}),$i(function(t,e){return t[e.outlet]=e.segment,t},{}),function(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?ne(function(e,n){return t(e,n,r)}):mo.a,ao(1),n?vo(e):lo(function(){return new Qi}))}}())}},{key:"expandSegment",value:function(t,e,n,r,i,o){var s=this;return Object(Ri.a)(n).pipe(so(function(a){return s.expandSegmentAgainstRoute(t,e,n,a,r,i,o).pipe(no(function(t){if(t instanceof ya)return Object(Kt.a)(null);throw t}))}),_o(function(t){return!!t}),no(function(t,n){if(t instanceof Qi||"EmptyError"===t.name){if(va(e,r,i))return Object(Kt.a)(new es([],{}));throw new ya(e)}throw t}))}},{key:"expandSegmentAgainstRoute",value:function(t,e,n,r,i,o,s){return pa(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):ma(e):ma(e)}},{key:"expandSegmentAgainstRouteUsingRedirect",value:function(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}},{key:"expandWildCardWithParamsAgainstRouteUsingRedirect",value:function(t,e,n,r){var i=this,o=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?_a(o):this.lineralizeSegments(n,o).pipe(Object(oo.a)(function(n){var o=new es(n,{});return i.expandSegment(t,o,e,n,r,!1)}))}},{key:"expandRegularSegmentAgainstRouteUsingRedirect",value:function(t,e,n,r,i,o){var s=this,a=ha(e,r,i),u=a.matched,c=a.consumedSegments,l=a.lastChild,h=a.positionalParamSegments;if(!u)return ma(e);var f=this.applyRedirectCommands(c,r.redirectTo,h);return r.redirectTo.startsWith("/")?_a(f):this.lineralizeSegments(r,f).pipe(Object(oo.a)(function(r){return s.expandSegment(t,e,n,r.concat(i.slice(l)),o,!1)}))}},{key:"matchSegmentAgainstRoute",value:function(t,e,n,r,i){var o=this;if("**"===n.path)return n.loadChildren?(n._loadedConfig?Object(Kt.a)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(Object(oe.a)(function(t){return n._loadedConfig=t,new es(r,{})})):Object(Kt.a)(new es(r,{}));var s=ha(e,n,r),a=s.matched,u=s.consumedSegments,c=s.lastChild;if(!a)return ma(e);var l=r.slice(c);return this.getChildConfig(t,n,r).pipe(Object(oo.a)(function(t){var r=t.module,s=t.routes,a=fa(e,u,l,s),c=a.segmentGroup,h=a.slicedSegments,f=new es(c.segments,c.children);if(0===h.length&&f.hasChildren())return o.expandChildren(r,s,f).pipe(Object(oe.a)(function(t){return new es(u,t)}));if(0===s.length&&0===h.length)return Object(Kt.a)(new es(u,{}));var d=ua(n)===i;return o.expandSegment(r,f,s,h,d?"primary":i,!0).pipe(Object(oe.a)(function(t){return new es(u.concat(t.segments),t.children)}))}))}},{key:"getChildConfig",value:function(t,e,n){var r=this;return e.children?Object(Kt.a)(new Zs(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(Kt.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(oo.a)(function(n){return n?r.configLoader.load(t.injector,e).pipe(Object(oe.a)(function(t){return e._loadedConfig=t,t})):function(t){return new Ce.a(function(e){return e.error(Bo("Cannot load children because the guard of the route \"path: '".concat(t.path,"'\" returned false")))})}(e)})):Object(Kt.a)(new Zs([],t))}},{key:"runCanLoadGuards",value:function(t,e,n){var r=this,i=e.canLoad;if(!i||0===i.length)return Object(Kt.a)(!0);var o=i.map(function(r){var i,o=t.get(r);if(function(t){return t&&Js(t.canLoad)}(o))i=o.canLoad(e,n);else{if(!Js(o))throw new Error("Invalid CanLoad guard");i=o(e,n)}return Yo(i)});return Object(Kt.a)(o).pipe(ea(),Object(Xt.a)(function(t){if($s(t)){var e=Bo('Redirecting to "'.concat(r.urlSerializer.serialize(t),'"'));throw e.url=t,e}}),Object(oe.a)(function(t){return!0===t}))}},{key:"lineralizeSegments",value:function(t,e){for(var n=[],r=e.root;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(Kt.a)(n);if(r.numberOfChildren>1||!r.children.primary)return ba(t.redirectTo);r=r.children.primary}}},{key:"applyRedirectCommands",value:function(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}},{key:"applyRedirectCreatreUrlTree",value:function(t,e,n,r){var i=this.createSegmentGroup(t,e.root,n,r);return new ts(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}},{key:"createQueryParams",value:function(t,e){var n={};return Ko(t,function(t,r){if("string"==typeof t&&t.startsWith(":")){var i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}},{key:"createSegmentGroup",value:function(t,e,n,r){var i=this,o=this.createSegments(t,e.segments,n,r),s={};return Ko(e.children,function(e,o){s[o]=i.createSegmentGroup(t,e,n,r)}),new es(o,s)}},{key:"createSegments",value:function(t,e,n,r){var i=this;return e.map(function(e){return e.path.startsWith(":")?i.findPosParam(t,e,r):i.findOrReturn(e,n)})}},{key:"findPosParam",value:function(t,e,n){var r=n[e.path.substring(1)];if(!r)throw new Error("Cannot redirect to '".concat(t,"'. Cannot find '").concat(e.path,"'."));return r}},{key:"findOrReturn",value:function(t,e){var n,r=0,i=s(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.path===t.path)return e.splice(r),o;r++}}catch(a){i.e(a)}finally{i.f()}return t}}]),t}();function ka(t){for(var e={},n=0,r=Object.keys(t.children);n<r.length;n++){var i=r[n],o=ka(t.children[i]);(o.segments.length>0||o.hasChildren())&&(e[i]=o)}return function(t){if(1===t.numberOfChildren&&t.children.primary){var e=t.children.primary;return new es(t.segments.concat(e.segments),e.children)}return t}(new es(t.segments,e))}var Ea=function t(e){f(this,t),this.path=e,this.route=this.path[this.path.length-1]},Ca=function t(e,n){f(this,t),this.component=e,this.route=n};function Oa(t,e,n){var r=t._root;return Ta(r,e?e._root:null,n,[r.value])}function Sa(t,e,n){var r=function(t){if(!t)return null;for(var e=t.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Ta(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},o=Cs(e);return t.children.forEach(function(t){!function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){var u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!rs(t.url,e.url);case"pathParamsOrQueryParamsChange":return!rs(t.url,e.url)||!zo(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Rs(t,e)||!zo(t.queryParams,e.queryParams);case"paramsChange":default:return!Rs(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Ea(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Ta(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ca(a.outlet.component,s))}else s&&Ia(e,a,i),i.canActivateChecks.push(new Ea(r)),Ta(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),Ko(o,function(t,e){return Ia(t,n.getContext(e),i)}),i}function Ia(t,e,n){var r=Cs(t),i=t.value;Ko(r,function(t,r){Ia(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Ca(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}var xa=function t(){f(this,t)};function Aa(t){return new Ce.a(function(e){return e.error(t)})}var ja=function(){function t(e,n,r,i,o,s){f(this,t),this.rootComponentType=e,this.config=n,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=s}return p(t,[{key:"recognize",value:function(){var t=fa(this.urlTree.root,[],[],this.config.filter(function(t){return void 0===t.redirectTo}),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,"primary");if(null===e)return null;var n=new xs([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Es(n,e),i=new As(this.url,r);return this.inheritParamsAndData(i._root),i}},{key:"inheritParamsAndData",value:function(t){var e=this,n=t.value,r=Is(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach(function(t){return e.inheritParamsAndData(t)})}},{key:"processSegmentGroup",value:function(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}},{key:"processChildren",value:function(t,e){for(var n=[],r=0,o=Object.keys(e.children);r<o.length;r++){var a=o[r],u=e.children[a],c=ca(t,a),l=this.processSegmentGroup(c,u,a);if(null===l)return null;n.push.apply(n,i(l))}var h=function(t){var e,n=[],r=s(t);try{var o=function(){var t,r=e.value;if(!function(t){var e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}(r))return n.push(r),"continue";var o=n.find(function(t){return r.value.routeConfig===t.value.routeConfig});void 0!==o?(t=o.children).push.apply(t,i(r.children)):n.push(r)};for(r.s();!(e=r.n()).done;)o()}catch(a){r.e(a)}finally{r.f()}return n}(n);return h.sort(function(t,e){return"primary"===t.value.outlet?-1:"primary"===e.value.outlet?1:t.value.outlet.localeCompare(e.value.outlet)}),h}},{key:"processSegment",value:function(t,e,n,r){var i,o=s(t);try{for(o.s();!(i=o.n()).done;){var a=i.value,u=this.processSegmentAgainstRoute(a,e,n,r);if(null!==u)return u}}catch(c){o.e(c)}finally{o.f()}return va(e,n,r)?[]:null}},{key:"processSegmentAgainstRoute",value:function(t,e,n,r){if(t.redirectTo||!pa(t,e,n,r))return null;var i,o=[],s=[];if("**"===t.path){var a=n.length>0?Go(n).parameters:{};i=new xs(n,a,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ra(t),ua(t),t.component,t,Pa(e),Na(e)+n.length,Da(t))}else{var u=ha(e,t,n);if(!u.matched)return null;o=u.consumedSegments,s=n.slice(u.lastChild),i=new xs(o,u.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ra(t),ua(t),t.component,t,Pa(e),Na(e)+o.length,Da(t))}var c=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),l=fa(e,o,s,c.filter(function(t){return void 0===t.redirectTo}),this.relativeLinkResolution),h=l.segmentGroup,f=l.slicedSegments;if(0===f.length&&h.hasChildren()){var d=this.processChildren(c,h);return null===d?null:[new Es(i,d)]}if(0===c.length&&0===f.length)return[new Es(i,[])];var p=ua(t)===r,v=this.processSegment(c,h,f,p?"primary":r);return null===v?null:[new Es(i,v)]}}]),t}();function Pa(t){for(var e=t;e._sourceSegment;)e=e._sourceSegment;return e}function Na(t){for(var e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;e._sourceSegment;)n+=(e=e._sourceSegment)._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Ra(t){return t.data||{}}function Da(t){return t.resolve||{}}function Ma(t){return Xi(function(e){var n=t(e);return n?Object(Ri.a)(n).pipe(Object(oe.a)(function(){return e})):Object(Kt.a)(e)})}var La=function(t){v(n,t);var e=g(n);function n(){return f(this,n),e.apply(this,arguments)}return n}(function(){function t(){f(this,t)}return p(t,[{key:"shouldDetach",value:function(t){return!1}},{key:"store",value:function(t,e){}},{key:"shouldAttach",value:function(t){return!1}},{key:"retrieve",value:function(t){return null}},{key:"shouldReuseRoute",value:function(t,e){return t.routeConfig===e.routeConfig}}]),t}()),Fa=new a.r("ROUTES"),Va=function(){function t(e,n,r,i){f(this,t),this.loader=e,this.compiler=n,this.onLoadStartListener=r,this.onLoadEndListener=i}return p(t,[{key:"load",value:function(t,e){var n=this;if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);var r=this.loadModuleFactory(e.loadChildren).pipe(Object(oe.a)(function(r){n.onLoadEndListener&&n.onLoadEndListener(e);var i=r.create(t);return new Zs(Qo(i.injector.get(Fa,void 0,a.q.Self|a.q.Optional)).map(aa),i)}),no(function(t){throw e._loader$=void 0,t}));return e._loader$=new Ki.a(r,function(){return new Qt.a}).pipe(Object(bo.a)()),e._loader$}},{key:"loadModuleFactory",value:function(t){var e=this;return"string"==typeof t?Object(Ri.a)(this.loader.load(t)):Yo(t()).pipe(Object(oo.a)(function(t){return t instanceof a.w?Object(Kt.a)(t):Object(Ri.a)(e.compiler.compileModuleAsync(t))}))}}]),t}(),Ua=function t(){f(this,t),this.outlet=null,this.route=null,this.resolver=null,this.children=new qa,this.attachRef=null},qa=function(){function t(){f(this,t),this.contexts=new Map}return p(t,[{key:"onChildOutletCreated",value:function(t,e){var n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}},{key:"onChildOutletDestroyed",value:function(t){var e=this.getContext(t);e&&(e.outlet=null)}},{key:"onOutletDeactivated",value:function(){var t=this.contexts;return this.contexts=new Map,t}},{key:"onOutletReAttached",value:function(t){this.contexts=t}},{key:"getOrCreateContext",value:function(t){var e=this.getContext(t);return e||(e=new Ua,this.contexts.set(t,e)),e}},{key:"getContext",value:function(t){return this.contexts.get(t)||null}}]),t}(),Ba=function(){function t(){f(this,t)}return p(t,[{key:"shouldProcessUrl",value:function(t){return!0}},{key:"extract",value:function(t){return t}},{key:"merge",value:function(t,e){return t}}]),t}();function Ha(t){throw t}function za(t,e,n){return e.parse("/")}function Wa(t,e){return Object(Kt.a)(null)}var Qa,Ga,Ka,Ya,Xa=((Ga=function(){function t(e,n,r,i,o,s,u,c){var l=this;f(this,t),this.rootComponentType=e,this.urlSerializer=n,this.rootContexts=r,this.location=i,this.config=c,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new Qt.a,this.errorHandler=Ha,this.malformedUriErrorHandler=za,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Wa,afterPreactivation:Wa},this.urlHandlingStrategy=new Ba,this.routeReuseStrategy=new La,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(a.y),this.console=o.get(a.ab);var h=o.get(a.A);this.isNgZoneEnabled=h instanceof a.A&&a.A.isInAngularZone(),this.resetConfig(c),this.currentUrlTree=new ts(new es([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Va(s,u,function(t){return l.triggerEvent(new No(t))},function(t){return l.triggerEvent(new Ro(t))}),this.routerState=Ss(this.currentUrlTree,this.rootComponentType),this.transitions=new Mi({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return p(t,[{key:"setupNavigations",value:function(t){var e=this,n=this.events;return t.pipe(ne(function(t){return 0!==t.id}),Object(oe.a)(function(t){return Object.assign(Object.assign({},t),{extractedUrl:e.urlHandlingStrategy.extract(t.rawUrl)})}),Xi(function(t){var r,i,o,s,a=!1,u=!1;return Object(Kt.a)(t).pipe(Object(Xt.a)(function(t){e.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:e.lastSuccessfulNavigation?Object.assign(Object.assign({},e.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Xi(function(t){var r,i,o,s,a=!e.navigated||t.extractedUrl.toString()!==e.browserUrlTree.toString();if(("reload"===e.onSameUrlNavigation||a)&&e.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(Kt.a)(t).pipe(Xi(function(t){var r=e.transitions.getValue();return n.next(new Co(t.id,e.serializeUrl(t.extractedUrl),t.source,t.restoredState)),r!==e.transitions.getValue()?ae.a:Promise.resolve(t)}),(r=e.ngModule.injector,i=e.configLoader,o=e.urlSerializer,s=e.config,Xi(function(t){return function(t,e,n,r,i){return new wa(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(oe.a)(function(e){return Object.assign(Object.assign({},t),{urlAfterRedirects:e})}))})),Object(Xt.a)(function(t){e.currentNavigation=Object.assign(Object.assign({},e.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,n,r,i,o){return Object(oo.a)(function(r){return function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"emptyOnly",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"legacy";try{var s=new ja(t,e,n,r,i,o).recognize();return null===s?Aa(new xa):Object(Kt.a)(s)}catch(lE){return Aa(lE)}}(t,n,r.urlAfterRedirects,(s=r.urlAfterRedirects,e.serializeUrl(s)),i,o).pipe(Object(oe.a)(function(t){return Object.assign(Object.assign({},r),{targetSnapshot:t})}));var s})}(e.rootComponentType,e.config,0,e.paramsInheritanceStrategy,e.relativeLinkResolution),Object(Xt.a)(function(t){"eager"===e.urlUpdateStrategy&&(t.extras.skipLocationChange||e.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),e.browserUrlTree=t.urlAfterRedirects);var r=new Io(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);n.next(r)}));if(a&&e.rawUrlTree&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){var u=t.id,c=t.extractedUrl,l=t.source,h=t.restoredState,f=t.extras,d=new Co(u,e.serializeUrl(c),l,h);n.next(d);var p=Ss(c,e.rootComponentType).snapshot;return Object(Kt.a)(Object.assign(Object.assign({},t),{targetSnapshot:p,urlAfterRedirects:c,extras:Object.assign(Object.assign({},f),{skipLocationChange:!1,replaceUrl:!1})}))}return e.rawUrlTree=t.rawUrl,e.browserUrlTree=t.urlAfterRedirects,t.resolve(null),ae.a}),Ma(function(t){var n=t.targetSnapshot,r=t.id,i=t.extractedUrl,o=t.rawUrl,s=t.extras,a=s.skipLocationChange,u=s.replaceUrl;return e.hooks.beforePreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:o,skipLocationChange:!!a,replaceUrl:!!u})}),Object(Xt.a)(function(t){var n=new xo(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)}),Object(oe.a)(function(t){return Object.assign(Object.assign({},t),{guards:Oa(t.targetSnapshot,t.currentSnapshot,e.rootContexts)})}),function(t,e){return Object(oo.a)(function(n){var r=n.targetSnapshot,i=n.currentSnapshot,o=n.guards,s=o.canActivateChecks,a=o.canDeactivateChecks;return 0===a.length&&0===s.length?Object(Kt.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(Ri.a)(t).pipe(Object(oo.a)(function(t){return function(t,e,n,r,i){var o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(Kt.a)(!0);var s=o.map(function(o){var s,a=Sa(o,e,i);if(function(t){return t&&Js(t.canDeactivate)}(a))s=Yo(a.canDeactivate(t,e,n,r));else{if(!Js(a))throw new Error("Invalid CanDeactivate guard");s=Yo(a(t,e,n,r))}return s.pipe(_o())});return Object(Kt.a)(s).pipe(ea())}(t.component,t.route,n,e,r)}),_o(function(t){return!0!==t},!0))}(a,r,i,t).pipe(Object(oo.a)(function(n){return n&&"boolean"==typeof n?function(t,e,n,r){return Object(Ri.a)(e).pipe(so(function(e){return qe(function(t,e){return null!==t&&e&&e(new Do(t)),Object(Kt.a)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new Lo(t)),Object(Kt.a)(!0)}(e.route,r),function(t,e,n){var r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(function(t){return function(t){var e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)}).filter(function(t){return null!==t}).map(function(e){return Gi(function(){var i=e.guards.map(function(i){var o,s=Sa(i,e.node,n);if(function(t){return t&&Js(t.canActivateChild)}(s))o=Yo(s.canActivateChild(r,t));else{if(!Js(s))throw new Error("Invalid CanActivateChild guard");o=Yo(s(r,t))}return o.pipe(_o())});return Object(Kt.a)(i).pipe(ea())})});return Object(Kt.a)(i).pipe(ea())}(t,e.path,n),function(t,e,n){var r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(Kt.a)(!0);var i=r.map(function(r){return Gi(function(){var i,o=Sa(r,e,n);if(function(t){return t&&Js(t.canActivate)}(o))i=Yo(o.canActivate(e,t));else{if(!Js(o))throw new Error("Invalid CanActivate guard");i=Yo(o(e,t))}return i.pipe(_o())})});return Object(Kt.a)(i).pipe(ea())}(t,e.route,n))}),_o(function(t){return!0!==t},!0))}(r,s,t,e):Object(Kt.a)(n)}),Object(oe.a)(function(t){return Object.assign(Object.assign({},n),{guardsResult:t})}))})}(e.ngModule.injector,function(t){return e.triggerEvent(t)}),Object(Xt.a)(function(t){if($s(t.guardsResult)){var n=Bo('Redirecting to "'.concat(e.serializeUrl(t.guardsResult),'"'));throw n.url=t.guardsResult,n}var r=new Ao(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);e.triggerEvent(r)}),ne(function(t){if(!t.guardsResult){e.resetUrlToCurrentUrlTree();var r=new So(t.id,e.serializeUrl(t.extractedUrl),"");return n.next(r),t.resolve(!1),!1}return!0}),Ma(function(t){if(t.guards.canActivateChecks.length)return Object(Kt.a)(t).pipe(Object(Xt.a)(function(t){var n=new jo(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)}),Xi(function(t){var r,i,o=!1;return Object(Kt.a)(t).pipe((r=e.paramsInheritanceStrategy,i=e.ngModule.injector,Object(oo.a)(function(t){var e=t.targetSnapshot,n=t.guards.canActivateChecks;if(!n.length)return Object(Kt.a)(t);var o=0;return Object(Ri.a)(n).pipe(so(function(t){return function(t,e,n,r){return function(t,e,n,r){var i=Object.keys(t);if(0===i.length)return Object(Kt.a)({});var o={};return Object(Ri.a)(i).pipe(Object(oo.a)(function(i){return function(t,e,n,r){var i=Sa(t,e,r);return Yo(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(Xt.a)(function(t){o[i]=t}))}),ao(1),Object(oo.a)(function(){return Object.keys(o).length===i.length?Object(Kt.a)(o):ae.a}))}(t._resolve,t,e,r).pipe(Object(oe.a)(function(e){return t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Is(t,n).resolve),null}))}(t.route,e,r,i)}),Object(Xt.a)(function(){return o++}),ao(1),Object(oo.a)(function(e){return o===n.length?Object(Kt.a)(t):ae.a}))})),Object(Xt.a)({next:function(){return o=!0},complete:function(){if(!o){var r=new So(t.id,e.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");n.next(r),t.resolve(!1)}}}))}),Object(Xt.a)(function(t){var n=new Po(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)}))}),Ma(function(t){var n=t.targetSnapshot,r=t.id,i=t.extractedUrl,o=t.rawUrl,s=t.extras,a=s.skipLocationChange,u=s.replaceUrl;return e.hooks.afterPreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:o,skipLocationChange:!!a,replaceUrl:!!u})}),Object(oe.a)(function(t){var n=function(t,e,n){var r=Ds(t,e._root,n?n._root:void 0);return new Os(r,e)}(e.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:n})}),Object(Xt.a)(function(t){e.currentUrlTree=t.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(e.currentUrlTree,t.rawUrl),e.routerState=t.targetRouterState,"deferred"===e.urlUpdateStrategy&&(t.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),e.browserUrlTree=t.urlAfterRedirects)}),(i=e.rootContexts,o=e.routeReuseStrategy,s=function(t){return e.triggerEvent(t)},Object(oe.a)(function(t){return new Ys(o,t.targetRouterState,t.currentRouterState,s).activate(i),t})),Object(Xt.a)({next:function(){a=!0},complete:function(){a=!0}}),(r=function(){if(!a&&!u){e.resetUrlToCurrentUrlTree();var r=new So(t.id,e.serializeUrl(t.extractedUrl),"Navigation ID ".concat(t.id," is not equal to the current navigation id ").concat(e.navigationId));n.next(r),t.resolve(!1)}e.currentNavigation=null},function(t){return t.lift(new wo(r))}),no(function(r){if(u=!0,(a=r)&&a.ngNavigationCancelingError){var i=$s(r.url);i||(e.navigated=!0,e.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));var o=new So(t.id,e.serializeUrl(t.extractedUrl),r.message);n.next(o),i?setTimeout(function(){var n=e.urlHandlingStrategy.merge(r.url,e.rawUrlTree);e.scheduleNavigation(n,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===e.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{e.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);var s=new To(t.id,e.serializeUrl(t.extractedUrl),r);n.next(s);try{t.resolve(e.errorHandler(r))}catch(Np){t.reject(Np)}}var a;return ae.a}))}))}},{key:"resetRootComponentType",value:function(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}},{key:"getTransition",value:function(){var t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}},{key:"setTransition",value:function(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}},{key:"initialNavigation",value:function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}},{key:"setUpLocationChangeListener",value:function(){var t=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe(function(e){var n=t.extractLocationChangeInfoFromEvent(e);t.shouldScheduleNavigation(t.lastLocationChangeInfo,n)&&setTimeout(function(){var e=n.source,r=n.state,i=n.urlTree,o={replaceUrl:!0};if(r){var s=Object.assign({},r);delete s.navigationId,0!==Object.keys(s).length&&(o.state=s)}t.scheduleNavigation(i,e,r,o)},0),t.lastLocationChangeInfo=n}))}},{key:"extractLocationChangeInfoFromEvent",value:function(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}},{key:"shouldScheduleNavigation",value:function(t,e){if(!t)return!0;var n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}},{key:"url",get:function(){return this.serializeUrl(this.currentUrlTree)}},{key:"getCurrentNavigation",value:function(){return this.currentNavigation}},{key:"triggerEvent",value:function(t){this.events.next(t)}},{key:"resetConfig",value:function(t){ia(t),this.config=t.map(aa),this.navigated=!1,this.lastSuccessfulId=-1}},{key:"ngOnDestroy",value:function(){this.dispose()}},{key:"dispose",value:function(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}},{key:"createUrlTree",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.relativeTo,r=e.queryParams,o=e.fragment,s=e.queryParamsHandling,a=e.preserveFragment,u=n||this.routerState.root,c=a?this.currentUrlTree.fragment:o,l=null;switch(s){case"merge":l=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=r||null}return null!==l&&(l=this.removeEmptyProps(l)),function(t,e,n,r,o){if(0===n.length)return Vs(e.root,e.root,e,r,o);var s=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new qs(!0,0,t);var e=0,n=!1,r=t.reduce(function(t,r,o){if("object"==typeof r&&null!=r){if(r.outlets){var s={};return Ko(r.outlets,function(t,e){s[e]="string"==typeof t?t.split("/"):t}),[].concat(i(t),[{outlets:s}])}if(r.segmentPath)return[].concat(i(t),[r.segmentPath])}return"string"!=typeof r?[].concat(i(t),[r]):0===o?(r.split("/").forEach(function(r,i){0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[].concat(i(t),[r])},[]);return new qs(n,e,r)}(n);if(s.toRoot())return Vs(e.root,new es([],{}),e,r,o);var a=function(t,e,n){if(t.isAbsolute)return new Bs(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){var r=n.snapshot._urlSegment;return new Bs(r,r===e.root,0)}var i=Ls(t.commands[0])?0:1;return function(t,e,n){for(var r=t,i=e,o=n;o>i;){if(o-=i,!(r=r.parent))throw new Error("Invalid number of '../'");i=r.segments.length}return new Bs(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+i,t.numberOfDoubleDots)}(s,e,t),u=a.processChildren?zs(a.segmentGroup,a.index,s.commands):Hs(a.segmentGroup,a.index,s.commands);return Vs(a.segmentGroup,u,e,r,o)}(u,this.currentUrlTree,t,l,c)}},{key:"navigateByUrl",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1},n=$s(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}},{key:"navigate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};return function(t){for(var e=0;e<t.length;e++){var n=t[e];if(null==n)throw new Error("The requested path contains ".concat(n," segment at index ").concat(e))}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}},{key:"serializeUrl",value:function(t){return this.urlSerializer.serialize(t)}},{key:"parseUrl",value:function(t){var e;try{e=this.urlSerializer.parse(t)}catch(lE){e=this.malformedUriErrorHandler(lE,this.urlSerializer,t)}return e}},{key:"isActive",value:function(t,e){if($s(t))return Xo(this.currentUrlTree,t,e);var n=this.parseUrl(t);return Xo(this.currentUrlTree,n,e)}},{key:"removeEmptyProps",value:function(t){return Object.keys(t).reduce(function(e,n){var r=t[n];return null!=r&&(e[n]=r),e},{})}},{key:"processNavigations",value:function(){var t=this;this.navigations.subscribe(function(e){t.navigated=!0,t.lastSuccessfulId=e.id,t.events.next(new Oo(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(t.currentUrlTree))),t.lastSuccessfulNavigation=t.currentNavigation,t.currentNavigation=null,e.resolve(!0)},function(e){t.console.warn("Unhandled Navigation Error: ")})}},{key:"scheduleNavigation",value:function(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);var o,s,a,u=this.getTransition(),c="imperative"!==e&&"imperative"===(null==u?void 0:u.source),l=(this.lastSuccessfulId===u.id||this.currentNavigation?u.rawUrl:u.urlAfterRedirects).toString()===t.toString();if(c&&l)return Promise.resolve(!0);i?(o=i.resolve,s=i.reject,a=i.promise):a=new Promise(function(t,e){o=t,s=e});var h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:o,reject:s,promise:a,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),a.catch(function(t){return Promise.reject(t)})}},{key:"setBrowserUrl",value:function(t,e,n,r){var i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}},{key:"resetStateAndUrl",value:function(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}},{key:"resetUrlToCurrentUrlTree",value:function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}]),t}()).\u0275fac=function(t){return new(t||Ga)(a.Tb(a.O),a.Tb(is),a.Tb(qa),a.Tb(V),a.Tb(a.s),a.Tb(a.x),a.Tb(a.i),a.Tb(void 0))},Ga.\u0275prov=a.Ib({token:Ga,factory:Ga.\u0275fac}),Ga),Za=((Qa=function(){function t(e,n,r,i,o){f(this,t),this.parentContexts=e,this.location=n,this.resolver=r,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new a.n,this.deactivateEvents=new a.n,this.name=i||"primary",e.onChildOutletCreated(this.name,this)}return p(t,[{key:"ngOnDestroy",value:function(){this.parentContexts.onChildOutletDestroyed(this.name)}},{key:"ngOnInit",value:function(){if(!this.activated){var t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}},{key:"isActivated",get:function(){return!!this.activated}},{key:"component",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}},{key:"activatedRoute",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}},{key:"activatedRouteData",get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}},{key:"detach",value:function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var t=this.activated;return this.activated=null,this._activatedRoute=null,t}},{key:"attach",value:function(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}},{key:"deactivate",value:function(){if(this.activated){var t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}},{key:"activateWith",value:function(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;var n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Ja(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}]),t}()).\u0275fac=function(t){return new(t||Qa)(a.Mb(qa),a.Mb(a.R),a.Mb(a.j),a.Ub("name"),a.Mb(a.h))},Qa.\u0275dir=a.Hb({type:Qa,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),Qa),Ja=function(){function t(e,n,r){f(this,t),this.route=e,this.childContexts=n,this.parent=r}return p(t,[{key:"get",value:function(t,e){return t===Ts?this.route:t===qa?this.childContexts:this.parent.get(t,e)}}]),t}(),$a=function t(){f(this,t)},tu=function(){function t(){f(this,t)}return p(t,[{key:"preload",value:function(t,e){return Object(Kt.a)(null)}}]),t}(),eu=((Ya=function(){function t(e,n,r,i,o){f(this,t),this.router=e,this.injector=i,this.preloadingStrategy=o,this.loader=new Va(n,r,function(t){return e.triggerEvent(new No(t))},function(t){return e.triggerEvent(new Ro(t))})}return p(t,[{key:"setUpPreloading",value:function(){var t=this;this.subscription=this.router.events.pipe(ne(function(t){return t instanceof Oo}),so(function(){return t.preload()})).subscribe(function(){})}},{key:"preload",value:function(){var t=this.injector.get(a.y);return this.processRoutes(t,this.router.config)}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"processRoutes",value:function(t,e){var n,r=[],i=s(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.loadChildren&&!o.canLoad&&o._loadedConfig){var a=o._loadedConfig;r.push(this.processRoutes(a.module,a.routes))}else o.loadChildren&&!o.canLoad?r.push(this.preloadConfig(t,o)):o.children&&r.push(this.processRoutes(t,o.children))}}catch(u){i.e(u)}finally{i.f()}return Object(Ri.a)(r).pipe(Object(Ue.a)(),Object(oe.a)(function(t){}))}},{key:"preloadConfig",value:function(t,e){var n=this;return this.preloadingStrategy.preload(e,function(){return(e._loadedConfig?Object(Kt.a)(e._loadedConfig):n.loader.load(t.injector,e)).pipe(Object(oo.a)(function(t){return e._loadedConfig=t,n.processRoutes(t.module,t.routes)}))})}}]),t}()).\u0275fac=function(t){return new(t||Ya)(a.Tb(Xa),a.Tb(a.x),a.Tb(a.i),a.Tb(a.s),a.Tb($a))},Ya.\u0275prov=a.Ib({token:Ya,factory:Ya.\u0275fac}),Ya),nu=((Ka=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};f(this,t),this.router=e,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}return p(t,[{key:"init",value:function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}},{key:"createScrollEvents",value:function(){var t=this;return this.router.events.subscribe(function(e){e instanceof Co?(t.store[t.lastId]=t.viewportScroller.getScrollPosition(),t.lastSource=e.navigationTrigger,t.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Oo&&(t.lastId=e.id,t.scheduleScrollEvent(e,t.router.parseUrl(e.urlAfterRedirects).fragment))})}},{key:"consumeScrollEvents",value:function(){var t=this;return this.router.events.subscribe(function(e){e instanceof Vo&&(e.position?"top"===t.options.scrollPositionRestoration?t.viewportScroller.scrollToPosition([0,0]):"enabled"===t.options.scrollPositionRestoration&&t.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===t.options.anchorScrolling?t.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==t.options.scrollPositionRestoration&&t.viewportScroller.scrollToPosition([0,0]))})}},{key:"scheduleScrollEvent",value:function(t,e){this.router.triggerEvent(new Vo(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}},{key:"ngOnDestroy",value:function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||Ka)(a.Tb(Xa),a.Tb(at),a.Tb(void 0))},Ka.\u0275prov=a.Ib({token:Ka,factory:Ka.\u0275fac}),Ka),ru=new a.r("ROUTER_CONFIGURATION"),iu=new a.r("ROUTER_FORROOT_GUARD"),ou=[V,{provide:is,useClass:os},{provide:Xa,useFactory:function(t,e,n,r,i,o,s){var a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},u=arguments.length>8?arguments[8]:void 0,l=arguments.length>9?arguments[9]:void 0,h=new Xa(null,t,e,n,r,i,o,Qo(s));if(u&&(h.urlHandlingStrategy=u),l&&(h.routeReuseStrategy=l),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(a,h),a.enableTracing){var f=c();h.events.subscribe(function(t){f.logGroup("Router Event: ".concat(t.constructor.name)),f.log(t.toString()),f.log(t),f.logGroupEnd()})}return h},deps:[is,qa,V,a.s,a.x,a.i,Fa,ru,[function(){return function t(){f(this,t)}}(),new a.B],[function(){return function t(){f(this,t)}}(),new a.B]]},qa,{provide:Ts,useFactory:function(t){return t.routerState.root},deps:[Xa]},{provide:a.x,useClass:a.L},eu,tu,function(){function t(){f(this,t)}return p(t,[{key:"preload",value:function(t,e){return e().pipe(no(function(){return Object(Kt.a)(null)}))}}]),t}(),{provide:ru,useValue:{enableTracing:!1}}];function su(){return new a.z("Router",Xa)}var au,uu=((au=function(){function t(e,n){f(this,t)}return p(t,null,[{key:"forRoot",value:function(e,n){return{ngModule:t,providers:[ou,fu(e),{provide:iu,useFactory:hu,deps:[[Xa,new a.B,new a.K]]},{provide:ru,useValue:n||{}},{provide:j,useFactory:lu,deps:[y,[new a.p(M),new a.B],ru]},{provide:nu,useFactory:cu,deps:[Xa,at,ru]},{provide:$a,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:tu},{provide:a.z,multi:!0,useFactory:su},[pu,{provide:a.d,multi:!0,useFactory:vu,deps:[pu]},{provide:gu,useFactory:yu,deps:[pu]},{provide:a.b,multi:!0,useExisting:gu}]]}}},{key:"forChild",value:function(e){return{ngModule:t,providers:[fu(e)]}}}]),t}()).\u0275mod=a.Kb({type:au}),au.\u0275inj=a.Jb({factory:function(t){return new(t||au)(a.Tb(iu,8),a.Tb(Xa,8))}}),au);function cu(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new nu(t,e,n)}function lu(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.useHash?new F(t,e):new L(t,e)}function hu(t){return"guarded"}function fu(t){return[{provide:a.a,multi:!0,useValue:t},{provide:Fa,multi:!0,useValue:t}]}var du,pu=((du=function(){function t(e){f(this,t),this.injector=e,this.initNavigation=!1,this.resultOfPreactivationDone=new Qt.a}return p(t,[{key:"appInitializer",value:function(){var t=this;return this.injector.get(E,Promise.resolve(null)).then(function(){var e=null,n=new Promise(function(t){return e=t}),r=t.injector.get(Xa),i=t.injector.get(ru);return"disabled"===i.initialNavigation?(r.setUpLocationChangeListener(),e(!0)):"enabled"===i.initialNavigation||"enabledBlocking"===i.initialNavigation?(r.hooks.afterPreactivation=function(){return t.initNavigation?Object(Kt.a)(null):(t.initNavigation=!0,e(!0),t.resultOfPreactivationDone)},r.initialNavigation()):e(!0),n})}},{key:"bootstrapListener",value:function(t){var e=this.injector.get(ru),n=this.injector.get(eu),r=this.injector.get(nu),i=this.injector.get(Xa),o=this.injector.get(a.g);t===o.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||i.initialNavigation(),n.setUpPreloading(),r.init(),i.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}]),t}()).\u0275fac=function(t){return new(t||du)(a.Tb(a.s))},du.\u0275prov=a.Ib({token:du,factory:du.\u0275fac}),du);function vu(t){return t.appInitializer.bind(t)}function yu(t){return t.bootstrapListener.bind(t)}var gu=new a.r("Router Initializer");function mu(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(lE){o(lE)}}function a(t){try{u(r.throw(t))}catch(lE){o(lE)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}var _u=function t(){f(this,t),this.items=[],this.disabled=!0},bu=o("VRyK"),wu=o("pxpQ"),ku=o("qgXg"),Eu=o("Ylt2"),Cu=function(t){v(n,t);var e=g(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY,o=arguments.length>2?arguments[2]:void 0;return f(this,n),(t=e.call(this)).scheduler=o,t._events=[],t._infiniteTimeWindow=!1,t._bufferSize=r<1?1:r,t._windowTime=i<1?1:i,i===Number.POSITIVE_INFINITY?(t._infiniteTimeWindow=!0,t.next=t.nextInfiniteTimeWindow):t.next=t.nextTimeWindow,t}return p(n,[{key:"nextInfiniteTimeWindow",value:function(t){if(!this.isStopped){var e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}h(w(n.prototype),"next",this).call(this,t)}},{key:"nextTimeWindow",value:function(t){this.isStopped||(this._events.push(new Ou(this._getNow(),t)),this._trimBufferThenGetEvents()),h(w(n.prototype),"next",this).call(this,t)}},{key:"_subscribe",value:function(t){var e,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new Di.a;if(this.isStopped||this.hasError?e=Gt.a.EMPTY:(this.observers.push(t),e=new Eu.a(this,t)),i&&t.add(t=new wu.a(t,i)),n)for(var s=0;s<o&&!t.closed;s++)t.next(r[s]);else for(var a=0;a<o&&!t.closed;a++)t.next(r[a].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e}},{key:"_getNow",value:function(){return(this.scheduler||ku.a).now()}},{key:"_trimBufferThenGetEvents",value:function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}]),n}(Qt.a),Ou=function t(e,n){f(this,t),this.time=e,this.value=n};function Su(t,e,n){var r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},function(t){return t.lift(function(t){var e,n,r=t.bufferSize,i=void 0===r?Number.POSITIVE_INFINITY:r,o=t.windowTime,s=void 0===o?Number.POSITIVE_INFINITY:o,a=t.refCount,u=t.scheduler,c=0,l=!1,h=!1;return function(t){var r;c++,!e||l?(l=!1,e=new Cu(i,s,u),r=e.subscribe(this),n=t.subscribe({next:function(t){e.next(t)},error:function(t){l=!0,e.error(t)},complete:function(){h=!0,n=void 0,e.complete()}})):r=e.subscribe(this),this.add(function(){c--,r.unsubscribe(),n&&!h&&a&&0===c&&(n.unsubscribe(),n=void 0,e=void 0)})}}(r))}}function Tu(t,e){return e?Xi(function(){return t},e):Xi(function(){return t})}var Iu,xu=o("tf+s"),Au=o("spgP"),ju=new a.r("angularfire2.auth.use-emulator"),Pu=new a.r("angularfire2.auth.settings"),Nu=new a.r("angularfire2.auth.tenant-id"),Ru=new a.r("angularfire2.auth.langugage-code"),Du=new a.r("angularfire2.auth.use-device-language"),Mu=new a.r("angularfire.auth.persistence"),Lu=((Iu=function t(e,n,r,i,s,a,u,c,l,h){f(this,t);var d=new Au.d(i),p=Object(Au.h)(d),v=new Qt.a,y=Object(Kt.a)(void 0).pipe(Object(wu.b)(d.outsideAngular),Xi(function(){return i.runOutsideAngular(function(){return o.e(5).then(o.bind(null,"6nsN"))})}),Object(oe.a)(function(){return Object(Au.g)(e,i,n)}),Object(oe.a)(function(t){return i.runOutsideAngular(function(){var e=s,n=a;return Object(Au.f)("".concat(t.name,".auth"),"AngularFireAuth",t,function(){var r=i.runOutsideAngular(function(){return t.auth()});return e&&r.useEmulator("http://".concat(e.join(":"))),u&&(r.tenantId=u),r.languageCode=c,l&&r.useDeviceLanguage(),n&&(r.settings=n),h&&r.setPersistence(h),r},[e,u,c,l,n,h])})}),Su({bufferSize:1,refCount:!1}));if(ot(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(Kt.a)(null);else{y.pipe(_o()).subscribe();var g=y.pipe(Xi(function(t){return t.getRedirectResult().then(function(t){return t},function(){return null})}),p,Su({bufferSize:1,refCount:!1})),m=function(t){return new Ce.a(function(e){return{unsubscribe:i.runOutsideAngular(function(){return t(e)})}})},_=y.pipe(Xi(function(t){return m(t.onAuthStateChanged.bind(t))})),b=y.pipe(Xi(function(t){return m(t.onIdTokenChanged.bind(t))}));this.authState=g.pipe(Tu(_),Object(xu.a)(d.outsideAngular),Object(wu.b)(d.insideAngular)),this.user=g.pipe(Tu(b),Object(xu.a)(d.outsideAngular),Object(wu.b)(d.insideAngular)),this.idToken=this.user.pipe(Xi(function(t){return t?Object(Ri.a)(t.getIdToken()):Object(Kt.a)(null)})),this.idTokenResult=this.user.pipe(Xi(function(t){return t?Object(Ri.a)(t.getIdTokenResult()):Object(Kt.a)(null)})),this.credential=Object(bu.a)(g,v,this.authState.pipe(ne(function(t){return!t}))).pipe(Object(oe.a)(function(t){return(null==t?void 0:t.user)?t:null}),Object(xu.a)(d.outsideAngular),Object(wu.b)(d.insideAngular))}return Object(Au.i)(this,y,i,{spy:{apply:function(t,e,n){(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(function(t){return v.next(t)})}}})}).\u0275fac=function(t){return new(t||Iu)(a.Tb(Au.c),a.Tb(Au.b,8),a.Tb(a.C),a.Tb(a.A),a.Tb(ju,8),a.Tb(Pu,8),a.Tb(Nu,8),a.Tb(Ru,8),a.Tb(Du,8),a.Tb(Mu,8))},Iu.\u0275prov=Object(a.Ib)({factory:function(){return new Iu(Object(a.Tb)(Au.c),Object(a.Tb)(Au.b,8),Object(a.Tb)(a.C),Object(a.Tb)(a.A),Object(a.Tb)(ju,8),Object(a.Tb)(Pu,8),Object(a.Tb)(Nu,8),Object(a.Tb)(Ru,8),Object(a.Tb)(Du,8),Object(a.Tb)(Mu,8))},token:Iu,providedIn:"any"}),Iu);Object(Au.e)(Lu,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);var Fu,Vu=((Fu=function(){function t(e){f(this,t),this.firebaseAuth=e,this.isLoggedIn=!1}return p(t,[{key:"signin",value:function(t,e){return mu(this,void 0,void 0,regeneratorRuntime.mark(function n(){var r=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.firebaseAuth.signInWithEmailAndPassword(t,e).then(function(t){localStorage.setItem("user",JSON.stringify(t.user)),localStorage.setItem("email",t.user.email),localStorage.setItem("uid",t.user.uid),r.isLoggedIn=!0}).catch(function(t){console.log("Invalid userInfo")});case 2:case"end":return n.stop()}},n,this)}))}},{key:"signup",value:function(t,e){return mu(this,void 0,void 0,regeneratorRuntime.mark(function n(){var r=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.firebaseAuth.createUserWithEmailAndPassword(t,e).then(function(e){r.isLoggedIn=!0,localStorage.setItem("user",JSON.stringify(e.user)),localStorage.setItem("email",t),localStorage.setItem("uid",e.user.uid)}).catch(function(t){return console.log("Invalid userInfo")});case 2:case"end":return n.stop()}},n,this)}))}},{key:"logout",value:function(){this.firebaseAuth.signOut(),localStorage.removeItem("user"),window.location.reload()}}]),t}()).\u0275fac=function(t){return new(t||Fu)(a.Tb(Lu))},Fu.\u0275prov=a.Ib({token:Fu,factory:Fu.\u0275fac,providedIn:"root"}),Fu);function Uu(){return function(t){return t.lift(new qu)}}var qu=function(){function t(){f(this,t)}return p(t,[{key:"call",value:function(t,e){return e.subscribe(new Bu(t))}}]),t}(),Bu=function(t){v(n,t);var e=g(n);function n(t){var r;return f(this,n),(r=e.call(this,t)).hasPrev=!1,r}return p(n,[{key:"_next",value:function(t){var e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}]),n}(Zt.a);function Hu(t,e){return function(n){return n.lift(new zu(t,e))}}var zu=function(){function t(e,n){f(this,t),this.compare=e,this.keySelector=n}return p(t,[{key:"call",value:function(t,e){return e.subscribe(new Wu(t,this.compare,this.keySelector))}}]),t}(),Wu=function(t){v(n,t);var e=g(n);function n(t,r,i){var o;return f(this,n),(o=e.call(this,t)).keySelector=i,o.hasKey=!1,"function"==typeof r&&(o.compare=r),o}return p(n,[{key:"compare",value:function(t,e){return t===e}},{key:"_next",value:function(t){var e;try{var n=this.keySelector;e=n?n(t):t}catch(i){return this.destination.error(i)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,e)}catch(i){return this.destination.error(i)}else this.hasKey=!0;r||(this.key=e,this.destination.next(t))}}]),n}(Zt.a),Qu=o("Jgta"),Gu=o("zIRd"),Ku=o("q/0M"),Yu=o("qOnz"),Xu=function(t,e){return(Xu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Zu(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Ju,$u="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},tc=tc||{},ec=$u||self;function nc(){}function rc(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function ic(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var oc="closure_uid_"+(1e9*Math.random()>>>0),sc=0;function ac(t,e,n){return t.call.apply(t.bind,arguments)}function uc(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function cc(t,e,n){return(cc=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ac:uc).apply(null,arguments)}function lc(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function hc(){return Date.now()}function fc(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function dc(){this.j=this.j,this.i=this.i}dc.prototype.j=!1,dc.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,oc)&&t[oc]||(t[oc]=++sc)}(this)},dc.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var pc=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},vc=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function yc(t){return Array.prototype.concat.apply([],arguments)}function gc(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function mc(t){return/^[\s\xa0]*$/.test(t)}var _c,bc=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function wc(t,e){return-1!=t.indexOf(e)}function kc(t,e){return t<e?-1:t>e?1:0}t:{var Ec=ec.navigator;if(Ec){var Cc=Ec.userAgent;if(Cc){_c=Cc;break t}}_c=""}function Oc(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Sc(t){var e={};for(var n in t)e[n]=t[n];return e}var Tc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ic(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Tc.length;o++)n=Tc[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function xc(t){return xc[" "](t),t}xc[" "]=nc;var Ac,jc,Pc=wc(_c,"Opera"),Nc=wc(_c,"Trident")||wc(_c,"MSIE"),Rc=wc(_c,"Edge"),Dc=Rc||Nc,Mc=wc(_c,"Gecko")&&!(wc(_c.toLowerCase(),"webkit")&&!wc(_c,"Edge"))&&!(wc(_c,"Trident")||wc(_c,"MSIE"))&&!wc(_c,"Edge"),Lc=wc(_c.toLowerCase(),"webkit")&&!wc(_c,"Edge");function Fc(){var t=ec.document;return t?t.documentMode:void 0}t:{var Vc="",Uc=(jc=_c,Mc?/rv:([^\);]+)(\)|;)/.exec(jc):Rc?/Edge\/([\d\.]+)/.exec(jc):Nc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(jc):Lc?/WebKit\/(\S+)/.exec(jc):Pc?/(?:Version)[ \/]?(\S+)/.exec(jc):void 0);if(Uc&&(Vc=Uc?Uc[1]:""),Nc){var qc=Fc();if(null!=qc&&qc>parseFloat(Vc)){Ac=String(qc);break t}}Ac=Vc}var Bc={};function Hc(t){return function(t,e){var n=Bc;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=bc(String(Ac)).split("."),r=bc(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=kc(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||kc(0==s[2].length,0==a[2].length)||kc(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var zc=ec.document&&Nc&&(Fc()||parseInt(Ac,10))||void 0,Wc=!Nc||9<=Number(zc),Qc=Nc&&!Hc("9"),Gc=function(){if(!ec.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ec.addEventListener("test",nc,e),ec.removeEventListener("test",nc,e)}catch(n){}return t}();function Kc(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Yc(t,e){if(Kc.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Mc){t:{try{xc(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Xc[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Kc.prototype.b=function(){this.defaultPrevented=!0},fc(Yc,Kc);var Xc={2:"touch",3:"pen",4:"mouse"};Yc.prototype.b=function(){Yc.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Qc)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var Zc="closure_listenable_"+(1e6*Math.random()|0),Jc=0;function $c(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Jc,this.Y=this.Z=!1}function tl(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function el(t){this.src=t,this.a={},this.b=0}function nl(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=pc(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(tl(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function rl(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}el.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=rl(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new $c(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var il="closure_lm_"+(1e6*Math.random()|0),ol={};function sl(t,e,n,r,i){if(r&&r.once)return ul(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)sl(t,e[o],n,r,i);return null}return n=yl(n),t&&t[Zc]?t.va(e,n,ic(r)?!!r.capture:!!r,i):al(t,e,n,!1,r,i)}function al(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=ic(i)?!!i.capture:!!i;if(s&&!Wc)return null;var a=pl(t);if(a||(t[il]=a=new el(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=dl,e=Wc?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Gc||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(hl(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function ul(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)ul(t,e[o],n,r,i);return null}return n=yl(n),t&&t[Zc]?t.wa(e,n,ic(r)?!!r.capture:!!r,i):al(t,e,n,!0,r,i)}function cl(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)cl(t,e[o],n,r,i);else r=ic(r)?!!r.capture:!!r,n=yl(n),t&&t[Zc]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=rl(o=t.a[e],n,r,i))&&(tl(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=pl(t))&&(e=t.a[e.toString()],t=-1,e&&(t=rl(e,n,r,i)),(n=-1<t?e[t]:null)&&ll(n))}function ll(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Zc])nl(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(hl(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=pl(e))?(nl(n,t),0==n.b&&(n.src=null,e[il]=null)):tl(t)}}}function hl(t){return t in ol?ol[t]:ol[t]="on"+t}function fl(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&ll(t),n.call(r,e)}function dl(t,e){if(t.Y)return!0;if(!Wc){if(!e)t:{e=["window","event"];for(var n=ec,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return fl(t,e=new Yc(e,this))}return fl(t,new Yc(e,this))}function pl(t){return(t=t[il])instanceof el?t:null}var vl="__closure_events_fn_"+(1e9*Math.random()>>>0);function yl(t){return"function"==typeof t?t:(t[vl]||(t[vl]=function(e){return t.handleEvent(e)}),t[vl])}function gl(){dc.call(this),this.c=new el(this),this.J=this,this.C=null}function ml(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Kc(e,t);else if(e instanceof Kc)e.target=e.target||t;else{var i=e;Ic(e=new Kc(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=_l(s,r,!0,e)&&i}if(i=_l(s=e.a=t,r,!0,e)&&i,i=_l(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=_l(s=e.a=n[o],r,!1,e)&&i}function _l(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&nl(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}fc(gl,dc),gl.prototype[Zc]=!0,(Ju=gl.prototype).addEventListener=function(t,e,n,r){sl(this,t,e,n,r)},Ju.removeEventListener=function(t,e,n,r){cl(this,t,e,n,r)},Ju.G=function(){if(gl.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)tl(n[r]);delete e.a[t],e.b--}}this.C=null},Ju.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Ju.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var bl=ec.JSON.stringify;function wl(){this.b=this.a=null}var kl,El=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new Ol},function(t){t.reset()});function Cl(){var t=xl,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Ol(){this.next=this.b=this.a=null}function Sl(t){ec.setTimeout(function(){throw t},0)}function Tl(t,e){kl||function(){var t=ec.Promise.resolve(void 0);kl=function(){t.then(Al)}}(),Il||(kl(),Il=!0),xl.add(t,e)}wl.prototype.add=function(t,e){var n=El.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Ol.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Ol.prototype.reset=function(){this.next=this.b=this.a=null};var Il=!1,xl=new wl;function Al(){for(var t;t=Cl();){try{t.a.call(t.b)}catch(n){Sl(n)}var e=El;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Il=!1}function jl(t,e){gl.call(this),this.b=t||1,this.a=e||ec,this.f=cc(this.Za,this),this.g=hc()}function Pl(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Nl(t,e,n){if("function"==typeof t)n&&(t=cc(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=cc(t.handleEvent,t)}return 2147483647<Number(e)?-1:ec.setTimeout(t,e||0)}function Rl(t){t.a=Nl(function(){t.a=null,t.c&&(t.c=!1,Rl(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}fc(jl,gl),(Ju=jl.prototype).aa=!1,Ju.M=null,Ju.Za=function(){if(this.aa){var t=hc()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),ml(this,"tick"),this.aa&&(Pl(this),this.start()))}},Ju.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=hc())},Ju.G=function(){jl.X.G.call(this),Pl(this),delete this.a};var Dl=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Xu(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Rl(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(ec.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(dc);function Ml(t){dc.call(this),this.b=t,this.a={}}fc(Ml,dc);var Ll=[];function Fl(t,e,n,r){Array.isArray(n)||(n&&(Ll[0]=n.toString()),n=Ll);for(var i=0;i<n.length;i++){var o=sl(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Vl(t){Oc(t.a,function(t,e){this.a.hasOwnProperty(e)&&ll(t)},t),t.a={}}function Ul(){this.a=!0}function ql(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return bl(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}Ml.prototype.G=function(){Ml.X.G.call(this),Vl(this)},Ml.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ul.prototype.info=function(){};var Bl={},Hl=null;function zl(){return Hl=Hl||new gl}function Wl(t){Kc.call(this,Bl.Fa,t)}function Ql(t){var e=zl();ml(e,new Wl(e,t))}function Gl(t,e){Kc.call(this,Bl.STAT_EVENT,t),this.stat=e}function Kl(t){var e=zl();ml(e,new Gl(e,t))}function Yl(t){Kc.call(this,Bl.Ga,t)}function Xl(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return ec.setTimeout(function(){t()},e)}Bl.Fa="serverreachability",fc(Wl,Kc),Bl.STAT_EVENT="statevent",fc(Gl,Kc),Bl.Ga="timingevent",fc(Yl,Kc);var Zl={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Jl={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function $l(){}function th(){}$l.prototype.a=null;var eh,nh={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function rh(){Kc.call(this,"d")}function ih(){Kc.call(this,"c")}function oh(){}function sh(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Ml(this),this.P=ah,this.R=new jl(t=Dc?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}fc(rh,Kc),fc(ih,Kc),fc(oh,$l),eh=new oh;var ah=45e3,uh={},ch={};function lh(t,e,n){t.H=1,t.i=Ph(Sh(e)),t.j=n,t.I=!0,hh(t,null)}function hh(t,e){t.u=hc(),ph(t),t.l=Sh(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Wh(n.b,"t",r),t.D=0,t.a=Uf(t.g,t.g.C?e:null),0<t.O&&(t.F=new Dl(cc(t.Ca,t,t.a),t.O)),Fl(t.J,t.a,"readystatechange",t.Xa),e=t.B?Sc(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Ql(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function fh(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=dh(t,n);if(i==ch){4==e&&(t.h=4,Kl(14),r=!1),ql(t.c,t.f,null,"[Incomplete Response]");break}if(i==uh){t.h=4,Kl(15),ql(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}ql(t.c,t.f,i,null),_h(t,i)}4==e&&0==n.length&&(t.h=1,Kl(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Pf(e),e.F=!0,Kl(11))):(ql(t.c,t.f,n,"[Invalid Chunked Response]"),mh(t),gh(t))}function dh(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?ch:(n=Number(e.substring(n,r)),isNaN(n)?uh:(r+=1)+n>e.length?ch:(e=e.substr(r,n),t.D=r+n,e))}function ph(t){t.T=hc()+t.P,vh(t,t.P)}function vh(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Xl(cc(t.Va,t),e)}function yh(t){t.o&&(ec.clearTimeout(t.o),t.o=null)}function gh(t){0==t.g.v||t.A||Df(t.g,t)}function mh(t){yh(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Pl(t.R),Vl(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function _h(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Jh(n.b,t)))if(n.I=t.N,!t.C&&Jh(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(Ek){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Rf(n),Ef(n)}jf(n),Kl(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Xl(cc(n.Sa,n),6e3));if(1>=Zh(n.b)&&n.ea){try{n.ea()}catch(Ek){}n.ea=void 0}}else Lf(n,11)}else if((t.C||n.a==t)&&Rf(n),!mc(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(wc(l,"spdy")||wc(l,"quic")||wc(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&($h(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,jh(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=hc()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=Vf(u,u.C?u.ga:null,u.fa),d.C){tf(u.b,d);var p=d,v=u.D;v&&p.setTimeout(v),p.o&&(yh(p),ph(p)),u.a=d}else Af(u);0<n.g.length&&Sf(n)}else"stop"!=i[0]&&"close"!=i[0]||Lf(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Lf(n,7):kf(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Ql(4)}catch(Ek){}}function bh(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(rc(t)||"string"==typeof t)vc(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(rc(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(rc(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function wh(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof wh)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function kh(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Eh(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Eh(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Eh(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Ju=sh.prototype).setTimeout=function(t){this.P=t},Ju.Xa=function(t){t=t.target;var e=this.F;e&&3==mf(t)?e.f():this.Ca(t)},Ju.Ca=function(t){try{if(t==this.a)t:{var e=mf(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!Dc&&!this.a.$())){this.A||4!=e||7==n||Ql(8==n||0>=r?3:2),yh(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!mc(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,Kl(12),mh(this),gh(this);break t}ql(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,_h(this,u)}this.I?(fh(this,e,o),Dc&&this.b&&3==e&&(Fl(this.J,this.R,"tick",this.Wa),this.R.start())):(ql(this.c,this.f,o,null),_h(this,o)),4==e&&mh(this),this.b&&!this.A&&(4==e?Df(this.g,this):(this.b=!1,ph(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Kl(12)):(this.h=0,Kl(13)),mh(this),gh(this)}}}catch(c){}},Ju.Wa=function(){if(this.a){var t=mf(this.a),e=this.a.$();this.D<e.length&&(yh(this),fh(this,t,e),this.b&&4!=t&&ph(this))}},Ju.cancel=function(){this.A=!0,mh(this)},Ju.Va=function(){this.o=null;var t=hc();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(Ql(3),Kl(17)),mh(this),this.h=2,gh(this)):vh(this,this.T-t)},(Ju=wh.prototype).K=function(){kh(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Ju.L=function(){return kh(this),this.a.concat()},Ju.get=function(t,e){return Eh(this.b,t)?this.b[t]:e},Ju.set=function(t,e){Eh(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Ju.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Ch=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Oh(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Oh){this.a=void 0!==e?e:t.a,Th(this,t.f),this.j=t.j,Ih(this,t.c),xh(this,t.h),this.g=t.g,e=t.b;var n=new qh;n.c=e.c,e.a&&(n.a=new wh(e.a),n.b=e.b),Ah(this,n),this.i=t.i}else t&&(n=String(t).match(Ch))?(this.a=!!e,Th(this,n[1]||"",!0),this.j=Nh(n[2]||""),Ih(this,n[3]||"",!0),xh(this,n[4]),this.g=Nh(n[5]||"",!0),Ah(this,n[6]||"",!0),this.i=Nh(n[7]||"")):(this.a=!!e,this.b=new qh(null,this.a))}function Sh(t){return new Oh(t)}function Th(t,e,n){t.f=n?Nh(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Ih(t,e,n){t.c=n?Nh(e,!0):e}function xh(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Ah(t,e,n){e instanceof qh?(t.b=e,function(t,e){e&&!t.f&&(Bh(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Hh(this,e),Wh(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=Rh(e,Vh)),t.b=new qh(e,t.a))}function jh(t,e,n){t.b.set(e,n)}function Ph(t){return jh(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^hc()).toString(36)),t}function Nh(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Rh(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Dh),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Dh(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Oh.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Rh(e,Mh,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Rh(e,Mh,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Rh(n,"/"==n.charAt(0)?Fh:Lh,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Rh(n,Uh)),t.join("")};var Mh=/[#\/\?@]/g,Lh=/[#\?:]/g,Fh=/[#\?]/g,Vh=/[#\?@]/g,Uh=/#/g;function qh(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Bh(t){t.a||(t.a=new wh,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Hh(t,e){Bh(t),e=Qh(t,e),Eh(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Eh((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&kh(t)))}function zh(t,e){return Bh(t),e=Qh(t,e),Eh(t.a.b,e)}function Wh(t,e,n){Hh(t,e),0<n.length&&(t.c=null,t.a.set(Qh(t,e),gc(n)),t.b+=n.length)}function Qh(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(Ju=qh.prototype).add=function(t,e){Bh(this),this.c=null,t=Qh(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Ju.forEach=function(t,e){Bh(this),this.a.forEach(function(n,r){vc(n,function(n){t.call(e,n,r,this)},this)},this)},Ju.L=function(){Bh(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Ju.K=function(t){Bh(this);var e=[];if("string"==typeof t)zh(this,t)&&(e=yc(e,this.a.get(Qh(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=yc(e,t[n])}return e},Ju.set=function(t,e){return Bh(this),this.c=null,zh(this,t=Qh(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Ju.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},Ju.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Gh=function(t,e){this.b=t,this.a=e};function Kh(t){this.g=t||Yh,t=ec.PerformanceNavigationTiming?0<(t=ec.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(ec.ia&&ec.ia.ya&&ec.ia.ya()&&ec.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Yh=10;function Xh(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Zh(t){return t.b?1:t.a?t.a.size:0}function Jh(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function $h(t,e){t.a?t.a.add(e):t.b=e}function tf(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function ef(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Zu(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return gc(t.c)}function nf(){}function rf(){this.a=new nf}function of(t,e,n){var r=n||"";try{bh(t,function(t,n){var i=t;ic(t)&&(i=bl(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(lE){throw e.push(r+"type="+encodeURIComponent("_badmap")),lE}}function sf(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}Kh.prototype.cancel=function(){var t,e;if(this.c=ef(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Zu(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},nf.prototype.stringify=function(t){return ec.JSON.stringify(t,void 0)},nf.prototype.parse=function(t){return ec.JSON.parse(t,void 0)};var af=ec.JSON.parse;function uf(t){gl.call(this),this.headers=new wh,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=cf,this.D=this.F=!1}fc(uf,gl);var cf="",lf=/^https?$/i,hf=["POST","PUT"];function ff(t){return"content-type"==t.toLowerCase()}function df(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,pf(t),yf(t)}function pf(t){t.u||(t.u=!0,ml(t,"complete"),ml(t,"error"))}function vf(t){if(t.b&&void 0!==tc&&(!t.s[1]||4!=mf(t)||2!=t.W()))if(t.l&&4==mf(t))Nl(t.za,0,t);else if(ml(t,"readystatechange"),4==mf(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Ch)[1]||null;if(!o&&ec.self&&ec.self.location){var s=ec.self.location.protocol;o=s.substr(0,s.length-1)}i=!lf.test(o?o.toLowerCase():"")}e=i}if(e)ml(t,"complete"),ml(t,"success");else{t.h=6;try{var a=2<mf(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",pf(t)}}finally{yf(t)}}}function yf(t,e){if(t.a){gf(t);var n=t.a,r=t.s[0]?nc:null;t.a=null,t.s=null,e||ml(t,"ready");try{n.onreadystatechange=r}catch(lE){}}}function gf(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(ec.clearTimeout(t.m),t.m=null)}function mf(t){return t.a?t.a.readyState:0}function _f(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Oc(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):jh(t,e,n))}function bf(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function wf(t){this.pa=0,this.g=[],this.c=new Ul,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=bf("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=bf("baseRetryDelayMs",5e3,t),this.Ra=bf("retryDelaySeedMs",1e4,t),this.Ma=bf("forwardChannelMaxRetries",2,t),this.ma=bf("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Kh(t&&t.concurrentRequestLimit),this.ka=new rf,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function kf(t){if(Cf(t),3==t.v){var e=t.R++,n=Sh(t.B);jh(n,"SID",t.J),jh(n,"RID",e),jh(n,"TYPE","terminate"),If(t,n),(e=new sh(t,t.c,e,void 0)).H=2,e.i=Ph(Sh(n)),n=!1,ec.navigator&&ec.navigator.sendBeacon&&(n=ec.navigator.sendBeacon(e.i.toString(),"")),!n&&ec.Image&&((new Image).src=e.i,n=!0),n||(e.a=Uf(e.g,null),e.a.ba(e.i)),e.u=hc(),ph(e)}Ff(t)}function Ef(t){t.a&&(Pf(t),t.a.cancel(),t.a=null)}function Cf(t){Ef(t),t.j&&(ec.clearTimeout(t.j),t.j=null),Rf(t),t.b.cancel(),t.h&&("number"==typeof t.h&&ec.clearTimeout(t.h),t.h=null)}function Of(t,e){t.g.push(new Gh(t.Oa++,e)),3==t.v&&Sf(t)}function Sf(t){Xh(t.b)||t.h||(t.h=!0,Tl(t.Ba,t),t.u=0)}function Tf(t,e){var n;n=e?e.f:t.R++;var r=Sh(t.B);jh(r,"SID",t.J),jh(r,"RID",n),jh(r,"AID",t.P),If(t,r),t.i&&t.l&&_f(r,t.i,t.l),n=new sh(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=xf(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),$h(t.b,n),lh(n,r,e)}function If(t,e){t.f&&bh({},function(t,n){jh(e,n,t)})}function xf(t,e,n){n=Math.min(t.g.length,n);var r=t.f?cc(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{of(l,s,"req"+c+"_")}catch(h){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Af(t){t.a||t.j||(t.T=1,Tl(t.Aa,t),t.o=0)}function jf(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Xl(cc(t.Aa,t),Mf(t,t.o)),t.o++,0))}function Pf(t){null!=t.s&&(ec.clearTimeout(t.s),t.s=null)}function Nf(t){t.a=new sh(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Sh(t.la);jh(e,"RID","rpc"),jh(e,"SID",t.J),jh(e,"CI",t.H?"0":"1"),jh(e,"AID",t.P),If(t,e),jh(e,"TYPE","xmlhttp"),t.i&&t.l&&_f(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Ph(Sh(e)),n.j=null,n.I=!0,hh(n,t)}function Rf(t){null!=t.m&&(ec.clearTimeout(t.m),t.m=null)}function Df(t,e){var n=null;if(t.a==e){Rf(t),Pf(t),t.a=null;var r=2}else{if(!Jh(t.b,e))return;n=e.s,tf(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=hc()-e.u;var i=t.u;ml(r=zl(),new Yl(r,n,e,i)),Sf(t)}else Af(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Zh(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Xl(cc(t.Ba,t,e),Mf(t,t.u)),t.u++,0)))}(t,e)||2==r&&jf(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Lf(t,5);break;case 4:Lf(t,10);break;case 3:Lf(t,6);break;default:Lf(t,2)}}function Mf(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Lf(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=cc(t.Ya,t);n||(n=new Oh("//www.google.com/images/cleardot.gif"),ec.location&&"http"==ec.location.protocol||Th(n,"https"),Ph(n)),function(t,e){var n=new Ul;if(ec.Image){var r=new Image;r.onload=lc(sf,n,r,"TestLoadImage: loaded",!0,e),r.onerror=lc(sf,n,r,"TestLoadImage: error",!1,e),r.onabort=lc(sf,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=lc(sf,n,r,"TestLoadImage: timeout",!1,e),ec.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Kl(2);t.v=0,t.f&&t.f.ra(e),Ff(t),Cf(t)}function Ff(t){t.v=0,t.I=-1,t.f&&(0==ef(t.b).length&&0==t.g.length||(t.b.c.length=0,gc(t.g),t.g.length=0),t.f.qa())}function Vf(t,e,n){var r=function(t){return t instanceof Oh?Sh(t):new Oh(t,void 0)}(n);if(""!=r.c)e&&Ih(r,e+"."+r.c),xh(r,r.h);else{var i=ec.location;r=function(t,e,n,r){var i=new Oh(null,void 0);return t&&Th(i,t),e&&Ih(i,e),n&&xh(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Oc(t.V,function(t,e){jh(r,e,t)}),n=t.na,(e=t.A)&&n&&jh(r,e,n),jh(r,"VER",t.ha),If(t,r),r}function Uf(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new uf(t.Na)).F=t.C,e}function qf(){}function Bf(){if(Nc&&!(10<=Number(zc)))throw Error("Environmental error: no available transport.")}function Hf(t,e){gl.call(this),this.a=new wf(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!mc(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!mc(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Qf(this)}function zf(t){rh.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Wf(){ih.call(this),this.status=1}function Qf(t){this.a=t}(Ju=uf.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:eh),this.a.onreadystatechange=cc(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void df(this,o)}t=n||"";var i=new wh(this.headers);r&&bh(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=ff,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=ec.FormData&&t instanceof ec.FormData,!(0<=pc(hf,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{gf(this),0<this.o&&((this.D=function(t){return Nc&&Hc(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=cc(this.xa,this)):this.m=Nl(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){df(this,o)}},Ju.xa=function(){void 0!==tc&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,ml(this,"timeout"),this.abort(8))},Ju.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,ml(this,"complete"),ml(this,"abort"),yf(this))},Ju.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),yf(this,!0)),uf.X.G.call(this)},Ju.za=function(){this.j||(this.A||this.l||this.g?vf(this):this.Ua())},Ju.Ua=function(){vf(this)},Ju.W=function(){try{return 2<mf(this)?this.a.status:-1}catch(jc){return-1}},Ju.$=function(){try{return this.a?this.a.responseText:""}catch(jc){return""}},Ju.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),af(e)}},Ju.ua=function(){return this.h},Ju.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(Ju=wf.prototype).ha=8,Ju.v=1,Ju.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new sh(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Ic(r=Sc(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=xf(this,n,e),jh(i=Sh(this.B),"RID",t),jh(i,"CVER",22),this.A&&jh(i,"X-HTTP-Session-Id",this.A),If(this,i),this.i&&r&&_f(i,this.i,r),$h(this.b,n),this.Ia&&jh(i,"TYPE","init"),this.da?(jh(i,"$req",e),jh(i,"SID","null"),n.U=!0,lh(n,i,null)):lh(n,i,e),this.v=2}}else 3==this.v&&(t?Tf(this,t):0==this.g.length||Xh(this.b)||Tf(this))},Ju.Aa=function(){if(this.j=null,Nf(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Xl(cc(this.Ta,this),t)}},Ju.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Kl(10),Ef(this),Nf(this))},Ju.Sa=function(){null!=this.m&&(this.m=null,Ef(this),jf(this),Kl(19))},Ju.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Kl(2)):(this.c.info("Failed to ping google.com"),Kl(1))},(Ju=qf.prototype).ta=function(){},Ju.sa=function(){},Ju.ra=function(){},Ju.qa=function(){},Ju.Ja=function(){},Bf.prototype.a=function(t,e){return new Hf(t,e)},fc(Hf,gl),Hf.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Kl(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Vf(t,null,t.fa),Sf(t)},Hf.prototype.close=function(){kf(this.a)},Hf.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Of(this.a,e)}else this.l?((e={}).__data__=bl(t),Of(this.a,e)):Of(this.a,t)},Hf.prototype.G=function(){this.a.f=null,delete this.f,kf(this.a),delete this.a,Hf.X.G.call(this)},fc(zf,rh),fc(Wf,ih),fc(Qf,qf),Qf.prototype.ta=function(){ml(this.a,"a")},Qf.prototype.sa=function(t){ml(this.a,new zf(t))},Qf.prototype.ra=function(t){ml(this.a,new Wf(t))},Qf.prototype.qa=function(){ml(this.a,"b")},Bf.prototype.createWebChannel=Bf.prototype.a,Hf.prototype.send=Hf.prototype.h,Hf.prototype.open=Hf.prototype.g,Hf.prototype.close=Hf.prototype.close,Zl.NO_ERROR=0,Zl.TIMEOUT=8,Zl.HTTP_ERROR=6,Jl.COMPLETE="complete",th.EventType=nh,nh.OPEN="a",nh.CLOSE="b",nh.ERROR="c",nh.MESSAGE="d",gl.prototype.listen=gl.prototype.va,uf.prototype.listenOnce=uf.prototype.wa,uf.prototype.getLastError=uf.prototype.Qa,uf.prototype.getLastErrorCode=uf.prototype.ua,uf.prototype.getStatus=uf.prototype.W,uf.prototype.getResponseJson=uf.prototype.Pa,uf.prototype.getResponseText=uf.prototype.$,uf.prototype.send=uf.prototype.ba;var Gf=Zl,Kf=Jl,Yf=Bl,Xf=th,Zf=uf,Jf=o("os0x"),$f=function(t,e,n,r,i,o){this.t=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=o},td=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),ed=new Ku.b("@firebase/firestore");function nd(){return ed.logLevel}function rd(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ed.logLevel<=Ku.a.DEBUG){var r=e.map(sd);ed.debug.apply(ed,Object(Jf.g)(["Firestore (8.2.9): "+t],r))}}function id(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ed.logLevel<=Ku.a.ERROR){var r=e.map(sd);ed.error.apply(ed,Object(Jf.g)(["Firestore (8.2.9): "+t],r))}}function od(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ed.logLevel<=Ku.a.WARN){var r=e.map(sd);ed.warn.apply(ed,Object(Jf.g)(["Firestore (8.2.9): "+t],r))}}function sd(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(lE){return t}}function ad(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.2.9) INTERNAL ASSERTION FAILED: "+t;throw id(e),new Error(e)}function ud(t,e){t||ad()}function cd(t,e){return t}function ld(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var hd=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=ld(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function fd(t,e){return t<e?-1:t>e?1:0}function dd(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function pd(t){return t+"\0"}var vd=function(){function t(t){this.h=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.h)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.h)},t.prototype.l=function(){return 2*this.h.length},t.prototype._=function(t){return fd(this.h,t.h)},t.prototype.isEqual=function(t){return this.h===t.h},t}();vd.T=new vd("");var yd={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},gd=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(Jf.c)(e,t),e}(Error),md=function(){function t(t){this.I=t}return t.fromBase64String=function(e){try{return new t(vd.fromBase64String(e))}catch(e){throw new gd(yd.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(vd.fromUint8Array(e))},t.prototype.toBase64=function(){return this.I.toBase64()},t.prototype.toUint8Array=function(){return this.I.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.I.isEqual(t.I)},t}(),_d=function(){function t(t){this.uid=t}return t.prototype.m=function(){return null!=this.uid},t.prototype.A=function(){return this.m()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();_d.UNAUTHENTICATED=new _d(null),_d.R=new _d("google-credentials-uid"),_d.P=new _d("first-party-uid");var bd=function(t,e){this.user=e,this.type="OAuth",this.g={},this.g.Authorization="Bearer "+t},wd=function(){function t(){this.V=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.p=function(){},t.prototype.v=function(t){this.V=t,t(_d.UNAUTHENTICATED)},t.prototype.S=function(){this.V=null},t}(),kd=function(){function t(t){var e=this;this.D=null,this.currentUser=_d.UNAUTHENTICATED,this.C=!1,this.N=0,this.V=null,this.forceRefresh=!1,this.D=function(){e.N++,e.currentUser=e.$(),e.C=!0,e.V&&e.V(e.currentUser)},this.N=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.D):(this.D(null),t.get().then(function(t){e.auth=t,e.D&&e.auth.addAuthTokenListener(e.D)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.N,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.N!==e?(rd("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(ud("string"==typeof n.accessToken),new bd(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.p=function(){this.forceRefresh=!0},t.prototype.v=function(t){this.V=t,this.C&&t(this.currentUser)},t.prototype.S=function(){this.auth&&this.auth.removeAuthTokenListener(this.D),this.D=null,this.V=null},t.prototype.$=function(){var t=this.auth&&this.auth.getUid();return ud(null===t||"string"==typeof t),new _d(t)},t}(),Ed=function(){function t(t,e){this.F=t,this.O=e,this.type="FirstParty",this.user=_d.P}return Object.defineProperty(t.prototype,"g",{get:function(){var t={"X-Goog-AuthUser":this.O},e=this.F.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Cd=function(){function t(t,e){this.F=t,this.O=e}return t.prototype.getToken=function(){return Promise.resolve(new Ed(this.F,this.O))},t.prototype.v=function(t){t(_d.P)},t.prototype.S=function(){},t.prototype.p=function(){},t}(),Od=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.k=function(t){return n.M(t)},this.L=function(t){return e.B(t)})}return t.prototype.M=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.L&&this.L(t),t},t}();Od.q=-1;var Sd=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new gd(yd.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new gd(yd.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new gd(yd.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new gd(yd.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.U=function(t){return this.seconds===t.seconds?fd(this.nanoseconds,t.nanoseconds):fd(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Td=function(){function t(t){this.timestamp=t}return t.K=function(e){return new t(e)},t.min=function(){return new t(new Sd(0,0))},t.prototype._=function(t){return this.timestamp.U(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.W=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.j=function(){return this.timestamp},t}(),Id=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&ad(),void 0===n?n=t.length-e:n>t.length-e&&ad(),this.segments=t,this.offset=e,this.G=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.G},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.H(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.J(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.Y=function(t){return this.J(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.X=function(){return this.J(this.segments,this.offset,this.length-1)},t.prototype.Z=function(){return this.segments[this.offset]},t.prototype.tt=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.et=function(){return 0===this.length},t.prototype.nt=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.st=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.it=function(){return this.segments.slice(this.offset,this.limit())},t.H=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),xd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Jf.c)(e,t),e.prototype.J=function(t,n,r){return new e(t,n,r)},e.prototype.rt=function(){return this.it().join("/")},e.prototype.toString=function(){return this.rt()},e.ot=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new gd(yd.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.ct=function(){return new e([])},e}(Id),Ad=/^[_a-zA-Z][_a-zA-Z0-9]*$/,jd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Jf.c)(e,t),e.prototype.J=function(t,n,r){return new e(t,n,r)},e.at=function(t){return Ad.test(t)},e.prototype.rt=function(){return this.it().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.at(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.rt()},e.prototype.ut=function(){return 1===this.length&&"__name__"===this.get(0)},e.ht=function(){return new e(["__name__"])},e.lt=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new gd(yd.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new gd(yd.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new gd(yd.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new gd(yd.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.ct=function(){return new e([])},e}(Id),Pd=function(){function t(t){this.path=t}return t._t=function(e){return new t(xd.ot(e))},t.ft=function(e){return new t(xd.ot(e).Y(5))},t.prototype.dt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===xd.H(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.H=function(t,e){return xd.H(t.path,e.path)},t.wt=function(t){return t.length%2==0},t.Et=function(e){return new t(new xd(e.slice()))},t}();function Nd(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Rd(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Dd(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Md=function(){function t(t){this.fields=t,t.sort(jd.H)}return t.prototype.Tt=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].nt(t))return!0;return!1},t.prototype.isEqual=function(t){return dd(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),Ld=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fd(t){if(ud(!!t),"string"==typeof t){var e=0,n=Ld.exec(t);if(ud(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Vd(t.seconds),nanos:Vd(t.nanos)}}function Vd(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Ud(t){return"string"==typeof t?vd.fromBase64String(t):vd.fromUint8Array(t)}function qd(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Bd(t){var e=t.mapValue.fields.__previous_value__;return qd(e)?Bd(e):e}function Hd(t){var e=Fd(t.mapValue.fields.__local_write_time__.timestampValue);return new Sd(e.seconds,e.nanos)}function zd(t){return null==t}function Wd(t){return 0===t&&1/t==-1/0}function Qd(t){return"number"==typeof t&&Number.isInteger(t)&&!Wd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function Gd(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?qd(t)?4:10:ad()}function Kd(t,e){var n=Gd(t);if(n!==Gd(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Hd(t).isEqual(Hd(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Fd(t.timestampValue),r=Fd(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Ud(t.bytesValue).isEqual(Ud(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Vd(t.geoPointValue.latitude)===Vd(e.geoPointValue.latitude)&&Vd(t.geoPointValue.longitude)===Vd(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Vd(t.integerValue)===Vd(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Vd(t.doubleValue),r=Vd(e.doubleValue);return n===r?Wd(n)===Wd(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return dd(t.arrayValue.values||[],e.arrayValue.values||[],Kd);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Nd(n)!==Nd(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Kd(n[i],r[i])))return!1;return!0}(t,e);default:return ad()}}function Yd(t,e){return void 0!==(t.values||[]).find(function(t){return Kd(t,e)})}function Xd(t,e){var n=Gd(t),r=Gd(e);if(n!==r)return fd(n,r);switch(n){case 0:return 0;case 1:return fd(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Vd(t.integerValue||t.doubleValue),r=Vd(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Zd(t.timestampValue,e.timestampValue);case 4:return Zd(Hd(t),Hd(e));case 5:return fd(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Ud(t),r=Ud(e);return n._(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=fd(n[i],r[i]);if(0!==o)return o}return fd(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=fd(Vd(t.latitude),Vd(e.latitude));return 0!==n?n:fd(Vd(t.longitude),Vd(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Xd(n[i],r[i]);if(o)return o}return fd(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=fd(r[s],o[s]);if(0!==a)return a;var u=Xd(n[r[s]],i[o[s]]);if(0!==u)return u}return fd(r.length,o.length)}(t.mapValue,e.mapValue);default:throw ad()}}function Zd(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return fd(t,e);var n=Fd(t),r=Fd(e),i=fd(n.seconds,r.seconds);return 0!==i?i:fd(n.nanos,r.nanos)}function Jd(t){return $d(t)}function $d(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Fd(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Ud(t.bytesValue).toBase64():"referenceValue"in t?Pd.ft(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=$d(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+$d(t.fields[o])}return e+"}"}(t.mapValue):ad();var e}function tp(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.rt()}}function ep(t){return!!t&&"integerValue"in t}function np(t){return!!t&&"arrayValue"in t}function rp(t){return!!t&&"nullValue"in t}function ip(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function op(t){return!!t&&"mapValue"in t}var sp=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.et())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!op(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.tt()])||null},t.prototype.isEqual=function(t){return Kd(this.proto,t.proto)},t}(),ap=function(){function t(t){void 0===t&&(t=sp.empty()),this.It=t,this.At=new Map}return t.prototype.set=function(t,e){return this.Rt(t,e),this},t.prototype.delete=function(t){return this.Rt(t,null),this},t.prototype.Rt=function(t,e){for(var n=this.At,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Gd(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.tt(),e)},t.prototype.Pt=function(){var t=this.yt(jd.ct(),this.At);return null!=t?new sp(t):this.It},t.prototype.yt=function(t,e){var n=this,r=!1,i=this.It.field(t),o=op(i)?Object.assign({},i.mapValue.fields):{};return e.forEach(function(e,i){if(e instanceof Map){var s=n.yt(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)}),r?{mapValue:{fields:o}}:null},t}();function up(t){var e=[];return Rd(t.fields||{},function(t,n){var r=new jd([t]);if(op(n)){var i=up(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new Md(e)}var cp=function(t,e){this.key=t,this.version=e},lp=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).gt=r,o.Vt=!!i.Vt,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(Jf.c)(e,t),e.prototype.field=function(t){return this.gt.field(t)},e.prototype.data=function(){return this.gt},e.prototype.bt=function(){return this.gt.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Vt===t.Vt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.gt.isEqual(t.gt)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.gt.toString()+", {hasLocalMutations: "+this.Vt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Vt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(cp),hp=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(Jf.c)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(cp),fp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Jf.c)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(cp),dp=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.vt=null};function pp(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new dp(t,e,n,r,i,o,s)}function vp(t){var e=cd(t);if(null===e.vt){var n=e.path.rt();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.rt()+t.op.toString()+Jd(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.rt()+t.dir}(t)}).join(","),zd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Ip(e.startAt)),e.endAt&&(n+="|ub:",n+=Ip(e.endAt)),e.vt=n}return e.vt}function yp(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Ap(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!Kd(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Pp(t.startAt,e.startAt)&&Pp(t.endAt,e.endAt)}function gp(t){return Pd.wt(t.path)&&null===t.collectionGroup&&0===t.filters.length}var mp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(Jf.c)(e,t),e.create=function(t,n,r){return t.ut()?"in"===n||"not-in"===n?this.St(t,n,r):new _p(t,n,r):"array-contains"===n?new Ep(t,r):"in"===n?new Cp(t,r):"not-in"===n?new Op(t,r):"array-contains-any"===n?new Sp(t,r):new e(t,n,r)},e.St=function(t,e,n){return"in"===e?new bp(t,n):new wp(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Dt(Xd(e,this.value)):null!==e&&Gd(this.value)===Gd(e)&&this.Dt(Xd(e,this.value))},e.prototype.Dt=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return ad()}},e.prototype.Ct=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),_p=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Pd.ft(r.referenceValue),i}return Object(Jf.c)(e,t),e.prototype.matches=function(t){var e=Pd.H(t.key,this.key);return this.Dt(e)},e}(mp),bp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=kp(0,n),r}return Object(Jf.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(mp),wp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=kp(0,n),r}return Object(Jf.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(mp);function kp(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return Pd.ft(t.referenceValue)})}var Ep=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(Jf.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return np(e)&&Yd(e.arrayValue,this.value)},e}(mp),Cp=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(Jf.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Yd(this.value.arrayValue,e)},e}(mp),Op=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(Jf.c)(e,t),e.prototype.matches=function(t){if(Yd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!Yd(this.value.arrayValue,e)},e}(mp),Sp=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(Jf.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!np(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Yd(e.value.arrayValue,t)})},e}(mp),Tp=function(t,e){this.position=t,this.before=e};function Ip(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return Jd(t)}).join(",")}var xp=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Ap(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function jp(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.ut()?Pd.H(Pd.ft(s.referenceValue),n.key):Xd(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Pp(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Kd(t.position[n],e.position[n]))return!1;return!0}var Np=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.xt=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.Nt=null,this.$t=null};function Rp(t,e,n,r,i,o,s,a){return new Np(t,e,n,r,i,o,s,a)}function Dp(t){return new Np(t)}function Mp(t){return!zd(t.limit)&&"F"===t.limitType}function Lp(t){return!zd(t.limit)&&"L"===t.limitType}function Fp(t){return t.xt.length>0?t.xt[0].field:null}function Vp(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.Ct())return r.field}return null}function Up(t){return null!==t.collectionGroup}function qp(t){var e=cd(t);if(null===e.Nt){e.Nt=[];var n=Vp(e),r=Fp(e);if(null!==n&&null===r)n.ut()||e.Nt.push(new xp(n)),e.Nt.push(new xp(jd.ht(),"asc"));else{for(var i=!1,o=0,s=e.xt;o<s.length;o++){var a=s[o];e.Nt.push(a),a.field.ut()&&(i=!0)}if(!i){var u=e.xt.length>0?e.xt[e.xt.length-1].dir:"asc";e.Nt.push(new xp(jd.ht(),u))}}}return e.Nt}function Bp(t){var e=cd(t);if(!e.$t)if("F"===e.limitType)e.$t=pp(e.path,e.collectionGroup,qp(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=qp(e);r<i.length;r++){var o=i[r];n.push(new xp(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new Tp(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Tp(e.startAt.position,!e.startAt.before):null;e.$t=pp(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.$t}function Hp(t,e,n){return new Np(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function zp(t,e){return yp(Bp(t),Bp(e))&&t.limitType===e.limitType}function Wp(t){return vp(Bp(t))+"|lt:"+t.limitType}function Qp(t){return"Query(target="+function(t){var e=t.path.rt();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.rt()+" "+e.op+" "+Jd(e.value);var e}).join(", ")+"]"),zd(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.rt()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Ip(t.startAt)),t.endAt&&(e+=", endAt: "+Ip(t.endAt)),"Target("+e+")"}(Bp(t))+"; limitType="+t.limitType+")"}function Gp(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.dt(t.collectionGroup)&&t.path.nt(n):Pd.wt(t.path)?t.path.isEqual(n):t.path.st(n)}(t,e)&&function(t,e){for(var n=0,r=t.xt;n<r.length;n++){var i=r[n];if(!i.field.ut()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!jp(t.startAt,qp(t),e)||t.endAt&&jp(t.endAt,qp(t),e))}(t,e)}function Kp(t){return function(e,n){for(var r=!1,i=0,o=qp(t);i<o.length;i++){var s=o[i],a=Yp(s,e,n);if(0!==a)return a;r=r||s.field.ut()}return 0}}function Yp(t,e,n){var r=t.field.ut()?Pd.H(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?Xd(r,i):ad()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ad()}}var Xp=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Td.min()),void 0===o&&(o=Td.min()),void 0===s&&(s=vd.T),this.target=t,this.targetId=e,this.Ft=n,this.sequenceNumber=r,this.Ot=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.kt=function(e){return new t(this.target,this.targetId,this.Ft,e,this.Ot,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.Mt=function(e,n){return new t(this.target,this.targetId,this.Ft,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Lt=function(e){return new t(this.target,this.targetId,this.Ft,this.sequenceNumber,this.Ot,e,this.resumeToken)},t}();function Zp(t,e){if(t.Bt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wd(e)?"-0":e}}function Jp(t){return{integerValue:""+t}}function $p(t,e){return Qd(e)?Jp(e):Zp(t,e)}var tv=function(){this.qt=void 0};function ev(t,e,n){return t instanceof iv?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof ov?sv(t,e):t instanceof av?uv(t,e):function(t,e){var n=rv(t,e),r=lv(n)+lv(t.Ut);return ep(n)&&ep(t.Ut)?Jp(r):Zp(t.Qt,r)}(t,e)}function nv(t,e,n){return t instanceof ov?sv(t,e):t instanceof av?uv(t,e):n}function rv(t,e){return t instanceof cv?ep(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var iv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Jf.c)(e,t),e}(tv),ov=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Jf.c)(e,t),e}(tv);function sv(t,e){for(var n=hv(e),r=function(t){n.some(function(e){return Kd(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var av=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Jf.c)(e,t),e}(tv);function uv(t,e){for(var n=hv(e),r=function(t){n=n.filter(function(e){return!Kd(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var cv=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qt=e,r.Ut=n,r}return Object(Jf.c)(e,t),e}(tv);function lv(t){return Vd(t.integerValue||t.doubleValue)}function hv(t){return np(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var fv=function(t,e){this.field=t,this.transform=e},dv=function(t,e){this.version=t,this.transformResults=e},pv=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Kt=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"Wt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function vv(t,e){return void 0!==t.updateTime?e instanceof lp&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof lp}var yv=function(){};function gv(t,e,n){return t instanceof kv?function(t,e,n){var r=t.value;if(n.transformResults){var i=Ov(t.fieldTransforms,e,n.transformResults);r=Tv(t.fieldTransforms,r,i)}return new lp(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof Ev?function(t,e,n){if(!vv(t.jt,e))return new fp(t.key,n.version);var r=Cv(t,e,n.transformResults?Ov(t.fieldTransforms,e,n.transformResults):[]);return new lp(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new hp(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function mv(t,e,n){return t instanceof kv?function(t,e,n){if(!vv(t.jt,e))return e;var r=t.value,i=Sv(t.fieldTransforms,n,e);r=Tv(t.fieldTransforms,r,i);var o=wv(e);return new lp(t.key,o,r,{Vt:!0})}(t,e,n):t instanceof Ev?function(t,e,n){if(!vv(t.jt,e))return e;var r=wv(e),i=Cv(t,e,Sv(t.fieldTransforms,n,e));return new lp(t.key,r,i,{Vt:!0})}(t,e,n):function(t,e){return vv(t.jt,e)?new hp(t.key,Td.min()):e}(t,e)}function _v(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof lp?e.field(o.field):void 0,a=rv(o.transform,s||null);null!=a&&(n=null==n?(new ap).set(o.field,a):n.set(o.field,a))}return n?n.Pt():null}(t.fieldTransforms,e)}function bv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.jt.isEqual(e.jt)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&dd(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof ov&&e instanceof ov||t instanceof av&&e instanceof av?dd(t.elements,e.elements,Kd):t instanceof cv&&e instanceof cv?Kd(t.Ut,e.Ut):t instanceof iv&&e instanceof iv}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.Gt.isEqual(e.Gt))}function wv(t){return t instanceof lp?t.version:Td.min()}var kv=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.jt=r,o.fieldTransforms=i,o.type=0,o}return Object(Jf.c)(e,t),e}(yv),Ev=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.Gt=r,s.jt=i,s.fieldTransforms=o,s.type=1,s}return Object(Jf.c)(e,t),e}(yv);function Cv(t,e,n){var r;return r=function(t,e){var n=new ap(e);return t.Gt.fields.forEach(function(e){if(!e.et()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}}),n.Pt()}(t,r=e instanceof lp?e.data():sp.empty()),Tv(t.fieldTransforms,r,n)}function Ov(t,e,n){var r=[];ud(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof lp&&(a=e.field(o.field)),r.push(nv(s,a,n[i]))}return r}function Sv(t,e,n){for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=null;n instanceof lp&&(u=n.field(s.field)),r.push(ev(a,u,e))}return r}function Tv(t,e,n){for(var r=new ap(e),i=0;i<t.length;i++)r.set(t[i].field,n[i]);return r.Pt()}var Iv,xv,Av=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.jt=n,r.type=2,r.fieldTransforms=[],r}return Object(Jf.c)(e,t),e}(yv),jv=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.jt=n,r.type=3,r.fieldTransforms=[],r}return Object(Jf.c)(e,t),e}(yv),Pv=function(t){this.count=t};function Nv(t){switch(t){case yd.OK:return ad();case yd.CANCELLED:case yd.UNKNOWN:case yd.DEADLINE_EXCEEDED:case yd.RESOURCE_EXHAUSTED:case yd.INTERNAL:case yd.UNAVAILABLE:case yd.UNAUTHENTICATED:return!1;case yd.INVALID_ARGUMENT:case yd.NOT_FOUND:case yd.ALREADY_EXISTS:case yd.PERMISSION_DENIED:case yd.FAILED_PRECONDITION:case yd.ABORTED:case yd.OUT_OF_RANGE:case yd.UNIMPLEMENTED:case yd.DATA_LOSS:return!0;default:return ad()}}function Rv(t){if(void 0===t)return id("GRPC error has no .code"),yd.UNKNOWN;switch(t){case Iv.OK:return yd.OK;case Iv.CANCELLED:return yd.CANCELLED;case Iv.UNKNOWN:return yd.UNKNOWN;case Iv.DEADLINE_EXCEEDED:return yd.DEADLINE_EXCEEDED;case Iv.RESOURCE_EXHAUSTED:return yd.RESOURCE_EXHAUSTED;case Iv.INTERNAL:return yd.INTERNAL;case Iv.UNAVAILABLE:return yd.UNAVAILABLE;case Iv.UNAUTHENTICATED:return yd.UNAUTHENTICATED;case Iv.INVALID_ARGUMENT:return yd.INVALID_ARGUMENT;case Iv.NOT_FOUND:return yd.NOT_FOUND;case Iv.ALREADY_EXISTS:return yd.ALREADY_EXISTS;case Iv.PERMISSION_DENIED:return yd.PERMISSION_DENIED;case Iv.FAILED_PRECONDITION:return yd.FAILED_PRECONDITION;case Iv.ABORTED:return yd.ABORTED;case Iv.OUT_OF_RANGE:return yd.OUT_OF_RANGE;case Iv.UNIMPLEMENTED:return yd.UNIMPLEMENTED;case Iv.DATA_LOSS:return yd.DATA_LOSS;default:return ad()}}(xv=Iv||(Iv={}))[xv.OK=0]="OK",xv[xv.CANCELLED=1]="CANCELLED",xv[xv.UNKNOWN=2]="UNKNOWN",xv[xv.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xv[xv.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xv[xv.NOT_FOUND=5]="NOT_FOUND",xv[xv.ALREADY_EXISTS=6]="ALREADY_EXISTS",xv[xv.PERMISSION_DENIED=7]="PERMISSION_DENIED",xv[xv.UNAUTHENTICATED=16]="UNAUTHENTICATED",xv[xv.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xv[xv.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xv[xv.ABORTED=10]="ABORTED",xv[xv.OUT_OF_RANGE=11]="OUT_OF_RANGE",xv[xv.UNIMPLEMENTED=12]="UNIMPLEMENTED",xv[xv.INTERNAL=13]="INTERNAL",xv[xv.UNAVAILABLE=14]="UNAVAILABLE",xv[xv.DATA_LOSS=15]="DATA_LOSS";var Dv=function(){function t(t,e){this.H=t,this.root=e||Lv.EMPTY}return t.prototype.zt=function(e,n){return new t(this.H,this.root.zt(e,n,this.H).copy(null,null,Lv.Ht,null,null))},t.prototype.remove=function(e){return new t(this.H,this.root.remove(e,this.H).copy(null,null,Lv.Ht,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.et();){var n=this.H(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.et();){var r=this.H(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.et=function(){return this.root.et()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.Jt=function(){return this.root.Jt()},t.prototype.Yt=function(){return this.root.Yt()},t.prototype.Xt=function(t){return this.root.Xt(t)},t.prototype.forEach=function(t){this.Xt(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.Xt(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.Zt=function(t){return this.root.Zt(t)},t.prototype.te=function(){return new Mv(this.root,null,this.H,!1)},t.prototype.ee=function(t){return new Mv(this.root,t,this.H,!1)},t.prototype.ne=function(){return new Mv(this.root,null,this.H,!0)},t.prototype.se=function(t){return new Mv(this.root,t,this.H,!0)},t}(),Mv=function(){function t(t,e,n,r){this.ie=r,this.re=[];for(var i=1;!t.et();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.ie?t.left:t.right;else{if(0===i){this.re.push(t);break}this.re.push(t),t=this.ie?t.right:t.left}}return t.prototype.oe=function(){var t=this.re.pop(),e={key:t.key,value:t.value};if(this.ie)for(t=t.left;!t.et();)this.re.push(t),t=t.right;else for(t=t.right;!t.et();)this.re.push(t),t=t.left;return e},t.prototype.ce=function(){return this.re.length>0},t.prototype.ae=function(){if(0===this.re.length)return null;var t=this.re[this.re.length-1];return{key:t.key,value:t.value}},t}(),Lv=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.et=function(){return!1},t.prototype.Xt=function(t){return this.left.Xt(t)||t(this.key,this.value)||this.right.Xt(t)},t.prototype.Zt=function(t){return this.right.Zt(t)||t(this.key,this.value)||this.left.Zt(t)},t.prototype.min=function(){return this.left.et()?this:this.left.min()},t.prototype.Jt=function(){return this.min().key},t.prototype.Yt=function(){return this.right.et()?this.key:this.right.Yt()},t.prototype.zt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.zt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.zt(t,e,n))).ue()},t.prototype.he=function(){if(this.left.et())return t.EMPTY;var e=this;return e.left.le()||e.left.left.le()||(e=e._e()),(e=e.copy(null,null,null,e.left.he(),null)).ue()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.et()||i.left.le()||i.left.left.le()||(i=i._e()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.le()&&(i=i.fe()),i.right.et()||i.right.le()||i.right.left.le()||(i=i.de()),0===n(e,i.key)){if(i.right.et())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.he())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.ue()},t.prototype.le=function(){return this.color},t.prototype.ue=function(){var t=this;return t.right.le()&&!t.left.le()&&(t=t.we()),t.left.le()&&t.left.left.le()&&(t=t.fe()),t.left.le()&&t.right.le()&&(t=t.Ee()),t},t.prototype._e=function(){var t=this.Ee();return t.right.left.le()&&(t=(t=(t=t.copy(null,null,null,null,t.right.fe())).we()).Ee()),t},t.prototype.de=function(){var t=this.Ee();return t.left.left.le()&&(t=(t=t.fe()).Ee()),t},t.prototype.we=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.fe=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Ee=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Te=function(){var t=this.Ie();return Math.pow(2,t)<=this.size+1},t.prototype.Ie=function(){if(this.le()&&this.left.le())throw ad();if(this.right.le())throw ad();var t=this.left.Ie();if(t!==this.right.Ie())throw ad();return t+(this.le()?0:1)},t}();Lv.EMPTY=null,Lv.RED=!0,Lv.Ht=!1,Lv.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw ad()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw ad()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw ad()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw ad()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw ad()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.zt=function(t,e,n){return new Lv(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.et=function(){return!0},t.prototype.Xt=function(t){return!1},t.prototype.Zt=function(t){return!1},t.prototype.Jt=function(){return null},t.prototype.Yt=function(){return null},t.prototype.le=function(){return!1},t.prototype.Te=function(){return!0},t.prototype.Ie=function(){return 0},t}());var Fv=function(){function t(t){this.H=t,this.data=new Dv(this.H)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Jt()},t.prototype.last=function(){return this.data.Yt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Xt(function(e,n){return t(e),!1})},t.prototype.me=function(t,e){for(var n=this.data.ee(t[0]);n.ce();){var r=n.oe();if(this.H(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Ae=function(t,e){var n;for(n=void 0!==e?this.data.ee(e):this.data.te();n.ce();)if(!t(n.oe().key))return},t.prototype.Re=function(t){var e=this.data.ee(t);return e.ce()?e.oe().key:null},t.prototype.te=function(){return new Vv(this.data.te())},t.prototype.ee=function(t){return new Vv(this.data.ee(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).zt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.et=function(){return this.data.et()},t.prototype.Pe=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.te(),r=e.data.te();n.ce();){var i=n.oe().key,o=r.oe().key;if(0!==this.H(i,o))return!1}return!0},t.prototype.it=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.H);return n.data=e,n},t}(),Vv=function(){function t(t){this.ye=t}return t.prototype.oe=function(){return this.ye.oe().key},t.prototype.ce=function(){return this.ye.ce()},t}(),Uv=new Dv(Pd.H);function qv(){return Uv}function Bv(){return qv()}var Hv=new Dv(Pd.H);function zv(){return Hv}var Wv=new Dv(Pd.H);function Qv(){return Wv}var Gv=new Fv(Pd.H);function Kv(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Gv,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Yv=new Fv(fd);function Xv(){return Yv}var Zv=function(){function t(t){this.H=t?function(e,n){return t(e,n)||Pd.H(e.key,n.key)}:function(t,e){return Pd.H(t.key,e.key)},this.ge=zv(),this.Ve=new Dv(this.H)}return t.pe=function(e){return new t(e.H)},t.prototype.has=function(t){return null!=this.ge.get(t)},t.prototype.get=function(t){return this.ge.get(t)},t.prototype.first=function(){return this.Ve.Jt()},t.prototype.last=function(){return this.Ve.Yt()},t.prototype.et=function(){return this.Ve.et()},t.prototype.indexOf=function(t){var e=this.ge.get(t);return e?this.Ve.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Ve.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Ve.Xt(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.ge.zt(t.key,t),e.Ve.zt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.ge.remove(t),this.Ve.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Ve.te(),r=e.Ve.te();n.ce();){var i=n.oe().key,o=r.oe().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.H=this.H,r.ge=e,r.Ve=n,r},t}(),Jv=function(){function t(){this.be=new Dv(Pd.H)}return t.prototype.track=function(t){var e=t.doc.key,n=this.be.get(e);n?0!==t.type&&3===n.type?this.be=this.be.zt(e,t):3===t.type&&1!==n.type?this.be=this.be.zt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.be=this.be.zt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.be=this.be.remove(e):1===t.type&&2===n.type?this.be=this.be.zt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):ad():this.be=this.be.zt(e,t)},t.prototype.ve=function(){var t=[];return this.be.Xt(function(e,n){t.push(n)}),t},t}(),$v=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Se=n,this.docChanges=r,this.De=i,this.fromCache=o,this.Ce=s,this.xe=a}return t.Ne=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,Zv.pe(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.De.et()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Ce===t.Ce&&this.De.isEqual(t.De)&&zp(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Se.isEqual(t.Se)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),ty=function(){function t(t,e,n,r,i){this.Ot=t,this.$e=e,this.Fe=n,this.Oe=r,this.ke=i}return t.Me=function(e,n){var r=new Map;return r.set(e,ey.Le(e,n)),new t(Td.min(),r,Xv(),qv(),Kv())},t}(),ey=function(){function t(t,e,n,r,i){this.resumeToken=t,this.Be=e,this.qe=n,this.Ue=r,this.Qe=i}return t.Le=function(e,n){return new t(vd.T,n,Kv(),Kv(),Kv())},t}(),ny=function(t,e,n,r){this.Ke=t,this.removedTargetIds=e,this.key=n,this.We=r},ry=function(t,e){this.targetId=t,this.je=e},iy=function(t,e,n,r){void 0===n&&(n=vd.T),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},oy=function(){function t(){this.Ge=0,this.ze=uy(),this.He=vd.T,this.Je=!1,this.Ye=!0}return Object.defineProperty(t.prototype,"Be",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.He},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Xe",{get:function(){return 0!==this.Ge},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ze",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),t.prototype.tn=function(t){t.l()>0&&(this.Ye=!0,this.He=t)},t.prototype.en=function(){var t=Kv(),e=Kv(),n=Kv();return this.ze.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:ad()}}),new ey(this.He,this.Je,t,e,n)},t.prototype.nn=function(){this.Ye=!1,this.ze=uy()},t.prototype.sn=function(t,e){this.Ye=!0,this.ze=this.ze.zt(t,e)},t.prototype.rn=function(t){this.Ye=!0,this.ze=this.ze.remove(t)},t.prototype.on=function(){this.Ge+=1},t.prototype.cn=function(){this.Ge-=1},t.prototype.an=function(){this.Ye=!0,this.Je=!0},t}(),sy=function(){function t(t){this.un=t,this.hn=new Map,this.ln=qv(),this._n=ay(),this.fn=new Fv(fd)}return t.prototype.dn=function(t){for(var e=0,n=t.Ke;e<n.length;e++){var r=n[e];t.We instanceof lp?this.wn(r,t.We):t.We instanceof hp&&this.En(r,t.key,t.We)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.En(r=o[i],t.key,t.We)},t.prototype.Tn=function(t){var e=this;this.In(t,function(n){var r=e.mn(n);switch(t.state){case 0:e.An(n)&&r.tn(t.resumeToken);break;case 1:r.cn(),r.Xe||r.nn(),r.tn(t.resumeToken);break;case 2:r.cn(),r.Xe||e.removeTarget(n);break;case 3:e.An(n)&&(r.an(),r.tn(t.resumeToken));break;case 4:e.An(n)&&(e.Rn(n),r.tn(t.resumeToken));break;default:ad()}})},t.prototype.In=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.hn.forEach(function(t,r){n.An(r)&&e(r)})},t.prototype.Pn=function(t){var e=t.targetId,n=t.je.count,r=this.yn(e);if(r){var i=r.target;if(gp(i))if(0===n){var o=new Pd(i.path);this.En(e,o,new hp(o,Td.min()))}else ud(1===n);else this.gn(e)!==n&&(this.Rn(e),this.fn=this.fn.add(e))}},t.prototype.Vn=function(t){var e=this,n=new Map;this.hn.forEach(function(r,i){var o=e.yn(i);if(o){if(r.Be&&gp(o.target)){var s=new Pd(o.target.path);null!==e.ln.get(s)||e.pn(i,s)||e.En(i,s,new hp(s,t))}r.Ze&&(n.set(i,r.en()),r.nn())}});var r=Kv();this._n.forEach(function(t,n){var i=!0;n.Ae(function(t){var n=e.yn(t);return!n||2===n.Ft||(i=!1,!1)}),i&&(r=r.add(t))});var i=new ty(t,n,this.fn,this.ln,r);return this.ln=qv(),this._n=ay(),this.fn=new Fv(fd),i},t.prototype.wn=function(t,e){if(this.An(t)){var n=this.pn(t,e.key)?2:0;this.mn(t).sn(e.key,n),this.ln=this.ln.zt(e.key,e),this._n=this._n.zt(e.key,this.bn(e.key).add(t))}},t.prototype.En=function(t,e,n){if(this.An(t)){var r=this.mn(t);this.pn(t,e)?r.sn(e,1):r.rn(e),this._n=this._n.zt(e,this.bn(e).delete(t)),n&&(this.ln=this.ln.zt(e,n))}},t.prototype.removeTarget=function(t){this.hn.delete(t)},t.prototype.gn=function(t){var e=this.mn(t).en();return this.un.vn(t).size+e.qe.size-e.Qe.size},t.prototype.on=function(t){this.mn(t).on()},t.prototype.mn=function(t){var e=this.hn.get(t);return e||(e=new oy,this.hn.set(t,e)),e},t.prototype.bn=function(t){var e=this._n.get(t);return e||(e=new Fv(fd),this._n=this._n.zt(t,e)),e},t.prototype.An=function(t){var e=null!==this.yn(t);return e||rd("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.yn=function(t){var e=this.hn.get(t);return e&&e.Xe?null:this.un.Sn(t)},t.prototype.Rn=function(t){var e=this;this.hn.set(t,new oy),this.un.vn(t).forEach(function(n){e.En(t,n,null)})},t.prototype.pn=function(t,e){return this.un.vn(t).has(e)},t}();function ay(){return new Dv(Pd.H)}function uy(){return new Dv(Pd.H)}var cy={asc:"ASCENDING",desc:"DESCENDING"},ly={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hy=function(t,e){this.t=t,this.Bt=e};function fy(t,e){return t.Bt?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function dy(t,e){return t.Bt?e.toBase64():e.toUint8Array()}function py(t,e){return fy(t,e.j())}function vy(t){return ud(!!t),Td.K(function(t){var e=Fd(t);return new Sd(e.seconds,e.nanos)}(t))}function yy(t,e){return function(t){return new xd(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).rt()}function gy(t){var e=xd.ot(t);return ud(qy(e)),e}function my(t,e){return yy(t.t,e.path)}function _y(t,e){var n=gy(e);if(n.get(1)!==t.t.projectId)throw new gd(yd.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.t.projectId);if(n.get(3)!==t.t.database)throw new gd(yd.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.t.database);return new Pd(Ey(n))}function by(t,e){return yy(t.t,e)}function wy(t){var e=gy(t);return 4===e.length?xd.ct():Ey(e)}function ky(t){return new xd(["projects",t.t.projectId,"databases",t.t.database]).rt()}function Ey(t){return ud(t.length>4&&"documents"===t.get(4)),t.Y(5)}function Cy(t,e,n){return{name:my(t,e),fields:n.proto.mapValue.fields}}function Oy(t,e,n){var r=_y(t,e.name),i=vy(e.updateTime),o=new sp({mapValue:{fields:e.fields}});return new lp(r,i,o,{hasCommittedMutations:!!n})}function Sy(t,e){var n;if(e instanceof kv)n={update:Cy(t,e.key,e.value)};else if(e instanceof Av)n={delete:my(t,e.key)};else if(e instanceof Ev)n={update:Cy(t,e.key,e.data),updateMask:Uy(e.Gt)};else{if(!(e instanceof jv))return ad();n={verify:my(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof iv)return{fieldPath:e.field.rt(),setToServerValue:"REQUEST_TIME"};if(n instanceof ov)return{fieldPath:e.field.rt(),appendMissingElements:{values:n.elements}};if(n instanceof av)return{fieldPath:e.field.rt(),removeAllFromArray:{values:n.elements}};if(n instanceof cv)return{fieldPath:e.field.rt(),increment:n.Ut};throw ad()}(0,t)})),e.jt.Wt||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:py(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:ad()}(t,e.jt)),n}function Ty(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?pv.updateTime(vy(t.updateTime)):void 0!==t.exists?pv.exists(t.exists):pv.Kt()}(e.currentDocument):pv.Kt(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(ud("REQUEST_TIME"===e.setToServerValue),n=new iv):"appendMissingElements"in e?n=new ov(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new av(e.removeAllFromArray.values||[]):"increment"in e?n=new cv(t,e.increment):ad();var r=jd.lt(e.fieldPath);return new fv(r,n)}(t,e)}):[];if(e.update){var i=_y(t,e.update.name),o=new sp({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new Md((t.fieldPaths||[]).map(function(t){return jd.lt(t)}))}(e.updateMask);return new Ev(i,o,s,n,r)}return new kv(i,o,n,r)}if(e.delete){var a=_y(t,e.delete);return new Av(a,n)}if(e.verify){var u=_y(t,e.verify);return new jv(u,n)}return ad()}function Iy(t,e){return{documents:[by(t,e.path)]}}function xy(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=by(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=by(t,r.X()),n.structuredQuery.from=[{collectionId:r.tt()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(ip(t.value))return{unaryFilter:{field:My(t.field),op:"IS_NAN"}};if(rp(t.value))return{unaryFilter:{field:My(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(ip(t.value))return{unaryFilter:{field:My(t.field),op:"IS_NOT_NAN"}};if(rp(t.value))return{unaryFilter:{field:My(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:My(t.field),op:Dy(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:My(t.field),direction:Ry(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.Bt||zd(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Py(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Py(e.endAt)),n}function Ay(t){var e=wy(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ud(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=jy(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new xp(Ly(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return zd(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Ny(n.startAt));var l=null;return n.endAt&&(l=Ny(n.endAt)),Rp(e,i,a,s,u,"F",c,l)}function jy(t){return t?void 0!==t.unaryFilter?[Vy(t)]:void 0!==t.fieldFilter?[Fy(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return jy(t)}).reduce(function(t,e){return t.concat(e)}):ad():[]}function Py(t){return{before:t.before,values:t.position}}function Ny(t){return new Tp(t.values||[],!!t.before)}function Ry(t){return cy[t]}function Dy(t){return ly[t]}function My(t){return{fieldPath:t.rt()}}function Ly(t){return jd.lt(t.fieldPath)}function Fy(t){return mp.create(Ly(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return ad()}}(t.fieldFilter.op),t.fieldFilter.value)}function Vy(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Ly(t.unaryFilter.field);return mp.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Ly(t.unaryFilter.field);return mp.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Ly(t.unaryFilter.field);return mp.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Ly(t.unaryFilter.field);return mp.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return ad()}}function Uy(t){var e=[];return t.fields.forEach(function(t){return e.push(t.rt())}),{fieldPaths:e}}function qy(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var By=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},Hy=function(){function t(t){var e=this;this.Dn=null,this.Cn=null,this.result=void 0,this.error=void 0,this.xn=!1,this.Nn=!1,t(function(t){e.xn=!0,e.result=t,e.Dn&&e.Dn(t)},function(t){e.xn=!0,e.error=t,e.Cn&&e.Cn(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Nn&&ad(),this.Nn=!0,this.xn?this.error?this.$n(n,this.error):this.Fn(e,this.result):new t(function(t,i){r.Dn=function(n){r.Fn(e,n).next(t,i)},r.Cn=function(e){r.$n(n,e).next(t,i)}})},t.prototype.On=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.kn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Fn=function(e,n){return e?this.kn(function(){return e(n)}):t.resolve(n)},t.prototype.$n=function(e,n){return e?this.kn(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.Mn=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.Ln=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.Mn(r)},t}(),zy=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.Bn=new By,this.transaction.oncomplete=function(){n.Bn.resolve()},this.transaction.onabort=function(){e.error?n.Bn.reject(new Gy(t,e.error)):n.Bn.resolve()},this.transaction.onerror=function(e){var r=Jy(e.target.error);n.Bn.reject(new Gy(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Gy(n,e)}},Object.defineProperty(t.prototype,"qn",{get:function(){return this.Bn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Bn.reject(t),this.aborted||(rd("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Yy(e)},t}(),Wy=function(){function t(e,n,r){this.name=e,this.version=n,this.Un=r,12.2===t.Qn(Object(Yu.m)())&&id("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return rd("SimpleDb","Removing database:",t),Xy(window.indexedDB.deleteDatabase(t)).On()},t.Kn=function(){if("undefined"==typeof indexedDB)return!1;if(t.Wn())return!0;var e=Object(Yu.m)(),n=t.Qn(e),r=0<n&&n<10,i=t.jn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Wn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Gn)},t.zn=function(t,e){return t.store(e)},t.Qn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.jn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Hn=function(t){return Object(Jf.b)(this,void 0,void 0,function(){var e,n=this;return Object(Jf.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(rd("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Gy(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new gd(yd.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Gy(t,n))},i.onupgradeneeded=function(t){rd("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.Un.Jn(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){rd("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Yn&&(this.db.onversionchange=function(t){return n.Yn(t)}),this.db)]}})})},t.prototype.Xn=function(t){this.Yn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(Jf.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(Jf.d)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(Jf.d)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.Hn(t)];case 2:return a.db=h.sent(),e=zy.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),Hy.reject(t)}).On(),u={},s.catch(function(){}),[4,e.qn];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return rd("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Qy=function(){function t(t){this.Zn=t,this.ts=!1,this.es=null}return Object.defineProperty(t.prototype,"xn",{get:function(){return this.ts},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ns",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Zn=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.ts=!0},t.prototype.ss=function(t){this.es=t},t.prototype.delete=function(){return Xy(this.Zn.delete())},t}(),Gy=function(t){function e(e,n){var r=this;return(r=t.call(this,yd.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(Jf.c)(e,t),e}(gd);function Ky(t){return"IndexedDbTransactionError"===t.name}var Yy=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(rd("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(rd("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Xy(n)},t.prototype.add=function(t){return rd("SimpleDb","ADD",this.store.name,t,t),Xy(this.store.add(t))},t.prototype.get=function(t){var e=this;return Xy(this.store.get(t)).next(function(n){return void 0===n&&(n=null),rd("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return rd("SimpleDb","DELETE",this.store.name,t),Xy(this.store.delete(t))},t.prototype.count=function(){return rd("SimpleDb","COUNT",this.store.name),Xy(this.store.count())},t.prototype.rs=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.os(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.cs=function(t,e){rd("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.us=!1;var r=this.cursor(n);return this.os(r,function(t,e,n){return n.delete()})},t.prototype.hs=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.os(r,e)},t.prototype.ls=function(t){var e=this.cursor({});return new Hy(function(n,r){e.onerror=function(t){var e=Jy(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.os=function(t,e){var n=[];return new Hy(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Qy(i),s=e(i.primaryKey,i.value,o);if(s instanceof Hy){var a=s.catch(function(t){return o.done(),Hy.reject(t)});n.push(a)}o.xn?r():null===o.ns?i.continue():i.continue(o.ns)}else r()}}).next(function(){return Hy.Mn(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.us?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Xy(t){return new Hy(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Jy(t.target.error);n(e)}})}var Zy=!1;function Jy(t){var e=Wy.Qn(Object(Yu.m)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new gd("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Zy||(Zy=!0,setTimeout(function(){throw r},0)),r}}return t}var $y=function(){function t(t,e,n,r,i){this._s=t,this.fs=e,this.ds=n,this.op=r,this.ws=i,this.Es=new By,this.then=this.Es.promise.then.bind(this.Es.promise),this.Es.promise.catch(function(t){})}return t.Ts=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.Is=setTimeout(function(){return e.As()},t)},t.prototype.Rs=function(){return this.As()},t.prototype.cancel=function(t){null!==this.Is&&(this.clearTimeout(),this.Es.reject(new gd(yd.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.As=function(){var t=this;this._s.Ps(function(){return null!==t.Is?(t.clearTimeout(),t.op().then(function(e){return t.Es.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.Is&&(this.ws(this),clearTimeout(this.Is),this.Is=null)},t}();function tg(t,e){if(id("AsyncQueue",e+": "+t),Ky(t))return new gd(yd.UNAVAILABLE,e+": "+t);throw t}var eg="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ng=function(){function t(){this.ys=[]}return t.prototype.gs=function(t){this.ys.push(t)},t.prototype.Vs=function(){this.ys.forEach(function(t){return t()})},t}();function rg(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=og(e)),e=ig(t.get(n),e);return og(e)}function ig(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function og(t){return t+"\x01\x01"}function sg(t){var e=t.length;if(ud(e>=2),2===e)return ud("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),xd.ct();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&ad(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:ad()}o=s+2}return new xd(r)}var ag=function(t,e){this.seconds=t,this.nanoseconds=e},ug=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};ug.store="owner",ug.key="owner";var cg=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};cg.store="mutationQueues",cg.keyPath="userId";var lg=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};lg.store="mutations",lg.keyPath="batchId",lg.userMutationsIndex="userMutationsIndex",lg.userMutationsKeyPath=["userId","batchId"];var hg=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,rg(e)]},t.key=function(t,e,n){return[t,rg(e),n]},t}();hg.store="documentMutations",hg.PLACEHOLDER=new hg;var fg=function(t,e){this.path=t,this.readTime=e},dg=function(t,e){this.path=t,this.version=e},pg=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};pg.store="remoteDocuments",pg.readTimeIndex="readTimeIndex",pg.readTimeIndexPath="readTime",pg.collectionReadTimeIndex="collectionReadTimeIndex",pg.collectionReadTimeIndexPath=["parentPath","readTime"];var vg=function(t){this.byteSize=t};vg.store="remoteDocumentGlobal",vg.key="remoteDocumentGlobalKey";var yg=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};yg.store="targets",yg.keyPath="targetId",yg.queryTargetsIndexName="queryTargetsIndex",yg.queryTargetsKeyPath=["canonicalId","targetId"];var gg=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};gg.store="targetDocuments",gg.keyPath=["targetId","path"],gg.documentTargetsIndex="documentTargetsIndex",gg.documentTargetsKeyPath=["path","targetId"];var mg=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};mg.key="targetGlobalKey",mg.store="targetGlobal";var _g=function(t,e){this.collectionId=t,this.parent=e};_g.store="collectionParents",_g.keyPath=["collectionId","parent"];var bg=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};bg.store="clientMetadata",bg.keyPath="clientId";var wg=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};wg.store="bundles",wg.keyPath="bundleId";var kg=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};kg.store="namedQueries",kg.keyPath="name";var Eg=Object(Jf.g)(Object(Jf.g)(Object(Jf.g)(Object(Jf.g)([cg.store,lg.store,hg.store,pg.store,yg.store,ug.store,mg.store,gg.store],[bg.store]),[vg.store]),[_g.store]),[wg.store,kg.store]),Cg=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ps=e,r.bs=n,r}return Object(Jf.c)(e,t),e}(ng);function Og(t,e){var n=cd(t);return Wy.zn(n.ps,e)}var Sg=function(){function t(t,e,n,r){this.batchId=t,this.vs=e,this.baseMutations=n,this.mutations=r}return t.prototype.Ss=function(t,e,n){for(var r=n.Ds,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=gv(o,e,r[i]))}return e},t.prototype.Cs=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=mv(s,e,this.vs));for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(t)&&(e=mv(s,e,this.vs))}return e},t.prototype.xs=function(t){var e=this,n=t;return this.mutations.forEach(function(r){var i=e.Cs(r.key,t.get(r.key));i&&(n=n.zt(r.key,i))}),n},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Kv())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&dd(this.mutations,t.mutations,function(t,e){return bv(t,e)})&&dd(this.baseMutations,t.baseMutations,function(t,e){return bv(t,e)})},t}(),Tg=function(){function t(t,e,n,r){this.batch=t,this.Ns=e,this.Ds=n,this.$s=r}return t.from=function(e,n,r){ud(e.mutations.length===r.length);for(var i=Qv(),o=e.mutations,s=0;s<o.length;s++)i=i.zt(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Ig=function(t){this.Fs=t};function xg(t,e){if(e.document)return Oy(t.Fs,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Pd.Et(e.noDocument.path),r=Rg(e.noDocument.readTime);return new hp(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=Pd.Et(e.unknownDocument.path);return r=Rg(e.unknownDocument.version),new fp(i,r)}return ad()}function Ag(t,e,n){var r=jg(n),i=e.key.path.X().it();if(e instanceof lp){var o=function(t,e){return{name:my(t,e.key),fields:e.bt().mapValue.fields,updateTime:fy(t,e.version.j())}}(t.Fs,e),s=e.hasCommittedMutations;return new pg(null,null,o,s,r,i)}if(e instanceof hp){var a=e.key.path.it(),u=Ng(e.version);return s=e.hasCommittedMutations,new pg(null,new fg(a,u),null,s,r,i)}if(e instanceof fp){var c=e.key.path.it(),l=Ng(e.version);return new pg(new dg(c,l),null,null,!0,r,i)}return ad()}function jg(t){var e=t.j();return[e.seconds,e.nanoseconds]}function Pg(t){var e=new Sd(t[0],t[1]);return Td.K(e)}function Ng(t){var e=t.j();return new ag(e.seconds,e.nanoseconds)}function Rg(t){var e=new Sd(t.seconds,t.nanoseconds);return Td.K(e)}function Dg(t,e){for(var n=(e.baseMutations||[]).map(function(e){return Ty(t.Fs,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return Ty(t.Fs,e)}),o=Sd.fromMillis(e.localWriteTimeMs);return new Sg(e.batchId,o,n,i)}function Mg(t){var e,n,r=Rg(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Rg(t.lastLimboFreeSnapshotVersion):Td.min();return void 0!==t.query.documents?(ud(1===(n=t.query).documents.length),e=Bp(Dp(wy(n.documents[0])))):e=function(t){return Bp(Ay(t))}(t.query),new Xp(e,t.targetId,0,t.lastListenSequenceNumber,r,i,vd.fromBase64String(t.resumeToken))}function Lg(t,e){var n,r=Ng(e.Ot),i=Ng(e.lastLimboFreeSnapshotVersion);n=gp(e.target)?Iy(t.Fs,e.target):xy(t.Fs,e.target);var o=e.resumeToken.toBase64();return new yg(e.targetId,vp(e.target),r,o,e.sequenceNumber,i,n)}function Fg(t){var e=Ay({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Hp(e,e.limit,"L"):e}var Vg=function(){function t(){}return t.prototype.Os=function(t,e){return Ug(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:Rg(e.createTime),version:e.version};var e})},t.prototype.ks=function(t,e){return Ug(t).put({bundleId:(n=e).id,createTime:Ng(vy(n.createTime)),version:n.version});var n},t.prototype.Ms=function(t,e){return qg(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:Fg(e.bundledQuery),readTime:Rg(e.readTime)};var e})},t.prototype.Ls=function(t,e){return qg(t).put(function(t){return{name:t.name,readTime:Ng(vy(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Ug(t){return Og(t,wg.store)}function qg(t){return Og(t,kg.store)}var Bg=function(){function t(){this.Bs=new Hg}return t.prototype.qs=function(t,e){return this.Bs.add(e),Hy.resolve()},t.prototype.Us=function(t,e){return Hy.resolve(this.Bs.getEntries(e))},t}(),Hg=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.tt(),n=t.X(),r=this.index[e]||new Fv(xd.H),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.tt(),n=t.X(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Fv(xd.H)).it()},t}(),zg=function(){function t(){this.Qs=new Hg}return t.prototype.qs=function(t,e){var n=this;if(!this.Qs.has(e)){var r=e.tt(),i=e.X();t.gs(function(){n.Qs.add(e)});var o={collectionId:r,parent:rg(i)};return Wg(t).put(o)}return Hy.resolve()},t.prototype.Us=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[pd(e),""],!1,!0);return Wg(t).rs(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(sg(o.parent))}return n})},t}();function Wg(t){return Og(t,_g.store)}var Qg={Ks:!1,Ws:0,js:0,Gs:0},Gg=function(){function t(t,e,n){this.zs=t,this.Hs=e,this.Js=n}return t.Ys=function(e){return new t(e,t.Xs,t.Zs)},t}();function Kg(t){return Object(Jf.b)(this,void 0,void 0,function(){return Object(Jf.d)(this,function(e){if(t.code!==yd.FAILED_PRECONDITION||t.message!==eg)throw t;return rd("LocalStore","Unexpectedly lost primary lease"),[2]})})}Gg.Xs=10,Gg.Zs=1e3,Gg.ti=new Gg(41943040,Gg.Xs,Gg.Zs),Gg.ei=new Gg(-1,0,0);var Yg=function(){function t(t,e){this.ni=t,this.si=e,this.ii={}}return t.prototype.get=function(t){var e=this.ni(t),n=this.ii[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.si(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.ni(t),r=this.ii[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.si(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.ii[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.ni(t),n=this.ii[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.si(n[r][0],t))return 1===n.length?delete this.ii[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Rd(this.ii,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.et=function(){return Dd(this.ii)},t}(),Xg=function(){function t(){this.ri=new Yg(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.oi=!1}return t.prototype.ci=function(t){var e=this.ri.get(t);return e?e.readTime:Td.min()},t.prototype.ai=function(t,e){this.ui(),this.ri.set(t.key,{hi:t,readTime:e})},t.prototype.li=function(t,e){void 0===e&&(e=null),this.ui(),this.ri.set(t,{hi:null,readTime:e})},t.prototype._i=function(t,e){this.ui();var n=this.ri.get(e);return void 0!==n?Hy.resolve(n.hi):this.fi(t,e)},t.prototype.getEntries=function(t,e){return this.di(t,e)},t.prototype.apply=function(t){return this.ui(),this.oi=!0,this.wi(t)},t.prototype.ui=function(){},t}();function Zg(t,e,n){var r=t.store(lg.store),i=t.store(hg.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.hs({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){ud(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=hg.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return Hy.Mn(o).next(function(){return c})}function Jg(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ad();e=t.noDocument}return JSON.stringify(e).length}var $g=function(){function t(t,e,n,r){this.userId=t,this.Qt=e,this.Ei=n,this.Ti=r,this.Ii={}}return t.mi=function(e,n,r,i){return ud(""!==e.uid),new t(e.m()?e.uid:"",n,r,i)},t.prototype.Ai=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return em(t).hs({index:lg.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.Ri=function(t,e,n,r){var i=this,o=nm(t),s=em(t);return s.add({}).next(function(a){ud("number"==typeof a);for(var u=new Sg(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return Sy(t.Fs,e)}),i=n.mutations.map(function(e){return Sy(t.Fs,e)});return new lg(e,n.batchId,n.vs.toMillis(),r,i)}(i.Qt,i.userId,u),l=[],h=new Fv(function(t,e){return fd(t.rt(),e.rt())}),f=0,d=r;f<d.length;f++){var p=d[f],v=hg.key(i.userId,p.key.path,a);h=h.add(p.key.path.X()),l.push(s.put(c)),l.push(o.put(v,hg.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ei.qs(t,e))}),t.gs(function(){i.Ii[a]=u.keys()}),Hy.Mn(l).next(function(){return u})})},t.prototype.Pi=function(t,e){var n=this;return em(t).get(e).next(function(t){return t?(ud(t.userId===n.userId),Dg(n.Qt,t)):null})},t.prototype.yi=function(t,e){var n=this;return this.Ii[e]?Hy.resolve(this.Ii[e]):this.Pi(t,e).next(function(t){if(t){var r=t.keys();return n.Ii[e]=r,r}return null})},t.prototype.gi=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return em(t).hs({index:lg.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(ud(e.batchId>=r),o=Dg(n.Qt,e)),i.done()}).next(function(){return o})},t.prototype.Vi=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return em(t).hs({index:lg.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.pi=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return em(t).rs(lg.userMutationsIndex,n).next(function(t){return t.map(function(t){return Dg(e.Qt,t)})})},t.prototype.bi=function(t,e){var n=this,r=hg.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return nm(t).hs({range:i},function(r,i,s){var a=r[0],u=r[2],c=sg(r[1]);if(a===n.userId&&e.path.isEqual(c))return em(t).get(u).next(function(t){if(!t)throw ad();ud(t.userId===n.userId),o.push(Dg(n.Qt,t))});s.done()}).next(function(){return o})},t.prototype.vi=function(t,e){var n=this,r=new Fv(fd),i=[];return e.forEach(function(e){var o=hg.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=nm(t).hs({range:s},function(t,i,o){var s=t[0],a=t[2],u=sg(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),Hy.Mn(i).next(function(){return n.Si(t,r)})},t.prototype.Di=function(t,e){var n=this,r=e.path,i=r.length+1,o=hg.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Fv(fd);return nm(t).hs({range:s},function(t,e,o){var s=t[0],u=t[2],c=sg(t[1]);s===n.userId&&r.nt(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Si(t,a)})},t.prototype.Si=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(em(t).get(e).next(function(t){if(null===t)throw ad();ud(t.userId===n.userId),r.push(Dg(n.Qt,t))}))}),Hy.Mn(i).next(function(){return r})},t.prototype.Ci=function(t,e){var n=this;return Zg(t.ps,this.userId,e).next(function(r){return t.gs(function(){n.xi(e.batchId)}),Hy.forEach(r,function(e){return n.Ti.Ni(t,e)})})},t.prototype.xi=function(t){delete this.Ii[t]},t.prototype.$i=function(t){var e=this;return this.Ai(t).next(function(n){if(!n)return Hy.resolve();var r=IDBKeyRange.lowerBound(hg.prefixForUser(e.userId)),i=[];return nm(t).hs({range:r},function(t,n,r){if(t[0]===e.userId){var o=sg(t[1]);i.push(o)}else r.done()}).next(function(){ud(0===i.length)})})},t.prototype.Fi=function(t,e){return tm(t,this.userId,e)},t.prototype.Oi=function(t){var e=this;return rm(t).get(this.userId).next(function(t){return t||new cg(e.userId,-1,"")})},t}();function tm(t,e,n){var r=hg.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return nm(t).hs({range:o,us:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function em(t){return Og(t,lg.store)}function nm(t){return Og(t,hg.store)}function rm(t){return Og(t,cg.store)}var im=function(){function t(t){this.ki=t}return t.prototype.next=function(){return this.ki+=2,this.ki},t.Mi=function(){return new t(0)},t.Li=function(){return new t(-1)},t}(),om=function(){function t(t,e){this.Ti=t,this.Qt=e}return t.prototype.Bi=function(t){var e=this;return this.qi(t).next(function(n){var r=new im(n.highestTargetId);return n.highestTargetId=r.next(),e.Ui(t,n).next(function(){return n.highestTargetId})})},t.prototype.Qi=function(t){return this.qi(t).next(function(t){return Td.K(new Sd(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.Ki=function(t){return this.qi(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.Wi=function(t,e,n){var r=this;return this.qi(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.j()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ui(t,i)})},t.prototype.ji=function(t,e){var n=this;return this.Gi(t,e).next(function(){return n.qi(t).next(function(r){return r.targetCount+=1,n.zi(e,r),n.Ui(t,r)})})},t.prototype.Hi=function(t,e){return this.Gi(t,e)},t.prototype.Ji=function(t,e){var n=this;return this.Yi(t,e.targetId).next(function(){return sm(t).delete(e.targetId)}).next(function(){return n.qi(t)}).next(function(e){return ud(e.targetCount>0),e.targetCount-=1,n.Ui(t,e)})},t.prototype.Xi=function(t,e,n){var r=this,i=0,o=[];return sm(t).hs(function(s,a){var u=Mg(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.Ji(t,u)))}).next(function(){return Hy.Mn(o)}).next(function(){return i})},t.prototype.In=function(t,e){return sm(t).hs(function(t,n){var r=Mg(n);e(r)})},t.prototype.qi=function(t){return am(t).get(mg.key).next(function(t){return ud(null!==t),t})},t.prototype.Ui=function(t,e){return am(t).put(mg.key,e)},t.prototype.Gi=function(t,e){return sm(t).put(Lg(this.Qt,e))},t.prototype.zi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.Zi=function(t){return this.qi(t).next(function(t){return t.targetCount})},t.prototype.tr=function(t,e){var n=vp(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return sm(t).hs({range:r,index:yg.queryTargetsIndexName},function(t,n,r){var o=Mg(n);yp(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.er=function(t,e,n){var r=this,i=[],o=um(t);return e.forEach(function(e){var s=rg(e.path);i.push(o.put(new gg(n,s))),i.push(r.Ti.nr(t,n,e))}),Hy.Mn(i)},t.prototype.sr=function(t,e,n){var r=this,i=um(t);return Hy.forEach(e,function(e){var o=rg(e.path);return Hy.Mn([i.delete([n,o]),r.Ti.ir(t,n,e)])})},t.prototype.Yi=function(t,e){var n=um(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.rr=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=um(t),i=Kv();return r.hs({range:n,us:!0},function(t,e,n){var r=sg(t[1]),o=new Pd(r);i=i.add(o)}).next(function(){return i})},t.prototype.Fi=function(t,e){var n=rg(e.path),r=IDBKeyRange.bound([n],[pd(n)],!1,!0),i=0;return um(t).hs({index:gg.documentTargetsIndex,us:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.Sn=function(t,e){return sm(t).get(e).next(function(t){return t?Mg(t):null})},t}();function sm(t){return Og(t,yg.store)}function am(t){return Og(t,mg.store)}function um(t){return Og(t,gg.store)}function cm(t,e){var n=t[1],r=e[1],i=fd(t[0],e[0]);return 0===i?fd(n,r):i}var lm=function(){function t(t){this.cr=t,this.buffer=new Fv(cm),this.ar=0}return t.prototype.ur=function(){return++this.ar},t.prototype.hr=function(t){var e=[t,this.ur()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();cm(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),hm=function(){function t(t,e){this.lr=t,this._s=e,this._r=!1,this.dr=null}return t.prototype.start=function(t){-1!==this.lr.params.zs&&this.wr(t)},t.prototype.stop=function(){this.dr&&(this.dr.cancel(),this.dr=null)},Object.defineProperty(t.prototype,"Er",{get:function(){return null!==this.dr},enumerable:!1,configurable:!0}),t.prototype.wr=function(t){var e=this,n=this._r?3e5:6e4;rd("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.dr=this._s.Tr("lru_garbage_collection",n,function(){return Object(Jf.b)(e,void 0,void 0,function(){var e;return Object(Jf.d)(this,function(n){switch(n.label){case 0:this.dr=null,this._r=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Ir(this.lr)];case 2:return n.sent(),[3,7];case 3:return Ky(e=n.sent())?(rd("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Kg(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.wr(t)];case 8:return n.sent(),[2]}})})})},t}(),fm=function(){function t(t,e){this.mr=t,this.params=e}return t.prototype.Ar=function(t,e){return this.mr.Rr(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.Pr=function(t,e){var n=this;if(0===e)return Hy.resolve(Od.q);var r=new lm(e);return this.mr.In(t,function(t){return r.hr(t.sequenceNumber)}).next(function(){return n.mr.yr(t,function(t){return r.hr(t)})}).next(function(){return r.maxValue})},t.prototype.Xi=function(t,e,n){return this.mr.Xi(t,e,n)},t.prototype.gr=function(t,e){return this.mr.gr(t,e)},t.prototype.Vr=function(t,e){var n=this;return-1===this.params.zs?(rd("LruGarbageCollector","Garbage collection skipped; disabled"),Hy.resolve(Qg)):this.pr(t).next(function(r){return r<n.params.zs?(rd("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.zs),Qg):n.br(t,e)})},t.prototype.pr=function(t){return this.mr.pr(t)},t.prototype.br=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.Ar(t,this.params.Hs).next(function(e){return e>c.params.Js?(rd("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.Js+" from "+e),r=c.params.Js):r=e,o=Date.now(),c.Pr(t,r)}).next(function(r){return n=r,s=Date.now(),c.Xi(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.gr(t,n)}).next(function(t){return u=Date.now(),nd()<=Ku.a.DEBUG&&rd("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Hy.resolve({Ks:!0,Ws:r,js:i,Gs:t})})},t}(),dm=function(){function t(t,e){this.db=t,this.lr=function(t,e){return new fm(t,e)}(this,e)}return t.prototype.Rr=function(t){var e=this.vr(t);return this.db.Sr().Zi(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.vr=function(t){var e=0;return this.yr(t,function(t){e++}).next(function(){return e})},t.prototype.In=function(t,e){return this.db.Sr().In(t,e)},t.prototype.yr=function(t,e){return this.Dr(t,function(t,n){return e(n)})},t.prototype.nr=function(t,e,n){return pm(t,n)},t.prototype.ir=function(t,e,n){return pm(t,n)},t.prototype.Xi=function(t,e,n){return this.db.Sr().Xi(t,e,n)},t.prototype.Ni=function(t,e){return pm(t,e)},t.prototype.Cr=function(t,e){return function(t,e){var n=!1;return rm(t).ls(function(r){return tm(t,r,e).next(function(t){return t&&(n=!0),Hy.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.gr=function(t,e){var n=this,r=this.db.$r().Nr(),i=[],o=0;return this.Dr(t,function(s,a){if(a<=e){var u=n.Cr(t,s).next(function(e){if(!e)return o++,r._i(t,s).next(function(){return r.li(s),um(t).delete([0,rg(s.path)])})});i.push(u)}}).next(function(){return Hy.Mn(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.kt(t.bs);return this.db.Sr().Hi(t,n)},t.prototype.Fr=function(t,e){return pm(t,e)},t.prototype.Dr=function(t,e){var n,r=um(t),i=Od.q;return r.hs({index:gg.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Od.q&&e(new Pd(sg(n)),i),i=s,n=o):i=Od.q}).next(function(){i!==Od.q&&e(new Pd(sg(n)),i)})},t.prototype.pr=function(t){return this.db.$r().Or(t)},t}();function pm(t,e){return um(t).put(function(t,e){return new gg(0,rg(t.path),e)}(e,t.bs))}var vm=function(){function t(t,e){this.Qt=t,this.Ei=e}return t.prototype.ai=function(t,e,n){return mm(t).put(_m(e),n)},t.prototype.li=function(t,e){var n=mm(t),r=_m(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.kr(t,r)})},t.prototype._i=function(t,e){var n=this;return mm(t).get(_m(e)).next(function(t){return n.Mr(t)})},t.prototype.Lr=function(t,e){var n=this;return mm(t).get(_m(e)).next(function(t){var e=n.Mr(t);return e?{hi:e,size:Jg(t)}:null})},t.prototype.getEntries=function(t,e){var n=this,r=Bv();return this.Br(t,e,function(t,e){var i=n.Mr(e);r=r.zt(t,i)}).next(function(){return r})},t.prototype.qr=function(t,e){var n=this,r=Bv(),i=new Dv(Pd.H);return this.Br(t,e,function(t,e){var o=n.Mr(e);o?(r=r.zt(t,o),i=i.zt(t,Jg(e))):(r=r.zt(t,null),i=i.zt(t,0))}).next(function(){return{Ur:r,Qr:i}})},t.prototype.Br=function(t,e,n){if(e.et())return Hy.resolve();var r=IDBKeyRange.bound(e.first().path.it(),e.last().path.it()),i=e.te(),o=i.oe();return mm(t).hs({range:r},function(t,e,r){for(var s=Pd.Et(t);o&&Pd.H(o,s)<0;)n(o,null),o=i.oe();o&&o.isEqual(s)&&(n(o,e),o=i.ce()?i.oe():null),o?r.ss(o.path.it()):r.done()}).next(function(){for(;o;)n(o,null),o=i.ce()?i.oe():null})},t.prototype.Kr=function(t,e,n){var r=this,i=zv(),o=e.path.length+1,s={};if(n.isEqual(Td.min())){var a=e.path.it();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.it(),c=jg(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=pg.collectionReadTimeIndex}return mm(t).hs(s,function(t,n,s){if(t.length===o){var a=xg(r.Qt,n);e.path.nt(a.key.path)?a instanceof lp&&Gp(e,a)&&(i=i.zt(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.Nr=function(t){return new ym(this,!!t&&t.Wr)},t.prototype.Or=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return gm(t).get(vg.key).next(function(t){return ud(!!t),t})},t.prototype.kr=function(t,e){return gm(t).put(vg.key,e)},t.prototype.Mr=function(t){if(t){var e=xg(this.Qt,t);return e instanceof hp&&e.version.isEqual(Td.min())?null:e}return null},t}(),ym=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jr=e,r.Wr=n,r.Gr=new Yg(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(Jf.c)(e,t),e.prototype.wi=function(t){var e=this,n=[],r=0,i=new Fv(function(t,e){return fd(t.rt(),e.rt())});return this.ri.forEach(function(o,s){var a=e.Gr.get(o);if(s.hi){var u=Ag(e.jr.Qt,s.hi,e.ci(o));i=i.add(o.path.X());var c=Jg(u);r+=c-a,n.push(e.jr.ai(t,o,u))}else if(r-=a,e.Wr){var l=Ag(e.jr.Qt,new hp(o,Td.min()),e.ci(o));n.push(e.jr.ai(t,o,l))}else n.push(e.jr.li(t,o))}),i.forEach(function(r){n.push(e.jr.Ei.qs(t,r))}),n.push(this.jr.updateMetadata(t,r)),Hy.Mn(n)},e.prototype.fi=function(t,e){var n=this;return this.jr.Lr(t,e).next(function(t){return null===t?(n.Gr.set(e,0),null):(n.Gr.set(e,t.size),t.hi)})},e.prototype.di=function(t,e){var n=this;return this.jr.qr(t,e).next(function(t){var e=t.Ur;return t.Qr.forEach(function(t,e){n.Gr.set(t,e)}),e})},e}(Xg);function gm(t){return Og(t,vg.store)}function mm(t){return Og(t,pg.store)}function _m(t){return t.path.it()}var bm=function(){function t(t){this.Qt=t}return t.prototype.Jn=function(t,e,n,r){var i=this;ud(n<r&&n>=0&&r<=11);var o=new zy("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(ug.store)}(t),function(t){t.createObjectStore(cg.store,{keyPath:cg.keyPath}),t.createObjectStore(lg.store,{keyPath:lg.keyPath,autoIncrement:!0}).createIndex(lg.userMutationsIndex,lg.userMutationsKeyPath,{unique:!0}),t.createObjectStore(hg.store)}(t),wm(t),function(t){t.createObjectStore(pg.store)}(t));var s=Hy.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(gg.store),t.deleteObjectStore(yg.store),t.deleteObjectStore(mg.store)}(t),wm(t)),s=s.next(function(){return function(t){var e=t.store(mg.store),n=new mg(0,0,Td.min().j(),0);return e.put(mg.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(lg.store).rs().next(function(n){t.deleteObjectStore(lg.store),t.createObjectStore(lg.store,{keyPath:lg.keyPath,autoIncrement:!0}).createIndex(lg.userMutationsIndex,lg.userMutationsKeyPath,{unique:!0});var r=e.store(lg.store),i=n.map(function(t){return r.put(t)});return Hy.Mn(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(bg.store,{keyPath:bg.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.zr(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(vg.store)}(t),i.Hr(o)})),n<7&&r>=7&&(s=s.next(function(){return i.Jr(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Yr(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(pg.store);e.createIndex(pg.readTimeIndex,pg.readTimeIndexPath,{unique:!1}),e.createIndex(pg.collectionReadTimeIndex,pg.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Xr(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(wg.store,{keyPath:wg.keyPath})}(t),function(t){t.createObjectStore(kg.store,{keyPath:kg.keyPath})}(t)})),s},t.prototype.Hr=function(t){var e=0;return t.store(pg.store).hs(function(t,n){e+=Jg(n)}).next(function(){var n=new vg(e);return t.store(vg.store).put(vg.key,n)})},t.prototype.zr=function(t){var e=this,n=t.store(cg.store),r=t.store(lg.store);return n.rs().next(function(n){return Hy.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.rs(lg.userMutationsIndex,i).next(function(r){return Hy.forEach(r,function(r){ud(r.userId===n.userId);var i=Dg(e.Qt,r);return Zg(t,n.userId,i).next(function(){})})})})})},t.prototype.Jr=function(t){var e=t.store(gg.store),n=t.store(pg.store);return t.store(mg.store).get(mg.key).next(function(t){var r=[];return n.hs(function(n,i){var o=new xd(n),s=function(t){return[0,rg(t)]}(o);r.push(e.get(s).next(function(n){return n?Hy.resolve():function(n){return e.put(new gg(0,rg(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return Hy.Mn(r)})})},t.prototype.Yr=function(t,e){t.createObjectStore(_g.store,{keyPath:_g.keyPath});var n=e.store(_g.store),r=new Hg,i=function(t){if(r.add(t)){var e=t.tt(),i=t.X();return n.put({collectionId:e,parent:rg(i)})}};return e.store(pg.store).hs({us:!0},function(t,e){var n=new xd(t);return i(n.X())}).next(function(){return e.store(hg.store).hs({us:!0},function(t,e){var n=sg(t[1]);return i(n.X())})})},t.prototype.Xr=function(t){var e=this,n=t.store(yg.store);return n.hs(function(t,r){var i=Mg(r),o=Lg(e.Qt,i);return n.put(o)})},t}();function wm(t){t.createObjectStore(gg.store,{keyPath:gg.keyPath}).createIndex(gg.documentTargetsIndex,gg.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(yg.store,{keyPath:yg.keyPath}).createIndex(yg.queryTargetsIndexName,yg.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(mg.store)}var km="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Em=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Zr=o,this.window=s,this.document=a,this.eo=c,this.no=l,this.so=null,this.io=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ro=null,this.inForeground=!1,this.oo=null,this.co=null,this.ao=Number.NEGATIVE_INFINITY,this.uo=function(t){return Promise.resolve()},!t.Kn())throw new gd(yd.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Ti=new dm(this,i),this.ho=n+"main",this.Qt=new Ig(u),this.lo=new Wy(this.ho,11,new bm(this.Qt)),this._o=new om(this.Ti,this.Qt),this.Ei=new zg,this.fo=function(t,e){return new vm(t,e)}(this.Qt,this.Ei),this.wo=new Vg,this.window&&this.window.localStorage?this.Eo=this.window.localStorage:(this.Eo=null,!1===l&&id("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.To().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new gd(yd.FAILED_PRECONDITION,km);return t.Io(),t.mo(),t.Ao(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t._o.Ki(e)})}).then(function(e){t.so=new Od(e,t.eo)}).then(function(){t.io=!0}).catch(function(e){return t.lo&&t.lo.close(),Promise.reject(e)})},t.prototype.Ro=function(t){var e=this;return this.uo=function(n){return Object(Jf.b)(e,void 0,void 0,function(){return Object(Jf.d)(this,function(e){return this.Er?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.Po=function(t){var e=this;this.lo.Xn(function(n){return Object(Jf.b)(e,void 0,void 0,function(){return Object(Jf.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.yo=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Zr.Ps(function(){return Object(Jf.b)(e,void 0,void 0,function(){return Object(Jf.d)(this,function(t){switch(t.label){case 0:return this.Er?[4,this.To()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.To=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return Om(e).put(new bg(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Vo(e).next(function(e){e||(t.isPrimary=!1,t.Zr.po(function(){return t.uo(!1)}))})}).next(function(){return t.bo(e)}).next(function(n){return t.isPrimary&&!n?t.vo(e).next(function(){return!1}):!!n&&t.So(e).next(function(){return!0})})}).catch(function(e){if(Ky(e))return rd("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return rd("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Zr.po(function(){return t.uo(e)}),t.isPrimary=e})},t.prototype.Vo=function(t){var e=this;return Cm(t).get(ug.key).next(function(t){return Hy.resolve(e.Do(t))})},t.prototype.Co=function(t){return Om(t).delete(this.clientId)},t.prototype.xo=function(){return Object(Jf.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(Jf.d)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.No(this.ao,18e5)?[3,2]:(this.ao=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=Og(t,bg.store);return e.rs().next(function(t){var n=r.$o(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return Hy.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Eo)for(e=0,n=t;e<n.length;e++)this.Eo.removeItem(this.Fo(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.Ao=function(){var t=this;this.co=this.Zr.Tr("client_metadata_refresh",4e3,function(){return t.To().then(function(){return t.xo()}).then(function(){return t.Ao()})})},t.prototype.Do=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.bo=function(t){var e=this;return this.no?Hy.resolve(!0):Cm(t).get(ug.key).next(function(n){if(null!==n&&e.No(n.leaseTimestampMs,5e3)&&!e.Oo(n.ownerId)){if(e.Do(n)&&e.networkEnabled)return!0;if(!e.Do(n)){if(!n.allowTabSynchronization)throw new gd(yd.FAILED_PRECONDITION,km);return!1}}return!(!e.networkEnabled||!e.inForeground)||Om(t).rs().next(function(t){return void 0===e.$o(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&rd("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.ko=function(){return Object(Jf.b)(this,void 0,void 0,function(){var t=this;return Object(Jf.d)(this,function(e){switch(e.label){case 0:return this.io=!1,this.Mo(),this.co&&(this.co.cancel(),this.co=null),this.Lo(),this.Bo(),[4,this.lo.runTransaction("shutdown","readwrite",[ug.store,bg.store],function(e){var n=new Cg(e,Od.q);return t.vo(n).next(function(){return t.Co(n)})})];case 1:return e.sent(),this.lo.close(),this.qo(),[2]}})})},t.prototype.$o=function(t,e){var n=this;return t.filter(function(t){return n.No(t.updateTimeMs,e)&&!n.Oo(t.clientId)})},t.prototype.Uo=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return Om(e).rs().next(function(e){return t.$o(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),t.prototype.Qo=function(t){return $g.mi(t,this.Qt,this.Ei,this.Ti)},t.prototype.Sr=function(){return this._o},t.prototype.$r=function(){return this.fo},t.prototype.Ko=function(){return this.Ei},t.prototype.Wo=function(){return this.wo},t.prototype.runTransaction=function(t,e,n){var r,i=this;return rd("IndexedDbPersistence","Starting transaction:",t),this.lo.runTransaction(t,"readonly"===e?"readonly":"readwrite",Eg,function(o){return r=new Cg(o,i.so?i.so.next():Od.q),"readwrite-primary"===e?i.Vo(r).next(function(t){return!!t||i.bo(r)}).next(function(e){if(!e)throw id("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Zr.po(function(){return i.uo(!1)}),new gd(yd.FAILED_PRECONDITION,eg);return n(r)}).next(function(t){return i.So(r).next(function(){return t})}):i.jo(r).next(function(){return n(r)})}).then(function(t){return r.Vs(),t})},t.prototype.jo=function(t){var e=this;return Cm(t).get(ug.key).next(function(t){if(null!==t&&e.No(t.leaseTimestampMs,5e3)&&!e.Oo(t.ownerId)&&!e.Do(t)&&!(e.no||e.allowTabSynchronization&&t.allowTabSynchronization))throw new gd(yd.FAILED_PRECONDITION,km)})},t.prototype.So=function(t){var e=new ug(this.clientId,this.allowTabSynchronization,Date.now());return Cm(t).put(ug.key,e)},t.Kn=function(){return Wy.Kn()},t.prototype.vo=function(t){var e=this,n=Cm(t);return n.get(ug.key).next(function(t){return e.Do(t)?(rd("IndexedDbPersistence","Releasing primary lease."),n.delete(ug.key)):Hy.resolve()})},t.prototype.No=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(id("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Io=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.oo=function(){t.Zr.Ps(function(){return t.inForeground="visible"===t.document.visibilityState,t.To()})},this.document.addEventListener("visibilitychange",this.oo),this.inForeground="visible"===this.document.visibilityState)},t.prototype.Lo=function(){this.oo&&(this.document.removeEventListener("visibilitychange",this.oo),this.oo=null)},t.prototype.mo=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ro=function(){e.Mo(),e.Zr.Ps(function(){return e.ko()})},this.window.addEventListener("unload",this.ro))},t.prototype.Bo=function(){this.ro&&(this.window.removeEventListener("unload",this.ro),this.ro=null)},t.prototype.Oo=function(t){var e;try{var n=null!==(null===(e=this.Eo)||void 0===e?void 0:e.getItem(this.Fo(t)));return rd("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return id("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.Mo=function(){if(this.Eo)try{this.Eo.setItem(this.Fo(this.clientId),String(Date.now()))}catch(t){id("Failed to set zombie client id.",t)}},t.prototype.qo=function(){if(this.Eo)try{this.Eo.removeItem(this.Fo(this.clientId))}catch(t){}},t.prototype.Fo=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Cm(t){return Og(t,ug.store)}function Om(t){return Og(t,bg.store)}function Sm(t,e){var n=t.projectId;return t.o||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Tm=function(t,e){this.progress=t,this.Go=e},Im=function(){function t(t,e,n){this.fo=t,this.zo=e,this.Ei=n}return t.prototype.Ho=function(t,e){var n=this;return this.zo.bi(t,e).next(function(r){return n.Jo(t,e,r)})},t.prototype.Jo=function(t,e,n){return this.fo._i(t,e).next(function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].Cs(e,t);return t})},t.prototype.Yo=function(t,e,n){var r=Bv();return e.forEach(function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].Cs(t,e);r=r.zt(t,e)}),r},t.prototype.Xo=function(t,e){var n=this;return this.fo.getEntries(t,e).next(function(e){return n.Zo(t,e)})},t.prototype.Zo=function(t,e){var n=this;return this.zo.vi(t,e).next(function(r){var i=n.Yo(t,e,r),o=qv();return i.forEach(function(t,e){e||(e=new hp(t,Td.min())),o=o.zt(t,e)}),o})},t.prototype.Kr=function(t,e,n){return function(t){return Pd.wt(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.tc(t,e.path):Up(e)?this.ec(t,e,n):this.nc(t,e,n)},t.prototype.tc=function(t,e){return this.Ho(t,new Pd(e)).next(function(t){var e=zv();return t instanceof lp&&(e=e.zt(t.key,t)),e})},t.prototype.ec=function(t,e,n){var r=this,i=e.collectionGroup,o=zv();return this.Ei.Us(t,i).next(function(s){return Hy.forEach(s,function(s){var a=function(t,e){return new Np(e,null,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.nc(t,a,n).next(function(t){t.forEach(function(t,e){o=o.zt(t,e)})})}).next(function(){return o})})},t.prototype.nc=function(t,e,n){var r,i,o=this;return this.fo.Kr(t,e,n).next(function(n){return r=n,o.zo.Di(t,e)}).next(function(e){return o.sc(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=mv(u,r.get(c),o.vs);r=l instanceof lp?r.zt(c,l):r.remove(c)}})}).next(function(){return r.forEach(function(t,n){Gp(e,n)||(r=r.remove(t))}),r})},t.prototype.sc=function(t,e,n){for(var r=Kv(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Ev&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.fo.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof lp&&(c=c.zt(t,e))}),c})},t}(),xm=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.ic=n,this.rc=r}return t.oc=function(e,n){for(var r=Kv(),i=Kv(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Am=function(){function t(){}return t.prototype.cc=function(t){this.ac=t},t.prototype.Kr=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.xt.length||1===t.xt.length&&t.xt[0].field.ut())}(e)||n.isEqual(Td.min())?this.uc(t,e):this.ac.Xo(t,r).next(function(o){var s=i.hc(e,o);return(Mp(e)||Lp(e))&&i.lc(e.limitType,s,r,n)?i.uc(t,e):(nd()<=Ku.a.DEBUG&&rd("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Qp(e)),i.ac.Kr(t,e,n).next(function(t){return s.forEach(function(e){t=t.zt(e.key,e)}),t}))})},t.prototype.hc=function(t,e){var n=new Fv(Kp(t));return e.forEach(function(e,r){r instanceof lp&&Gp(t,r)&&(n=n.add(r))}),n},t.prototype.lc=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version._(r)>0)},t.prototype.uc=function(t,e){return nd()<=Ku.a.DEBUG&&rd("QueryEngine","Using full collection scan to execute query:",Qp(e)),this.ac.Kr(t,e,Td.min())},t}(),jm=function(){function t(t,e,n,r){this.persistence=t,this._c=e,this.Qt=r,this.fc=new Dv(fd),this.dc=new Yg(function(t){return vp(t)},yp),this.wc=Td.min(),this.zo=t.Qo(n),this.Ec=t.$r(),this._o=t.Sr(),this.Tc=new Im(this.Ec,this.zo,this.persistence.Ko()),this.wo=t.Wo(),this._c.cc(this.Tc)}return t.prototype.Ir=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.Vr(n,e.fc)})},t}();function Pm(t,e,n,r){return new jm(t,e,n,r)}function Nm(t,e){return Object(Jf.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Jf.d)(this,function(s){switch(s.label){case 0:return n=cd(t),r=n.zo,i=n.Tc,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n.zo.pi(t).next(function(s){return o=s,r=n.persistence.Qo(e),i=new Im(n.Ec,r,n.persistence.Ko()),r.pi(t)}).next(function(e){for(var n=[],r=[],s=Kv(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var v=0,y=p.mutations;v<y.length;v++)s=s.add(y[v].key)}return i.Xo(t,s).next(function(t){return{Ic:t,mc:n,Ac:r}})})})];case 1:return o=s.sent(),[2,(n.zo=r,n.Tc=i,n._c.cc(n.Tc),o)]}})})}function Rm(t,e){var n=cd(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.Ec.Nr({Wr:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Hy.resolve();return o.forEach(function(t){s=s.next(function(){return r._i(e,t)}).next(function(e){var o=e,s=n.$s.get(t);ud(null!==s),(!o||o.version._(s)<0)&&(o=i.Ss(t,o,n))&&r.ai(o,n.Ns)})}),s.next(function(){return t.zo.Ci(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n.zo.$i(t)}).next(function(){return n.Tc.Xo(t,r)})})}function Dm(t){var e=cd(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e._o.Qi(t)})}function Mm(t,e){var n=cd(t),r=e.Ot,i=n.fc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.Ec.Nr({Wr:!0});i=n.fc;var s=[];e.$e.forEach(function(e,o){var a=i.get(o);if(a){s.push(n._o.sr(t,e.Qe,o).next(function(){return n._o.er(t,e.qe,o)}));var u=e.resumeToken;if(u.l()>0){var c=a.Mt(u,r).kt(t.bs);i=i.zt(o,c),function(t,e,n){return ud(e.resumeToken.l()>0),0===t.resumeToken.l()||e.Ot.W()-t.Ot.W()>=3e8||n.qe.size+n.Ue.size+n.Qe.size>0}(a,c,e)&&s.push(n._o.Hi(t,c))}}});var a=qv();if(e.Oe.forEach(function(r,i){e.ke.has(r)&&s.push(n.persistence.Ti.Fr(t,r))}),s.push(Lm(t,o,e.Oe,r,void 0).next(function(t){a=t})),!r.isEqual(Td.min())){var u=n._o.Qi(t).next(function(e){return n._o.Wi(t,t.bs,r)});s.push(u)}return Hy.Mn(s).next(function(){return o.apply(t)}).next(function(){return n.Tc.Zo(t,a)})}).then(function(t){return n.fc=i,t})}function Lm(t,e,n,r,i){var o=Kv();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=qv();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s instanceof hp&&s.version.isEqual(Td.min())?(e.li(n,u),o=o.zt(n,s)):null==a||s.version._(a.version)>0||0===s.version._(a.version)&&a.hasPendingWrites?(e.ai(s,u),o=o.zt(n,s)):rd("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function Fm(t,e){var n=cd(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n.zo.gi(t,e)})}function Vm(t,e){var n=cd(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n._o.tr(t,e).next(function(i){return i?Hy.resolve(r=i):n._o.Bi(t).next(function(i){return r=new Xp(e,i,0,t.bs),n._o.ji(t,r).next(function(){return r})})})}).then(function(t){var r=n.fc.get(t.targetId);return(null===r||t.Ot._(r.Ot)>0)&&(n.fc=n.fc.zt(t.targetId,t),n.dc.set(e,t.targetId)),t})}function Um(t,e,n){return Object(Jf.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Jf.d)(this,function(a){switch(a.label){case 0:r=cd(t),i=r.fc.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.Ti.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Ky(s=a.sent()))throw s;return rd("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.fc=r.fc.remove(e),r.dc.delete(i.target),[2]}})})}function qm(t,e,n){var r=cd(t),i=Td.min(),o=Kv();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=cd(t),i=r.dc.get(n);return void 0!==i?Hy.resolve(r.fc.get(i)):r._o.tr(e,n)}(r,t,Bp(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r._o.rr(t,e.targetId).next(function(t){o=t})}).next(function(){return r._c.Kr(t,e,n?i:Td.min(),n?o:Kv())}).next(function(t){return{documents:t,Rc:o}})})}function Bm(t,e){var n=cd(t),r=cd(n._o),i=n.fc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.Sn(t,e).next(function(t){return t?t.target:null})})}function Hm(t){var e=cd(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=cd(t),i=qv(),o=jg(n),s=mm(e),a=IDBKeyRange.lowerBound(o,!0);return s.hs({index:pg.readTimeIndex,range:a},function(t,e){var n=xg(r.Qt,e);i=i.zt(n.key,n),o=e.readTime}).next(function(){return{Go:i,readTime:Pg(o)}})}(e.Ec,t,e.wc)}).then(function(t){var n=t.Go;return e.wc=t.readTime,n})}function zm(t){return Object(Jf.b)(this,void 0,void 0,function(){var e;return Object(Jf.d)(this,function(n){return[2,(e=cd(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=mm(t),n=Td.min();return e.hs({index:pg.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=Pg(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.wc=t})]})})}function Wm(t,e,n,r){return Object(Jf.b)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,f,d;return Object(Jf.d)(this,function(p){switch(p.label){case 0:for(i=cd(t),o=Kv(),s=qv(),a=Qv(),u=0,c=n;u<c.length;u++)h=e.Pc((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.zt(h,e.yc(l)),a=a.zt(h,e.gc(l.metadata.readTime));return f=i.Ec.Nr({Wr:!0}),[4,Vm(i,function(t){return Bp(Dp(xd.ot("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return Lm(t,f,s,Td.min(),a).next(function(e){return f.apply(t),e}).next(function(e){return i._o.Yi(t,d.targetId).next(function(){return i._o.er(t,o,d.targetId)}).next(function(){return i.Tc.Zo(t,e)})})})]}})})}function Qm(t,e,n){return void 0===n&&(n=Kv()),Object(Jf.b)(this,void 0,void 0,function(){var r,i;return Object(Jf.d)(this,function(o){switch(o.label){case 0:return[4,Vm(t,Bp(Fg(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=cd(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=vy(e.readTime);if(r.Ot._(o)>=0)return i.wo.Ls(t,e);var s=r.Mt(vd.T,o);return i.fc=i.fc.zt(s.targetId,s),i._o.Hi(t,s).next(function(){return i._o.Yi(t,r.targetId)}).next(function(){return i._o.er(t,n,r.targetId)}).next(function(){return i.wo.Ls(t,e)})})]}})})}var Gm=function(){function t(t){this.Qt=t,this.Vc=new Map,this.bc=new Map}return t.prototype.Os=function(t,e){return Hy.resolve(this.Vc.get(e))},t.prototype.ks=function(t,e){var n;return this.Vc.set(e.id,{id:(n=e).id,version:n.version,createTime:vy(n.createTime)}),Hy.resolve()},t.prototype.Ms=function(t,e){return Hy.resolve(this.bc.get(e))},t.prototype.Ls=function(t,e){return this.bc.set(e.name,function(t){return{name:t.name,query:Fg(t.bundledQuery),readTime:vy(t.readTime)}}(e)),Hy.resolve()},t}(),Km=function(){function t(){this.vc=new Fv(Ym.Sc),this.Dc=new Fv(Ym.Cc)}return t.prototype.et=function(){return this.vc.et()},t.prototype.nr=function(t,e){var n=new Ym(t,e);this.vc=this.vc.add(n),this.Dc=this.Dc.add(n)},t.prototype.xc=function(t,e){var n=this;t.forEach(function(t){return n.nr(t,e)})},t.prototype.ir=function(t,e){this.Nc(new Ym(t,e))},t.prototype.$c=function(t,e){var n=this;t.forEach(function(t){return n.ir(t,e)})},t.prototype.Fc=function(t){var e=this,n=new Pd(new xd([])),r=new Ym(n,t),i=new Ym(n,t+1),o=[];return this.Dc.me([r,i],function(t){e.Nc(t),o.push(t.key)}),o},t.prototype.Oc=function(){var t=this;this.vc.forEach(function(e){return t.Nc(e)})},t.prototype.Nc=function(t){this.vc=this.vc.delete(t),this.Dc=this.Dc.delete(t)},t.prototype.kc=function(t){var e=new Pd(new xd([])),n=new Ym(e,t),r=new Ym(e,t+1),i=Kv();return this.Dc.me([n,r],function(t){i=i.add(t.key)}),i},t.prototype.Fi=function(t){var e=new Ym(t,0),n=this.vc.Re(e);return null!==n&&t.isEqual(n.key)},t}(),Ym=function(){function t(t,e){this.key=t,this.Mc=e}return t.Sc=function(t,e){return Pd.H(t.key,e.key)||fd(t.Mc,e.Mc)},t.Cc=function(t,e){return fd(t.Mc,e.Mc)||Pd.H(t.key,e.key)},t}(),Xm=function(){function t(t,e){this.Ei=t,this.Ti=e,this.zo=[],this.Lc=1,this.Bc=new Fv(Ym.Sc)}return t.prototype.Ai=function(t){return Hy.resolve(0===this.zo.length)},t.prototype.Ri=function(t,e,n,r){var i=this.Lc;this.Lc++;var o=new Sg(i,e,n,r);this.zo.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.Bc=this.Bc.add(new Ym(u.key,i)),this.Ei.qs(t,u.key.path.X())}return Hy.resolve(o)},t.prototype.Pi=function(t,e){return Hy.resolve(this.qc(e))},t.prototype.gi=function(t,e){var n=this.Uc(e+1),r=n<0?0:n;return Hy.resolve(this.zo.length>r?this.zo[r]:null)},t.prototype.Vi=function(){return Hy.resolve(0===this.zo.length?-1:this.Lc-1)},t.prototype.pi=function(t){return Hy.resolve(this.zo.slice())},t.prototype.bi=function(t,e){var n=this,r=new Ym(e,0),i=new Ym(e,Number.POSITIVE_INFINITY),o=[];return this.Bc.me([r,i],function(t){var e=n.qc(t.Mc);o.push(e)}),Hy.resolve(o)},t.prototype.vi=function(t,e){var n=this,r=new Fv(fd);return e.forEach(function(t){var e=new Ym(t,0),i=new Ym(t,Number.POSITIVE_INFINITY);n.Bc.me([e,i],function(t){r=r.add(t.Mc)})}),Hy.resolve(this.Qc(r))},t.prototype.Di=function(t,e){var n=e.path,r=n.length+1,i=n;Pd.wt(i)||(i=i.child(""));var o=new Ym(new Pd(i),0),s=new Fv(fd);return this.Bc.Ae(function(t){var e=t.key.path;return!!n.nt(e)&&(e.length===r&&(s=s.add(t.Mc)),!0)},o),Hy.resolve(this.Qc(s))},t.prototype.Qc=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.qc(t);null!==r&&n.push(r)}),n},t.prototype.Ci=function(t,e){var n=this;ud(0===this.Kc(e.batchId,"removed")),this.zo.shift();var r=this.Bc;return Hy.forEach(e.mutations,function(i){var o=new Ym(i.key,e.batchId);return r=r.delete(o),n.Ti.Ni(t,i.key)}).next(function(){n.Bc=r})},t.prototype.xi=function(t){},t.prototype.Fi=function(t,e){var n=new Ym(e,0),r=this.Bc.Re(n);return Hy.resolve(e.isEqual(r&&r.key))},t.prototype.$i=function(t){return Hy.resolve()},t.prototype.Kc=function(t,e){return this.Uc(t)},t.prototype.Uc=function(t){return 0===this.zo.length?0:t-this.zo[0].batchId},t.prototype.qc=function(t){var e=this.Uc(t);return e<0||e>=this.zo.length?null:this.zo[e]},t}(),Zm=function(){function t(t,e){this.Ei=t,this.Wc=e,this.docs=new Dv(Pd.H),this.size=0}return t.prototype.ai=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.Wc(e);return this.docs=this.docs.zt(r,{hi:e,size:s,readTime:n}),this.size+=s-o,this.Ei.qs(t,r.path.X())},t.prototype.li=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype._i=function(t,e){var n=this.docs.get(e);return Hy.resolve(n?n.hi:null)},t.prototype.getEntries=function(t,e){var n=this,r=Bv();return e.forEach(function(t){var e=n.docs.get(t);r=r.zt(t,e?e.hi:null)}),Hy.resolve(r)},t.prototype.Kr=function(t,e,n){for(var r=zv(),i=new Pd(e.path.child("")),o=this.docs.ee(i);o.ce();){var s=o.oe(),a=s.value,u=a.hi,c=a.readTime;if(!e.path.nt(s.key.path))break;c._(n)<=0||u instanceof lp&&Gp(e,u)&&(r=r.zt(u.key,u))}return Hy.resolve(r)},t.prototype.jc=function(t,e){return Hy.forEach(this.docs,function(t){return e(t)})},t.prototype.Nr=function(t){return new Jm(this)},t.prototype.Or=function(t){return Hy.resolve(this.size)},t}(),Jm=function(t){function e(e){var n=this;return(n=t.call(this)||this).jr=e,n}return Object(Jf.c)(e,t),e.prototype.wi=function(t){var e=this,n=[];return this.ri.forEach(function(r,i){i&&i.hi?n.push(e.jr.ai(t,i.hi,e.ci(r))):e.jr.li(r)}),Hy.Mn(n)},e.prototype.fi=function(t,e){return this.jr._i(t,e)},e.prototype.di=function(t,e){return this.jr.getEntries(t,e)},e}(Xg),$m=function(){function t(t){this.persistence=t,this.Gc=new Yg(function(t){return vp(t)},yp),this.lastRemoteSnapshotVersion=Td.min(),this.highestTargetId=0,this.zc=0,this.Hc=new Km,this.targetCount=0,this.Jc=im.Mi()}return t.prototype.In=function(t,e){return this.Gc.forEach(function(t,n){return e(n)}),Hy.resolve()},t.prototype.Qi=function(t){return Hy.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Ki=function(t){return Hy.resolve(this.zc)},t.prototype.Bi=function(t){return this.highestTargetId=this.Jc.next(),Hy.resolve(this.highestTargetId)},t.prototype.Wi=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.zc&&(this.zc=e),Hy.resolve()},t.prototype.Gi=function(t){this.Gc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Jc=new im(e),this.highestTargetId=e),t.sequenceNumber>this.zc&&(this.zc=t.sequenceNumber)},t.prototype.ji=function(t,e){return this.Gi(e),this.targetCount+=1,Hy.resolve()},t.prototype.Hi=function(t,e){return this.Gi(e),Hy.resolve()},t.prototype.Ji=function(t,e){return this.Gc.delete(e.target),this.Hc.Fc(e.targetId),this.targetCount-=1,Hy.resolve()},t.prototype.Xi=function(t,e,n){var r=this,i=0,o=[];return this.Gc.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.Gc.delete(s),o.push(r.Yi(t,a.targetId)),i++)}),Hy.Mn(o).next(function(){return i})},t.prototype.Zi=function(t){return Hy.resolve(this.targetCount)},t.prototype.tr=function(t,e){var n=this.Gc.get(e)||null;return Hy.resolve(n)},t.prototype.er=function(t,e,n){return this.Hc.xc(e,n),Hy.resolve()},t.prototype.sr=function(t,e,n){this.Hc.$c(e,n);var r=this.persistence.Ti,i=[];return r&&e.forEach(function(e){i.push(r.Ni(t,e))}),Hy.Mn(i)},t.prototype.Yi=function(t,e){return this.Hc.Fc(e),Hy.resolve()},t.prototype.rr=function(t,e){var n=this.Hc.kc(e);return Hy.resolve(n)},t.prototype.Fi=function(t,e){return Hy.resolve(this.Hc.Fi(e))},t}(),t_=function(){function t(t,e){var n=this;this.Yc={},this.so=new Od(0),this.io=!1,this.io=!0,this.Ti=t(this),this._o=new $m(this),this.Ei=new Bg,this.fo=function(t,e){return new Zm(t,function(t){return n.Ti.Xc(t)})}(this.Ei),this.Qt=new Ig(e),this.wo=new Gm(this.Qt)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.ko=function(){return this.io=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),t.prototype.Po=function(){},t.prototype.yo=function(){},t.prototype.Ko=function(){return this.Ei},t.prototype.Qo=function(t){var e=this.Yc[t.A()];return e||(e=new Xm(this.Ei,this.Ti),this.Yc[t.A()]=e),e},t.prototype.Sr=function(){return this._o},t.prototype.$r=function(){return this.fo},t.prototype.Wo=function(){return this.wo},t.prototype.runTransaction=function(t,e,n){var r=this;rd("MemoryPersistence","Starting transaction:",t);var i=new e_(this.so.next());return this.Ti.Zc(),n(i).next(function(t){return r.Ti.ta(i).next(function(){return t})}).On().then(function(t){return i.Vs(),t})},t.prototype.ea=function(t,e){return Hy.Ln(Object.values(this.Yc).map(function(n){return function(){return n.Fi(t,e)}}))},t}(),e_=function(t){function e(e){var n=this;return(n=t.call(this)||this).bs=e,n}return Object(Jf.c)(e,t),e}(ng),n_=function(){function t(t){this.persistence=t,this.na=new Km,this.sa=null}return t.ia=function(e){return new t(e)},Object.defineProperty(t.prototype,"ra",{get:function(){if(this.sa)return this.sa;throw ad()},enumerable:!1,configurable:!0}),t.prototype.nr=function(t,e,n){return this.na.nr(n,e),this.ra.delete(n.toString()),Hy.resolve()},t.prototype.ir=function(t,e,n){return this.na.ir(n,e),this.ra.add(n.toString()),Hy.resolve()},t.prototype.Ni=function(t,e){return this.ra.add(e.toString()),Hy.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.na.Fc(e.targetId).forEach(function(t){return n.ra.add(t.toString())});var r=this.persistence.Sr();return r.rr(t,e.targetId).next(function(t){t.forEach(function(t){return n.ra.add(t.toString())})}).next(function(){return r.Ji(t,e)})},t.prototype.Zc=function(){this.sa=new Set},t.prototype.ta=function(t){var e=this,n=this.persistence.$r().Nr();return Hy.forEach(this.ra,function(r){var i=Pd._t(r);return e.oa(t,i).next(function(t){t||n.li(i)})}).next(function(){return e.sa=null,n.apply(t)})},t.prototype.Fr=function(t,e){var n=this;return this.oa(t,e).next(function(t){t?n.ra.delete(e.toString()):n.ra.add(e.toString())})},t.prototype.Xc=function(t){return 0},t.prototype.oa=function(t,e){var n=this;return Hy.Ln([function(){return Hy.resolve(n.na.Fi(e))},function(){return n.persistence.Sr().Fi(t,e)},function(){return n.persistence.ea(t,e)}])},t}();function r_(t,e){return"firestore_clients_"+t+"_"+e}function i_(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.m()&&(r+="_"+e.uid),r}function o_(t,e){return"firestore_targets_"+t+"_"+e}var s_=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.ca=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new gd(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(id("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),a_=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.ca=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new gd(i.error.code,i.error.message)),o?new t(e,i.state,r):(id("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),u_=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.ca=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Xv(),s=0;i&&s<r.activeTargetIds.length;++s)i=Qd(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(id("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),c_=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.ca=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(id("SharedClientState","Failed to parse online state: "+e),null)},t}(),l_=function(){function t(){this.activeTargetIds=Xv()}return t.prototype.ua=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.aa=function(){var t={activeTargetIds:this.activeTargetIds.it(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),h_=function(){function t(t,e,n,r,i){this.window=t,this.Zr=e,this.persistenceKey=n,this.la=r,this._a=null,this.fa=null,this.k=null,this.da=this.wa.bind(this),this.Ea=new Dv(fd),this.Er=!1,this.Ta=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ia=r_(this.persistenceKey,this.la),this.ma=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Ea=this.Ea.zt(this.la,new l_),this.Aa=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Ra=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Pa=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.ya=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.ga=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.da)}return t.Kn=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(Jf.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(Jf.d)(this,function(h){switch(h.label){case 0:return[4,this._a.Uo()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.la&&(i=this.getItem(r_(this.persistenceKey,r)))&&(o=u_.ca(r,i))&&(this.Ea=this.Ea.zt(o.clientId,o));for(this.Va(),(s=this.storage.getItem(this.ya))&&(a=this.pa(s))&&this.ba(a),u=0,c=this.Ta;u<c.length;u++)this.wa(c[u]);return this.Ta=[],this.window.addEventListener("unload",function(){return l.ko()}),this.Er=!0,[2]}})})},t.prototype.B=function(t){this.setItem(this.ma,JSON.stringify(t))},t.prototype.va=function(){return this.Sa(this.Ea)},t.prototype.Da=function(t){var e=!1;return this.Ea.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.Ca=function(t){this.xa(t,"pending")},t.prototype.Na=function(t,e,n){this.xa(t,e,n),this.$a(t)},t.prototype.Fa=function(t){var e="not-current";if(this.Da(t)){var n=this.storage.getItem(o_(this.persistenceKey,t));if(n){var r=a_.ca(t,n);r&&(e=r.state)}}return this.Oa.ua(t),this.Va(),e},t.prototype.ka=function(t){this.Oa.ha(t),this.Va()},t.prototype.Ma=function(t){return this.Oa.activeTargetIds.has(t)},t.prototype.La=function(t){this.removeItem(o_(this.persistenceKey,t))},t.prototype.Ba=function(t,e,n){this.qa(t,e,n)},t.prototype.Ua=function(t,e,n){var r=this;e.forEach(function(t){r.$a(t)}),this.currentUser=t,n.forEach(function(t){r.Ca(t)})},t.prototype.Qa=function(t){this.Ka(t)},t.prototype.Wa=function(){this.ja()},t.prototype.ko=function(){this.Er&&(this.window.removeEventListener("storage",this.da),this.removeItem(this.Ia),this.Er=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return rd("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){rd("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){rd("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.wa=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(rd("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ia)return void id("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Zr.po(function(){return Object(Jf.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(Jf.d)(this,function(a){if(this.Er){if(null!==n.key)if(this.Aa.test(n.key)){if(null==n.newValue)return t=this.Ga(n.key),[2,this.za(t,null)];if(e=this.Ha(n.key,n.newValue))return[2,this.za(e.clientId,e)]}else if(this.Ra.test(n.key)){if(null!==n.newValue&&(r=this.Ja(n.key,n.newValue)))return[2,this.Ya(r)]}else if(this.Pa.test(n.key)){if(null!==n.newValue&&(i=this.Xa(n.key,n.newValue)))return[2,this.Za(i)]}else if(n.key===this.ya){if(null!==n.newValue&&(o=this.pa(n.newValue)))return[2,this.ba(o)]}else if(n.key===this.ma)(s=function(t){var e=Od.q;if(null!=t)try{var n=JSON.parse(t);ud("number"==typeof n),e=n}catch(t){id("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Od.q&&this.k(s);else if(n.key===this.ga)return[2,this._a.tu()]}else this.Ta.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Oa",{get:function(){return this.Ea.get(this.la)},enumerable:!1,configurable:!0}),t.prototype.Va=function(){this.setItem(this.Ia,this.Oa.aa())},t.prototype.xa=function(t,e,n){var r=new s_(this.currentUser,t,e,n),i=i_(this.persistenceKey,this.currentUser,t);this.setItem(i,r.aa())},t.prototype.$a=function(t){var e=i_(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Ka=function(t){this.storage.setItem(this.ya,JSON.stringify({clientId:this.la,onlineState:t}))},t.prototype.qa=function(t,e,n){var r=o_(this.persistenceKey,t),i=new a_(t,e,n);this.setItem(r,i.aa())},t.prototype.ja=function(){this.setItem(this.ga,"value-not-used")},t.prototype.Ga=function(t){var e=this.Aa.exec(t);return e?e[1]:null},t.prototype.Ha=function(t,e){var n=this.Ga(t);return u_.ca(n,e)},t.prototype.Ja=function(t,e){var n=this.Ra.exec(t),r=Number(n[1]);return s_.ca(new _d(void 0!==n[2]?n[2]:null),r,e)},t.prototype.Xa=function(t,e){var n=this.Pa.exec(t),r=Number(n[1]);return a_.ca(r,e)},t.prototype.pa=function(t){return c_.ca(t)},t.prototype.Ya=function(t){return Object(Jf.b)(this,void 0,void 0,function(){return Object(Jf.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this._a.eu(t.batchId,t.state,t.error)]:(rd("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.Za=function(t){return this._a.nu(t.targetId,t.state,t.error)},t.prototype.za=function(t,e){var n=this,r=e?this.Ea.zt(t,e):this.Ea.remove(t),i=this.Sa(this.Ea),o=this.Sa(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this._a.su(s,a).then(function(){n.Ea=r})},t.prototype.ba=function(t){this.Ea.get(t.clientId)&&this.fa(t.onlineState)},t.prototype.Sa=function(t){var e=Xv();return t.forEach(function(t,n){e=e.Pe(n.activeTargetIds)}),e},t}(),f_=function(){function t(){this.iu=new l_,this.ru={},this.fa=null,this.k=null}return t.prototype.Ca=function(t){},t.prototype.Na=function(t,e,n){},t.prototype.Fa=function(t){return this.iu.ua(t),this.ru[t]||"not-current"},t.prototype.Ba=function(t,e,n){this.ru[t]=e},t.prototype.ka=function(t){this.iu.ha(t)},t.prototype.Ma=function(t){return this.iu.activeTargetIds.has(t)},t.prototype.La=function(t){delete this.ru[t]},t.prototype.va=function(){return this.iu.activeTargetIds},t.prototype.Da=function(t){return this.iu.activeTargetIds.has(t)},t.prototype.start=function(){return this.iu=new l_,Promise.resolve()},t.prototype.Ua=function(t,e,n){},t.prototype.Qa=function(t){},t.prototype.ko=function(){},t.prototype.B=function(t){},t.prototype.Wa=function(){},t}(),d_=function(){function t(){}return t.prototype.ou=function(t){},t.prototype.ko=function(){},t}(),p_=function(){function t(){var t=this;this.cu=function(){return t.au()},this.uu=function(){return t.hu()},this.lu=[],this._u()}return t.prototype.ou=function(t){this.lu.push(t)},t.prototype.ko=function(){window.removeEventListener("online",this.cu),window.removeEventListener("offline",this.uu)},t.prototype._u=function(){window.addEventListener("online",this.cu),window.addEventListener("offline",this.uu)},t.prototype.au=function(){rd("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(0)},t.prototype.hu=function(){rd("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(1)},t.Kn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),v_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},y_=function(){function t(t){this.fu=t.fu,this.du=t.du}return t.prototype.wu=function(t){this.Eu=t},t.prototype.Tu=function(t){this.Iu=t},t.prototype.onMessage=function(t){this.mu=t},t.prototype.close=function(){this.du()},t.prototype.send=function(t){this.fu(t)},t.prototype.Au=function(){this.Eu()},t.prototype.Ru=function(t){this.Iu(t)},t.prototype.Pu=function(t){this.mu(t)},t}(),g_=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.i=e.i,n}return Object(Jf.c)(e,t),e.prototype.Su=function(t,e,n,r){return new Promise(function(i,o){var s=new Zf;s.listenOnce(Kf.COMPLETE,function(){try{switch(s.getLastErrorCode()){case Gf.NO_ERROR:var e=s.getResponseJson();rd("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Gf.TIMEOUT:rd("Connection",'RPC "'+t+'" timed out'),o(new gd(yd.DEADLINE_EXCEEDED,"Request time out"));break;case Gf.HTTP_ERROR:var n=s.getStatus();if(rd("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(yd).indexOf(e)>=0?e:yd.UNKNOWN}(r.status);o(new gd(a,r.message))}else o(new gd(yd.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new gd(yd.UNAVAILABLE,"Connection failed."));break;default:ad()}}finally{rd("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.Cu=function(t,e){var n=[this.gu,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Bf,i=zl(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.vu(o.initMessageHeaders,e),Object(Yu.t)()||Object(Yu.w)()||Object(Yu.q)()||Object(Yu.s)()||Object(Yu.x)()||Object(Yu.p)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");rd("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new y_({fu:function(t){c?rd("Connection","Not sending because WebChannel is closed:",t):(u||(rd("Connection","Opening WebChannel transport."),a.open(),u=!0),rd("Connection","WebChannel sending:",t),a.send(t))},du:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Xf.EventType.OPEN,function(){c||rd("Connection","WebChannel transport opened.")}),h(a,Xf.EventType.CLOSE,function(){c||(c=!0,rd("Connection","WebChannel transport closed"),l.Ru())}),h(a,Xf.EventType.ERROR,function(t){c||(c=!0,od("Connection","WebChannel transport errored:",t),l.Ru(new gd(yd.UNAVAILABLE,"The operation could not be completed")))}),h(a,Xf.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];ud(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){rd("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=Iv[t];if(void 0!==e)return Rv(e)}(i),s=r.message;void 0===o&&(o=yd.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Ru(new gd(o,s)),a.close()}else rd("Connection","WebChannel received:",n),l.Pu(n)}}),h(i,Yf.STAT_EVENT,function(t){10===t.stat?rd("Connection","Detected buffering proxy"):11===t.stat&&rd("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Au()},0),l},e}(function(){function t(t){this.yu=t,this.t=t.t,this.gu=(t.ssl?"https":"http")+"://"+t.host,this.Vu="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}return t.prototype.pu=function(t,e,n,r){var i=this.bu(t,e);rd("RestConnection","Sending: ",i,n);var o={};return this.vu(o,r),this.Su(t,i,o,n).then(function(t){return rd("RestConnection","Received: ",t),t},function(e){throw od("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Du=function(t,e,n,r){return this.pu(t,e,n,r)},t.prototype.vu=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.9",t["Content-Type"]="text/plain",e)for(var n in e.g)e.g.hasOwnProperty(n)&&(t[n]=e.g[n])},t.prototype.bu=function(t,e){return this.gu+"/v1/"+e+":"+v_[t]},t}());function m_(){return"undefined"!=typeof window?window:null}function __(){return"undefined"!=typeof document?document:null}function b_(t){return new hy(t,!0)}var w_=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Zr=t,this.fs=e,this.xu=n,this.Nu=r,this.$u=i,this.Fu=0,this.Ou=null,this.ku=Date.now(),this.reset()}return t.prototype.reset=function(){this.Fu=0},t.prototype.Mu=function(){this.Fu=this.$u},t.prototype.Lu=function(t){var e=this;this.cancel();var n=Math.floor(this.Fu+this.Bu()),r=Math.max(0,Date.now()-this.ku),i=Math.max(0,n-r);i>0&&rd("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Fu+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ou=this.Zr.Tr(this.fs,i,function(){return e.ku=Date.now(),t()}),this.Fu*=this.Nu,this.Fu<this.xu&&(this.Fu=this.xu),this.Fu>this.$u&&(this.Fu=this.$u)},t.prototype.qu=function(){null!==this.Ou&&(this.Ou.Rs(),this.Ou=null)},t.prototype.cancel=function(){null!==this.Ou&&(this.Ou.cancel(),this.Ou=null)},t.prototype.Bu=function(){return(Math.random()-.5)*this.Fu},t}(),k_=function(){function t(t,e,n,r,i,o){this.Zr=t,this.Uu=n,this.Qu=r,this.Ku=i,this.listener=o,this.state=0,this.Wu=0,this.ju=null,this.stream=null,this.Gu=new w_(t,e)}return t.prototype.zu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Hu=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Ju()},t.prototype.stop=function(){return Object(Jf.b)(this,void 0,void 0,function(){return Object(Jf.d)(this,function(t){switch(t.label){case 0:return this.zu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.Yu=function(){this.state=0,this.Gu.reset()},t.prototype.Xu=function(){var t=this;this.Hu()&&null===this.ju&&(this.ju=this.Zr.Tr(this.Uu,6e4,function(){return t.Zu()}))},t.prototype.th=function(t){this.eh(),this.stream.send(t)},t.prototype.Zu=function(){return Object(Jf.b)(this,void 0,void 0,function(){return Object(Jf.d)(this,function(t){return this.Hu()?[2,this.close(0)]:[2]})})},t.prototype.eh=function(){this.ju&&(this.ju.cancel(),this.ju=null)},t.prototype.close=function(t,e){return Object(Jf.b)(this,void 0,void 0,function(){return Object(Jf.d)(this,function(n){switch(n.label){case 0:return this.eh(),this.Gu.cancel(),this.Wu++,3!==t?this.Gu.reset():e&&e.code===yd.RESOURCE_EXHAUSTED?(id(e.toString()),id("Using maximum backoff delay to prevent overloading the backend."),this.Gu.Mu()):e&&e.code===yd.UNAUTHENTICATED&&this.Ku.p(),null!==this.stream&&(this.nh(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Tu(e)];case 1:return n.sent(),[2]}})})},t.prototype.nh=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.sh(this.Wu),n=this.Wu;this.Ku.getToken().then(function(e){t.Wu===n&&t.ih(e)},function(n){e(function(){var e=new gd(yd.UNKNOWN,"Fetching auth token failed: "+n.message);return t.rh(e)})})},t.prototype.ih=function(t){var e=this,n=this.sh(this.Wu);this.stream=this.oh(t),this.stream.wu(function(){n(function(){return e.state=2,e.listener.wu()})}),this.stream.Tu(function(t){n(function(){return e.rh(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.Ju=function(){var t=this;this.state=4,this.Gu.Lu(function(){return Object(Jf.b)(t,void 0,void 0,function(){return Object(Jf.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.rh=function(t){return rd("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.sh=function(t){var e=this;return function(n){e.Zr.Ps(function(){return e.Wu===t?n():(rd("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),E_=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).Qt=i,s}return Object(Jf.c)(e,t),e.prototype.oh=function(t){return this.Qu.Cu("Listen",t)},e.prototype.onMessage=function(t){this.Gu.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:ad()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.Bt?(ud(void 0===e||"string"==typeof e),vd.fromBase64String(e||"")):(ud(void 0===e||e instanceof Uint8Array),vd.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?yd.UNKNOWN:Rv(t.code);return new gd(e,t.message||"")}(a);n=new iy(r,i,o,s||null)}else if("documentChange"in e){i=_y(t,(r=e.documentChange).document.name),o=vy(r.document.updateTime);var a=new sp({mapValue:{fields:r.document.fields}}),u=(s=new lp(i,o,a,{}),r.targetIds||[]);n=new ny(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=_y(t,(r=e.documentDelete).document),o=r.readTime?vy(r.readTime):Td.min(),a=new hp(i,o),n=new ny([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=_y(t,(r=e.documentRemove).document),n=new ny([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return ad();var c=e.filter;i=new Pv(r=c.count||0),n=new ry(o=c.targetId,i)}return n}(this.Qt,t),n=function(t){if(!("targetChange"in t))return Td.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Td.min():e.readTime?vy(e.readTime):Td.min()}(t);return this.listener.ah(e,n)},e.prototype.uh=function(t){var e={};e.database=ky(this.Qt),e.addTarget=function(t,e){var n,r=e.target;return(n=gp(r)?{documents:Iy(t,r)}:{query:xy(t,r)}).targetId=e.targetId,e.resumeToken.l()>0?n.resumeToken=dy(t,e.resumeToken):e.Ot._(Td.min())>0&&(n.readTime=fy(t,e.Ot.j())),n}(this.Qt,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ad()}}(0,e.Ft);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.th(e)},e.prototype.hh=function(t){var e={};e.database=ky(this.Qt),e.removeTarget=t,this.th(e)},e}(k_),C_=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).Qt=i,s.lh=!1,s}return Object(Jf.c)(e,t),Object.defineProperty(e.prototype,"_h",{get:function(){return this.lh},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.lh=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.nh=function(){this.lh&&this.fh([])},e.prototype.oh=function(t){return this.Qu.Cu("Write",t)},e.prototype.onMessage=function(t){if(ud(!!t.streamToken),this.lastStreamToken=t.streamToken,this.lh){this.Gu.reset();var e=function(t,e){return t&&t.length>0?(ud(void 0!==e),t.map(function(t){return function(t,e){var n=vy(t.updateTime?t.updateTime:e);n.isEqual(Td.min())&&(n=vy(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new dv(n,r)}(t,e)})):[]}(t.writeResults,t.commitTime),n=vy(t.commitTime);return this.listener.dh(n,e)}return ud(!t.writeResults||0===t.writeResults.length),this.lh=!0,this.listener.wh()},e.prototype.Eh=function(){var t={};t.database=ky(this.Qt),this.th(t)},e.prototype.fh=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return Sy(e.Qt,t)})};this.th(n)},e}(k_),O_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Qu=n,i.Qt=r,i.Th=!1,i}return Object(Jf.c)(e,t),e.prototype.Ih=function(){if(this.Th)throw new gd(yd.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.pu=function(t,e,n){var r=this;return this.Ih(),this.credentials.getToken().then(function(i){return r.Qu.pu(t,e,n,i)}).catch(function(t){throw t.code===yd.UNAUTHENTICATED&&r.credentials.p(),t})},e.prototype.Du=function(t,e,n){var r=this;return this.Ih(),this.credentials.getToken().then(function(i){return r.Qu.Du(t,e,n,i)}).catch(function(t){throw t.code===yd.UNAUTHENTICATED&&r.credentials.p(),t})},e.prototype.terminate=function(){this.Th=!1},e}(function(){}),S_=function(){function t(t,e){this._s=t,this.fa=e,this.state="Unknown",this.mh=0,this.Ah=null,this.Rh=!0}return t.prototype.Ph=function(){var t=this;0===this.mh&&(this.yh("Unknown"),this.Ah=this._s.Tr("online_state_timeout",1e4,function(){return t.Ah=null,t.gh("Backend didn't respond within 10 seconds."),t.yh("Offline"),Promise.resolve()}))},t.prototype.Vh=function(t){"Online"===this.state?this.yh("Unknown"):(this.mh++,this.mh>=1&&(this.ph(),this.gh("Connection failed 1 times. Most recent error: "+t.toString()),this.yh("Offline")))},t.prototype.set=function(t){this.ph(),this.mh=0,"Online"===t&&(this.Rh=!1),this.yh(t)},t.prototype.yh=function(t){t!==this.state&&(this.state=t,this.fa(t))},t.prototype.gh=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Rh?(id(e),this.Rh=!1):rd("OnlineStateTracker",e)},t.prototype.ph=function(){null!==this.Ah&&(this.Ah.cancel(),this.Ah=null)},t}(),T_=function(t,e,n,r,i){var o=this;this.bh=t,this.Sh=e,this._s=n,this.Dh={},this.Ch=[],this.xh=new Map,this.Nh=new Set,this.$h=[],this.Fh=i,this.Fh.ou(function(t){n.Ps(function(){return Object(Jf.b)(o,void 0,void 0,function(){return Object(Jf.d)(this,function(t){switch(t.label){case 0:return M_(this)?(rd("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(Jf.b)(this,void 0,void 0,function(){var e;return Object(Jf.d)(this,function(n){switch(n.label){case 0:return(e=cd(t)).Nh.add(4),[4,x_(e)];case 1:return n.sent(),e.Oh.set("Unknown"),e.Nh.delete(4),[4,I_(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Oh=new S_(n,r)};function I_(t){return Object(Jf.b)(this,void 0,void 0,function(){var e,n;return Object(Jf.d)(this,function(r){switch(r.label){case 0:if(!M_(t))return[3,4];e=0,n=t.$h,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function x_(t){return Object(Jf.b)(this,void 0,void 0,function(){var e,n;return Object(Jf.d)(this,function(r){switch(r.label){case 0:e=0,n=t.$h,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function A_(t,e){var n=cd(t);n.xh.has(e.targetId)||(n.xh.set(e.targetId,e),D_(n)?R_(n):Z_(n).Hu()&&P_(n,e))}function j_(t,e){var n=cd(t),r=Z_(n);n.xh.delete(e),r.Hu()&&N_(n,e),0===n.xh.size&&(r.Hu()?r.Xu():M_(n)&&n.Oh.set("Unknown"))}function P_(t,e){t.kh.on(e.targetId),Z_(t).uh(e)}function N_(t,e){t.kh.on(e),Z_(t).hh(e)}function R_(t){t.kh=new sy({vn:function(e){return t.Dh.vn(e)},Sn:function(e){return t.xh.get(e)||null}}),Z_(t).start(),t.Oh.Ph()}function D_(t){return M_(t)&&!Z_(t).zu()&&t.xh.size>0}function M_(t){return 0===cd(t).Nh.size}function L_(t){t.kh=void 0}function F_(t){return Object(Jf.b)(this,void 0,void 0,function(){return Object(Jf.d)(this,function(e){return t.xh.forEach(function(e,n){P_(t,e)}),[2]})})}function V_(t,e){return Object(Jf.b)(this,void 0,void 0,function(){return Object(Jf.d)(this,function(n){return L_(t),D_(t)?(t.Oh.Vh(e),R_(t)):t.Oh.set("Unknown"),[2]})})}function U_(t,e,n){return Object(Jf.b)(this,void 0,void 0,function(){var r,i,o;return Object(Jf.d)(this,function(s){switch(s.label){case 0:if(t.Oh.set("Online"),!(e instanceof iy&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(Jf.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Jf.d)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.xh.has(o=i[r])?[4,t.Dh.Mh(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.xh.delete(o),t.kh.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),rd("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,q_(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof ny?t.kh.dn(e):e instanceof ry?t.kh.Pn(e):t.kh.Tn(e),n.isEqual(Td.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Dm(t.bh)];case 8:return i=s.sent(),n._(i)>=0?[4,function(t,e){var n=t.kh.Vn(e);return n.$e.forEach(function(n,r){if(n.resumeToken.l()>0){var i=t.xh.get(r);i&&t.xh.set(r,i.Mt(n.resumeToken,e))}}),n.Fe.forEach(function(e){var n=t.xh.get(e);if(n){t.xh.set(e,n.Mt(vd.T,n.Ot)),N_(t,e);var r=new Xp(n.target,e,1,n.sequenceNumber);P_(t,r)}}),t.Dh.Lh(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return rd("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,q_(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function q_(t,e,n){return Object(Jf.b)(this,void 0,void 0,function(){var r=this;return Object(Jf.d)(this,function(i){switch(i.label){case 0:if(!Ky(e))throw e;return t.Nh.add(1),[4,x_(t)];case 1:return i.sent(),t.Oh.set("Offline"),n||(n=function(){return Dm(t.bh)}),t._s.po(function(){return Object(Jf.b)(r,void 0,void 0,function(){return Object(Jf.d)(this,function(e){switch(e.label){case 0:return rd("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Nh.delete(1),[4,I_(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function B_(t,e){return e().catch(function(n){return q_(t,n,e)})}function H_(t){return Object(Jf.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(Jf.d)(this,function(s){switch(s.label){case 0:e=cd(t),n=J_(e),r=e.Ch.length>0?e.Ch[e.Ch.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return M_(t)&&t.Ch.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Fm(e.bh,r)];case 3:return null===(i=s.sent())?(0===e.Ch.length&&n.Xu(),[3,7]):(r=i.batchId,function(t,e){t.Ch.push(e);var n=J_(t);n.Hu()&&n._h&&n.fh(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,q_(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return z_(e)&&W_(e),[2]}})})}function z_(t){return M_(t)&&!J_(t).zu()&&t.Ch.length>0}function W_(t){J_(t).start()}function Q_(t){return Object(Jf.b)(this,void 0,void 0,function(){return Object(Jf.d)(this,function(e){return J_(t).Eh(),[2]})})}function G_(t){return Object(Jf.b)(this,void 0,void 0,function(){var e,n,r;return Object(Jf.d)(this,function(i){for(e=J_(t),n=0,r=t.Ch;n<r.length;n++)e.fh(r[n].mutations);return[2]})})}function K_(t,e,n){return Object(Jf.b)(this,void 0,void 0,function(){var r,i;return Object(Jf.d)(this,function(o){switch(o.label){case 0:return r=t.Ch.shift(),i=Tg.from(r,e,n),[4,B_(t,function(){return t.Dh.Bh(i)})];case 1:return o.sent(),[4,H_(t)];case 2:return o.sent(),[2]}})})}function Y_(t,e){return Object(Jf.b)(this,void 0,void 0,function(){return Object(Jf.d)(this,function(n){switch(n.label){case 0:return e&&J_(t)._h?[4,function(t,e){return Object(Jf.b)(this,void 0,void 0,function(){var n,r;return Object(Jf.d)(this,function(i){switch(i.label){case 0:return Nv(r=e.code)&&r!==yd.ABORTED?(n=t.Ch.shift(),J_(t).Yu(),[4,B_(t,function(){return t.Dh.qh(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,H_(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return z_(t)&&W_(t),[2]}})})}function X_(t,e){return Object(Jf.b)(this,void 0,void 0,function(){var n;return Object(Jf.d)(this,function(r){switch(r.label){case 0:return n=cd(t),e?(n.Nh.delete(2),[4,I_(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Nh.add(2),[4,x_(n)]);case 3:r.sent(),n.Oh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function Z_(t){var e=this;return t.Uh||(t.Uh=function(t,e,n){var r=cd(t);return r.Ih(),new E_(e,r.Qu,r.credentials,r.Qt,n)}(t.Sh,t._s,{wu:F_.bind(null,t),Tu:V_.bind(null,t),ah:U_.bind(null,t)}),t.$h.push(function(n){return Object(Jf.b)(e,void 0,void 0,function(){return Object(Jf.d)(this,function(e){switch(e.label){case 0:return n?(t.Uh.Yu(),D_(t)?R_(t):t.Oh.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Uh.stop()];case 2:e.sent(),L_(t),e.label=3;case 3:return[2]}})})})),t.Uh}function J_(t){var e=this;return t.Qh||(t.Qh=function(t,e,n){var r=cd(t);return r.Ih(),new C_(e,r.Qu,r.credentials,r.Qt,n)}(t.Sh,t._s,{wu:Q_.bind(null,t),Tu:Y_.bind(null,t),wh:G_.bind(null,t),dh:K_.bind(null,t)}),t.$h.push(function(n){return Object(Jf.b)(e,void 0,void 0,function(){return Object(Jf.d)(this,function(e){switch(e.label){case 0:return n?(t.Qh.Yu(),[4,H_(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qh.stop()];case 3:e.sent(),t.Ch.length>0&&(rd("RemoteStore","Stopping write stream with "+t.Ch.length+" pending writes"),t.Ch=[]),e.label=4;case 4:return[2]}})})})),t.Qh}var $_=function(){this.Kh=void 0,this.listeners=[]},tb=function(){this.queries=new Yg(function(t){return Wp(t)},zp),this.onlineState="Unknown",this.Wh=new Set};function eb(t,e){return Object(Jf.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Jf.d)(this,function(c){switch(c.label){case 0:if(n=cd(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new $_),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.jh(r)];case 2:return s.Kh=c.sent(),[3,4];case 3:return a=c.sent(),u=tg(a,"Initialization of query '"+Qp(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.Gh(n.onlineState),o.Kh&&e.zh(o.Kh)&&ob(n),[2]}})})}function nb(t,e){return Object(Jf.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Jf.d)(this,function(a){return n=cd(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.Hh(r))]:[2]})})}function rb(t,e){for(var n=cd(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].zh(s)&&(r=!0);a.Kh=s}}r&&ob(n)}function ib(t,e,n){var r=cd(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function ob(t){t.Wh.forEach(function(t){t.next()})}var sb=function(){function t(t,e,n){this.query=t,this.Jh=e,this.Yh=!1,this.Xh=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.zh=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new $v(t.query,t.docs,t.Se,e,t.De,t.fromCache,t.Ce,!0)}var o=!1;return this.Yh?this.Zh(t)&&(this.Jh.next(t),o=!0):this.tl(t,this.onlineState)&&(this.el(t),o=!0),this.Xh=t,o},t.prototype.onError=function(t){this.Jh.error(t)},t.prototype.Gh=function(t){this.onlineState=t;var e=!1;return this.Xh&&!this.Yh&&this.tl(this.Xh,t)&&(this.el(this.Xh),e=!0),e},t.prototype.tl=function(t,e){return!t.fromCache||!(this.options.nl&&"Offline"!==e||t.docs.et()&&"Offline"!==e)},t.prototype.Zh=function(t){return t.docChanges.length>0||!!(t.Ce||this.Xh&&this.Xh.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.el=function(t){t=$v.Ne(t.query,t.docs,t.De,t.fromCache),this.Yh=!0,this.Jh.next(t)},t}(),ab=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.sl=function(){return"metadata"in this.payload},t}(),ub=function(){function t(t){this.Qt=t}return t.prototype.Pc=function(t){return _y(this.Qt,t)},t.prototype.yc=function(t){return t.metadata.exists?Oy(this.Qt,t.document,!1):new hp(this.Pc(t.metadata.name),this.gc(t.metadata.readTime))},t.prototype.gc=function(t){return vy(t)},t}();!function(){function t(t,e,n){this.il=t,this.bh=e,this.Qt=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.rl=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.ol=function(t){for(var e=new Map,n=new ub(this.Qt),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.Pc(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||Kv()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(Jf.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(Jf.d)(this,function(o){switch(o.label){case 0:return[4,Wm(this.bh,new ub(this.Qt),this.documents,this.il.id)];case 1:t=o.sent(),e=this.ol(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,Qm(this.bh,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Tm(Object.assign({},this.progress),t))]}})})}}();var cb=function(t){this.key=t},lb=function(t){this.key=t},hb=function(){function t(t,e){this.query=t,this.cl=e,this.al=null,this.Be=!1,this.ul=Kv(),this.De=Kv(),this.hl=Kp(t),this.ll=new Zv(this.hl)}return Object.defineProperty(t.prototype,"_l",{get:function(){return this.cl},enumerable:!1,configurable:!0}),t.prototype.fl=function(t,e){var n=this,r=e?e.dl:new Jv,i=e?e.ll:this.ll,o=e?e.De:this.De,s=i,a=!1,u=Mp(this.query)&&i.size===this.query.limit?i.last():null,c=Lp(this.query)&&i.size===this.query.limit?i.first():null;if(t.Xt(function(t,e){var l=i.get(t),h=e instanceof lp?e:null;h&&(h=Gp(n.query,h)?h:null);var f=!!l&&n.De.has(l.key),d=!!h&&(h.Vt||n.De.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?f!==d&&(r.track({type:3,doc:h}),p=!0):n.wl(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.hl(h,u)>0||c&&n.hl(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),Mp(this.query)||Lp(this.query))for(;s.size>this.query.limit;){var l=Mp(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{ll:s,dl:r,lc:a,De:o}},t.prototype.wl=function(t,e){return t.Vt&&e.hasCommittedMutations&&!e.Vt},t.prototype.wi=function(t,e,n){var r=this,i=this.ll;this.ll=t.ll,this.De=t.De;var o=t.dl.ve();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ad()}};return n(t)-n(e)}(t.type,e.type)||r.hl(t.doc,e.doc)}),this.El(n);var s=e?this.Tl():[],a=0===this.ul.size&&this.Be?1:0,u=a!==this.al;return this.al=a,0!==o.length||u?{snapshot:new $v(this.query,t.ll,i,o,t.De,0===a,u,!1),Il:s}:{Il:s}},t.prototype.Gh=function(t){return this.Be&&"Offline"===t?(this.Be=!1,this.wi({ll:this.ll,dl:new Jv,De:this.De,lc:!1},!1)):{Il:[]}},t.prototype.ml=function(t){return!this.cl.has(t)&&!!this.ll.has(t)&&!this.ll.get(t).Vt},t.prototype.El=function(t){var e=this;t&&(t.qe.forEach(function(t){return e.cl=e.cl.add(t)}),t.Ue.forEach(function(t){}),t.Qe.forEach(function(t){return e.cl=e.cl.delete(t)}),this.Be=t.Be)},t.prototype.Tl=function(){var t=this;if(!this.Be)return[];var e=this.ul;this.ul=Kv(),this.ll.forEach(function(e){t.ml(e.key)&&(t.ul=t.ul.add(e.key))});var n=[];return e.forEach(function(e){t.ul.has(e)||n.push(new lb(e))}),this.ul.forEach(function(t){e.has(t)||n.push(new cb(t))}),n},t.prototype.Al=function(t){this.cl=t.Rc,this.ul=Kv();var e=this.fl(t.documents);return this.wi(e,!0)},t.prototype.Rl=function(){return $v.Ne(this.query,this.ll,this.De,0===this.al)},t}(),fb=function(t,e,n){this.query=t,this.targetId=e,this.view=n},db=function(t){this.key=t,this.Pl=!1},pb=function(){function t(t,e,n,r,i,o){this.bh=t,this.yl=e,this.gl=n,this.Vl=r,this.currentUser=i,this.pl=o,this.bl={},this.vl=new Yg(function(t){return Wp(t)},zp),this.Sl=new Map,this.Dl=new Set,this.Cl=new Dv(Pd.H),this.xl=new Map,this.Nl=new Km,this.$l={},this.Fl=new Map,this.Ol=im.Li(),this.onlineState="Unknown",this.kl=void 0}return Object.defineProperty(t.prototype,"Ml",{get:function(){return!0===this.kl},enumerable:!1,configurable:!0}),t}();function vb(t,e){return Object(Jf.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Jf.d)(this,function(a){switch(a.label){case 0:return n=zb(t),(i=n.vl.get(e))?(n.Vl.Fa(i.targetId),r=i.view.Rl(),[3,4]):[3,1];case 1:return[4,Vm(n.bh,Bp(e))];case 2:return o=a.sent(),s=n.Vl.Fa(o.targetId),[4,yb(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.Ml&&A_(n.yl,o),a.label=4;case 4:return[2,r]}})})}function yb(t,e,n,r){return Object(Jf.b)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(Jf.d)(this,function(l){switch(l.label){case 0:return t.Ll=function(e,n,r){return function(t,e,n,r){return Object(Jf.b)(this,void 0,void 0,function(){var i,o,s;return Object(Jf.d)(this,function(a){switch(a.label){case 0:return(i=e.view.fl(n)).lc?[4,qm(t.bh,e.query,!1).then(function(t){return e.view.fl(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.$e.get(e.targetId),s=e.view.wi(i,t.Ml,o),[2,(xb(t,e.targetId,s.Il),s.snapshot)]}})})}(t,e,n,r)},[4,qm(t.bh,e,!0)];case 1:return i=l.sent(),o=new hb(e,i.Rc),s=o.fl(i.documents),a=ey.Le(n,r&&"Offline"!==t.onlineState),u=o.wi(s,t.Ml,a),xb(t,n,u.Il),c=new fb(e,n,o),[2,(t.vl.set(e,c),t.Sl.has(n)?t.Sl.get(n).push(e):t.Sl.set(n,[e]),u.snapshot)]}})})}function gb(t,e){return Object(Jf.b)(this,void 0,void 0,function(){var n,r,i;return Object(Jf.d)(this,function(o){switch(o.label){case 0:return n=cd(t),r=n.vl.get(e),(i=n.Sl.get(r.targetId)).length>1?[2,(n.Sl.set(r.targetId,i.filter(function(t){return!zp(t,e)})),void n.vl.delete(e))]:n.Ml?(n.Vl.ka(r.targetId),n.Vl.Da(r.targetId)?[3,2]:[4,Um(n.bh,r.targetId,!1).then(function(){n.Vl.La(r.targetId),j_(n.yl,r.targetId),Tb(n,r.targetId)}).catch(Kg)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Tb(n,r.targetId),[4,Um(n.bh,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function mb(t,e,n){return Object(Jf.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Jf.d)(this,function(a){switch(a.label){case 0:r=Wb(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=cd(t),i=Sd.now(),o=e.reduce(function(t,e){return t.add(e.key)},Kv());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Tc.Xo(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=_v(c,n.get(c.key));null!=l&&s.push(new Ev(c.key,l,up(l.proto.mapValue),pv.exists(!0)))}return r.zo.Ri(t,i,s,e)})}).then(function(t){var e=t.xs(n);return{batchId:t.batchId,ri:e}})}(r.bh,e)];case 2:return i=a.sent(),r.Vl.Ca(i.batchId),function(t,e,n){var r=t.$l[t.currentUser.A()];r||(r=new Dv(fd)),r=r.zt(e,n),t.$l[t.currentUser.A()]=r}(r,i.batchId,n),[4,Pb(r,i.ri)];case 3:return a.sent(),[4,H_(r.yl)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=tg(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function _b(t,e){return Object(Jf.b)(this,void 0,void 0,function(){var n,r;return Object(Jf.d)(this,function(i){switch(i.label){case 0:n=cd(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Mm(n.bh,e)];case 2:return r=i.sent(),e.$e.forEach(function(t,e){var r=n.xl.get(e);r&&(ud(t.qe.size+t.Ue.size+t.Qe.size<=1),t.qe.size>0?r.Pl=!0:t.Ue.size>0?ud(r.Pl):t.Qe.size>0&&(ud(r.Pl),r.Pl=!1))}),[4,Pb(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Kg(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function bb(t,e,n){var r=cd(t);if(r.Ml&&0===n||!r.Ml&&1===n){var i=[];r.vl.forEach(function(t,n){var r=n.view.Gh(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=cd(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Gh(e)&&(r=!0)}),r&&ob(n)}(r.gl,e),i.length&&r.bl.ah(i),r.onlineState=e,r.Ml&&r.Vl.Qa(e)}}function wb(t,e,n){return Object(Jf.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(Jf.d)(this,function(c){switch(c.label){case 0:return(r=cd(t)).Vl.Ba(e,"rejected",n),i=r.xl.get(e),(o=i&&i.key)?(s=(s=new Dv(Pd.H)).zt(o,new hp(o,Td.min())),a=Kv().add(o),u=new ty(Td.min(),new Map,new Fv(fd),s,a),[4,_b(r,u)]):[3,2];case 1:return c.sent(),r.Cl=r.Cl.remove(o),r.xl.delete(e),jb(r),[3,4];case 2:return[4,Um(r.bh,e,!1).then(function(){return Tb(r,e,n)}).catch(Kg)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function kb(t,e){return Object(Jf.b)(this,void 0,void 0,function(){var n,r,i;return Object(Jf.d)(this,function(o){switch(o.label){case 0:n=cd(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Rm(n.bh,e)];case 2:return i=o.sent(),Sb(n,r,null),Ob(n,r),n.Vl.Na(r,"acknowledged"),[4,Pb(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Kg(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Eb(t,e,n){return Object(Jf.b)(this,void 0,void 0,function(){var r,i;return Object(Jf.d)(this,function(o){switch(o.label){case 0:r=cd(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=cd(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n.zo.Pi(t,e).next(function(e){return ud(null!==e),r=e.keys(),n.zo.Ci(t,e)}).next(function(){return n.zo.$i(t)}).next(function(){return n.Tc.Xo(t,r)})})}(r.bh,e)];case 2:return i=o.sent(),Sb(r,e,n),Ob(r,e),r.Vl.Na(e,"rejected",n),[4,Pb(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Kg(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Cb(t,e){return Object(Jf.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Jf.d)(this,function(a){switch(a.label){case 0:M_((n=cd(t)).yl)||rd("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=cd(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.zo.Vi(t)})}(n.bh)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fl.get(r)||[]).push(e),n.Fl.set(r,i),[3,4]);case 3:return o=a.sent(),s=tg(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function Ob(t,e){(t.Fl.get(e)||[]).forEach(function(t){t.resolve()}),t.Fl.delete(e)}function Sb(t,e,n){var r=cd(t),i=r.$l[r.currentUser.A()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.$l[r.currentUser.A()]=i}}function Tb(t,e,n){void 0===n&&(n=null),t.Vl.ka(e);for(var r=0,i=t.Sl.get(e);r<i.length;r++){var o=i[r];t.vl.delete(o),n&&t.bl.Bl(o,n)}t.Sl.delete(e),t.Ml&&t.Nl.Fc(e).forEach(function(e){t.Nl.Fi(e)||Ib(t,e)})}function Ib(t,e){t.Dl.delete(e.path.rt());var n=t.Cl.get(e);null!==n&&(j_(t.yl,n),t.Cl=t.Cl.remove(e),t.xl.delete(n),jb(t))}function xb(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof cb?(t.Nl.nr(o.key,e),Ab(t,o)):o instanceof lb?(rd("SyncEngine","Document no longer in limbo: "+o.key),t.Nl.ir(o.key,e),t.Nl.Fi(o.key)||Ib(t,o.key)):ad()}}function Ab(t,e){var n=e.key,r=n.path.rt();t.Cl.get(n)||t.Dl.has(r)||(rd("SyncEngine","New document in limbo: "+n),t.Dl.add(r),jb(t))}function jb(t){for(;t.Dl.size>0&&t.Cl.size<t.pl;){var e=t.Dl.values().next().value;t.Dl.delete(e);var n=new Pd(xd.ot(e)),r=t.Ol.next();t.xl.set(r,new db(n)),t.Cl=t.Cl.zt(n,r),A_(t.yl,new Xp(Bp(Dp(n.path)),r,2,Od.q))}}function Pb(t,e,n){return Object(Jf.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Jf.d)(this,function(a){switch(a.label){case 0:return r=cd(t),i=[],o=[],s=[],r.vl.et()?[3,3]:(r.vl.forEach(function(t,a){s.push(r.Ll(a,e,n).then(function(t){if(t){r.Ml&&r.Vl.Ba(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=xm.oc(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.bl.ah(i),[4,function(t,e){return Object(Jf.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(Jf.d)(this,function(l){switch(l.label){case 0:n=cd(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Hy.forEach(e,function(e){return Hy.forEach(e.ic,function(r){return n.persistence.Ti.nr(t,e.targetId,r)}).next(function(){return Hy.forEach(e.rc,function(r){return n.persistence.Ti.ir(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!Ky(r=l.sent()))throw r;return rd("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.fc.get(a),c=u.Lt(u.Ot),n.fc=n.fc.zt(a,c));return[2]}})})}(r.bh,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function Nb(t,e){return Object(Jf.b)(this,void 0,void 0,function(){var n,r;return Object(Jf.d)(this,function(i){switch(i.label){case 0:return(n=cd(t)).currentUser.isEqual(e)?[3,3]:(rd("SyncEngine","User change. New user:",e.A()),[4,Nm(n.bh,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fl.forEach(function(t){t.forEach(function(t){t.reject(new gd(yd.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fl.clear()}(n),n.Vl.Ua(e,r.mc,r.Ac),[4,Pb(n,r.Ic)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function Rb(t,e){var n=cd(t),r=n.xl.get(e);if(r&&r.Pl)return Kv().add(r.key);var i=Kv(),o=n.Sl.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.vl.get(a[s]);i=i.Pe(u.view._l)}return i}function Db(t,e){return Object(Jf.b)(this,void 0,void 0,function(){var n,r,i;return Object(Jf.d)(this,function(o){switch(o.label){case 0:return[4,qm((n=cd(t)).bh,e.query,!0)];case 1:return r=o.sent(),i=e.view.Al(r),[2,(n.Ml&&xb(n,e.targetId,i.Il),i)]}})})}function Mb(t){return Object(Jf.b)(this,void 0,void 0,function(){var e;return Object(Jf.d)(this,function(n){return[2,Hm((e=cd(t)).bh).then(function(t){return Pb(e,t)})]})})}function Lb(t,e,n,r){return Object(Jf.b)(this,void 0,void 0,function(){var i,o;return Object(Jf.d)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=cd(t),r=cd(n.zo);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.yi(t,e).next(function(e){return e?n.Tc.Xo(t,e):Hy.resolve(null)})})}((i=cd(t)).bh,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,H_(i.yl)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Sb(i,e,r||null),Ob(i,e),function(t,e){cd(cd(t).zo).xi(e)}(i.bh,e)):ad(),s.label=4;case 4:return[4,Pb(i,o)];case 5:return s.sent(),[3,7];case 6:rd("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function Fb(t,e){return Object(Jf.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Jf.d)(this,function(c){switch(c.label){case 0:return zb(n=cd(t)),Wb(n),!0!==e||!0===n.kl?[3,3]:(r=n.Vl.va(),[4,Vb(n,r.it())]);case 1:return i=c.sent(),n.kl=!0,[4,X_(n.yl,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)A_(n.yl,s[o]);return[3,7];case 3:return!1!==e||!1===n.kl?[3,7]:(a=[],u=Promise.resolve(),n.Sl.forEach(function(t,e){n.Vl.Ma(e)?a.push(e):u=u.then(function(){return Tb(n,e),Um(n.bh,e,!0)}),j_(n.yl,e)}),[4,u]);case 4:return c.sent(),[4,Vb(n,a)];case 5:return c.sent(),function(t){var e=cd(t);e.xl.forEach(function(t,n){j_(e.yl,n)}),e.Nl.Oc(),e.xl=new Map,e.Cl=new Dv(Pd.H)}(n),n.kl=!1,[4,X_(n.yl,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function Vb(t,e,n){return Object(Jf.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,f,d,p;return Object(Jf.d)(this,function(v){switch(v.label){case 0:n=cd(t),r=[],i=[],o=0,s=e,v.label=1;case 1:return o<s.length?(u=void 0,(c=n.Sl.get(a=s[o]))&&0!==c.length?[4,Vm(n.bh,Bp(c[0]))]:[3,7]):[3,13];case 2:u=v.sent(),l=0,h=c,v.label=3;case 3:return l<h.length?(f=n.vl.get(h[l]),[4,Db(n,f)]):[3,6];case 4:(d=v.sent()).snapshot&&i.push(d.snapshot),v.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Bm(n.bh,a)];case 8:return p=v.sent(),[4,Vm(n.bh,p)];case 9:return u=v.sent(),[4,yb(n,Ub(p),a,!1)];case 10:v.sent(),v.label=11;case 11:r.push(u),v.label=12;case 12:return o++,[3,1];case 13:return[2,(n.bl.ah(i),r)]}})})}function Ub(t){return Rp(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function qb(t){var e=cd(t);return cd(cd(e.bh).persistence).Uo()}function Bb(t,e,n,r){return Object(Jf.b)(this,void 0,void 0,function(){var i,o,s;return Object(Jf.d)(this,function(a){switch(a.label){case 0:return(i=cd(t)).kl?(rd("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Sl.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Hm(i.bh)];case 3:return o=a.sent(),s=ty.Me(e,"current"===n),[4,Pb(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Um(i.bh,e,!0)];case 6:return a.sent(),Tb(i,e,r),[3,8];case 7:ad(),a.label=8;case 8:return[2]}})})}function Hb(t,e,n){return Object(Jf.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Object(Jf.d)(this,function(f){switch(f.label){case 0:if(!(r=zb(t)).kl)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.Sl.has(s=o[i])?(rd("SyncEngine","Adding an already active target "+s),[3,5]):[4,Bm(r.bh,s)]:[3,6];case 2:return a=f.sent(),[4,Vm(r.bh,a)];case 3:return u=f.sent(),[4,yb(r,Ub(a),u.targetId,!1)];case 4:f.sent(),A_(r.yl,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(Jf.d)(this,function(e){switch(e.label){case 0:return r.Sl.has(t)?[4,Um(r.bh,t,!1).then(function(){j_(r.yl,t),Tb(r,t)}).catch(Kg)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function zb(t){var e=cd(t);return e.yl.Dh.Lh=_b.bind(null,e),e.yl.Dh.vn=Rb.bind(null,e),e.yl.Dh.Mh=wb.bind(null,e),e.bl.ah=rb.bind(null,e.gl),e.bl.Bl=ib.bind(null,e.gl),e}function Wb(t){var e=cd(t);return e.yl.Dh.Bh=kb.bind(null,e),e.yl.Dh.qh=Eb.bind(null,e),e}var Qb=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(Jf.b)(this,void 0,void 0,function(){return Object(Jf.d)(this,function(e){switch(e.label){case 0:return this.Qt=b_(t.yu.t),this.Vl=this.Wl(t),this.persistence=this.jl(t),[4,this.persistence.start()];case 1:return e.sent(),this.Gl=this.zl(t),this.bh=this.Hl(t),[2]}})})},t.prototype.zl=function(t){return null},t.prototype.Hl=function(t){return Pm(this.persistence,new Am,t.Jl,this.Qt)},t.prototype.jl=function(t){return new t_(n_.ia,this.Qt)},t.prototype.Wl=function(t){return new f_},t.prototype.terminate=function(){return Object(Jf.b)(this,void 0,void 0,function(){return Object(Jf.d)(this,function(t){switch(t.label){case 0:return this.Gl&&this.Gl.stop(),[4,this.Vl.ko()];case 1:return t.sent(),[4,this.persistence.ko()];case 2:return t.sent(),[2]}})})},t}(),Gb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Yl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(Jf.c)(e,t),e.prototype.initialize=function(e){return Object(Jf.b)(this,void 0,void 0,function(){return Object(Jf.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,zm(this.bh)];case 2:return n.sent(),[4,this.Yl.initialize(this,e)];case 3:return n.sent(),[4,Wb(this.Yl._a)];case 4:return n.sent(),[4,H_(this.Yl.yl)];case 5:return n.sent(),[2]}})})},e.prototype.Hl=function(t){return Pm(this.persistence,new Am,t.Jl,this.Qt)},e.prototype.zl=function(t){return new hm(this.persistence.Ti.lr,t._s)},e.prototype.jl=function(t){var e=Sm(t.yu.t,t.yu.persistenceKey),n=void 0!==this.cacheSizeBytes?Gg.Ys(this.cacheSizeBytes):Gg.ti;return new Em(this.synchronizeTabs,e,t.clientId,n,t._s,m_(),__(),this.Qt,this.Vl,!!this.forceOwnership)},e.prototype.Wl=function(t){return new f_},e}(Qb),Kb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Yl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(Jf.c)(e,t),e.prototype.initialize=function(e){return Object(Jf.b)(this,void 0,void 0,function(){var n,r=this;return Object(Jf.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Yl._a,this.Vl instanceof h_?(this.Vl._a={eu:Lb.bind(null,n),nu:Bb.bind(null,n),su:Hb.bind(null,n),Uo:qb.bind(null,n),tu:Mb.bind(null,n)},[4,this.Vl.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.Ro(function(t){return Object(Jf.b)(r,void 0,void 0,function(){return Object(Jf.d)(this,function(e){switch(e.label){case 0:return[4,Fb(this.Yl._a,t)];case 1:return e.sent(),this.Gl&&(t&&!this.Gl.Er?this.Gl.start(this.bh):t||this.Gl.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Wl=function(t){var e=m_();if(!h_.Kn(e))throw new gd(yd.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Sm(t.yu.t,t.yu.persistenceKey);return new h_(e,t._s,n,t.clientId,t.Jl)},e}(Gb),Yb=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(Jf.b)(this,void 0,void 0,function(){var n=this;return Object(Jf.d)(this,function(r){switch(r.label){case 0:return this.bh?[3,2]:(this.bh=t.bh,this.Vl=t.Vl,this.Sh=this.Xl(e),this.yl=this.Zl(e),this.gl=this.t_(e),this._a=this.e_(e,!t.synchronizeTabs),this.Vl.fa=function(t){return bb(n._a,t,1)},this.yl.Dh.n_=Nb.bind(null,this._a),[4,X_(this.yl,this._a.Ml)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.t_=function(t){return new tb},t.prototype.Xl=function(t){var e=b_(t.yu.t),n=new g_(t.yu);return function(t,e,n){return new O_(t,e,n)}(t.credentials,n,e)},t.prototype.Zl=function(t){var e,n,r,i,o,s=this;return e=this.bh,n=this.Sh,r=t._s,i=function(t){return bb(s._a,t,0)},o=p_.Kn()?new p_:new d_,new T_(e,n,r,i,o)},t.prototype.e_=function(t,e){return function(t,e,n,r,i,o,s){var a=new pb(t,e,n,r,i,o);return s&&(a.kl=!0),a}(this.bh,this.yl,this.gl,this.Vl,t.Jl,t.pl,e)},t.prototype.terminate=function(){return function(t){return Object(Jf.b)(this,void 0,void 0,function(){var e;return Object(Jf.d)(this,function(n){switch(n.label){case 0:return e=cd(t),rd("RemoteStore","RemoteStore shutting down."),e.Nh.add(5),[4,x_(e)];case 1:return n.sent(),e.Fh.ko(),e.Oh.set("Unknown"),[2]}})})}(this.yl)},t}(),Xb=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.s_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.s_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.i_=function(){this.muted=!0},t.prototype.s_=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Zb=(function(){function t(t,e){var n=this;this.r_=t,this.Qt=e,this.metadata=new By,this.buffer=new Uint8Array,this.o_=new TextDecoder("utf-8"),this.c_().then(function(t){t&&t.sl()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.r_.cancel()},t.prototype.getMetadata=function(){return Object(Jf.b)(this,void 0,void 0,function(){return Object(Jf.d)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Ql=function(){return Object(Jf.b)(this,void 0,void 0,function(){return Object(Jf.d)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.c_())]}})})},t.prototype.c_=function(){return Object(Jf.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(Jf.d)(this,function(i){switch(i.label){case 0:return[4,this.a_()];case 1:return null===(t=i.sent())?[2,null]:(e=this.o_.decode(t),n=Number(e),isNaN(n)&&this.u_("length string ("+e+") is not valid number"),[4,this.h_(n)]);case 2:return r=i.sent(),[2,new ab(JSON.parse(r),t.length+n)]}})})},t.prototype.l_=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.a_=function(){return Object(Jf.b)(this,void 0,void 0,function(){var t,e;return Object(Jf.d)(this,function(n){switch(n.label){case 0:return this.l_()<0?[4,this.__()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.l_())<0&&this.u_("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.h_=function(t){return Object(Jf.b)(this,void 0,void 0,function(){var e;return Object(Jf.d)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.__()]:[3,3];case 1:n.sent()&&this.u_("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.o_.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.u_=function(t){throw this.r_.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.__=function(){return Object(Jf.b)(this,void 0,void 0,function(){var t,e;return Object(Jf.d)(this,function(n){switch(n.label){case 0:return[4,this.r_.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new gd(yd.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.f_=new jd(t)}return t.prototype.isEqual=function(t){return this.f_.isEqual(t.f_)},t}()),Jb=function(t){this._methodName=t},$b=function(t){this.d_=t};function tw(t,e,n){if(!n)throw new gd(yd.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function ew(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new gd(yd.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function nw(t,e,n,r){if(!0===e&&!0===r)throw new gd(yd.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function rw(t){if(!Pd.wt(t))throw new gd(yd.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function iw(t){if(Pd.wt(t))throw new gd(yd.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function ow(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":ad()}function sw(t,e){if("_delegate"in t&&(t=t.d_),!(t instanceof e)){if(e.name===t.constructor.name)throw new gd(yd.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=ow(t);throw new gd(yd.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function aw(t,e){if(e<=0)throw new gd(yd.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var uw=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new gd(yd.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new gd(yd.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,nw("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),cw=new Map,lw=function(){function t(t,e){this.w_="(lite)",this.E_=new uw({}),this.T_=!1,t instanceof td?(this.I_=t,this.m_=new wd):(this.A_=t,this.I_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new gd(yd.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new td(t.options.projectId)}(t),this.m_=new kd(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.A_)throw new gd(yd.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"P_",{get:function(){return void 0!==this.y_},enumerable:!1,configurable:!0}),t.prototype.g_=function(t){if(this.T_)throw new gd(yd.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new uw(t),void 0!==t.credentials&&(this.m_=function(t){if(!t)return new wd;switch(t.type){case"gapi":var e=t.client;return ud(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Cd(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new gd(yd.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.V_=function(){return this.E_},t.prototype.p_=function(){return this.T_=!0,this.E_},t.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},t.prototype.toJSON=function(){return{app:this.A_,t:this.I_,settings:this.E_}},t.prototype.b_=function(){return(t=cw.get(this))&&(rd("ComponentProvider","Removing Datastore"),cw.delete(this),t.terminate()),Promise.resolve();var t},t}(),hw=function(){function t(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.S_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new dw(this.firestore,this.v_,this.S_.path.X())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.S_)},t}(),fw=function(){function t(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),dw=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Dp(r))||this).firestore=e,i.D_=r,i.type="collection",i}return Object(Jf.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.C_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.C_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.D_.X();return t.et()?null:new hw(this.firestore,null,new Pd(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.D_)},e}(fw);function pw(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof $b&&(t=t.d_),tw("collection","path",e),t instanceof lw)return iw(n=xd.ot.apply(xd,Object(Jf.g)([e],r))),new dw(t,null,n);if(!(t instanceof hw||t instanceof dw))throw new gd(yd.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return iw(n=xd.ot.apply(xd,Object(Jf.g)([t.path],r)).child(xd.ot(e))),new dw(t.firestore,null,n)}function vw(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof $b&&(t=t.d_),1===arguments.length&&(e=hd.u()),tw("doc","path",e),t instanceof lw)return rw(n=xd.ot.apply(xd,Object(Jf.g)([e],r))),new hw(t,null,new Pd(n));if(!(t instanceof hw||t instanceof dw))throw new gd(yd.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return rw(n=t.D_.child(xd.ot.apply(xd,Object(Jf.g)([e],r)))),new hw(t.firestore,t instanceof dw?t.v_:null,new Pd(n))}function yw(t,e){return t instanceof $b&&(t=t.d_),e instanceof $b&&(e=e.d_),(t instanceof hw||t instanceof dw)&&(e instanceof hw||e instanceof dw)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function gw(t,e){return t instanceof $b&&(t=t.d_),e instanceof $b&&(e=e.d_),t instanceof fw&&e instanceof fw&&t.firestore===e.firestore&&zp(t.C_,e.C_)&&t.v_===e.v_}var mw=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new gd(yd.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new gd(yd.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},t.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},t.prototype.U=function(t){return fd(this.x_,t.x_)||fd(this.N_,t.N_)},t}(),_w=/^__.*__$/,bw=function(){function t(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return null!==this.Gt?new Ev(t,this.data,this.Gt,e,this.fieldTransforms):new kv(t,this.data,e,this.fieldTransforms)},t}(),ww=function(){function t(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return new Ev(t,this.data,this.Gt,e,this.fieldTransforms)},t}();function kw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ad()}}var Ew=function(){function t(t,e,n,r,i,o){this.settings=t,this.t=e,this.Qt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.Gt=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),t.prototype.M_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.t,this.Qt,this.ignoreUndefinedProperties,this.fieldTransforms,this.Gt)},t.prototype.L_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.q_(t),r},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.O_(),r},t.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},t.prototype.K_=function(t){return Hw(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},t.prototype.contains=function(t){return void 0!==this.Gt.find(function(e){return t.nt(e)})||void 0!==this.fieldTransforms.find(function(e){return t.nt(e.field)})},t.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},t.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(kw(this.k_)&&_w.test(t))throw this.K_('Document fields cannot begin and end with "__"')},t}(),Cw=function(){function t(t,e,n){this.t=t,this.ignoreUndefinedProperties=e,this.Qt=n||b_(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new Ew({k_:t,methodName:e,j_:n,path:jd.ct(),B_:!1,W_:r},this.t,this.Qt,this.ignoreUndefinedProperties)},t}();function Ow(t){var e=t.p_(),n=b_(t.I_);return new Cw(t.I_,!!e.ignoreUndefinedProperties,n)}function Sw(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);Vw("Data must be an object, but it was:",s,r);var a,u,c=Lw(r,s);if(o.merge)a=new Md(s.Gt),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=Uw(e,f[h],n);if(!s.contains(d))throw new gd(yd.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");zw(l,d)||l.push(d)}a=new Md(l),u=s.fieldTransforms.filter(function(t){return a.Tt(t.field)})}else a=null,u=s.fieldTransforms;return new bw(new sp(c),a,u)}var Tw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Jf.c)(e,t),e.prototype.z_=function(t){if(2!==t.k_)throw t.K_(1===t.k_?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.Gt.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Jb);function Iw(t,e,n){return new Ew({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.t,e.Qt,e.ignoreUndefinedProperties)}var xw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Jf.c)(e,t),e.prototype.z_=function(t){return new fv(t.path,new iv)},e.prototype.isEqual=function(t){return t instanceof e},e}(Jb),Aw=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Object(Jf.c)(e,t),e.prototype.z_=function(t){var e=Iw(this,t,!0),n=this.H_.map(function(t){return Mw(t,e)}),r=new ov(n);return new fv(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Jb),jw=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Object(Jf.c)(e,t),e.prototype.z_=function(t){var e=Iw(this,t,!0),n=this.H_.map(function(t){return Mw(t,e)}),r=new av(n);return new fv(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Jb),Pw=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).J_=n,r}return Object(Jf.c)(e,t),e.prototype.z_=function(t){var e=new cv(t.Qt,$p(t.Qt,this.J_));return new fv(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Jb);function Nw(t,e,n,r){var i=t.G_(1,e,n);Vw("Data must be an object, but it was:",i,r);var o=[],s=new ap;Rd(r,function(t,r){var a=Bw(e,t,n);r instanceof $b&&(r=r.d_);var u=i.U_(a);if(r instanceof Tw)o.push(a);else{var c=Mw(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new Md(o);return new ww(s.Pt(),a,i.fieldTransforms)}function Rw(t,e,n,r,i,o){var s=t.G_(1,e,n),a=[Uw(e,r,n)],u=[i];if(o.length%2!=0)throw new gd(yd.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Uw(e,o[c])),u.push(o[c+1]);for(var l=[],h=new ap,f=a.length-1;f>=0;--f)if(!zw(l,a[f])){var d=a[f],p=u[f];p instanceof $b&&(p=p.d_);var v=s.U_(d);if(p instanceof Tw)l.push(d);else{var y=Mw(p,v);null!=y&&(l.push(d),h.set(d,y))}}var g=new Md(l);return new ww(h.Pt(),g,s.fieldTransforms)}function Dw(t,e,n,r){return void 0===r&&(r=!1),Mw(n,t.G_(r?4:3,e))}function Mw(t,e){if(t instanceof $b&&(t=t.d_),Fw(t))return Vw("Unsupported field value:",e,t),Lw(t,e);if(t instanceof Jb)return function(t,e){if(!kw(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.Gt.push(e.path),t instanceof Array){if(e.settings.B_&&4!==e.k_)throw e.K_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Mw(o[i],e.Q_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof $b&&(t=t.d_),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return $p(e.Qt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Sd.fromDate(t);return{timestampValue:fy(e.Qt,n)}}if(t instanceof Sd)return n=new Sd(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:fy(e.Qt,n)};if(t instanceof mw)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof md)return{bytesValue:dy(e.Qt,t.I)};if(t instanceof hw){var r=t.firestore.I_;if(!r.isEqual(n=e.t))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:yy(t.firestore.I_||e.t,t.S_.path)}}throw e.K_("Unsupported field value: "+ow(t))}(t,e)}function Lw(t,e){var n={};return Dd(t)?e.path&&e.path.length>0&&e.Gt.push(e.path):Rd(t,function(t,r){var i=Mw(r,e.L_(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function Fw(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Sd||t instanceof mw||t instanceof md||t instanceof hw||t instanceof Jb)}function Vw(t,e,n){if(!Fw(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=ow(n);throw e.K_("an object"===r?t+" a custom object":t+" "+r)}}function Uw(t,e,n){if(e instanceof $b&&(e=e.d_),e instanceof Zb)return e.f_;if("string"==typeof e)return Bw(t,e);throw Hw("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var qw=new RegExp("[~\\*/\\[\\]]");function Bw(t,e,n){if(e.search(qw)>=0)throw Hw("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Zb.bind.apply(Zb,Object(Jf.g)([void 0],e.split("."))))).f_}catch(r){throw Hw("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Hw(t,e,n,r,i){var o=r&&!r.et(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new gd(yd.INVALID_ARGUMENT,(a+=". ")+t+u)}function zw(t,e){return t.some(function(t){return t.isEqual(e)})}var Ww=function(){function t(t){this.Sh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return t.prototype.ef=function(t){return Object(Jf.b)(this,void 0,void 0,function(){var e,n=this;return Object(Jf.d)(this,function(r){switch(r.label){case 0:if(this.nf(),this.mutations.length>0)throw new gd(yd.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(Jf.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(Jf.d)(this,function(u){switch(u.label){case 0:return n=cd(t),r=ky(n.Qt)+"/documents",i={documents:e.map(function(t){return my(n.Qt,t)})},[4,n.Du("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){ud(!!e.found);var n=_y(t,e.found.name),r=vy(e.found.updateTime),i=new sp({mapValue:{fields:e.found.fields}});return new lp(n,r,i,{})}(t,e):"missing"in e?function(t,e){ud(!!e.missing),ud(!!e.readTime);var n=_y(t,e.missing),r=vy(e.readTime);return new hp(n,r)}(t,e):ad()}(n.Qt,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());ud(!!e),a.push(e)}),a)]}})})}(this.Sh,t)];case 1:return[2,((e=r.sent()).forEach(function(t){t instanceof hp||t instanceof lp?n.sf(t):ad()}),e)]}})})},t.prototype.set=function(t,e){this.write(e.F_(t,this.jt(t))),this.tf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},t.prototype.delete=function(t){this.write(new Av(t,this.jt(t))),this.tf.add(t.toString())},t.prototype.commit=function(){return Object(Jf.b)(this,void 0,void 0,function(){var t,e=this;return Object(Jf.d)(this,function(n){switch(n.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=Pd._t(n);e.mutations.push(new jv(r,e.jt(r)))}),[4,function(t,e){return Object(Jf.b)(this,void 0,void 0,function(){var n,r,i;return Object(Jf.d)(this,function(o){switch(o.label){case 0:return n=cd(t),r=ky(n.Qt)+"/documents",i={writes:e.map(function(t){return Sy(n.Qt,t)})},[4,n.pu("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.Sh,this.mutations)];case 1:return n.sent(),this.X_=!0,[2]}})})},t.prototype.sf=function(t){var e;if(t instanceof lp)e=t.version;else{if(!(t instanceof hp))throw ad();e=Td.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new gd(yd.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},t.prototype.jt=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?pv.updateTime(e):pv.Kt()},t.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&e){if(e.isEqual(Td.min()))throw new gd(yd.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return pv.updateTime(e)}return pv.exists(!0)},t.prototype.write=function(t){this.nf(),this.mutations.push(t)},t.prototype.nf=function(){},t}(),Qw=function(){function t(t,e,n,r){this._s=t,this.Sh=e,this.updateFunction=n,this.Es=r,this.cf=5,this.Gu=new w_(this._s,"transaction_retry")}return t.prototype.run=function(){this.af()},t.prototype.af=function(){var t=this;this.Gu.Lu(function(){return Object(Jf.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(Jf.d)(this,function(r){return t=new Ww(this.Sh),(e=this.uf(t))&&e.then(function(e){n._s.Ps(function(){return t.commit().then(function(){n.Es.resolve(e)}).catch(function(t){n.hf(t)})})}).catch(function(t){n.hf(t)}),[2]})})})},t.prototype.uf=function(t){try{var e=this.updateFunction(t);return!zd(e)&&e.catch&&e.then?e:(this.Es.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Es.reject(t),null}},t.prototype.hf=function(t){var e=this;this.cf>0&&this.lf(t)?(this.cf-=1,this._s.Ps(function(){return e.af(),Promise.resolve()})):this.Es.reject(t)},t.prototype.lf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Nv(e)}return!1},t}(),Gw=function(){function t(t,e,n){var r=this;this.credentials=t,this._s=e,this.yu=n,this.user=_d.UNAUTHENTICATED,this.clientId=hd.u(),this._f=function(){},this.C=new By,this.credentials.v(function(t){rd("FirestoreClient","Received user=",t.uid),r.user=t,r._f(t),r.C.resolve()})}return t.prototype.getConfiguration=function(){return Object(Jf.b)(this,void 0,void 0,function(){return Object(Jf.d)(this,function(t){switch(t.label){case 0:return[4,this.C.promise];case 1:return[2,(t.sent(),{_s:this._s,yu:this.yu,clientId:this.clientId,credentials:this.credentials,Jl:this.user,pl:100})]}})})},t.prototype.ff=function(t){var e=this;this._f=t,this.C.promise.then(function(){return e._f(e.user)})},t.prototype.df=function(){if(this._s.wf)throw new gd(yd.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this._s.Ef();var e=new By;return this._s.Tf(function(){return Object(Jf.b)(t,void 0,void 0,function(){var t,n;return Object(Jf.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.S(),e.resolve(),[3,6];case 5:return t=r.sent(),n=tg(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function Kw(t,e){return Object(Jf.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(Jf.d)(this,function(o){switch(o.label){case 0:return t._s.Af(),rd("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.Jl,t.ff(function(n){r.isEqual(n)||(r=n,t._s.po(function(){return Object(Jf.b)(i,void 0,void 0,function(){return Object(Jf.d)(this,function(t){switch(t.label){case 0:return[4,Nm(e.bh,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.Po(function(){return t.terminate()}),t.mf=e,[2]}})})}function Yw(t,e){return Object(Jf.b)(this,void 0,void 0,function(){var n,r;return Object(Jf.d)(this,function(i){switch(i.label){case 0:return t._s.Af(),[4,Xw(t)];case 1:return n=i.sent(),rd("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.ff(function(n){return t._s.po(function(){return function(t,e){return Object(Jf.b)(this,void 0,void 0,function(){var n,r;return Object(Jf.d)(this,function(i){switch(i.label){case 0:return(n=cd(t))._s.Af(),rd("RemoteStore","RemoteStore received new credentials"),r=M_(n),n.Nh.add(3),[4,x_(n)];case 1:return i.sent(),r&&n.Oh.set("Unknown"),[4,n.Dh.n_(e)];case 2:return i.sent(),n.Nh.delete(3),[4,I_(n)];case 3:return i.sent(),[2]}})})}(e.yl,n)})}),t.If=e,[2]}})})}function Xw(t){return Object(Jf.b)(this,void 0,void 0,function(){return Object(Jf.d)(this,function(e){switch(e.label){case 0:return t.mf?[3,2]:(rd("FirestoreClient","Using default OfflineComponentProvider"),[4,Kw(t,new Qb)]);case 1:e.sent(),e.label=2;case 2:return[2,t.mf]}})})}function Zw(t){return Object(Jf.b)(this,void 0,void 0,function(){return Object(Jf.d)(this,function(e){switch(e.label){case 0:return t.If?[3,2]:(rd("FirestoreClient","Using default OnlineComponentProvider"),[4,Yw(t,new Yb)]);case 1:e.sent(),e.label=2;case 2:return[2,t.If]}})})}function Jw(t){return Xw(t).then(function(t){return t.persistence})}function $w(t){return Xw(t).then(function(t){return t.bh})}function tk(t){return Zw(t).then(function(t){return t.yl})}function ek(t){return Zw(t).then(function(t){return t._a})}function nk(t){return Object(Jf.b)(this,void 0,void 0,function(){var e,n;return Object(Jf.d)(this,function(r){switch(r.label){case 0:return[4,Zw(t)];case 1:return e=r.sent(),[2,((n=e.gl).jh=vb.bind(null,e._a),n.Hh=gb.bind(null,e._a),n)]}})})}function rk(t,e,n){var r=this;void 0===n&&(n={});var i=new By;return t._s.Ps(function(){return Object(Jf.b)(r,void 0,void 0,function(){var r;return Object(Jf.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Xb({next:function(o){e.Ps(function(){return nb(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new gd(yd.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new gd(yd.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new sb(Dp(n.path),o,{includeMetadataChanges:!0,nl:!0});return eb(t,s)},[4,nk(t)];case 1:return[2,r.apply(void 0,[o.sent(),t._s,e,n,i])]}})})}),i.promise}function ik(t,e,n){var r=this;void 0===n&&(n={});var i=new By;return t._s.Ps(function(){return Object(Jf.b)(r,void 0,void 0,function(){var r;return Object(Jf.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Xb({next:function(n){e.Ps(function(){return nb(t,s)}),n.fromCache&&"server"===r.source?i.reject(new gd(yd.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new sb(n,o,{includeMetadataChanges:!0,nl:!0});return eb(t,s)},[4,nk(t)];case 1:return[2,r.apply(void 0,[o.sent(),t._s,e,n,i])]}})})}),i.promise}var ok=function(){function t(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.Gu=new w_(this,"async_queue_retry"),this.vf=function(){var e=__();e&&rd("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Gu.qu()};var e=__();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),t.prototype.Ps=function(t){this.enqueue(t)},t.prototype.Tf=function(t){this.Sf(),this.Df(t)},t.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=__();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf)}},t.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise(function(t){}):this.Df(t)},t.prototype.po=function(t){var e=this;this.Ps(function(){return e.Pf.push(t),e.Cf()})},t.prototype.Cf=function(){return Object(Jf.b)(this,void 0,void 0,function(){var t,e=this;return Object(Jf.d)(this,function(n){switch(n.label){case 0:if(0===this.Pf.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return n.sent(),this.Pf.shift(),this.Gu.reset(),[3,4];case 3:if(!Ky(t=n.sent()))throw t;return rd("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.Gu.Lu(function(){return e.Cf()}),n.label=5;case 5:return[2]}})})},t.prototype.Df=function(t){var e=this,n=this.Rf.then(function(){return e.pf=!0,t().catch(function(t){throw e.Vf=t,e.pf=!1,id("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.pf=!1,t})});return this.Rf=n,n},t.prototype.Tr=function(t,e,n){var r=this;this.Sf(),this.bf.indexOf(t)>-1&&(e=0);var i=$y.Ts(this,t,e,n,function(t){return r.xf(t)});return this.gf.push(i),i},t.prototype.Sf=function(){this.Vf&&ad()},t.prototype.Af=function(){},t.prototype.Nf=function(){return Object(Jf.b)(this,void 0,void 0,function(){var t;return Object(Jf.d)(this,function(e){switch(e.label){case 0:return[4,t=this.Rf];case 1:e.sent(),e.label=2;case 2:if(t!==this.Rf)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.$f=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].fs===t)return!0;return!1},t.prototype.Ff=function(t){var e=this;return this.Nf().then(function(){e.gf.sort(function(t,e){return t.ds-e.ds});for(var n=0,r=e.gf;n<r.length;n++){var i=r[n];if(i.Rs(),"all"!==t&&i.fs===t)break}return e.Nf()})},t.prototype.Of=function(t){this.bf.push(t)},t.prototype.xf=function(t){var e=this.gf.indexOf(t);this.gf.splice(e,1)},t}();function sk(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this.kf={},this.Mf=new By,this.Lf={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this.kf={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this.Mf.promise.catch(t)},t.prototype.then=function(t,e){return this.Mf.promise.then(t,e)},t.prototype.ql=function(t){this.Ul(t),this.kf.complete&&this.kf.complete(),this.Mf.resolve(t)},t.prototype.Kl=function(t){this.Lf.taskState="Error",this.kf.next&&this.kf.next(this.Lf),this.kf.error&&this.kf.error(t),this.Mf.reject(t)},t.prototype.Ul=function(t){this.Lf=t,this.kf.next&&this.kf.next(t)}}();var ak=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Bf=new ok,r.w_="name"in e?e.name:"[DEFAULT]",r}return Object(Jf.c)(e,t),e.prototype.b_=function(){return this.qf||ck(this),this.qf.terminate()},e}(lw);function uk(t){return t.qf||ck(t),t.qf.df(),t.qf}function ck(t){var e=t.p_(),n=function(t,e,n){return new $f(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.I_,t.w_,e);t.qf=new Gw(t.m_,t.Bf,n)}function lk(t,e,n){var r=this,i=new By;return t._s.enqueue(function(){return Object(Jf.b)(r,void 0,void 0,function(){var r;return Object(Jf.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Kw(t,n)];case 1:return o.sent(),[4,Yw(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===yd.FAILED_PRECONDITION||t.code===yd.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function hk(t){if(t.R_||t.P_)throw new gd(yd.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var fk=function(){function t(){}return t.prototype.Uf=function(t,e){switch(void 0===e&&(e="none"),Gd(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Vd(t.integerValue||t.doubleValue);case 3:return this.Qf(t.timestampValue);case 4:return this.Kf(t,e);case 5:return t.stringValue;case 6:return this.Wf(Ud(t.bytesValue));case 7:return this.jf(t.referenceValue);case 8:return this.Gf(t.geoPointValue);case 9:return this.zf(t.arrayValue,e);case 10:return this.Hf(t.mapValue,e);default:throw ad()}},t.prototype.Hf=function(t,e){var n=this,r={};return Rd(t.fields||{},function(t,i){r[t]=n.Uf(i,e)}),r},t.prototype.Gf=function(t){return new mw(Vd(t.latitude),Vd(t.longitude))},t.prototype.zf=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.Uf(t,e)})},t.prototype.Kf=function(t,e){switch(e){case"previous":var n=Bd(t);return null==n?null:this.Uf(n,e);case"estimate":return this.Qf(Hd(t));default:return null}},t.prototype.Qf=function(t){var e=Fd(t);return new Sd(e.seconds,e.nanos)},t.prototype.Jf=function(t,e){var n=xd.ot(t);ud(qy(n));var r=new td(n.get(1),n.get(3)),i=new Pd(n.Y(5));return r.isEqual(e)||id("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),dk=function(){function t(t,e,n,r,i){this.Yf=t,this.Xf=e,this.S_=n,this.Zf=r,this.v_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new hw(this.Yf,this.v_,this.S_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.Zf},t.prototype.data=function(){if(this.Zf){if(this.v_){var t=new pk(this.Yf,this.Xf,this.S_,this.Zf,null);return this.v_.fromFirestore(t)}return this.Xf.Uf(this.Zf.bt())}},t.prototype.get=function(t){if(this.Zf){var e=this.Zf.data().field(vk("DocumentSnapshot.get",t));if(null!==e)return this.Xf.Uf(e)}},t}(),pk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Jf.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(dk);function vk(t,e){return"string"==typeof e?Bw(t,e):e instanceof $b?e.d_.f_:e.f_}function yk(t){if(Lp(t)&&0===t.xt.length)throw new gd(yd.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var gk=function(){};function mk(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.td(t)}return t}var _k=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).ed=e,i.nd=n,i.sd=r,i.type="where",i}return Object(Jf.c)(e,t),e.prototype.td=function(t){var e=Ow(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.ut()){if("array-contains"===o||"array-contains-any"===o)throw new gd(yd.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Sk(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(Ok(r,t,l[c]));a={arrayValue:{values:u}}}else a=Ok(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Sk(s,o),a=Dw(n,"where",s,"in"===o||"not-in"===o);var h=mp.create(i,o,a);return function(t,e){if(e.Ct()){var n=Vp(t);if(null!==n&&!n.isEqual(e.field))throw new gd(yd.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Fp(t);null!==r&&Tk(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new gd(yd.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t.C_,0,e,t.firestore.I_,this.ed,this.nd,this.sd);return new fw(t.firestore,t.v_,function(t,e){var n=t.filters.concat([e]);return new Np(t.path,t.collectionGroup,t.xt.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,n))},e}(gk),bk=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ed=e,r.rd=n,r.type="orderBy",r}return Object(Jf.c)(e,t),e.prototype.td=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new gd(yd.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new gd(yd.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new xp(e,n);return function(t,e){if(null===Fp(t)){var n=Vp(t);null!==n&&Tk(0,n,e.field)}}(t,r),r}(t.C_,this.ed,this.rd);return new fw(t.firestore,t.v_,function(t,e){var n=t.xt.concat([e]);return new Np(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,e))},e}(gk),wk=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.od=n,i.ad=r,i}return Object(Jf.c)(e,t),e.prototype.td=function(t){return new fw(t.firestore,t.v_,Hp(t.C_,this.od,this.ad))},e}(gk),kk=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ud=n,i.hd=r,i}return Object(Jf.c)(e,t),e.prototype.td=function(t){var e=Ck(t,this.type,this.ud,this.hd);return new fw(t.firestore,t.v_,function(t,e){return new Np(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.C_,e))},e}(gk),Ek=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ud=n,i.hd=r,i}return Object(Jf.c)(e,t),e.prototype.td=function(t){var e=Ck(t,this.type,this.ud,this.hd);return new fw(t.firestore,t.v_,function(t,e){return new Np(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.C_,e))},e}(gk);function Ck(t,e,n,r){if(n[0]instanceof $b&&(n[0]=n[0].d_),n[0]instanceof dk)return function(t,e,n,r,i){if(!r)throw new gd(yd.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=qp(t);s<a.length;s++){var u=a[s];if(u.field.ut())o.push(tp(e,r.key));else{var c=r.field(u.field);if(qd(c))throw new gd(yd.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.rt();throw new gd(yd.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Tp(o,i)}(t.C_,t.firestore.I_,e,n[0].Zf,r);var i=Ow(t.firestore);return function(t,e,n,r,i,o){var s=t.xt;if(i.length>s.length)throw new gd(yd.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.ut()){if("string"!=typeof c)throw new gd(yd.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Up(t)&&-1!==c.indexOf("/"))throw new gd(yd.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(xd.ot(c));if(!Pd.wt(l))throw new gd(yd.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Pd(l);a.push(tp(e,h))}else{var f=Dw(n,r,c);a.push(f)}}return new Tp(a,o)}(t.C_,t.firestore.I_,i,e,n,r)}function Ok(t,e,n){if(n instanceof $b&&(n=n.d_),"string"==typeof n){if(""===n)throw new gd(yd.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Up(e)&&-1!==n.indexOf("/"))throw new gd(yd.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(xd.ot(n));if(!Pd.wt(r))throw new gd(yd.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return tp(t,new Pd(r))}if(n instanceof hw)return tp(t,n.S_);throw new gd(yd.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+ow(n)+".")}function Sk(t,e){if(!Array.isArray(t)||0===t.length)throw new gd(yd.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new gd(yd.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Tk(t,e,n){if(!n.isEqual(e))throw new gd(yd.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function Ik(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var xk=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Jf.c)(e,t),e.prototype.Wf=function(t){return new md(t)},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return new hw(this.firestore,null,e)},e}(fk),Ak=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),jk=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this).Yf=e,a.ld=e,a.metadata=o,a}return Object(Jf.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.Zf){if(this.v_){var e=new Pk(this.Yf,this.Xf,this.S_,this.Zf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Xf.Uf(this.Zf.bt(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Zf){var n=this.Zf.data().field(vk("DocumentSnapshot.get",t));if(null!==n)return this.Xf.Uf(n,e.serverTimestamps)}},e}(dk),Pk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Jf.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(jk),Nk=function(){function t(t,e,n,r){this.Yf=t,this.Xf=e,this._d=r,this.metadata=new Ak(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._d.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._d.docs.forEach(function(r){t.call(e,new Pk(n.Yf,n.Xf,r.key,r,new Ak(n._d.De.has(r.key),n._d.fromCache),n.query.v_))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._d.xe)throw new gd(yd.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.fd&&this.dd===e||(this.fd=function(t,e){if(t._d.Se.et()){var n=0;return t._d.docChanges.map(function(e){return{type:"added",doc:new Pk(t.Yf,t.Xf,e.doc.key,e.doc,new Ak(t._d.De.has(e.doc.key),t._d.fromCache),t.query.v_),oldIndex:-1,newIndex:n++}})}var r=t._d.Se;return t._d.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new Pk(t.Yf,t.Xf,e.doc.key,e.doc,new Ak(t._d.De.has(e.doc.key),t._d.fromCache),t.query.v_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Rk(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this.dd=e),this.fd},t}();function Rk(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ad()}}function Dk(t,e){return t instanceof jk&&e instanceof jk?t.Yf===e.Yf&&t.S_.isEqual(e.S_)&&(null===t.Zf?null===e.Zf:t.Zf.isEqual(e.Zf))&&t.v_===e.v_:t instanceof Nk&&e instanceof Nk&&t.Yf===e.Yf&&gw(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._d.isEqual(e._d)}var Mk=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Jf.c)(e,t),e.prototype.Wf=function(t){return new md(t)},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return new hw(this.firestore,null,e)},e}(fk);function Lk(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=sw(t,hw);var o=sw(t.firestore,ak),s=Ow(o);return e instanceof $b&&(e=e.d_),Vk(o,[("string"==typeof e||e instanceof Zb?Rw(s,"updateDoc",t.S_,e,n,r):Nw(s,"updateDoc",t.S_,e)).F_(t.S_,pv.exists(!0))])}function Fk(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof $b&&(t=t.d_);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||sk(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(sk(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof hw)c=sw(t.firestore,ak),l=Dp(t.S_.path),u={next:function(e){i[a]&&i[a](Uk(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=sw(t,fw);c=sw(d.firestore,ak),l=d.C_;var p=new Mk(c);u={next:function(t){i[a]&&i[a](new Nk(c,p,d,t))},error:i[a+1],complete:i[a+2]},yk(t.C_)}return function(t,e,n,r){var i=this,o=new Xb(r),s=new sb(e,o,n);return t._s.Ps(function(){return Object(Jf.b)(i,void 0,void 0,function(){var e;return Object(Jf.d)(this,function(n){switch(n.label){case 0:return e=eb,[4,nk(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.i_(),t._s.Ps(function(){return Object(Jf.b)(i,void 0,void 0,function(){var e;return Object(Jf.d)(this,function(n){switch(n.label){case 0:return e=nb,[4,nk(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(uk(c),l,h,u)}function Vk(t,e){return function(t,e){var n=this,r=new By;return t._s.Ps(function(){return Object(Jf.b)(n,void 0,void 0,function(){var n;return Object(Jf.d)(this,function(i){switch(i.label){case 0:return n=mb,[4,ek(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(uk(t),e)}function Uk(t,e,n){var r=n.docs.get(e.S_),i=new Mk(t);return new jk(t,i,e.S_,r,new Ak(n.hasPendingWrites,n.fromCache),e.v_)}var qk=function(){function t(t,e){this.Yf=t,this.wd=e,this.Ed=[],this.Td=!1,this.Id=Ow(t)}return t.prototype.set=function(t,e,n){this.md();var r=Bk(t,this.Yf),i=Ik(r.v_,e,n),o=Sw(this.Id,"WriteBatch.set",r.S_,i,null!==r.v_,n);return this.Ed.push(o.F_(r.S_,pv.Kt())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.md();var o,s=Bk(t,this.Yf);return e instanceof $b&&(e=e.d_),o="string"==typeof e||e instanceof Zb?Rw(this.Id,"WriteBatch.update",s.S_,e,n,r):Nw(this.Id,"WriteBatch.update",s.S_,e),this.Ed.push(o.F_(s.S_,pv.exists(!0))),this},t.prototype.delete=function(t){this.md();var e=Bk(t,this.Yf);return this.Ed=this.Ed.concat(new Av(e.S_,pv.Kt())),this},t.prototype.commit=function(){return this.md(),this.Td=!0,this.Ed.length>0?this.wd(this.Ed):Promise.resolve()},t.prototype.md=function(){if(this.Td)throw new gd(yd.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Bk(t,e){if(t instanceof $b&&(t=t.d_),t.firestore!==e)throw new gd(yd.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Hk=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Yf=e,r}return Object(Jf.c)(e,t),e.prototype.get=function(e){var n=this,r=Bk(e,this.Yf),i=new Mk(this.Yf);return t.prototype.get.call(this,e).then(function(t){return new jk(n.Yf,i,r.S_,t.Zf,new Ak(!1,!1),r.v_)})},e}(function(){function t(t,e){this.Yf=t,this.Ad=e,this.Id=Ow(t)}return t.prototype.get=function(t){var e=this,n=Bk(t,this.Yf),r=new xk(this.Yf);return this.Ad.ef([n.S_]).then(function(t){if(!t||1!==t.length)return ad();var i=t[0];if(i instanceof hp)return new dk(e.Yf,r,n.S_,null,n.v_);if(i instanceof lp)return new dk(e.Yf,r,i.key,i,n.v_);throw ad()})},t.prototype.set=function(t,e,n){var r=Bk(t,this.Yf),i=Ik(r.v_,e,n),o=Sw(this.Id,"Transaction.set",r.S_,i,null!==r.v_,n);return this.Ad.set(r.S_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Bk(t,this.Yf);return e instanceof $b&&(e=e.d_),o="string"==typeof e||e instanceof Zb?Rw(this.Id,"Transaction.update",s.S_,e,n,r):Nw(this.Id,"Transaction.update",s.S_,e),this.Ad.update(s.S_,o),this},t.prototype.delete=function(t){var e=Bk(t,this.Yf);return this.Ad.delete(e.S_),this},t}());function zk(){if("undefined"==typeof Uint8Array)throw new gd(yd.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Wk(){if("undefined"==typeof atob)throw new gd(yd.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Qk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Jf.c)(e,t),e.fromBase64String=function(t){return Wk(),new e(md.fromBase64String(t))},e.fromUint8Array=function(t){return zk(),new e(md.fromUint8Array(t))},e.prototype.toBase64=function(){return Wk(),this.d_.toBase64()},e.prototype.toUint8Array=function(){return zk(),this.d_.toUint8Array()},e.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}($b),Gk=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){hk(t=sw(t,ak));var n=uk(t),r=t.p_(),i=new Yb;return lk(n,i,new Gb(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t.d_,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){hk(t=sw(t,ak));var e=uk(t),n=t.p_(),r=new Yb;return lk(e,r,new Kb(r,n.cacheSizeBytes))}(t.d_)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.R_&&!t.P_)throw new gd(yd.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new By;return t.Bf.Tf(function(){return Object(Jf.b)(e,void 0,void 0,function(){var e;return Object(Jf.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(Jf.b)(this,void 0,void 0,function(){return Object(Jf.d)(this,function(e){switch(e.label){case 0:return Wy.Kn()?[4,Wy.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(Sm(t.I_,t.w_))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t.d_)},t}(),Kk=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Rd=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof td||(i.Pd=e),i}return Object(Jf.c)(e,t),Object.defineProperty(e.prototype,"I_",{get:function(){return this.d_.I_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.d_.V_()),t)).merge,this.d_.g_(t)},e.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=sw(t,lw)).V_();"firestore.googleapis.com"!==r.host&&r.host!==e&&od("Host has been set in both settings() and useEmulator(), emulator host will be used"),t.g_(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this.d_,t,e)},e.prototype.enableNetwork=function(){return function(t){var e=this;return t._s.enqueue(function(){return Object(Jf.b)(e,void 0,void 0,function(){var e,n;return Object(Jf.d)(this,function(r){switch(r.label){case 0:return[4,Jw(t)];case 1:return e=r.sent(),[4,tk(t)];case 2:return n=r.sent(),[2,(e.yo(!0),function(t){var e=cd(t);return e.Nh.delete(0),I_(e)}(n))]}})})})}(uk(sw(this.d_,ak)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t._s.enqueue(function(){return Object(Jf.b)(e,void 0,void 0,function(){var e,n;return Object(Jf.d)(this,function(r){switch(r.label){case 0:return[4,Jw(t)];case 1:return e=r.sent(),[4,tk(t)];case 2:return n=r.sent(),[2,(e.yo(!1),function(t){return Object(Jf.b)(this,void 0,void 0,function(){var e;return Object(Jf.d)(this,function(n){switch(n.label){case 0:return(e=cd(t)).Nh.add(0),[4,x_(e)];case 1:return n.sent(),e.Oh.set("Offline"),[2]}})})}(n))]}})})})}(uk(sw(this.d_,ak)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&nw("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Rd.enableMultiTabIndexedDbPersistence(this):this.Rd.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Rd.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.Pd&&(this.Pd._removeServiceInstance("firestore"),this.Pd._removeServiceInstance("firestore-exp")),this.d_._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new By;return t._s.Ps(function(){return Object(Jf.b)(e,void 0,void 0,function(){var e;return Object(Jf.d)(this,function(r){switch(r.label){case 0:return e=Cb,[4,ek(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(uk(sw(this.d_,ak)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Xb(e);return t._s.Ps(function(){return Object(Jf.b)(n,void 0,void 0,function(){var e;return Object(Jf.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){cd(t).Wh.add(e),e.next()},[4,nk(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.i_(),t._s.Ps(function(){return Object(Jf.b)(n,void 0,void 0,function(){var e;return Object(Jf.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){cd(t).Wh.delete(e)},[4,nk(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(uk(t=sw(t,ak)),sk(e)?e:{next:e})}(this.d_,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.Pd)throw new gd(yd.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Pd},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new uE(this,pw(this.d_,t))}catch(t){throw tE(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new $k(this,vw(this.d_,t))}catch(t){throw tE(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new oE(this,function(t,e){if(t=sw(t,lw),tw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new gd(yd.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new fw(t,null,function(t){return new Np(xd.ct(),t)}(e))}(this.d_,t))}catch(t){throw tE(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new By;return t._s.Ps(function(){return Object(Jf.b)(n,void 0,void 0,function(){var n;return Object(Jf.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return Zw(t).then(function(t){return t.Sh})}(t)];case 1:return n=i.sent(),new Qw(t._s,n,e,r).run(),[2]}})})}),r.promise}(uk(t),function(n){return e(new Hk(t,n))})}(this.d_,function(n){return t(new Xk(e,n))})},e.prototype.batch=function(){var t=this;return uk(this.d_),new Zk(new qk(this.d_,function(e){return Vk(t.d_,e)}))},e.prototype.loadBundle=function(t){throw new gd(yd.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new gd(yd.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}($b),Yk=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Jf.c)(e,t),e.prototype.Wf=function(t){return new Qk(new md(t))},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return $k.yd(e,this.firestore,null)},e}(fk),Xk=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r.Xf=new Yk(e),r}return Object(Jf.c)(e,t),e.prototype.get=function(t){var e=this,n=cE(t);return this.d_.get(n).then(function(t){return new rE(e.Yf,new jk(e.Yf.d_,e.Xf,t.S_,t.Zf,t.metadata,n.v_))})},e.prototype.set=function(t,e,n){var r=cE(t);return n?(ew("Transaction.set",n),this.d_.set(r,e,n)):this.d_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=cE(t);return 2===arguments.length?this.d_.update(s,e):(r=this.d_).update.apply(r,Object(Jf.g)([s,e,n],i)),this},e.prototype.delete=function(t){var e=cE(t);return this.d_.delete(e),this},e}($b),Zk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Jf.c)(e,t),e.prototype.set=function(t,e,n){var r=cE(t);return n?(ew("WriteBatch.set",n),this.d_.set(r,e,n)):this.d_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=cE(t);return 2===arguments.length?this.d_.update(s,e):(r=this.d_).update.apply(r,Object(Jf.g)([s,e,n],i)),this},e.prototype.delete=function(t){var e=cE(t);return this.d_.delete(e),this},e.prototype.commit=function(){return this.d_.commit()},e}($b),Jk=function(t){function e(e,n,r){var i=this;return(i=t.call(this,r)||this).Yf=e,i.Xf=n,i}return Object(Jf.c)(e,t),e.prototype.fromFirestore=function(t,e){var n=new Pk(this.Yf.d_,this.Xf,t.S_,t.Zf,t.metadata,null);return this.d_.fromFirestore(new iE(this.Yf,n),null!=e?e:{})},e.prototype.toFirestore=function(t,e){return e?this.d_.toFirestore(t,e):this.d_.toFirestore(t)},e.gd=function(t,n){var r=e.Vd,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new Yk(t),n),i.set(n,o)),o},e}($b);Jk.Vd=new WeakMap;var $k=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Xf=new Yk(e),r}return Object(Jf.c)(e,t),e.pd=function(t,n,r){if(t.length%2!=0)throw new gd(yd.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.rt()+" has "+t.length);return new e(n,new hw(n.d_,r,new Pd(t)))},e.yd=function(t,n,r){return new e(n,new hw(n.d_,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new uE(this.firestore,this.d_.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new uE(this.firestore,pw(this.d_,t))}catch(t){throw tE(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof $b&&(t=t.d_),t instanceof hw&&yw(this.d_,t)},e.prototype.set=function(t,e){e=ew("DocumentReference.set",e);try{return function(t,e,n){t=sw(t,hw);var r=sw(t.firestore,ak),i=Ik(t.v_,e,n);return Vk(r,[Sw(Ow(r),"setDoc",t.S_,i,null!==t.v_,n).F_(t.S_,pv.Kt())])}(this.d_,t,e)}catch(t){throw tE(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Lk(this.d_,t):Lk.apply(void 0,Object(Jf.g)([this.d_,t,e],n))}catch(t){throw tE(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return Vk(sw((t=this.d_).firestore,ak),[new Av(t.S_,pv.Kt())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=eE(e),i=nE(e,function(e){return new rE(t.firestore,new jk(t.firestore.d_,t.Xf,e.S_,e.Zf,e.metadata,t.d_.v_))});return Fk(this.d_,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=sw(t,hw);var e=sw(t.firestore,ak),n=uk(e),r=new Mk(e);return function(t,e){var n=this,r=new By;return t._s.Ps(function(){return Object(Jf.b)(n,void 0,void 0,function(){var n;return Object(Jf.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Jf.b)(this,void 0,void 0,function(){var r,i;return Object(Jf.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=cd(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Tc.Ho(t,e)})}(t,e)];case 1:return(i=o.sent())instanceof lp?n.resolve(i):i instanceof hp?n.resolve(null):n.reject(new gd(yd.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=tg(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,$w(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t.S_).then(function(n){return new jk(e,r,t.S_,n,new Ak(n instanceof lp&&n.Vt,!0),t.v_)})}(this.d_):"server"===(null==t?void 0:t.source)?function(t){t=sw(t,hw);var e=sw(t.firestore,ak);return rk(uk(e),t.S_,{source:"server"}).then(function(n){return Uk(e,t,n)})}(this.d_):function(t){t=sw(t,hw);var e=sw(t.firestore,ak);return rk(uk(e),t.S_).then(function(n){return Uk(e,t,n)})}(this.d_)).then(function(t){return new rE(e.firestore,new jk(e.firestore.d_,e.Xf,t.S_,t.Zf,t.metadata,e.d_.v_))})},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(Jk.gd(this.firestore,t)))},e}($b);function tE(t,e,n){return t.message=t.message.replace(e,n),t}function eE(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!sk(r))return r}return{}}function nE(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=sk(t[0])?t[0]:sk(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var rE=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return Object(Jf.c)(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new $k(this.Yf,this.d_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this.d_.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this.d_.data(t)},e.prototype.get=function(t,e){return this.d_.get(t,e)},e.prototype.isEqual=function(t){return Dk(this.d_,t.d_)},e}($b),iE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Jf.c)(e,t),e.prototype.data=function(t){return this.d_.data(t)},e}(rE),oE=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Xf=new Yk(e),r}return Object(Jf.c)(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,mk(this.d_,function(t,e,n){var r=e,i=vk("where",t);return new _k(i,r,n)}(t,n,r)))}catch(t){throw tE(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,mk(this.d_,function(t,e){void 0===e&&(e="asc");var n=e,r=vk("orderBy",t);return new bk(r,n)}(t,n)))}catch(t){throw tE(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,mk(this.d_,function(t){return aw("limit",t),new wk("limit",t,"F")}(t)))}catch(t){throw tE(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,mk(this.d_,function(t){return aw("limitToLast",t),new wk("limitToLast",t,"L")}(t)))}catch(t){throw tE(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,mk(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new kk("startAt",t,!0)}).apply(void 0,t)))}catch(t){throw tE(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,mk(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new kk("startAfter",t,!1)}).apply(void 0,t)))}catch(t){throw tE(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,mk(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ek("endBefore",t,!0)}).apply(void 0,t)))}catch(t){throw tE(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,mk(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ek("endAt",t,!1)}).apply(void 0,t)))}catch(t){throw tE(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return gw(this.d_,t.d_)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=sw(t,fw);var e=sw(t.firestore,ak),n=uk(e),r=new Mk(e);return function(t,e){var n=this,r=new By;return t._s.Ps(function(){return Object(Jf.b)(n,void 0,void 0,function(){var n;return Object(Jf.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Jf.b)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(Jf.d)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,qm(t,e,!0)];case 1:return a=u.sent(),r=new hb(e,a.Rc),i=r.fl(a.documents),o=r.wi(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=tg(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,$w(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t.C_).then(function(n){return new Nk(e,r,t,n)})}(this.d_):"server"===(null==t?void 0:t.source)?function(t){t=sw(t,fw);var e=sw(t.firestore,ak),n=uk(e),r=new Mk(e);return ik(n,t.C_,{source:"server"}).then(function(n){return new Nk(e,r,t,n)})}(this.d_):function(t){t=sw(t,fw);var e=sw(t.firestore,ak),n=uk(e),r=new Mk(e);return yk(t.C_),ik(n,t.C_).then(function(n){return new Nk(e,r,t,n)})}(this.d_)).then(function(t){return new aE(e.firestore,new Nk(e.firestore.d_,e.Xf,e.d_,t._d))})},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=eE(e),i=nE(e,function(e){return new aE(t.firestore,new Nk(t.firestore.d_,t.Xf,t.d_,e._d))});return Fk(this.d_,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(Jk.gd(this.firestore,t)))},e}($b),sE=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return Object(Jf.c)(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this.d_.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new iE(this.Yf,this.d_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this.d_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this.d_.newIndex},enumerable:!1,configurable:!0}),e}($b),aE=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return Object(Jf.c)(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new oE(this.Yf,this.d_.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.d_.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.d_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this.d_.docs.map(function(e){return new iE(t.Yf,e)})},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this.d_.docChanges(t).map(function(t){return new sE(e.Yf,t)})},e.prototype.forEach=function(t,e){var n=this;this.d_.forEach(function(r){t.call(e,new iE(n.Yf,r))})},e.prototype.isEqual=function(t){return Dk(this.d_,t.d_)},e}($b),uE=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r.d_=n,r}return Object(Jf.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.d_.parent;return t?new $k(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new $k(this.firestore,void 0===t?vw(this.d_):vw(this.d_,t))}catch(t){throw tE(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=sw(t.firestore,ak),r=vw(t),i=Ik(t.v_,e);return Vk(n,[Sw(Ow(t.firestore),"addDoc",r.S_,i,null!==t.v_,{}).F_(r.S_,pv.exists(!1))]).then(function(){return r})}(this.d_,t).then(function(t){return new $k(e.firestore,t)})},e.prototype.isEqual=function(t){return yw(this.d_,t.d_)},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(Jk.gd(this.firestore,t)))},e}(oE);function cE(t){return t instanceof $b&&(t=t.d_),sw(t,hw)}var lE,hE=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(Zb.bind.apply(Zb,Object(Jf.g)([void 0],e))))||this}return Object(Jf.c)(e,t),e.documentId=function(){return new e(jd.ht().rt())},e.prototype.isEqual=function(t){return t instanceof $b&&(t=t.d_),t instanceof Zb&&this.d_.f_.isEqual(t.f_)},e}($b),fE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Jf.c)(e,t),e.serverTimestamp=function(){var t=new xw("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new Tw("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Aw("arrayUnion",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new jw("arrayRemove",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new Pw("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},e}($b),dE=o("/6Yf"),pE={Firestore:Kk,GeoPoint:mw,Timestamp:Sd,Blob:Qk,Transaction:Xk,WriteBatch:Zk,DocumentReference:$k,DocumentSnapshot:rE,Query:oE,QueryDocumentSnapshot:iE,QuerySnapshot:aE,CollectionReference:uE,FieldPath:hE,FieldValue:fE,setLogLevel:function(t){ed.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function vE(t,e){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jt.b;return new Ce.a(function(n){var r;return null!=e?e.schedule(function(){r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),function(){null!=r&&r()}})}(t,e)}function yE(t,e){return vE(t,e).pipe(Object(oe.a)(function(t){return{payload:t,type:"query"}}))}function gE(t,n){return yE(t,n).pipe(He(void 0),Uu(),Object(oe.a)(function(t){var n=e(t,2),r=n[0],i=n[1],o=i.payload.docChanges(),s=o.map(function(t){return{type:t.type,payload:t}});return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach(function(t,e){var n=o.find(function(e){return e.doc.ref.isEqual(t.ref)}),i=null==r?void 0:r.payload.docs.find(function(e){return e.ref.isEqual(t.ref)});n&&JSON.stringify(n.doc.metadata)===JSON.stringify(t.metadata)||!n&&i&&JSON.stringify(i.metadata)===JSON.stringify(t.metadata)||s.push({type:"modified",payload:{oldIndex:e,newIndex:e,type:"modified",doc:t}})}),s}))}function mE(t,e,n){return gE(t,n).pipe($i(function(t,n){return function(t,e,n){return e.forEach(function(e){n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return _E(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){var n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return _E(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return _E(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(function(t){return t.payload}),e)},[]),Hu(),Object(oe.a)(function(t){return t.map(function(t){return{type:t.type,payload:t}})}))}function _E(t,e,n){for(var r=t.slice(),i=arguments.length,o=new Array(i>3?i-3:0),s=3;s<i;s++)o[s-3]=arguments[s];return r.splice.apply(r,[e,n].concat(o)),r}function bE(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(function(t,e){t.INTERNAL.registerComponent(new dE.a("firestore",function(t){return function(t,e){return new Kk(t,new ak(t,e),new Gk)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},pE)))})(lE=Gu.a),lE.registerVersion("@firebase/firestore","2.1.7");var wE=function(){function n(t,e,r){f(this,n),this.ref=t,this.query=e,this.afs=r}return p(n,[{key:"stateChanges",value:function(t){var n=gE(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(n=n.pipe(Object(oe.a)(function(e){return e.filter(function(e){return t.indexOf(e.type)>-1})}))),n.pipe(He(void 0),Uu(),ne(function(t){var n=e(t,2),r=n[0];return n[1].length>0||!r}),Object(oe.a)(function(t){var n=e(t,2);n[0];return n[1]}),this.afs.keepUnstableUntilFirst)}},{key:"auditTrail",value:function(t){return this.stateChanges(t).pipe($i(function(t,e){return[].concat(i(t),i(e))},[]))}},{key:"snapshotChanges",value:function(t){var e=bE(t);return mE(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}},{key:"valueChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return yE(this.query,this.afs.schedulers.outsideAngular).pipe(Object(oe.a)(function(n){return n.payload.docs.map(function(n){return e.idField?Object.assign(Object.assign({},n.data()),t({},e.idField,n.id)):n.data()})}),this.afs.keepUnstableUntilFirst)}},{key:"get",value:function(t){return Object(Ri.a)(this.query.get(t)).pipe(Object(wu.b)(this.afs.schedulers.insideAngular))}},{key:"add",value:function(t){return this.ref.add(t)}},{key:"doc",value:function(t){return new kE(this.ref.doc(t),this.afs)}}]),n}(),kE=function(){function n(t,e){f(this,n),this.ref=t,this.afs=e}return p(n,[{key:"set",value:function(t,e){return this.ref.set(t,e)}},{key:"update",value:function(t){return this.ref.update(t)}},{key:"delete",value:function(){return this.ref.delete()}},{key:"collection",value:function(t,e){var n=IE(this.ref.collection(t),e),r=n.ref,i=n.query;return new wE(r,i,this.afs)}},{key:"snapshotChanges",value:function(){return vE(this.ref,this.afs.schedulers.outsideAngular).pipe(He(void 0),Uu(),Object(oe.a)(function(t){var n=e(t,2),r=n[0],i=n[1];return i.exists?(null==r?void 0:r.exists)?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}})).pipe(this.afs.keepUnstableUntilFirst)}},{key:"valueChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.snapshotChanges().pipe(Object(oe.a)(function(n){var r=n.payload;return e.idField?Object.assign(Object.assign({},r.data()),t({},e.idField,r.id)):r.data()}))}},{key:"get",value:function(t){return Object(Ri.a)(this.ref.get(t)).pipe(Object(wu.b)(this.afs.schedulers.insideAngular))}}]),n}(),EE=function(){function e(t,n){f(this,e),this.query=t,this.afs=n}return p(e,[{key:"stateChanges",value:function(t){return t&&0!==t.length?gE(this.query,this.afs.schedulers.outsideAngular).pipe(Object(oe.a)(function(e){return e.filter(function(e){return t.indexOf(e.type)>-1})}),ne(function(t){return t.length>0}),this.afs.keepUnstableUntilFirst):gE(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}},{key:"auditTrail",value:function(t){return this.stateChanges(t).pipe($i(function(t,e){return[].concat(i(t),i(e))},[]))}},{key:"snapshotChanges",value:function(t){var e=bE(t);return mE(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}},{key:"valueChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return yE(this.query,this.afs.schedulers.outsideAngular).pipe(Object(oe.a)(function(n){return n.payload.docs.map(function(n){return e.idField?Object.assign(t({},e.idField,n.id),n.data()):n.data()})}),this.afs.keepUnstableUntilFirst)}},{key:"get",value:function(t){return Object(Ri.a)(this.query.get(t)).pipe(Object(wu.b)(this.afs.schedulers.insideAngular))}}]),e}(),CE=new a.r("angularfire2.enableFirestorePersistence"),OE=new a.r("angularfire2.firestore.persistenceSettings"),SE=new a.r("angularfire2.firestore.settings"),TE=new a.r("angularfire2.firestore.use-emulator");function IE(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t};return{query:e(t),ref:t}}var xE,AE,jE,PE=((jE=function(){function t(n,r,o,s,a,u,c,l,h){f(this,t),this.schedulers=new Au.d(u),this.keepUnstableUntilFirst=Object(Au.h)(this.schedulers);var d=Object(Au.g)(n,u,r);!Qu.a.auth&&h&&Object(Au.j)();var p=l,v=e(Object(Au.f)("".concat(d.name,".firestore"),"AngularFirestore",d,function(){var t=u.runOutsideAngular(function(){return d.firestore()});return s&&t.settings(s),p&&t.useEmulator.apply(t,i(p)),o&&!ot(a)?[t,u.runOutsideAngular(function(){try{return Object(Ri.a)(t.enablePersistence(c||void 0).then(function(){return!0},function(){return!1}))}catch(lE){return"undefined"!=typeof console&&console.warn(lE),Object(Kt.a)(!1)}})]:[t,Object(Kt.a)(!1)]},[s,p,o]),2);this.firestore=v[0],this.persistenceEnabled$=v[1]}return p(t,[{key:"collection",value:function(t,e){var n=IE("string"==typeof t?this.firestore.collection(t):t,e),r=n.ref,i=n.query,o=this.schedulers.ngZone.run(function(){return r});return new wE(o,i,this)}},{key:"collectionGroup",value:function(t,e){var n=e||function(t){return t},r=this.firestore.collectionGroup(t);return new EE(n(r),this)}},{key:"doc",value:function(t){var e;e="string"==typeof t?this.firestore.doc(t):t;var n=this.schedulers.ngZone.run(function(){return e});return new kE(n,this)}},{key:"createId",value:function(){return this.firestore.collection("_").doc().id}}]),t}()).\u0275fac=function(t){return new(t||jE)(a.Tb(Au.c),a.Tb(Au.b,8),a.Tb(CE,8),a.Tb(SE,8),a.Tb(a.C),a.Tb(a.A),a.Tb(OE,8),a.Tb(TE,8),a.Tb(ju,8))},jE.\u0275prov=Object(a.Ib)({factory:function(){return new jE(Object(a.Tb)(Au.c),Object(a.Tb)(Au.b,8),Object(a.Tb)(CE,8),Object(a.Tb)(SE,8),Object(a.Tb)(a.C),Object(a.Tb)(a.A),Object(a.Tb)(OE,8),Object(a.Tb)(TE,8),Object(a.Tb)(ju,8))},token:jE,providedIn:"any"}),jE),NE=((AE=function(){function t(){f(this,t)}return p(t,null,[{key:"enablePersistence",value:function(e){return{ngModule:t,providers:[{provide:CE,useValue:!0},{provide:OE,useValue:e}]}}}]),t}()).\u0275mod=a.Kb({type:AE}),AE.\u0275inj=a.Jb({factory:function(t){return new(t||AE)},providers:[PE]}),AE),RE=((xE=function(){function t(e){f(this,t),this.db=e,this.model=new _u}return p(t,[{key:"addTask",value:function(t){if(localStorage.getItem("user"))return this.db.collection("Items").add(t)}},{key:"deleteTask",value:function(t){localStorage.getItem("user")&&this.db.collection("Items").doc(t).delete().then(function(){console.log("Document successfully deleted!")}).catch(function(t){console.error("Error removing document: ",t)})}},{key:"getTasks",value:function(){var t=[];return localStorage.getItem("user")&&this.db.collection("Items").ref.where("userId","==",localStorage.getItem("uid")).get().then(function(e){e.forEach(function(e){t.push({data:e.data(),id:e.id})})}),t}},{key:"check",value:function(t){this.db.collection("Items").doc("/"+t).update({status:!0}).then(function(){console.log("done")}).catch(function(t){console.error("Error writing document: ",t)})}},{key:"uncheck",value:function(t){this.db.collection("Items").doc("/"+t).update({status:!1}).then(function(){console.log("done")}).catch(function(t){console.error("Error writing document: ",t)})}},{key:"updateItem",value:function(t,e){this.db.collection("Items").doc("/"+t).update({item:e}).then(function(){console.log("done")}).catch(function(t){console.error("Error writing document: ",t)})}}]),t}()).\u0275fac=function(t){return new(t||xE)(a.Tb(PE))},xE.\u0275prov=a.Ib({token:xE,factory:xE.\u0275fac,providedIn:"root"}),xE),DE=o("7Hc7");function ME(t){return function(e){return e.lift(new LE(t))}}var LE=function(){function t(e){f(this,t),this.notifier=e}return p(t,[{key:"call",value:function(t,e){var n=new FE(t),r=Object(Yi.c)(this.notifier,new Yi.a(n));return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n}}]),t}(),FE=function(t){v(n,t);var e=g(n);function n(t){var r;return f(this,n),(r=e.call(this,t)).seenValue=!1,r}return p(n,[{key:"notifyNext",value:function(){this.seenValue=!0,this.complete()}},{key:"notifyComplete",value:function(){}}]),n}(Yi.b),VE=o("WMd4");function UE(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jt.a,r=(e=t)instanceof Date&&!isNaN(+e)?+t-n.now():Math.abs(t);return function(t){return t.lift(new BE(r,n))}}var qE,BE=function(){function t(e,n){f(this,t),this.delay=e,this.scheduler=n}return p(t,[{key:"call",value:function(t,e){return e.subscribe(new HE(t,this.delay,this.scheduler))}}]),t}(),HE=function(t){v(n,t);var e=g(n);function n(t,r,i){var o;return f(this,n),(o=e.call(this,t)).delay=r,o.scheduler=i,o.queue=[],o.active=!1,o.errored=!1,o}return p(n,[{key:"_schedule",value:function(t){this.active=!0,this.destination.add(t.schedule(n.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}},{key:"scheduleNotification",value:function(t){if(!0!==this.errored){var e=this.scheduler,n=new zE(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}}},{key:"_next",value:function(t){this.scheduleNotification(VE.a.createNext(t))}},{key:"_error",value:function(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleNotification(VE.a.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(t){for(var e=t.source,n=e.queue,r=t.scheduler,i=t.destination;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){var o=Math.max(0,n[0].time-r.now());this.schedule(t,o)}else this.unsubscribe(),e.active=!1}}]),n}(Zt.a),zE=function t(e,n){f(this,t),this.time=e,this.notification=n},WE=function(){function t(){f(this,t)}return p(t,[{key:"attach",value:function(t){return this._attachedHost=t,t.attach(this)}},{key:"detach",value:function(){var t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}},{key:"isAttached",get:function(){return null!=this._attachedHost}},{key:"setAttachedHost",value:function(t){this._attachedHost=t}}]),t}(),QE=function(t){v(n,t);var e=g(n);function n(t,r,i,o){var s;return f(this,n),(s=e.call(this)).component=t,s.viewContainerRef=r,s.injector=i,s.componentFactoryResolver=o,s}return n}(WE),GE=function(t){v(n,t);var e=g(n);function n(t,r,i){var o;return f(this,n),(o=e.call(this)).templateRef=t,o.viewContainerRef=r,o.context=i,o}return p(n,[{key:"origin",get:function(){return this.templateRef.elementRef}},{key:"attach",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.context;return this.context=e,h(w(n.prototype),"attach",this).call(this,t)}},{key:"detach",value:function(){return this.context=void 0,h(w(n.prototype),"detach",this).call(this)}}]),n}(WE),KE=function(t){v(n,t);var e=g(n);function n(t){var r;return f(this,n),(r=e.call(this)).element=t instanceof a.l?t.nativeElement:t,r}return n}(WE),YE=function(t){v(n,t);var e=g(n);function n(t,r,i,o,s){var a,u;return f(this,n),(u=e.call(this)).outletElement=t,u._componentFactoryResolver=r,u._appRef=i,u._defaultInjector=o,u.attachDomPortal=function(t){var e=t.element,r=u._document.createComment("dom-portal");e.parentNode.insertBefore(r,e),u.outletElement.appendChild(e),h((a=_(u),w(n.prototype)),"setDisposeFn",a).call(a,function(){r.parentNode&&r.parentNode.replaceChild(e,r)})},u._document=s,u}return p(n,[{key:"attachComponentPortal",value:function(t){var e,n=this,r=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);return t.viewContainerRef?(e=t.viewContainerRef.createComponent(r,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(function(){return e.destroy()})):(e=r.create(t.injector||this._defaultInjector),this._appRef.attachView(e.hostView),this.setDisposeFn(function(){n._appRef.detachView(e.hostView),e.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(e)),e}},{key:"attachTemplatePortal",value:function(t){var e=this,n=t.viewContainerRef,r=n.createEmbeddedView(t.templateRef,t.context);return r.rootNodes.forEach(function(t){return e.outletElement.appendChild(t)}),r.detectChanges(),this.setDisposeFn(function(){var t=n.indexOf(r);-1!==t&&n.remove(t)}),r}},{key:"dispose",value:function(){h(w(n.prototype),"dispose",this).call(this),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}},{key:"_getComponentRootNode",value:function(t){return t.hostView.rootNodes[0]}}]),n}(function(){function t(){f(this,t),this._isDisposed=!1,this.attachDomPortal=null}return p(t,[{key:"hasAttached",value:function(){return!!this._attachedPortal}},{key:"attach",value:function(t){return t instanceof QE?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof GE?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof KE?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}},{key:"detach",value:function(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}},{key:"dispose",value:function(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}},{key:"setDisposeFn",value:function(t){this._disposeFn=t}},{key:"_invokeDisposeFn",value:function(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}]),t}()),XE=((qE=function t(){f(this,t)}).\u0275mod=a.Kb({type:qE}),qE.\u0275inj=a.Jb({factory:function(t){return new(t||qE)}}),qE),ZE=o("n6bG");function JE(t,e,n,r){return Object(ZE.a)(n)&&(r=n,n=void 0),r?JE(t,e,n).pipe(Object(oe.a)(function(t){return Object(Li.a)(t)?r.apply(void 0,i(t)):r(t)})):new Ce.a(function(r){$E(t,e,function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},r,n)})}function $E(t,e,n,r,i){var o;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){var s=t;t.addEventListener(e,n,i),o=function(){return s.removeEventListener(e,n,i)}}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){var a=t;t.on(e,n),o=function(){return a.off(e,n)}}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){var u=t;t.addListener(e,n),o=function(){return u.removeListener(e,n)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var c=0,l=t.length;c<l;c++)$E(t[c],e,n,r,i)}r.add(o)}o("3N8a"),o("IjjT");var tC=function(){function t(e){f(this,t),this.durationSelector=e}return p(t,[{key:"call",value:function(t,e){return e.subscribe(new eC(t,this.durationSelector))}}]),t}(),eC=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t)).durationSelector=r,i.hasValue=!1,i}return p(n,[{key:"_next",value:function(t){if(this.value=t,this.hasValue=!0,!this.throttled){var e;try{e=(0,this.durationSelector)(t)}catch(r){return this.destination.error(r)}var n=Object(Yi.c)(e,new Yi.a(this));!n||n.closed?this.clearThrottle():this.add(this.throttled=n)}}},{key:"clearThrottle",value:function(){var t=this.value,e=this.hasValue,n=this.throttled;n&&(this.remove(n),this.throttled=void 0,n.unsubscribe()),e&&(this.value=void 0,this.hasValue=!1,this.destination.next(t))}},{key:"notifyNext",value:function(){this.clearThrottle()}},{key:"notifyComplete",value:function(){this.clearThrottle()}}]),n}(Yi.b),nC=o("Y7HM");function rC(t){var e=t.index,n=t.period,r=t.subscriber;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}function iC(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jt.a;return e=function(){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=-1;return Object(nC.a)(e)?r=Number(e)<1?1:Number(e):Object(Be.a)(e)&&(n=e),Object(Be.a)(n)||(n=Jt.a),new Ce.a(function(e){var i=Object(nC.a)(t)?t:+t-n.now();return n.schedule(rC,i,{index:0,period:r,subscriber:e})})}(t,n)},function(t){return t.lift(new tC(e))}}var oC,sC,aC,uC,cC=((uC=function(){function t(e,n,r){f(this,t),this._ngZone=e,this._platform=n,this._scrolled=new Qt.a,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}return p(t,[{key:"register",value:function(t){var e=this;this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(function(){return e._scrolled.next(t)}))}},{key:"deregister",value:function(t){var e=this.scrollContainers.get(t);e&&(e.unsubscribe(),this.scrollContainers.delete(t))}},{key:"scrolled",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return this._platform.isBrowser?new Ce.a(function(n){t._globalSubscription||t._addGlobalListener();var r=e>0?t._scrolled.pipe(iC(e)).subscribe(n):t._scrolled.subscribe(n);return t._scrolledCount++,function(){r.unsubscribe(),t._scrolledCount--,t._scrolledCount||t._removeGlobalListener()}}):Object(Kt.a)()}},{key:"ngOnDestroy",value:function(){var t=this;this._removeGlobalListener(),this.scrollContainers.forEach(function(e,n){return t.deregister(n)}),this._scrolled.complete()}},{key:"ancestorScrolled",value:function(t,e){var n=this.getAncestorScrollContainers(t);return this.scrolled(e).pipe(ne(function(t){return!t||n.indexOf(t)>-1}))}},{key:"getAncestorScrollContainers",value:function(t){var e=this,n=[];return this.scrollContainers.forEach(function(r,i){e._scrollableContainsElement(i,t)&&n.push(i)}),n}},{key:"_getWindow",value:function(){return this._document.defaultView||window}},{key:"_scrollableContainsElement",value:function(t,e){var n=ve(e),r=t.getElementRef().nativeElement;do{if(n==r)return!0}while(n=n.parentElement);return!1}},{key:"_addGlobalListener",value:function(){var t=this;this._globalSubscription=this._ngZone.runOutsideAngular(function(){return JE(t._getWindow().document,"scroll").subscribe(function(){return t._scrolled.next()})})}},{key:"_removeGlobalListener",value:function(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}]),t}()).\u0275fac=function(t){return new(t||uC)(a.Tb(a.A),a.Tb(we),a.Tb(d,8))},uC.\u0275prov=Object(a.Ib)({factory:function(){return new uC(Object(a.Tb)(a.A),Object(a.Tb)(we),Object(a.Tb)(d,8))},token:uC,providedIn:"root"}),uC),lC=((aC=function(){function t(e,n,r){var i=this;f(this,t),this._platform=e,this._change=new Qt.a,this._changeListener=function(t){i._change.next(t)},this._document=r,n.runOutsideAngular(function(){if(e.isBrowser){var t=i._getWindow();t.addEventListener("resize",i._changeListener),t.addEventListener("orientationchange",i._changeListener)}i.change().subscribe(function(){return i._updateViewportSize()})})}return p(t,[{key:"ngOnDestroy",value:function(){if(this._platform.isBrowser){var t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}},{key:"getViewportSize",value:function(){this._viewportSize||this._updateViewportSize();var t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}},{key:"getViewportRect",value:function(){var t=this.getViewportScrollPosition(),e=this.getViewportSize(),n=e.width,r=e.height;return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+n,height:r,width:n}}},{key:"getViewportScrollPosition",value:function(){if(!this._platform.isBrowser)return{top:0,left:0};var t=this._document,e=this._getWindow(),n=t.documentElement,r=n.getBoundingClientRect();return{top:-r.top||t.body.scrollTop||e.scrollY||n.scrollTop||0,left:-r.left||t.body.scrollLeft||e.scrollX||n.scrollLeft||0}}},{key:"change",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return t>0?this._change.pipe(iC(t)):this._change}},{key:"_getWindow",value:function(){return this._document.defaultView||window}},{key:"_updateViewportSize",value:function(){var t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}]),t}()).\u0275fac=function(t){return new(t||aC)(a.Tb(we),a.Tb(a.A),a.Tb(d,8))},aC.\u0275prov=Object(a.Ib)({factory:function(){return new aC(Object(a.Tb)(we),Object(a.Tb)(a.A),Object(a.Tb)(d,8))},token:aC,providedIn:"root"}),aC),hC=((sC=function t(){f(this,t)}).\u0275mod=a.Kb({type:sC}),sC.\u0275inj=a.Jb({factory:function(t){return new(t||sC)}}),sC),fC=((oC=function t(){f(this,t)}).\u0275mod=a.Kb({type:oC}),oC.\u0275inj=a.Jb({factory:function(t){return new(t||oC)},imports:[[Fe,ke,hC],Fe,hC]}),oC),dC=function(){if(null==ge){if("object"!=typeof document||!document)return ge=!1;if("scrollBehavior"in document.documentElement.style)ge=!0;else{var t=Element.prototype.scrollTo;ge=!!t&&!/\{\s*\[native code\]\s*\}/.test(t.toString())}}return ge}(),pC=function(){function t(e,n){f(this,t),this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}return p(t,[{key:"attach",value:function(){}},{key:"enable",value:function(){if(this._canBeEnabled()){var t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=pe(-this._previousScrollPosition.left),t.style.top=pe(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}},{key:"disable",value:function(){if(this._isEnabled){var t=this._document.documentElement,e=t.style,n=this._document.body.style,r=e.scrollBehavior||"",i=n.scrollBehavior||"";this._isEnabled=!1,e.left=this._previousHTMLStyles.left,e.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),dC&&(e.scrollBehavior=n.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),dC&&(e.scrollBehavior=r,n.scrollBehavior=i)}}},{key:"_canBeEnabled",value:function(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;var t=this._document.body,e=this._viewportRuler.getViewportSize();return t.scrollHeight>e.height||t.scrollWidth>e.width}}]),t}(),vC=function(){function t(e,n,r,i){var o=this;f(this,t),this._scrollDispatcher=e,this._ngZone=n,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=function(){o.disable(),o._overlayRef.hasAttached()&&o._ngZone.run(function(){return o._overlayRef.detach()})}}return p(t,[{key:"attach",value:function(t){this._overlayRef=t}},{key:"enable",value:function(){var t=this;if(!this._scrollSubscription){var e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(function(){var e=t._viewportRuler.getViewportScrollPosition().top;Math.abs(e-t._initialScrollPosition)>t._config.threshold?t._detach():t._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}}},{key:"disable",value:function(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}},{key:"detach",value:function(){this.disable(),this._overlayRef=null}}]),t}(),yC=function(){function t(){f(this,t)}return p(t,[{key:"enable",value:function(){}},{key:"disable",value:function(){}},{key:"attach",value:function(){}}]),t}();function gC(t,e){return e.some(function(e){return t.bottom<e.top||t.top>e.bottom||t.right<e.left||t.left>e.right})}function mC(t,e){return e.some(function(e){return t.top<e.top||t.bottom>e.bottom||t.left<e.left||t.right>e.right})}var _C,bC,wC,kC,EC,CC=function(){function t(e,n,r,i){f(this,t),this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=r,this._config=i,this._scrollSubscription=null}return p(t,[{key:"attach",value:function(t){this._overlayRef=t}},{key:"enable",value:function(){var t=this;this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(function(){if(t._overlayRef.updatePosition(),t._config&&t._config.autoClose){var e=t._overlayRef.overlayElement.getBoundingClientRect(),n=t._viewportRuler.getViewportSize(),r=n.width,i=n.height;gC(e,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(t.disable(),t._ngZone.run(function(){return t._overlayRef.detach()}))}}))}},{key:"disable",value:function(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}},{key:"detach",value:function(){this.disable(),this._overlayRef=null}}]),t}(),OC=((_C=function t(e,n,r,i){var o=this;f(this,t),this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=r,this.noop=function(){return new yC},this.close=function(t){return new vC(o._scrollDispatcher,o._ngZone,o._viewportRuler,t)},this.block=function(){return new pC(o._viewportRuler,o._document)},this.reposition=function(t){return new CC(o._scrollDispatcher,o._viewportRuler,o._ngZone,t)},this._document=i}).\u0275fac=function(t){return new(t||_C)(a.Tb(cC),a.Tb(lC),a.Tb(a.A),a.Tb(d))},_C.\u0275prov=Object(a.Ib)({factory:function(){return new _C(Object(a.Tb)(cC),Object(a.Tb)(lC),Object(a.Tb)(a.A),Object(a.Tb)(d))},token:_C,providedIn:"root"}),_C),SC=function t(e){if(f(this,t),this.scrollStrategy=new yC,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e)for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];void 0!==e[i]&&(this[i]=e[i])}},TC=function t(e,n,r,i,o){f(this,t),this.offsetX=r,this.offsetY=i,this.panelClass=o,this.originX=e.originX,this.originY=e.originY,this.overlayX=n.overlayX,this.overlayY=n.overlayY},IC=function t(e,n){f(this,t),this.connectionPair=e,this.scrollableViewProperties=n},xC=((kC=function(){function t(e){f(this,t),this._attachedOverlays=[],this._document=e}return p(t,[{key:"ngOnDestroy",value:function(){this.detach()}},{key:"add",value:function(t){this.remove(t),this._attachedOverlays.push(t)}},{key:"remove",value:function(t){var e=this._attachedOverlays.indexOf(t);e>-1&&this._attachedOverlays.splice(e,1),0===this._attachedOverlays.length&&this.detach()}}]),t}()).\u0275fac=function(t){return new(t||kC)(a.Tb(d))},kC.\u0275prov=Object(a.Ib)({factory:function(){return new kC(Object(a.Tb)(d))},token:kC,providedIn:"root"}),kC),AC=((wC=function(t){v(n,t);var e=g(n);function n(t){var r;return f(this,n),(r=e.call(this,t))._keydownListener=function(t){for(var e=r._attachedOverlays,n=e.length-1;n>-1;n--)if(e[n]._keydownEvents.observers.length>0){e[n]._keydownEvents.next(t);break}},r}return p(n,[{key:"add",value:function(t){h(w(n.prototype),"add",this).call(this,t),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}},{key:"detach",value:function(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}]),n}(xC)).\u0275fac=function(t){return new(t||wC)(a.Tb(d))},wC.\u0275prov=Object(a.Ib)({factory:function(){return new wC(Object(a.Tb)(d))},token:wC,providedIn:"root"}),wC),jC=((bC=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t))._platform=r,i._cursorStyleIsSet=!1,i._clickListener=function(t){for(var e=t.composedPath?t.composedPath()[0]:t.target,n=i._attachedOverlays.slice(),r=n.length-1;r>-1;r--){var o=n[r];if(!(o._outsidePointerEvents.observers.length<1)&&o.hasAttached()){if(o.overlayElement.contains(e))break;o._outsidePointerEvents.next(t)}}},i}return p(n,[{key:"add",value:function(t){h(w(n.prototype),"add",this).call(this,t),this._isAttached||(this._document.body.addEventListener("click",this._clickListener,!0),this._document.body.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=this._document.body.style.cursor,this._document.body.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0)}},{key:"detach",value:function(){this._isAttached&&(this._document.body.removeEventListener("click",this._clickListener,!0),this._document.body.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}}]),n}(xC)).\u0275fac=function(t){return new(t||bC)(a.Tb(d),a.Tb(we))},bC.\u0275prov=Object(a.Ib)({factory:function(){return new bC(Object(a.Tb)(d),Object(a.Tb)(we))},token:bC,providedIn:"root"}),bC),PC=!("undefined"==typeof window||!window||!window.__karma__&&!window.jasmine),NC=((EC=function(){function t(e,n){f(this,t),this._platform=n,this._document=e}return p(t,[{key:"ngOnDestroy",value:function(){var t=this._containerElement;t&&t.parentNode&&t.parentNode.removeChild(t)}},{key:"getContainerElement",value:function(){return this._containerElement||this._createContainer(),this._containerElement}},{key:"_createContainer",value:function(){if(this._platform.isBrowser||PC)for(var t=this._document.querySelectorAll('.cdk-overlay-container[platform="server"], .cdk-overlay-container[platform="test"]'),e=0;e<t.length;e++)t[e].parentNode.removeChild(t[e]);var n=this._document.createElement("div");n.classList.add("cdk-overlay-container"),PC?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}}]),t}()).\u0275fac=function(t){return new(t||EC)(a.Tb(d),a.Tb(we))},EC.\u0275prov=Object(a.Ib)({factory:function(){return new EC(Object(a.Tb)(d),Object(a.Tb)(we))},token:EC,providedIn:"root"}),EC),RC=function(){function t(e,n,r,i,o,s,a,u,c){var l=this;f(this,t),this._portalOutlet=e,this._host=n,this._pane=r,this._config=i,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=u,this._outsideClickDispatcher=c,this._backdropElement=null,this._backdropClick=new Qt.a,this._attachments=new Qt.a,this._detachments=new Qt.a,this._locationChanges=Gt.a.EMPTY,this._backdropClickHandler=function(t){return l._backdropClick.next(t)},this._keydownEvents=new Qt.a,this._outsidePointerEvents=new Qt.a,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}return p(t,[{key:"overlayElement",get:function(){return this._pane}},{key:"backdropElement",get:function(){return this._backdropElement}},{key:"hostElement",get:function(){return this._host}},{key:"attach",value:function(t){var e=this,n=this._portalOutlet.attach(t);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(ue(1)).subscribe(function(){e.hasAttached()&&e.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(function(){return e.dispose()})),this._outsideClickDispatcher.add(this),n}},{key:"detach",value:function(){if(this.hasAttached()){this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();var t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}}},{key:"dispose",value:function(){var t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,t&&this._detachments.next(),this._detachments.complete()}},{key:"hasAttached",value:function(){return this._portalOutlet.hasAttached()}},{key:"backdropClick",value:function(){return this._backdropClick}},{key:"attachments",value:function(){return this._attachments}},{key:"detachments",value:function(){return this._detachments}},{key:"keydownEvents",value:function(){return this._keydownEvents}},{key:"outsidePointerEvents",value:function(){return this._outsidePointerEvents}},{key:"getConfig",value:function(){return this._config}},{key:"updatePosition",value:function(){this._positionStrategy&&this._positionStrategy.apply()}},{key:"updatePositionStrategy",value:function(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}},{key:"updateSize",value:function(t){this._config=Object.assign(Object.assign({},this._config),t),this._updateElementSize()}},{key:"setDirection",value:function(t){this._config=Object.assign(Object.assign({},this._config),{direction:t}),this._updateElementDirection()}},{key:"addPanelClass",value:function(t){this._pane&&this._toggleClasses(this._pane,t,!0)}},{key:"removePanelClass",value:function(t){this._pane&&this._toggleClasses(this._pane,t,!1)}},{key:"getDirection",value:function(){var t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}},{key:"updateScrollStrategy",value:function(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}},{key:"_updateElementDirection",value:function(){this._host.setAttribute("dir",this.getDirection())}},{key:"_updateElementSize",value:function(){if(this._pane){var t=this._pane.style;t.width=pe(this._config.width),t.height=pe(this._config.height),t.minWidth=pe(this._config.minWidth),t.minHeight=pe(this._config.minHeight),t.maxWidth=pe(this._config.maxWidth),t.maxHeight=pe(this._config.maxHeight)}}},{key:"_togglePointerEvents",value:function(t){this._pane.style.pointerEvents=t?"":"none"}},{key:"_attachBackdrop",value:function(){var t=this;this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(function(){requestAnimationFrame(function(){t._backdropElement&&t._backdropElement.classList.add("cdk-overlay-backdrop-showing")})}):this._backdropElement.classList.add("cdk-overlay-backdrop-showing")}},{key:"_updateStackingOrder",value:function(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}},{key:"detachBackdrop",value:function(){var t,e=this,n=this._backdropElement;if(n){var r=function r(){n&&(n.removeEventListener("click",e._backdropClickHandler),n.removeEventListener("transitionend",r),n.parentNode&&n.parentNode.removeChild(n)),e._backdropElement==n&&(e._backdropElement=null),e._config.backdropClass&&e._toggleClasses(n,e._config.backdropClass,!1),clearTimeout(t)};n.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(function(){n.addEventListener("transitionend",r)}),n.style.pointerEvents="none",t=this._ngZone.runOutsideAngular(function(){return setTimeout(r,500)})}}},{key:"_toggleClasses",value:function(t,e,n){var r=t.classList;de(e).forEach(function(t){t&&(n?r.add(t):r.remove(t))})}},{key:"_detachContentWhenStable",value:function(){var t=this;this._ngZone.runOutsideAngular(function(){var e=t._ngZone.onStable.pipe(ME(Object(bu.a)(t._attachments,t._detachments))).subscribe(function(){t._pane&&t._host&&0!==t._pane.children.length||(t._pane&&t._config.panelClass&&t._toggleClasses(t._pane,t._config.panelClass,!1),t._host&&t._host.parentElement&&(t._previousHostParent=t._host.parentElement,t._previousHostParent.removeChild(t._host)),e.unsubscribe())})})}},{key:"_disposeScrollStrategy",value:function(){var t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}}]),t}(),DC=/([A-Za-z%]+)$/,MC=function(){function t(e,n,r,i,o){f(this,t),this._viewportRuler=n,this._document=r,this._platform=i,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Qt.a,this._resizeSubscription=Gt.a.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}return p(t,[{key:"positions",get:function(){return this._preferredPositions}},{key:"attach",value:function(t){var e=this;this._validatePositions(),t.hostElement.classList.add("cdk-overlay-connected-position-bounding-box"),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(function(){e._isInitialRender=!0,e.apply()})}},{key:"apply",value:function(){if(!this._isDisposed&&this._platform.isBrowser)if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)this.reapplyLastPosition();else{this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();var t,e,n=this._originRect,r=this._overlayRect,i=this._viewportRect,o=[],a=s(this._preferredPositions);try{for(a.s();!(e=a.n()).done;){var u=e.value,c=this._getOriginPoint(n,u),l=this._getOverlayPoint(c,r,u),h=this._getOverlayFit(l,r,i,u);if(h.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(u,c);this._canFitWithFlexibleDimensions(h,l,i)?o.push({position:u,origin:c,overlayRect:r,boundingBoxRect:this._calculateBoundingBoxRect(c,u)}):(!t||t.overlayFit.visibleArea<h.visibleArea)&&(t={overlayFit:h,overlayPoint:l,originPoint:c,position:u,overlayRect:r})}}catch(m){a.e(m)}finally{a.f()}if(o.length){var f,d=null,p=-1,v=s(o);try{for(v.s();!(f=v.n()).done;){var y=f.value,g=y.boundingBoxRect.width*y.boundingBoxRect.height*(y.position.weight||1);g>p&&(p=g,d=y)}}catch(m){v.e(m)}finally{v.f()}return this._isPushed=!1,void this._applyPosition(d.position,d.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(t.position,t.originPoint);this._applyPosition(t.position,t.originPoint)}}},{key:"detach",value:function(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}},{key:"dispose",value:function(){this._isDisposed||(this._boundingBox&&LC(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove("cdk-overlay-connected-position-bounding-box"),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}},{key:"reapplyLastPosition",value:function(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();var t=this._lastPosition||this._preferredPositions[0],e=this._getOriginPoint(this._originRect,t);this._applyPosition(t,e)}}},{key:"withScrollableContainers",value:function(t){return this._scrollables=t,this}},{key:"withPositions",value:function(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}},{key:"withViewportMargin",value:function(t){return this._viewportMargin=t,this}},{key:"withFlexibleDimensions",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._hasFlexibleDimensions=t,this}},{key:"withGrowAfterOpen",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._growAfterOpen=t,this}},{key:"withPush",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._canPush=t,this}},{key:"withLockedPosition",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._positionLocked=t,this}},{key:"setOrigin",value:function(t){return this._origin=t,this}},{key:"withDefaultOffsetX",value:function(t){return this._offsetX=t,this}},{key:"withDefaultOffsetY",value:function(t){return this._offsetY=t,this}},{key:"withTransformOriginOn",value:function(t){return this._transformOriginSelector=t,this}},{key:"_getOriginPoint",value:function(t,e){var n;if("center"==e.originX)n=t.left+t.width/2;else{var r=this._isRtl()?t.right:t.left,i=this._isRtl()?t.left:t.right;n="start"==e.originX?r:i}return{x:n,y:"center"==e.originY?t.top+t.height/2:"top"==e.originY?t.top:t.bottom}}},{key:"_getOverlayPoint",value:function(t,e,n){var r,i;return r="center"==n.overlayX?-e.width/2:"start"===n.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,i="center"==n.overlayY?-e.height/2:"top"==n.overlayY?0:-e.height,{x:t.x+r,y:t.y+i}}},{key:"_getOverlayFit",value:function(t,e,n,r){var i=VC(e),o=t.x,s=t.y,a=this._getOffset(r,"x"),u=this._getOffset(r,"y");a&&(o+=a),u&&(s+=u);var c=0-s,l=s+i.height-n.height,h=this._subtractOverflows(i.width,0-o,o+i.width-n.width),f=this._subtractOverflows(i.height,c,l),d=h*f;return{visibleArea:d,isCompletelyWithinViewport:i.width*i.height===d,fitsInViewportVertically:f===i.height,fitsInViewportHorizontally:h==i.width}}},{key:"_canFitWithFlexibleDimensions",value:function(t,e,n){if(this._hasFlexibleDimensions){var r=n.bottom-e.y,i=n.right-e.x,o=FC(this._overlayRef.getConfig().minHeight),s=FC(this._overlayRef.getConfig().minWidth),a=t.fitsInViewportHorizontally||null!=s&&s<=i;return(t.fitsInViewportVertically||null!=o&&o<=r)&&a}return!1}},{key:"_pushOverlayOnScreen",value:function(t,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};var r,i,o=VC(e),s=this._viewportRect,a=Math.max(t.x+o.width-s.width,0),u=Math.max(t.y+o.height-s.height,0),c=Math.max(s.top-n.top-t.y,0),l=Math.max(s.left-n.left-t.x,0);return r=o.width<=s.width?l||-a:t.x<this._viewportMargin?s.left-n.left-t.x:0,i=o.height<=s.height?c||-u:t.y<this._viewportMargin?s.top-n.top-t.y:0,this._previousPushAmount={x:r,y:i},{x:t.x+r,y:t.y+i}}},{key:"_applyPosition",value:function(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){var n=this._getScrollVisibility(),r=new IC(t,n);this._positionChanges.next(r)}this._isInitialRender=!1}},{key:"_setTransformOrigin",value:function(t){if(this._transformOriginSelector){var e,n=this._boundingBox.querySelectorAll(this._transformOriginSelector),r=t.overlayY;e="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(var i=0;i<n.length;i++)n[i].style.transformOrigin="".concat(e," ").concat(r)}}},{key:"_calculateBoundingBoxRect",value:function(t,e){var n,r,i,o,s,a,u=this._viewportRect,c=this._isRtl();if("top"===e.overlayY)r=t.y,n=u.height-r+this._viewportMargin;else if("bottom"===e.overlayY)i=u.height-t.y+2*this._viewportMargin,n=u.height-i+this._viewportMargin;else{var l=Math.min(u.bottom-t.y+u.top,t.y),h=this._lastBoundingBoxSize.height;n=2*l,r=t.y-l,n>h&&!this._isInitialRender&&!this._growAfterOpen&&(r=t.y-h/2)}if("end"===e.overlayX&&!c||"start"===e.overlayX&&c)a=u.width-t.x+this._viewportMargin,o=t.x-this._viewportMargin;else if("start"===e.overlayX&&!c||"end"===e.overlayX&&c)s=t.x,o=u.right-t.x;else{var f=Math.min(u.right-t.x+u.left,t.x),d=this._lastBoundingBoxSize.width;o=2*f,s=t.x-f,o>d&&!this._isInitialRender&&!this._growAfterOpen&&(s=t.x-d/2)}return{top:r,left:s,bottom:i,right:a,width:o,height:n}}},{key:"_setBoundingBoxStyles",value:function(t,e){var n=this._calculateBoundingBoxRect(t,e);this._isInitialRender||this._growAfterOpen||(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));var r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{var i=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=pe(n.height),r.top=pe(n.top),r.bottom=pe(n.bottom),r.width=pe(n.width),r.left=pe(n.left),r.right=pe(n.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",i&&(r.maxHeight=pe(i)),o&&(r.maxWidth=pe(o))}this._lastBoundingBoxSize=n,LC(this._boundingBox.style,r)}},{key:"_resetBoundingBoxStyles",value:function(){LC(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}},{key:"_resetOverlayElementStyles",value:function(){LC(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}},{key:"_setOverlayElementStyles",value:function(t,e){var n={},r=this._hasExactPosition(),i=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){var s=this._viewportRuler.getViewportScrollPosition();LC(n,this._getExactOverlayY(e,t,s)),LC(n,this._getExactOverlayX(e,t,s))}else n.position="static";var a="",u=this._getOffset(e,"x"),c=this._getOffset(e,"y");u&&(a+="translateX(".concat(u,"px) ")),c&&(a+="translateY(".concat(c,"px)")),n.transform=a.trim(),o.maxHeight&&(r?n.maxHeight=pe(o.maxHeight):i&&(n.maxHeight="")),o.maxWidth&&(r?n.maxWidth=pe(o.maxWidth):i&&(n.maxWidth="")),LC(this._pane.style,n)}},{key:"_getExactOverlayY",value:function(t,e,n){var r={top:"",bottom:""},i=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,n));var o=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return i.y-=o,"bottom"===t.overlayY?r.bottom=this._document.documentElement.clientHeight-(i.y+this._overlayRect.height)+"px":r.top=pe(i.y),r}},{key:"_getExactOverlayX",value:function(t,e,n){var r={left:"",right:""},i=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,n)),"right"===(this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left")?r.right=this._document.documentElement.clientWidth-(i.x+this._overlayRect.width)+"px":r.left=pe(i.x),r}},{key:"_getScrollVisibility",value:function(){var t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map(function(t){return t.getElementRef().nativeElement.getBoundingClientRect()});return{isOriginClipped:mC(t,n),isOriginOutsideView:gC(t,n),isOverlayClipped:mC(e,n),isOverlayOutsideView:gC(e,n)}}},{key:"_subtractOverflows",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.reduce(function(t,e){return t-Math.max(e,0)},t)}},{key:"_getNarrowedViewportRect",value:function(){var t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+t-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}},{key:"_isRtl",value:function(){return"rtl"===this._overlayRef.getDirection()}},{key:"_hasExactPosition",value:function(){return!this._hasFlexibleDimensions||this._isPushed}},{key:"_getOffset",value:function(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}},{key:"_validatePositions",value:function(){}},{key:"_addPanelClasses",value:function(t){var e=this;this._pane&&de(t).forEach(function(t){""!==t&&-1===e._appliedPanelClasses.indexOf(t)&&(e._appliedPanelClasses.push(t),e._pane.classList.add(t))})}},{key:"_clearPanelClasses",value:function(){var t=this;this._pane&&(this._appliedPanelClasses.forEach(function(e){t._pane.classList.remove(e)}),this._appliedPanelClasses=[])}},{key:"_getOriginRect",value:function(){var t=this._origin;if(t instanceof a.l)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();var e=t.width||0,n=t.height||0;return{top:t.y,bottom:t.y+n,left:t.x,right:t.x+e,height:n,width:e}}}]),t}();function LC(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function FC(t){if("number"!=typeof t&&null!=t){var n=e(t.split(DC),2),r=n[0],i=n[1];return i&&"px"!==i?null:parseFloat(r)}return t||null}function VC(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}var UC,qC,BC,HC=function(){function t(e,n,r,i,o,s,a){f(this,t),this._preferredPositions=[],this._positionStrategy=new MC(r,i,o,s,a).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(e,n),this.onPositionChange=this._positionStrategy.positionChanges}return p(t,[{key:"positions",get:function(){return this._preferredPositions}},{key:"attach",value:function(t){this._overlayRef=t,this._positionStrategy.attach(t),this._direction&&(t.setDirection(this._direction),this._direction=null)}},{key:"dispose",value:function(){this._positionStrategy.dispose()}},{key:"detach",value:function(){this._positionStrategy.detach()}},{key:"apply",value:function(){this._positionStrategy.apply()}},{key:"recalculateLastPosition",value:function(){this._positionStrategy.reapplyLastPosition()}},{key:"withScrollableContainers",value:function(t){this._positionStrategy.withScrollableContainers(t)}},{key:"withFallbackPosition",value:function(t,e,n,r){var i=new TC(t,e,n,r);return this._preferredPositions.push(i),this._positionStrategy.withPositions(this._preferredPositions),this}},{key:"withDirection",value:function(t){return this._overlayRef?this._overlayRef.setDirection(t):this._direction=t,this}},{key:"withOffsetX",value:function(t){return this._positionStrategy.withDefaultOffsetX(t),this}},{key:"withOffsetY",value:function(t){return this._positionStrategy.withDefaultOffsetY(t),this}},{key:"withLockedPosition",value:function(t){return this._positionStrategy.withLockedPosition(t),this}},{key:"withPositions",value:function(t){return this._preferredPositions=t.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}},{key:"setOrigin",value:function(t){return this._positionStrategy.setOrigin(t),this}}]),t}(),zC=function(){function t(){f(this,t),this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}return p(t,[{key:"attach",value:function(t){var e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add("cdk-global-overlay-wrapper"),this._isDisposed=!1}},{key:"top",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}},{key:"left",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}},{key:"bottom",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}},{key:"right",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}},{key:"width",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}},{key:"height",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}},{key:"centerHorizontally",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.left(t),this._justifyContent="center",this}},{key:"centerVertically",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.top(t),this._alignItems="center",this}},{key:"apply",value:function(){if(this._overlayRef&&this._overlayRef.hasAttached()){var t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),r=n.width,i=n.height,o=n.maxWidth,s=n.maxHeight,a=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),u=!("100%"!==i&&"100vh"!==i||s&&"100%"!==s&&"100vh"!==s);t.position=this._cssPosition,t.marginLeft=a?"0":this._leftOffset,t.marginTop=u?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,a?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=u?"flex-start":this._alignItems}}},{key:"dispose",value:function(){if(!this._isDisposed&&this._overlayRef){var t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove("cdk-global-overlay-wrapper"),n.justifyContent=n.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}}]),t}(),WC=((qC=function(){function t(e,n,r,i){f(this,t),this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=i}return p(t,[{key:"global",value:function(){return new zC}},{key:"connectedTo",value:function(t,e,n){return new HC(e,n,t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}},{key:"flexibleConnectedTo",value:function(t){return new MC(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}]),t}()).\u0275fac=function(t){return new(t||qC)(a.Tb(lC),a.Tb(d),a.Tb(we),a.Tb(NC))},qC.\u0275prov=Object(a.Ib)({factory:function(){return new qC(Object(a.Tb)(lC),Object(a.Tb)(d),Object(a.Tb)(we),Object(a.Tb)(NC))},token:qC,providedIn:"root"}),qC),QC=0,GC=((UC=function(){function t(e,n,r,i,o,s,a,u,c,l,h){f(this,t),this.scrollStrategies=e,this._overlayContainer=n,this._componentFactoryResolver=r,this._positionBuilder=i,this._keyboardDispatcher=o,this._injector=s,this._ngZone=a,this._document=u,this._directionality=c,this._location=l,this._outsideClickDispatcher=h}return p(t,[{key:"create",value:function(t){var e=this._createHostElement(),n=this._createPaneElement(e),r=this._createPortalOutlet(n),i=new SC(t);return i.direction=i.direction||this._directionality.value,new RC(r,e,n,i,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}},{key:"position",value:function(){return this._positionBuilder}},{key:"_createPaneElement",value:function(t){var e=this._document.createElement("div");return e.id="cdk-overlay-"+QC++,e.classList.add("cdk-overlay-pane"),t.appendChild(e),e}},{key:"_createHostElement",value:function(){var t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}},{key:"_createPortalOutlet",value:function(t){return this._appRef||(this._appRef=this._injector.get(a.g)),new YE(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}]),t}()).\u0275fac=function(t){return new(t||UC)(a.Tb(OC),a.Tb(NC),a.Tb(a.j),a.Tb(WC),a.Tb(AC),a.Tb(a.s),a.Tb(a.A),a.Tb(d),a.Tb(Le),a.Tb(V),a.Tb(jC))},UC.\u0275prov=a.Ib({token:UC,factory:UC.\u0275fac}),UC),KC={provide:new a.r("cdk-connected-overlay-scroll-strategy"),deps:[GC],useFactory:function(t){return function(){return t.scrollStrategies.reposition()}}},YC=((BC=function t(){f(this,t)}).\u0275mod=a.Kb({type:BC}),BC.\u0275inj=a.Jb({factory:function(t){return new(t||BC)},providers:[GC,KC],imports:[[Fe,XE,fC],fC]}),BC),XC=["mat-menu-item",""],ZC=["*"];function JC(t,e){if(1&t){var n=a.Qb();a.Pb(0,"div",0),a.Wb("keydown",function(t){return a.gc(n),a.Yb()._handleKeydown(t)})("click",function(){return a.gc(n),a.Yb().closed.emit("click")})("@transformMenu.start",function(t){return a.gc(n),a.Yb()._onAnimationStart(t)})("@transformMenu.done",function(t){return a.gc(n),a.Yb()._onAnimationDone(t)}),a.Pb(1,"div",1),a.Zb(2),a.Ob(),a.Ob()}if(2&t){var r=a.Yb();a.bc("id",r.panelId)("ngClass",r._classList)("@transformMenu",r._panelAnimationState),a.Db("aria-label",r.ariaLabel||null)("aria-labelledby",r.ariaLabelledby||null)("aria-describedby",r.ariaDescribedby||null)}}var $C,tO,eO,nO,rO,iO,oO={transformMenu:We("transformMenu",[Ye("void",Ke({opacity:0,transform:"scale(0.8)"})),Xe("void => enter",Qe("120ms cubic-bezier(0, 0, 0.2, 1)",Ke({opacity:1,transform:"scale(1)"}))),Xe("* => void",Qe("100ms 25ms linear",Ke({opacity:0})))]),fadeInItems:We("fadeInItems",[Ye("showing",Ke({opacity:1})),Xe("void => *",[Ke({opacity:0}),Qe("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},sO=new a.r("MatMenuContent"),aO=new a.r("MAT_MENU_PANEL"),uO=function(t){return function(t){v(n,t);var e=g(n);function n(){var t;f(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i)))._disableRipple=!1,t}return p(n,[{key:"disableRipple",get:function(){return this._disableRipple},set:function(t){this._disableRipple=fe(t)}}]),n}(t)}(function(t){v(n,t);var e=g(n);function n(){var t;f(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i)))._disabled=!1,t}return p(n,[{key:"disabled",get:function(){return this._disabled},set:function(t){this._disabled=fe(t)}}]),n}(function t(){f(this,t)})),cO=(($C=function(t){v(n,t);var e=g(n);function n(t,r,i,o){var s;return f(this,n),(s=e.call(this))._elementRef=t,s._focusMonitor=i,s._parentMenu=o,s.role="menuitem",s._hovered=new Qt.a,s._focused=new Qt.a,s._highlighted=!1,s._triggersSubmenu=!1,o&&o.addItem&&o.addItem(_(s)),s}return p(n,[{key:"focus",value:function(t,e){this._focusMonitor&&t?this._focusMonitor.focusVia(this._getHostElement(),t,e):this._getHostElement().focus(e),this._focused.next(this)}},{key:"ngAfterViewInit",value:function(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}},{key:"ngOnDestroy",value:function(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}},{key:"_getTabIndex",value:function(){return this.disabled?"-1":"0"}},{key:"_getHostElement",value:function(){return this._elementRef.nativeElement}},{key:"_checkDisabled",value:function(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}},{key:"_handleMouseEnter",value:function(){this._hovered.next(this)}},{key:"getLabel",value:function(){for(var t,e,n=this._elementRef.nativeElement.cloneNode(!0),r=n.querySelectorAll("mat-icon, .material-icons"),i=0;i<r.length;i++){var o=r[i];null===(t=o.parentNode)||void 0===t||t.removeChild(o)}return(null===(e=n.textContent)||void 0===e?void 0:e.trim())||""}}]),n}(uO)).\u0275fac=function(t){return new(t||$C)(a.Mb(a.l),a.Mb(d),a.Mb(Ae),a.Mb(aO,8))},$C.\u0275cmp=a.Gb({type:$C,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(t,e){1&t&&a.Wb("click",function(t){return e._checkDisabled(t)})("mouseenter",function(){return e._handleMouseEnter()}),2&t&&(a.Db("role",e.role)("tabindex",e._getTabIndex())("aria-disabled",e.disabled.toString())("disabled",e.disabled||null),a.Eb("mat-menu-item",!0)("mat-menu-item-highlighted",e._highlighted)("mat-menu-item-submenu-trigger",e._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[a.zb],attrs:XC,ngContentSelectors:ZC,decls:2,vars:2,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"]],template:function(t,e){1&t&&(a.ac(),a.Zb(0),a.Nb(1,"div",0)),2&t&&(a.Cb(1),a.bc("matRippleDisabled",e.disableRipple||e.disabled)("matRippleTrigger",e._getHostElement()))},directives:[ji],encapsulation:2,changeDetection:0}),$C),lO=new a.r("mat-menu-default-options",{providedIn:"root",factory:function(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}}),hO=0,fO=((eO=function(){function t(e,n,r){f(this,t),this._elementRef=e,this._ngZone=n,this._defaultOptions=r,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new a.E,this._tabSubscription=Gt.a.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new Qt.a,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new a.n,this.close=this.closed,this.panelId="mat-menu-panel-"+hO++}return p(t,[{key:"xPosition",get:function(){return this._xPosition},set:function(t){this._xPosition=t,this.setPositionClasses()}},{key:"yPosition",get:function(){return this._yPosition},set:function(t){this._yPosition=t,this.setPositionClasses()}},{key:"overlapTrigger",get:function(){return this._overlapTrigger},set:function(t){this._overlapTrigger=fe(t)}},{key:"hasBackdrop",get:function(){return this._hasBackdrop},set:function(t){this._hasBackdrop=fe(t)}},{key:"panelClass",set:function(t){var e=this,n=this._previousPanelClass;n&&n.length&&n.split(" ").forEach(function(t){e._classList[t]=!1}),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach(function(t){e._classList[t]=!0}),this._elementRef.nativeElement.className="")}},{key:"classList",get:function(){return this.panelClass},set:function(t){this.panelClass=t}},{key:"ngOnInit",value:function(){this.setPositionClasses()}},{key:"ngAfterContentInit",value:function(){var t=this;this._updateDirectDescendants(),this._keyManager=new Oe(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(function(){return t.closed.emit("tab")}),this._directDescendantItems.changes.pipe(He(this._directDescendantItems),Xi(function(t){return Object(bu.a).apply(void 0,i(t.map(function(t){return t._focused})))})).subscribe(function(e){return t._keyManager.updateActiveItem(e)})}},{key:"ngOnDestroy",value:function(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}},{key:"_hovered",value:function(){return this._directDescendantItems.changes.pipe(He(this._directDescendantItems),Xi(function(t){return Object(bu.a).apply(void 0,i(t.map(function(t){return t._hovered})))}))}},{key:"addItem",value:function(t){}},{key:"removeItem",value:function(t){}},{key:"_handleKeydown",value:function(t){var e=t.keyCode,n=this._keyManager;switch(e){case 27:Yt(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:38!==e&&40!==e||n.setFocusOrigin("keyboard"),n.onKeydown(t)}}},{key:"focusFirstItem",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"program";this.lazyContent?this._ngZone.onStable.pipe(ue(1)).subscribe(function(){return t._focusFirstItem(e)}):this._focusFirstItem(e)}},{key:"_focusFirstItem",value:function(t){var e=this._keyManager;if(e.setFocusOrigin(t).setFirstItemActive(),!e.activeItem&&this._directDescendantItems.length)for(var n=this._directDescendantItems.first._getHostElement().parentElement;n;){if("menu"===n.getAttribute("role")){n.focus();break}n=n.parentElement}}},{key:"resetActiveItem",value:function(){this._keyManager.setActiveItem(-1)}},{key:"setElevation",value:function(t){var e="mat-elevation-z".concat(Math.min(4+t,24)),n=Object.keys(this._classList).find(function(t){return t.startsWith("mat-elevation-z")});n&&n!==this._previousElevation||(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[e]=!0,this._previousElevation=e)}},{key:"setPositionClasses",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.xPosition,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.yPosition,n=this._classList;n["mat-menu-before"]="before"===t,n["mat-menu-after"]="after"===t,n["mat-menu-above"]="above"===e,n["mat-menu-below"]="below"===e}},{key:"_startAnimation",value:function(){this._panelAnimationState="enter"}},{key:"_resetAnimation",value:function(){this._panelAnimationState="void"}},{key:"_onAnimationDone",value:function(t){this._animationDone.next(t),this._isAnimating=!1}},{key:"_onAnimationStart",value:function(t){this._isAnimating=!0,"enter"===t.toState&&0===this._keyManager.activeItemIndex&&(t.element.scrollTop=0)}},{key:"_updateDirectDescendants",value:function(){var t=this;this._allItems.changes.pipe(He(this._allItems)).subscribe(function(e){t._directDescendantItems.reset(e.filter(function(e){return e._parentMenu===t})),t._directDescendantItems.notifyOnChanges()})}}]),t}()).\u0275fac=function(t){return new(t||eO)(a.Mb(a.l),a.Mb(a.A),a.Mb(lO))},eO.\u0275dir=a.Hb({type:eO,contentQueries:function(t,e,n){var r;1&t&&(a.Fb(n,sO,1),a.Fb(n,cO,1),a.Fb(n,cO,0)),2&t&&(a.ec(r=a.Xb())&&(e.lazyContent=r.first),a.ec(r=a.Xb())&&(e._allItems=r),a.ec(r=a.Xb())&&(e.items=r))},viewQuery:function(t,e){var n;1&t&&a.oc(a.M,1),2&t&&a.ec(n=a.Xb())&&(e.templateRef=n.first)},inputs:{backdropClass:"backdropClass",xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"]},outputs:{closed:"closed",close:"close"}}),eO),dO=((tO=function(t){v(n,t);var e=g(n);function n(t,r,i){return f(this,n),e.call(this,t,r,i)}return n}(fO)).\u0275fac=function(t){return new(t||tO)(a.Mb(a.l),a.Mb(a.A),a.Mb(lO))},tO.\u0275cmp=a.Gb({type:tO,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(t,e){2&t&&a.Db("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[a.Bb([{provide:aO,useExisting:tO}]),a.zb],ngContentSelectors:ZC,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(t,e){1&t&&(a.ac(),a.kc(0,JC,3,6,"ng-template"))},directives:[X],styles:['mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]{pointer-events:none}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}.mat-menu-item-submenu-trigger::after{width:0;height:0;border-style:solid;border-width:5px 0 5px 5px;border-color:transparent transparent transparent currentColor;content:"";display:inline-block;position:absolute;top:50%;right:16px;transform:translateY(-50%)}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}[dir=rtl] .mat-menu-item-submenu-trigger::after{right:auto;left:16px;transform:rotateY(180deg) translateY(-50%)}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n'],encapsulation:2,data:{animation:[oO.transformMenu,oO.fadeInItems]},changeDetection:0}),tO),pO=new a.r("mat-menu-scroll-strategy"),vO={provide:pO,deps:[GC],useFactory:function(t){return function(){return t.scrollStrategies.reposition()}}},yO=Ee({passive:!0}),gO=((iO=function(){function t(e,n,r,i,o,s,u,c){var l=this;f(this,t),this._overlay=e,this._element=n,this._viewContainerRef=r,this._menuItemInstance=s,this._dir=u,this._focusMonitor=c,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=Gt.a.EMPTY,this._hoverSubscription=Gt.a.EMPTY,this._menuCloseSubscription=Gt.a.EMPTY,this._handleTouchStart=function(){return l._openedBy="touch"},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new a.n,this.onMenuOpen=this.menuOpened,this.menuClosed=new a.n,this.onMenuClose=this.menuClosed,this._scrollStrategy=i,this._parentMaterialMenu=o instanceof fO?o:void 0,n.nativeElement.addEventListener("touchstart",this._handleTouchStart,yO),s&&(s._triggersSubmenu=this.triggersSubmenu())}return p(t,[{key:"_deprecatedMatMenuTriggerFor",get:function(){return this.menu},set:function(t){this.menu=t}},{key:"menu",get:function(){return this._menu},set:function(t){var e=this;t!==this._menu&&(this._menu=t,this._menuCloseSubscription.unsubscribe(),t&&(this._menuCloseSubscription=t.close.subscribe(function(t){e._destroyMenu(t),"click"!==t&&"tab"!==t||!e._parentMaterialMenu||e._parentMaterialMenu.closed.emit(t)})))}},{key:"ngAfterContentInit",value:function(){this._checkMenu(),this._handleHover()}},{key:"ngOnDestroy",value:function(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,yO),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}},{key:"menuOpen",get:function(){return this._menuOpen}},{key:"dir",get:function(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}},{key:"triggersSubmenu",value:function(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}},{key:"toggleMenu",value:function(){return this._menuOpen?this.closeMenu():this.openMenu()}},{key:"openMenu",value:function(){var t=this;if(!this._menuOpen){this._checkMenu();var e=this._createOverlay(),n=e.getConfig();this._setPosition(n.positionStrategy),n.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,e.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(function(){return t.closeMenu()}),this._initMenu(),this.menu instanceof fO&&this.menu._startAnimation()}}},{key:"closeMenu",value:function(){this.menu.close.emit()}},{key:"focus",value:function(t,e){this._focusMonitor&&t?this._focusMonitor.focusVia(this._element,t,e):this._element.nativeElement.focus(e)}},{key:"_destroyMenu",value:function(t){var e=this;if(this._overlayRef&&this.menuOpen){var n=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),!this.restoreFocus||"keydown"!==t&&this._openedBy&&this.triggersSubmenu()||this.focus(this._openedBy),this._openedBy=void 0,n instanceof fO?(n._resetAnimation(),n.lazyContent?n._animationDone.pipe(ne(function(t){return"void"===t.toState}),ue(1),ME(n.lazyContent._attached)).subscribe({next:function(){return n.lazyContent.detach()},complete:function(){return e._setIsMenuOpen(!1)}}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),n.lazyContent&&n.lazyContent.detach())}}},{key:"_initMenu",value:function(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this.menu.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}},{key:"_setMenuElevation",value:function(){if(this.menu.setElevation){for(var t=0,e=this.menu.parentMenu;e;)t++,e=e.parentMenu;this.menu.setElevation(t)}}},{key:"_setIsMenuOpen",value:function(t){this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&(this._menuItemInstance._highlighted=t)}},{key:"_checkMenu",value:function(){}},{key:"_createOverlay",value:function(){if(!this._overlayRef){var t=this._getOverlayConfig();this._subscribeToPositions(t.positionStrategy),this._overlayRef=this._overlay.create(t),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}},{key:"_getOverlayConfig",value:function(){return new SC({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}},{key:"_subscribeToPositions",value:function(t){var e=this;this.menu.setPositionClasses&&t.positionChanges.subscribe(function(t){e.menu.setPositionClasses("start"===t.connectionPair.overlayX?"after":"before","top"===t.connectionPair.overlayY?"below":"above")})}},{key:"_setPosition",value:function(t){var n=e("before"===this.menu.xPosition?["end","start"]:["start","end"],2),r=n[0],i=n[1],o=e("above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],2),s=o[0],a=o[1],u=s,c=a,l=r,h=i,f=0;this.triggersSubmenu()?(h=r="before"===this.menu.xPosition?"start":"end",i=l="end"===r?"start":"end",f="bottom"===s?8:-8):this.menu.overlapTrigger||(u="top"===s?"bottom":"top",c="top"===a?"bottom":"top"),t.withPositions([{originX:r,originY:u,overlayX:l,overlayY:s,offsetY:f},{originX:i,originY:u,overlayX:h,overlayY:s,offsetY:f},{originX:r,originY:c,overlayX:l,overlayY:a,offsetY:-f},{originX:i,originY:c,overlayX:h,overlayY:a,offsetY:-f}])}},{key:"_menuClosingActions",value:function(){var t=this,e=this._overlayRef.backdropClick(),n=this._overlayRef.detachments(),r=this._parentMaterialMenu?this._parentMaterialMenu.closed:Object(Kt.a)(),i=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(ne(function(e){return e!==t._menuItemInstance}),ne(function(){return t._menuOpen})):Object(Kt.a)();return Object(bu.a)(e,r,i,n)}},{key:"_handleMousedown",value:function(t){Se(t)||(this._openedBy=0===t.button?"mouse":void 0,this.triggersSubmenu()&&t.preventDefault())}},{key:"_handleKeydown",value:function(t){var e=t.keyCode;13!==e&&32!==e||(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===e&&"ltr"===this.dir||37===e&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}},{key:"_handleClick",value:function(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}},{key:"_handleHover",value:function(){var t=this;this.triggersSubmenu()&&this._parentMaterialMenu&&(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(ne(function(e){return e===t._menuItemInstance&&!e.disabled}),UE(0,DE.b)).subscribe(function(){t._openedBy="mouse",t.menu instanceof fO&&t.menu._isAnimating?t.menu._animationDone.pipe(ue(1),UE(0,DE.b),ME(t._parentMaterialMenu._hovered())).subscribe(function(){return t.openMenu()}):t.openMenu()}))}},{key:"_getPortal",value:function(){return this._portal&&this._portal.templateRef===this.menu.templateRef||(this._portal=new GE(this.menu.templateRef,this._viewContainerRef)),this._portal}}]),t}()).\u0275fac=function(t){return new(t||iO)(a.Mb(GC),a.Mb(a.l),a.Mb(a.R),a.Mb(pO),a.Mb(aO,8),a.Mb(cO,10),a.Mb(Le,8),a.Mb(Ae))},iO.\u0275dir=a.Hb({type:iO,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:["aria-haspopup","true",1,"mat-menu-trigger"],hostVars:2,hostBindings:function(t,e){1&t&&a.Wb("mousedown",function(t){return e._handleMousedown(t)})("keydown",function(t){return e._handleKeydown(t)})("click",function(t){return e._handleClick(t)}),2&t&&a.Db("aria-expanded",e.menuOpen||null)("aria-controls",e.menuOpen?e.menu.panelId:null)},inputs:{restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"],_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"},exportAs:["matMenuTrigger"]}),iO),mO=((rO=function t(){f(this,t)}).\u0275mod=a.Kb({type:rO}),rO.\u0275inj=a.Jb({factory:function(t){return new(t||rO)},providers:[vO],imports:[bi]}),rO),_O=((nO=function t(){f(this,t)}).\u0275mod=a.Kb({type:nO}),nO.\u0275inj=a.Jb({factory:function(t){return new(t||nO)},providers:[vO],imports:[[it,bi,Pi,YC,mO],hC,bi,mO]}),nO),bO=o("XoHu");function wO(t,e){return new Ce.a(function(n){var r=t.length;if(0!==r)for(var i=new Array(r),o=0,s=0,a=function(a){var u=Object(Ri.a)(t[a]),c=!1;n.add(u.subscribe({next:function(t){c||(c=!0,s++),i[a]=t},error:function(t){return n.error(t)},complete:function(){++o!==r&&c||(s===r&&n.next(e?e.reduce(function(t,e,n){return t[e]=i[n],t},{}):i),n.complete())}}))},u=0;u<r;u++)a(u);else n.complete()})}var kO,EO,CO=new a.r("NgValueAccessor"),OO={provide:CO,useExisting:Object(a.V)(function(){return SO}),multi:!0},SO=((kO=function(){function t(e,n){f(this,t),this._renderer=e,this._elementRef=n,this.onChange=function(t){},this.onTouched=function(){}}return p(t,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}},{key:"registerOnChange",value:function(t){this.onChange=t}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}]),t}()).\u0275fac=function(t){return new(t||kO)(a.Mb(a.F),a.Mb(a.l))},kO.\u0275dir=a.Hb({type:kO,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&a.Wb("change",function(t){return e.onChange(t.target.checked)})("blur",function(){return e.onTouched()})},features:[a.Bb([OO])]}),kO),TO={provide:CO,useExisting:Object(a.V)(function(){return xO}),multi:!0},IO=new a.r("CompositionEventMode"),xO=((EO=function(){function t(e,n,r){var i;f(this,t),this._renderer=e,this._elementRef=n,this._compositionMode=r,this.onChange=function(t){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(i=c()?c().getUserAgent():"",!/android (\d+)/.test(i.toLowerCase())))}return p(t,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}},{key:"registerOnChange",value:function(t){this.onChange=t}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_handleInput",value:function(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}},{key:"_compositionStart",value:function(){this._composing=!0}},{key:"_compositionEnd",value:function(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}]),t}()).\u0275fac=function(t){return new(t||EO)(a.Mb(a.F),a.Mb(a.l),a.Mb(IO,8))},EO.\u0275dir=a.Hb({type:EO,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&a.Wb("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[a.Bb([TO])]}),EO);function AO(t){return null==t||0===t.length}function jO(t){return null!=t&&"number"==typeof t.length}var PO=new a.r("NgValidators"),NO=new a.r("NgAsyncValidators"),RO=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,DO=function(){function t(){f(this,t)}return p(t,null,[{key:"min",value:function(t){return function(e){if(AO(e.value)||AO(t))return null;var n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}},{key:"max",value:function(t){return function(e){if(AO(e.value)||AO(t))return null;var n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}},{key:"required",value:function(t){return AO(t.value)?{required:!0}:null}},{key:"requiredTrue",value:function(t){return!0===t.value?null:{required:!0}}},{key:"email",value:function(t){return AO(t.value)||RO.test(t.value)?null:{email:!0}}},{key:"minLength",value:function(t){return function(e){return AO(e.value)||!jO(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}}},{key:"maxLength",value:function(t){return function(e){return jO(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}}},{key:"pattern",value:function(e){return e?("string"==typeof e?(r="","^"!==e.charAt(0)&&(r+="^"),r+=e,"$"!==e.charAt(e.length-1)&&(r+="$"),n=new RegExp(r)):(r=e.toString(),n=e),function(t){if(AO(t.value))return null;var e=t.value;return n.test(e)?null:{pattern:{requiredPattern:r,actualValue:e}}}):t.nullValidator;var n,r}},{key:"nullValidator",value:function(t){return null}},{key:"compose",value:function(t){if(!t)return null;var e=t.filter(MO);return 0==e.length?null:function(t){return FO(VO(t,e))}}},{key:"composeAsync",value:function(t){if(!t)return null;var e=t.filter(MO);return 0==e.length?null:function(t){return function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(1===e.length){var r=e[0];if(Object(Li.a)(r))return wO(r,null);if(Object(bO.a)(r)&&Object.getPrototypeOf(r)===Object.prototype){var o=Object.keys(r);return wO(o.map(function(t){return r[t]}),o)}}if("function"==typeof e[e.length-1]){var s=e.pop();return wO(e=1===e.length&&Object(Li.a)(e[0])?e[0]:e,null).pipe(Object(oe.a)(function(t){return s.apply(void 0,i(t))}))}return wO(e,null)}(VO(t,e).map(LO)).pipe(Object(oe.a)(FO))}}}]),t}();function MO(t){return null!=t}function LO(t){var e=Object(a.tb)(t)?Object(Ri.a)(t):t;return Object(a.sb)(e),e}function FO(t){var e={};return t.forEach(function(t){e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function VO(t,e){return e.map(function(e){return e(t)})}function UO(t){return t.map(function(t){return function(t){return!t.validate}(t)?t:function(e){return t.validate(e)}})}function qO(t){return null!=t?DO.compose(UO(t)):null}function BO(t){return null!=t?DO.composeAsync(UO(t)):null}function HO(t,e){return null===t?[e]:Array.isArray(t)?[].concat(i(t),[e]):[t,e]}var zO,WO,QO,GO,KO,YO,XO,ZO,JO,$O=((WO=function(){function t(){f(this,t),this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}return p(t,[{key:"value",get:function(){return this.control?this.control.value:null}},{key:"valid",get:function(){return this.control?this.control.valid:null}},{key:"invalid",get:function(){return this.control?this.control.invalid:null}},{key:"pending",get:function(){return this.control?this.control.pending:null}},{key:"disabled",get:function(){return this.control?this.control.disabled:null}},{key:"enabled",get:function(){return this.control?this.control.enabled:null}},{key:"errors",get:function(){return this.control?this.control.errors:null}},{key:"pristine",get:function(){return this.control?this.control.pristine:null}},{key:"dirty",get:function(){return this.control?this.control.dirty:null}},{key:"touched",get:function(){return this.control?this.control.touched:null}},{key:"status",get:function(){return this.control?this.control.status:null}},{key:"untouched",get:function(){return this.control?this.control.untouched:null}},{key:"statusChanges",get:function(){return this.control?this.control.statusChanges:null}},{key:"valueChanges",get:function(){return this.control?this.control.valueChanges:null}},{key:"path",get:function(){return null}},{key:"_setValidators",value:function(t){this._rawValidators=t||[],this._composedValidatorFn=qO(this._rawValidators)}},{key:"_setAsyncValidators",value:function(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=BO(this._rawAsyncValidators)}},{key:"validator",get:function(){return this._composedValidatorFn||null}},{key:"asyncValidator",get:function(){return this._composedAsyncValidatorFn||null}},{key:"_registerOnDestroy",value:function(t){this._onDestroyCallbacks.push(t)}},{key:"_invokeOnDestroyCallbacks",value:function(){this._onDestroyCallbacks.forEach(function(t){return t()}),this._onDestroyCallbacks=[]}},{key:"reset",value:function(t){this.control&&this.control.reset(t)}},{key:"hasError",value:function(t,e){return!!this.control&&this.control.hasError(t,e)}},{key:"getError",value:function(t,e){return this.control?this.control.getError(t,e):null}}]),t}()).\u0275fac=function(t){return new(t||WO)},WO.\u0275dir=a.Hb({type:WO}),WO),tS=((zO=function(t){v(n,t);var e=g(n);function n(){return f(this,n),e.apply(this,arguments)}return p(n,[{key:"formDirective",get:function(){return null}},{key:"path",get:function(){return null}}]),n}($O)).\u0275fac=function(t){return eS(t||zO)},zO.\u0275dir=a.Hb({type:zO,features:[a.zb]}),zO),eS=a.Rb(tS),nS=function(t){v(n,t);var e=g(n);function n(){var t;return f(this,n),(t=e.apply(this,arguments))._parent=null,t.name=null,t.valueAccessor=null,t}return n}($O),rS=((QO=function(t){v(n,t);var e=g(n);function n(t){return f(this,n),e.call(this,t)}return n}(function(){function t(e){f(this,t),this._cd=e}return p(t,[{key:"is",value:function(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}]),t}())).\u0275fac=function(t){return new(t||QO)(a.Mb(nS,2))},QO.\u0275dir=a.Hb({type:QO,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&a.Eb("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[a.zb]}),QO),iS={provide:CO,useExisting:Object(a.V)(function(){return oS}),multi:!0},oS=((GO=function(){function t(e,n){f(this,t),this._renderer=e,this._elementRef=n,this.onChange=function(t){},this.onTouched=function(){}}return p(t,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}},{key:"registerOnChange",value:function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}]),t}()).\u0275fac=function(t){return new(t||GO)(a.Mb(a.F),a.Mb(a.l))},GO.\u0275dir=a.Hb({type:GO,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&a.Wb("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[a.Bb([iS])]}),GO),sS={provide:CO,useExisting:Object(a.V)(function(){return uS}),multi:!0},aS=((YO=function(){function t(){f(this,t),this._accessors=[]}return p(t,[{key:"add",value:function(t,e){this._accessors.push([t,e])}},{key:"remove",value:function(t){for(var e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}},{key:"select",value:function(t){var e=this;this._accessors.forEach(function(n){e._isSameGroup(n,t)&&n[1]!==t&&n[1].fireUncheck(t.value)})}},{key:"_isSameGroup",value:function(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}]),t}()).\u0275fac=function(t){return new(t||YO)},YO.\u0275prov=a.Ib({token:YO,factory:YO.\u0275fac}),YO),uS=((KO=function(){function t(e,n,r,i){f(this,t),this._renderer=e,this._elementRef=n,this._registry=r,this._injector=i,this.onChange=function(){},this.onTouched=function(){}}return p(t,[{key:"ngOnInit",value:function(){this._control=this._injector.get(nS),this._checkName(),this._registry.add(this._control,this)}},{key:"ngOnDestroy",value:function(){this._registry.remove(this)}},{key:"writeValue",value:function(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}},{key:"registerOnChange",value:function(t){var e=this;this._fn=t,this.onChange=function(){t(e.value),e._registry.select(e)}}},{key:"fireUncheck",value:function(t){this.writeValue(t)}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_checkName",value:function(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}]),t}()).\u0275fac=function(t){return new(t||KO)(a.Mb(a.F),a.Mb(a.l),a.Mb(aS),a.Mb(a.s))},KO.\u0275dir=a.Hb({type:KO,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&a.Wb("change",function(){return e.onChange()})("blur",function(){return e.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[a.Bb([sS])]}),KO),cS={provide:CO,useExisting:Object(a.V)(function(){return lS}),multi:!0},lS=((XO=function(){function t(e,n){f(this,t),this._renderer=e,this._elementRef=n,this.onChange=function(t){},this.onTouched=function(){}}return p(t,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}},{key:"registerOnChange",value:function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}]),t}()).\u0275fac=function(t){return new(t||XO)(a.Mb(a.F),a.Mb(a.l))},XO.\u0275dir=a.Hb({type:XO,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&a.Wb("change",function(t){return e.onChange(t.target.value)})("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[a.Bb([cS])]}),XO),hS={provide:CO,useExisting:Object(a.V)(function(){return fS}),multi:!0},fS=((ZO=function(){function t(e,n){f(this,t),this._renderer=e,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=function(t){},this.onTouched=function(){},this._compareWith=Object.is}return p(t,[{key:"compareWith",set:function(t){this._compareWith=t}},{key:"writeValue",value:function(t){this.value=t;var e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);var n=function(t,e){return null==t?"".concat(e):(e&&"object"==typeof e&&(e="Object"),"".concat(t,": ").concat(e).slice(0,50))}(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}},{key:"registerOnChange",value:function(t){var e=this;this.onChange=function(n){e.value=e._getOptionValue(n),t(e.value)}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_registerOption",value:function(){return(this._idCounter++).toString()}},{key:"_getOptionId",value:function(t){for(var e=0,n=Array.from(this._optionMap.keys());e<n.length;e++){var r=n[e];if(this._compareWith(this._optionMap.get(r),t))return r}return null}},{key:"_getOptionValue",value:function(t){var e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}]),t}()).\u0275fac=function(t){return new(t||ZO)(a.Mb(a.F),a.Mb(a.l))},ZO.\u0275dir=a.Hb({type:ZO,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&a.Wb("change",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[a.Bb([hS])]}),ZO),dS={provide:CO,useExisting:Object(a.V)(function(){return pS}),multi:!0},pS=((JO=function(){function t(e,n){f(this,t),this._renderer=e,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=function(t){},this.onTouched=function(){},this._compareWith=Object.is}return p(t,[{key:"compareWith",set:function(t){this._compareWith=t}},{key:"writeValue",value:function(t){var e,n=this;if(this.value=t,Array.isArray(t)){var r=t.map(function(t){return n._getOptionId(t)});e=function(t,e){t._setSelected(r.indexOf(e.toString())>-1)}}else e=function(t,e){t._setSelected(!1)};this._optionMap.forEach(e)}},{key:"registerOnChange",value:function(t){var e=this;this.onChange=function(n){var r=[];if(void 0!==n.selectedOptions)for(var i=n.selectedOptions,o=0;o<i.length;o++){var s=i.item(o),a=e._getOptionValue(s.value);r.push(a)}else for(var u=n.options,c=0;c<u.length;c++){var l=u.item(c);if(l.selected){var h=e._getOptionValue(l.value);r.push(h)}}e.value=r,t(r)}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_registerOption",value:function(t){var e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}},{key:"_getOptionId",value:function(t){for(var e=0,n=Array.from(this._optionMap.keys());e<n.length;e++){var r=n[e];if(this._compareWith(this._optionMap.get(r)._value,t))return r}return null}},{key:"_getOptionValue",value:function(t){var e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}]),t}()).\u0275fac=function(t){return new(t||JO)(a.Mb(a.F),a.Mb(a.l))},JO.\u0275dir=a.Hb({type:JO,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&a.Wb("change",function(t){return e.onChange(t.target)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[a.Bb([dS])]}),JO);function vS(t,e){t.forEach(function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function yS(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}var gS=[SO,lS,oS,fS,pS,uS];function mS(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}function _S(t){return(ES(t)?t.validators:t)||null}function bS(t){return Array.isArray(t)?qO(t):t||null}function wS(t,e){return(ES(e)?e.asyncValidators:t)||null}function kS(t){return Array.isArray(t)?BO(t):t||null}function ES(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}var CS,OS,SS,TS=function(){function t(e,n){f(this,t),this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=function(){},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=n,this._composedValidatorFn=bS(this._rawValidators),this._composedAsyncValidatorFn=kS(this._rawAsyncValidators)}return p(t,[{key:"validator",get:function(){return this._composedValidatorFn},set:function(t){this._rawValidators=this._composedValidatorFn=t}},{key:"asyncValidator",get:function(){return this._composedAsyncValidatorFn},set:function(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}},{key:"parent",get:function(){return this._parent}},{key:"valid",get:function(){return"VALID"===this.status}},{key:"invalid",get:function(){return"INVALID"===this.status}},{key:"pending",get:function(){return"PENDING"==this.status}},{key:"disabled",get:function(){return"DISABLED"===this.status}},{key:"enabled",get:function(){return"DISABLED"!==this.status}},{key:"dirty",get:function(){return!this.pristine}},{key:"untouched",get:function(){return!this.touched}},{key:"updateOn",get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}},{key:"setValidators",value:function(t){this._rawValidators=t,this._composedValidatorFn=bS(t)}},{key:"setAsyncValidators",value:function(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=kS(t)}},{key:"clearValidators",value:function(){this.validator=null}},{key:"clearAsyncValidators",value:function(){this.asyncValidator=null}},{key:"markAsTouched",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}},{key:"markAllAsTouched",value:function(){this.markAsTouched({onlySelf:!0}),this._forEachChild(function(t){return t.markAllAsTouched()})}},{key:"markAsUntouched",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!1,this._pendingTouched=!1,this._forEachChild(function(t){t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}},{key:"markAsDirty",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}},{key:"markAsPristine",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!0,this._pendingDirty=!1,this._forEachChild(function(t){t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}},{key:"markAsPending",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.status="PENDING",!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}},{key:"disable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._parentMarkedDirty(t.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild(function(e){e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(function(t){return t(!0)})}},{key:"enable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._parentMarkedDirty(t.onlySelf);this.status="VALID",this._forEachChild(function(e){e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(function(t){return t(!1)})}},{key:"_updateAncestors",value:function(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}},{key:"setParent",value:function(t){this._parent=t}},{key:"updateValueAndValidity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}},{key:"_updateTreeValidity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{emitEvent:!0};this._forEachChild(function(e){return e._updateTreeValidity(t)}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}},{key:"_setInitialStatus",value:function(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}},{key:"_runValidator",value:function(){return this.validator?this.validator(this):null}},{key:"_runAsyncValidator",value:function(t){var e=this;if(this.asyncValidator){this.status="PENDING",this._hasOwnPendingAsyncValidator=!0;var n=LO(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(function(n){e._hasOwnPendingAsyncValidator=!1,e.setErrors(n,{emitEvent:t})})}}},{key:"_cancelExistingSubscription",value:function(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}},{key:"setErrors",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}},{key:"get",value:function(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;var r=t;return e.forEach(function(t){r=r instanceof xS?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof AS&&r.at(t)||null}),r}(this,t)}},{key:"getError",value:function(t,e){var n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}},{key:"hasError",value:function(t,e){return!!this.getError(t,e)}},{key:"root",get:function(){for(var t=this;t._parent;)t=t._parent;return t}},{key:"_updateControlsErrors",value:function(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}},{key:"_initObservables",value:function(){this.valueChanges=new a.n,this.statusChanges=new a.n}},{key:"_calculateStatus",value:function(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}},{key:"_anyControlsHaveStatus",value:function(t){return this._anyControls(function(e){return e.status===t})}},{key:"_anyControlsDirty",value:function(){return this._anyControls(function(t){return t.dirty})}},{key:"_anyControlsTouched",value:function(){return this._anyControls(function(t){return t.touched})}},{key:"_updatePristine",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}},{key:"_updateTouched",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}},{key:"_isBoxedValue",value:function(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}},{key:"_registerOnCollectionChange",value:function(t){this._onCollectionChange=t}},{key:"_setUpdateStrategy",value:function(t){ES(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}},{key:"_parentMarkedDirty",value:function(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}]),t}(),IS=function(t){v(n,t);var e=g(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;return f(this,n),(t=e.call(this,_S(i),wS(o,i)))._onChange=[],t._applyFormState(r),t._setUpdateStrategy(i),t._initObservables(),t.updateValueAndValidity({onlySelf:!0,emitEvent:!!o}),t}return p(n,[{key:"setValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.value=this._pendingValue=t,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(function(t){return t(e.value,!1!==n.emitViewToModelChange)}),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setValue(t,e)}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}},{key:"_updateValue",value:function(){}},{key:"_anyControls",value:function(t){return!1}},{key:"_allControlsDisabled",value:function(){return this.disabled}},{key:"registerOnChange",value:function(t){this._onChange.push(t)}},{key:"_unregisterOnChange",value:function(t){mS(this._onChange,t)}},{key:"registerOnDisabledChange",value:function(t){this._onDisabledChange.push(t)}},{key:"_unregisterOnDisabledChange",value:function(t){mS(this._onDisabledChange,t)}},{key:"_forEachChild",value:function(t){}},{key:"_syncPendingControls",value:function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}},{key:"_applyFormState",value:function(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}]),n}(TS),xS=function(t){v(n,t);var e=g(n);function n(t,r,i){var o;return f(this,n),(o=e.call(this,_S(r),wS(i,r))).controls=t,o._initObservables(),o._setUpdateStrategy(r),o._setUpControls(),o.updateValueAndValidity({onlySelf:!0,emitEvent:!!i}),o}return p(n,[{key:"registerControl",value:function(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}},{key:"addControl",value:function(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"removeControl",value:function(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setControl",value:function(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"contains",value:function(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}},{key:"setValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(t),Object.keys(t).forEach(function(r){e._throwIfControlMissing(r),e.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null!=t&&(Object.keys(t).forEach(function(r){e.controls[r]&&e.controls[r].patchValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild(function(n,r){n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}},{key:"getRawValue",value:function(){return this._reduceChildren({},function(t,e,n){return t[n]=e instanceof IS?e.value:e.getRawValue(),t})}},{key:"_syncPendingControls",value:function(){var t=this._reduceChildren(!1,function(t,e){return!!e._syncPendingControls()||t});return t&&this.updateValueAndValidity({onlySelf:!0}),t}},{key:"_throwIfControlMissing",value:function(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error("Cannot find form control with name: ".concat(t,"."))}},{key:"_forEachChild",value:function(t){var e=this;Object.keys(this.controls).forEach(function(n){var r=e.controls[n];r&&t(r,n)})}},{key:"_setUpControls",value:function(){var t=this;this._forEachChild(function(e){e.setParent(t),e._registerOnCollectionChange(t._onCollectionChange)})}},{key:"_updateValue",value:function(){this.value=this._reduceValue()}},{key:"_anyControls",value:function(t){for(var e=0,n=Object.keys(this.controls);e<n.length;e++){var r=n[e],i=this.controls[r];if(this.contains(r)&&t(i))return!0}return!1}},{key:"_reduceValue",value:function(){var t=this;return this._reduceChildren({},function(e,n,r){return(n.enabled||t.disabled)&&(e[r]=n.value),e})}},{key:"_reduceChildren",value:function(t,e){var n=t;return this._forEachChild(function(t,r){n=e(n,t,r)}),n}},{key:"_allControlsDisabled",value:function(){for(var t=0,e=Object.keys(this.controls);t<e.length;t++){var n=e[t];if(this.controls[n].enabled)return!1}return Object.keys(this.controls).length>0||this.disabled}},{key:"_checkAllValuesPresent",value:function(t){this._forEachChild(function(e,n){if(void 0===t[n])throw new Error("Must supply a value for form control with name: '".concat(n,"'."))})}}]),n}(TS),AS=function(t){v(n,t);var e=g(n);function n(t,r,i){var o;return f(this,n),(o=e.call(this,_S(r),wS(i,r))).controls=t,o._initObservables(),o._setUpdateStrategy(r),o._setUpControls(),o.updateValueAndValidity({onlySelf:!0,emitEvent:!!i}),o}return p(n,[{key:"at",value:function(t){return this.controls[t]}},{key:"push",value:function(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"insert",value:function(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}},{key:"removeAt",value:function(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),this.controls.splice(t,1),this.updateValueAndValidity()}},{key:"setControl",value:function(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"length",get:function(){return this.controls.length}},{key:"setValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(t),t.forEach(function(t,r){e._throwIfControlMissing(r),e.at(r).setValue(t,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null!=t&&(t.forEach(function(t,r){e.at(r)&&e.at(r).patchValue(t,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild(function(n,r){n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}},{key:"getRawValue",value:function(){return this.controls.map(function(t){return t instanceof IS?t.value:t.getRawValue()})}},{key:"clear",value:function(){this.controls.length<1||(this._forEachChild(function(t){return t._registerOnCollectionChange(function(){})}),this.controls.splice(0),this.updateValueAndValidity())}},{key:"_syncPendingControls",value:function(){var t=this.controls.reduce(function(t,e){return!!e._syncPendingControls()||t},!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}},{key:"_throwIfControlMissing",value:function(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index ".concat(t))}},{key:"_forEachChild",value:function(t){this.controls.forEach(function(e,n){t(e,n)})}},{key:"_updateValue",value:function(){var t=this;this.value=this.controls.filter(function(e){return e.enabled||t.disabled}).map(function(t){return t.value})}},{key:"_anyControls",value:function(t){return this.controls.some(function(e){return e.enabled&&t(e)})}},{key:"_setUpControls",value:function(){var t=this;this._forEachChild(function(e){return t._registerControl(e)})}},{key:"_checkAllValuesPresent",value:function(t){this._forEachChild(function(e,n){if(void 0===t[n])throw new Error("Must supply a value for form control at index: ".concat(n,"."))})}},{key:"_allControlsDisabled",value:function(){var t,e=s(this.controls);try{for(e.s();!(t=e.n()).done;){if(t.value.enabled)return!1}}catch(n){e.e(n)}finally{e.f()}return this.controls.length>0||this.disabled}},{key:"_registerControl",value:function(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}]),n}(TS),jS={provide:nS,useExisting:Object(a.V)(function(){return NS})},PS=Promise.resolve(null),NS=((SS=function(t){v(n,t);var e=g(n);function n(t,r,i,o){var s;return f(this,n),(s=e.call(this)).control=new IS,s._registered=!1,s.update=new a.n,s._parent=t,s._setValidators(r),s._setAsyncValidators(i),s.valueAccessor=function(t,e){return e?(Array.isArray(e),e.forEach(function(t){var e;t.constructor===xO?n=t:(e=t,gS.some(function(t){return e.constructor===t})?r=t:i=t)}),i||r||n||null):null;var n,r,i}(0,o),s}return p(n,[{key:"ngOnChanges",value:function(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;var n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeControl(this)}},{key:"path",get:function(){return this._parent?[].concat(i(this._parent.path),[this.name]):[this.name]}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"viewToModelUpdate",value:function(t){this.viewModel=t,this.update.emit(t)}},{key:"_setUpControl",value:function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}},{key:"_setUpdateStrategy",value:function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}},{key:"_isStandalone",value:function(){return!this._parent||!(!this.options||!this.options.standalone)}},{key:"_setUpStandalone",value:function(){var t,e;(function(t,e,n){var r=function(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(HO(r,e.validator)):"function"==typeof r&&t.setValidators([r]);var i=function(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(HO(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]);var o=function(){return t.updateValueAndValidity()};vS(e._rawValidators,o),vS(e._rawAsyncValidators,o)})(t=this.control,e=this),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(function(n){t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&yS(t,e)})}(t,e),function(t,e){var n=function(t,n){e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(function(){t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(function(){t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&yS(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){var n=function(t){e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(function(){t._unregisterOnDisabledChange(n)})}}(t,e),this.control.updateValueAndValidity({emitEvent:!1})}},{key:"_checkForErrors",value:function(){this._isStandalone()||this._checkParentType(),this._checkName()}},{key:"_checkParentType",value:function(){}},{key:"_checkName",value:function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}},{key:"_updateValue",value:function(t){var e=this;PS.then(function(){e.control.setValue(t,{emitViewToModelChange:!1})})}},{key:"_updateDisabled",value:function(t){var e=this,n=t.isDisabled.currentValue,r=""===n||n&&"false"!==n;PS.then(function(){r&&!e.control.disabled?e.control.disable():!r&&e.control.disabled&&e.control.enable()})}}]),n}(nS)).\u0275fac=function(t){return new(t||SS)(a.Mb(tS,9),a.Mb(PO,10),a.Mb(NO,10),a.Mb(CO,10))},SS.\u0275dir=a.Hb({type:SS,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[a.Bb([jS]),a.zb,a.Ab]}),SS),RS=((OS=function t(){f(this,t)}).\u0275mod=a.Kb({type:OS}),OS.\u0275inj=a.Jb({factory:function(t){return new(t||OS)}}),OS),DS=((CS=function t(){f(this,t)}).\u0275mod=a.Kb({type:CS}),CS.\u0275inj=a.Jb({factory:function(t){return new(t||CS)},providers:[aS],imports:[RS]}),CS);function MS(t,e){if(1&t){var n=a.Qb();a.Pb(0,"label",33),a.Pb(1,"a",34),a.Wb("click",function(){return a.gc(n),a.Yb().activeLogin()}),a.lc(2,"Login"),a.Ob(),a.lc(3," or "),a.Pb(4,"a",34),a.Wb("click",function(){return a.gc(n),a.Yb().activeSignup()}),a.lc(5,"Signup"),a.Ob(),a.lc(6," to save your list\n"),a.Ob()}2&t&&a.bc("@fade-left",void 0)}function LS(t,e){if(1&t&&(a.Pb(0,"section",35),a.Pb(1,"span",2),a.lc(2," account_circle "),a.Ob(),a.lc(3),a.Pb(4,"span",36),a.lc(5," arrow_drop_down "),a.Ob(),a.Ob()),2&t){var n=a.Yb(),r=a.fc(8);a.bc("@fade-left",void 0),a.Cb(3),a.nc(" ",n.userEmail," "),a.Cb(1),a.bc("matMenuTriggerFor",r)}}function FS(t,e){if(1&t){var n=a.Qb();a.Pb(0,"div",37),a.Pb(1,"div",38),a.Pb(2,"input",39),a.Wb("click",function(){a.gc(n);var t=e.$implicit,r=e.index;return a.Yb().updateStatus(t.id,t.data.status,r)}),a.Ob(),a.Nb(3,"label",40),a.Ob(),a.Pb(4,"textarea",41),a.Wb("keyup",function(){return a.gc(n),a.Yb().changing()}),a.lc(5),a.Ob(),a.Pb(6,"div",42),a.Pb(7,"button",43),a.Wb("click",function(){a.gc(n);var t=e.$implicit,r=e.index;return a.Yb().deleteItem(t.id,r)}),a.Pb(8,"span",44),a.lc(9," delete "),a.Ob(),a.Ob(),a.Ob(),a.Ob()}if(2&t){var r=e.$implicit;a.bc("@fade",void 0),a.Cb(2),a.cc("id",r.id),a.bc("checked",r.data.status),a.Cb(1),a.cc("for",r.id),a.Cb(1),a.dc("id","",r.id,"textarea"),a.Cb(1),a.mc(r.data.item)}}var VS,US,qS,BS=[{path:"",component:(VS=function(){function t(e,n){f(this,t),this.firebaseService=e,this.crudService=n,this.isSignedIn=!1,this.itemStatus=!1,this.firstkey=!1,this.model=new _u}return p(t,[{key:"ngOnInit",value:function(){null!==localStorage.getItem("user")?(this.isSignedIn=!0,this.userEmail=localStorage.getItem("email"),this.myTasks=this.crudService.getTasks(),console.log(this.myTasks)):this.isSignedIn=!1}},{key:"onSignup",value:function(t,e){return mu(this,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.firebaseService.signup(t,e);case 2:this.firebaseService.isLoggedIn&&(this.isSignedIn=!0),this.userEmail=localStorage.getItem("email"),this.myTasks=this.crudService.getTasks(),this.deactiveSignup();case 6:case"end":return n.stop()}},n,this)}))}},{key:"onSignin",value:function(t,e){return mu(this,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.firebaseService.signin(t,e);case 2:this.firebaseService.isLoggedIn?(this.isSignedIn=!0,this.userEmail=localStorage.getItem("email"),this.myTasks=this.crudService.getTasks(),this.deactiveLogin(),document.getElementById("message").innerHTML=""):document.getElementById("message").innerHTML="Invalid user information";case 3:case"end":return n.stop()}},n,this)}))}},{key:"Signout",value:function(){this.firebaseService.logout(),this.ngOnInit(),this.model.items=null}},{key:"getItems",value:function(){return this.myTasks}},{key:"deleteItem",value:function(t,e){this.crudService.deleteTask(t),this.myTasks.splice(e,1)}},{key:"addItem",value:function(){var t={};t.userId=localStorage.getItem("uid"),t.item=this.item,t.status=this.itemStatus,localStorage.getItem("user")?(this.crudService.addTask(t).then(function(t){}).catch(function(t){console.log(t)}),this.ngOnInit(),console.log(this.myTasks)):alert("Please login or signup")}},{key:"updateStatus",value:function(t,e,n){!1===this.myTasks[n].data.status?(this.crudService.check(t),this.myTasks[n].data.status=!0):(this.crudService.uncheck(t),this.myTasks[n].data.status=!1),console.log(this.myTasks[n].data.status)}},{key:"setDisabledValue",value:function(t,e){var n=document.getElementById(t+"button"),r=document.getElementById(t+"textarea");return!0===this.model.disabled?(this.model.disabled=!1,n.classList.add("editing"),r.classList.add("txtedit"),r.removeAttribute("disabled")):(this.model.disabled=!0,n.classList.remove("editing"),r.classList.remove("txtedit"),r.setAttribute("disabled","disabled"),r.innerHTML!=this.myTasks[e].data.item?(console.log(this.myTasks[e].data.item),console.log("itemchenged")):(console.log("not working"),console.log(this.myTasks[e].data.item),console.log(r.innerHTML)),this.firstkey=!1),this.model.disabled}},{key:"changing",value:function(){!1===this.firstkey&&(this.firstkey=!0)}},{key:"activeLogin",value:function(){document.getElementById("login").classList.add("is-active")}},{key:"deactiveLogin",value:function(){document.getElementById("login").classList.remove("is-active")}},{key:"activeSignup",value:function(){document.getElementById("signup").classList.add("is-active")}},{key:"deactiveSignup",value:function(){document.getElementById("signup").classList.remove("is-active")}}]),t}(),VS.\u0275fac=function(t){return new(t||VS)(a.Mb(Vu),a.Mb(RE))},VS.\u0275cmp=a.Gb({type:VS,selectors:[["app-list"]],decls:59,vars:7,consts:[[1,"heading-section"],[1,"title","is-1","has-text-centered"],[1,"material-icons"],["class","label","id","lgn","class","label",4,"ngIf"],["class","label","id","logout",4,"ngIf"],["id","menu"],["menu","matMenu"],["mat-menu-item","",1,"logoutbtn",3,"click"],["id","login",1,"modal"],[1,"modal-background"],[1,"modal-content"],[1,"field"],["type","email","placeholder","Email",1,"input"],["loginemail",""],["type","password","placeholder","Password",1,"input"],["loginpassword",""],[1,"control"],["on","","id","loginbtn",1,"button",3,"click"],["id","message"],["aria-label","close",1,"modal-close","is-large",3,"click"],["id","signup",1,"modal"],["email",""],["password",""],["id","loginbtn",1,"button",3,"click"],[1,"container"],[1,"add-todo-box"],["id","titlee","is-5","",1,"title"],[1,"field","is-grouped"],[1,"control","is-expanded"],["type","text","placeholder","Add a new task here",1,"input",3,"ngModel","ngModelChange"],["textbox",""],[1,"button",3,"disabled","click"],["class","container","id","container",4,"ngFor","ngForOf"],["id","lgn",1,"label"],[3,"click"],["id","logout",1,"label"],["id","down",1,"material-icons",3,"matMenuTriggerFor"],["id","container",1,"container"],[1,"round"],["type","checkbox",3,"id","checked","click"],[3,"for"],["disabled","","for","checkbox",1,"text",3,"id","keyup"],[1,"button-container"],[1,"buttons",3,"click"],[1,"material-icons","fix"]],template:function(t,e){if(1&t){var n=a.Qb();a.Pb(0,"section",0),a.Pb(1,"h1",1),a.lc(2," To do list "),a.Pb(3,"i",2),a.lc(4," done "),a.Ob(),a.Ob(),a.Ob(),a.kc(5,MS,7,1,"label",3),a.kc(6,LS,6,3,"section",4),a.Pb(7,"mat-menu",5,6),a.Pb(9,"button",7),a.Wb("click",function(){return e.Signout()}),a.lc(10,"Sign-out"),a.Ob(),a.Ob(),a.Pb(11,"div",8),a.Nb(12,"div",9),a.Pb(13,"div",10),a.Pb(14,"h1"),a.lc(15,"Login"),a.Ob(),a.Pb(16,"div",11),a.Nb(17,"input",12,13),a.Ob(),a.Pb(19,"div",11),a.Nb(20,"input",14,15),a.Ob(),a.Pb(22,"div",11),a.Pb(23,"p",16),a.Pb(24,"button",17),a.Wb("click",function(){a.gc(n);var t=a.fc(18),r=a.fc(21);return e.onSignin(t.value,r.value)}),a.lc(25," Login "),a.Ob(),a.Ob(),a.Nb(26,"label",18),a.Ob(),a.Ob(),a.Pb(27,"button",19),a.Wb("click",function(){return e.deactiveLogin()}),a.Ob(),a.Ob(),a.Pb(28,"div",20),a.Nb(29,"div",9),a.Pb(30,"div",10),a.Pb(31,"h1"),a.lc(32,"Sign-up"),a.Ob(),a.Pb(33,"div",11),a.Nb(34,"input",12,21),a.Ob(),a.Pb(36,"div",11),a.Nb(37,"input",14,22),a.Ob(),a.Pb(39,"div",11),a.Pb(40,"p",16),a.Pb(41,"button",23),a.Wb("click",function(){a.gc(n);var t=a.fc(35),r=a.fc(38);return e.onSignup(t.value,r.value)}),a.lc(42," Signup "),a.Ob(),a.Ob(),a.Nb(43,"label",18),a.Ob(),a.Ob(),a.Pb(44,"button",19),a.Wb("click",function(){return e.deactiveSignup()}),a.Ob(),a.Ob(),a.Pb(45,"div",24),a.Pb(46,"div",25),a.Pb(47,"h2",26),a.lc(48,"New Task"),a.Ob(),a.Pb(49,"div",27),a.Pb(50,"p",28),a.Pb(51,"input",29,30),a.Wb("ngModelChange",function(t){return e.item=t}),a.Ob(),a.Ob(),a.Pb(53,"p",16),a.Pb(54,"button",31),a.Wb("click",function(){a.gc(n);var t=a.fc(52);return e.addItem(),t.value=""}),a.Pb(55,"i",2),a.lc(56,"add"),a.Ob(),a.lc(57," Add "),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.kc(58,FS,10,6,"div",32)}2&t&&(a.Cb(1),a.bc("@fade",void 0),a.Cb(4),a.bc("ngIf",!e.isSignedIn),a.Cb(1),a.bc("ngIf",e.isSignedIn),a.Cb(5),a.bc("@fade",void 0),a.Cb(40),a.bc("ngModel",e.item),a.Cb(3),a.bc("disabled",!e.item),a.Cb(4),a.bc("ngForOf",e.getItems()))},directives:[tt,dO,cO,xO,rS,NS,J,gO],styles:['.heading-section[_ngcontent-%COMP%]{background-image:linear-gradient(180deg,#1f79be,#1968a2,#145688,#10466e,#0d3655);padding:100px}.heading-section[_ngcontent-%COMP%]   h1.title[_ngcontent-%COMP%]{font-weight:700;color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.9);font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.container[_ngcontent-%COMP%]{width:800px}.modal-content[_ngcontent-%COMP%]{width:500px;background-color:#fff;box-sizing:border-box;padding:60px 20px;border-radius:10px}.modal-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:35px;margin-bottom:35px;text-align:center;width:100%}.modal-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{text-align:center}.add-todo-box[_ngcontent-%COMP%]{padding:25px;box-shadow:0 4px 12px rgba(0,0,0,.4);border-radius:4px;background-color:#fff;margin-top:-80px}.button[_ngcontent-%COMP%]{background-color:#1f79be;color:#fff;border:1px solid #000;transition:.4s}.item[_ngcontent-%COMP%]{display:flex;font-size:18px;cursor:pointer}.todo-text[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap;align-items:center}.item[_ngcontent-%COMP%]   .check-box[_ngcontent-%COMP%]{display:flex;margin-right:20px;border:2px solid #eee;border-radius:50%;height:28px;width:28px;transition:.5s}.item[_ngcontent-%COMP%]   .check-box[_ngcontent-%COMP%]   i.material-icons[_ngcontent-%COMP%]{font-size:20px;margin:auto;opacity:0}.items[_ngcontent-%COMP%]:hover   .check-box[_ngcontent-%COMP%]{background-color:#1f79be;color:#fff}.items[_ngcontent-%COMP%]:hover   .check-box[_ngcontent-%COMP%]   i.material-icons[_ngcontent-%COMP%]{opacity:1}h1[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:35px}#container[_ngcontent-%COMP%]{padding:20px;margin-top:20px;width:790px;background-color:#fff;display:flex;flex-direction:row;border-bottom:1px solid rgba(0,0,0,.178);transition:.5s}#container[_ngcontent-%COMP%]:hover   .buttons[_ngcontent-%COMP%]{opacity:1}.round[_ngcontent-%COMP%]{position:relative}.round[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ccc;border-radius:50%;cursor:pointer;height:28px;left:0;position:absolute;top:0;width:28px;transition:.5s}.round[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:hover{background-color:#1f79be;border-color:#1f79be}.round[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:after{transition:.5s;border:2px solid #fff;border-top:none;border-right:none;content:"";height:6px;left:7px;opacity:0;position:absolute;top:8px;transform:rotate(-45deg);width:12px}.round[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{visibility:hidden}.round[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{background-color:#1f79be;border-color:#1f79be}.round[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:after{opacity:1}.text[_ngcontent-%COMP%]{border:1px solid #fff;box-sizing:border-box;padding:5px}.text[_ngcontent-%COMP%], .txtedit[_ngcontent-%COMP%]{font-size:18px;margin-left:30px;min-height:55px;outline:none;background-color:#fff;min-width:85%;max-width:85%;transition:.5s}.txtedit[_ngcontent-%COMP%]{border:1px solid #afafaf;border-radius:8px}.label[_ngcontent-%COMP%]{box-shadow:0 4px 12px rgba(0,0,0,.4);position:fixed;color:#fff;padding:20px;background-color:rgba(44,44,44,.685);margin-top:-240px;float:right;border-radius:0 50px 50px 0;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;z-index:1}.label[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:underline}.fix[_ngcontent-%COMP%]{color:#bdbdbd;font-size:19px}.buttons[_ngcontent-%COMP%]{float:right;opacity:0;background:#fff;margin:0 0 0 5px;transition:.5s;border-radius:100%;padding:4px;border:1px solid #dadada;outline:none}.buttons[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#a1a1a1}.buttons[_ngcontent-%COMP%]:hover   .fix[_ngcontent-%COMP%]{color:#fff}.editing[_ngcontent-%COMP%]{float:right;opacity:1;background-color:#a1a1a1;margin:0 0 0 5px;transition:.5s;border-radius:100%;padding:4px;border:1px solid #dadada;outline:none}.editing[_ngcontent-%COMP%]   .fix[_ngcontent-%COMP%]{color:#fff}#loginbtn[_ngcontent-%COMP%]{width:100%}#logout[_ngcontent-%COMP%]{cursor:default}#logout[_ngcontent-%COMP%], #logout[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;flex-wrap:wrap}#logout[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:100%;margin-right:10px}#logout[_ngcontent-%COMP%]   #down[_ngcontent-%COMP%]:hover{cursor:pointer}.logoutbtn[_ngcontent-%COMP%]{padding:2px;text-align:center}'],data:{animation:[We("fade",[Xe("void => *",[Ke({backgroundColor:"rgb(0, 0, 0,0)",opacity:0}),Qe(900)]),Xe("* => void",[Qe(0,Ke({backgroundColor:"white",opacity:0}))])]),We("fade-left",[Xe("void => *",[Ke({marginLeft:"-300px"}),Qe(200)])])]}}),VS)}],HS=((qS=function t(){f(this,t)}).\u0275mod=a.Kb({type:qS}),qS.\u0275inj=a.Jb({factory:function(t){return new(t||qS)},imports:[[uu.forRoot(BS)],uu]}),qS),zS=((US=function t(){f(this,t),this.title="To-do"}).\u0275fac=function(t){return new(t||US)},US.\u0275cmp=a.Gb({type:US,selectors:[["app-root"]],decls:1,vars:0,template:function(t,e){1&t&&a.Nb(0,"router-outlet")},directives:[Za],styles:[""]}),US),WS=o("w1tV"),QS=function(){function t(e,n){f(this,t),this.observables=e,this.project=n}return p(t,[{key:"call",value:function(t,e){return e.subscribe(new GS(t,this.observables,this.project))}}]),t}(),GS=function(t){v(n,t);var e=g(n);function n(t,r,i){var o;f(this,n),(o=e.call(this,t)).observables=r,o.project=i,o.toRespond=[];var s=r.length;o.values=new Array(s);for(var a=0;a<s;a++)o.toRespond.push(a);for(var u=0;u<s;u++)o.add(qi(_(o),r[u],void 0,u));return o}return p(n,[{key:"notifyNext",value:function(t,e,n){this.values[n]=e;var r=this.toRespond;if(r.length>0){var i=r.indexOf(n);-1!==i&&r.splice(i,1)}}},{key:"notifyComplete",value:function(){}},{key:"_next",value:function(t){if(0===this.toRespond.length){var e=[t].concat(i(this.values));this.project?this._tryProject(e):this.destination.next(e)}}},{key:"_tryProject",value:function(t){var e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}]),n}(Fi),KS=function(){function t(e){f(this,t),this.predicate=e}return p(t,[{key:"call",value:function(t,e){return e.subscribe(new YS(t,this.predicate))}}]),t}(),YS=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t)).predicate=r,i.skipping=!0,i.index=0,i}return p(n,[{key:"_next",value:function(t){var e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}},{key:"tryCallPredicate",value:function(t){try{var e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(n){this.destination.error(n)}}}]),n}(Zt.a);function XS(t){return null==t}function ZS(t){return"function"==typeof t.set}function JS(t,e){return ZS(e)?e:t.ref(e)}function $S(t,e){if("string"==typeof t)return e.stringCase();if(ZS(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function tT(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"on",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Jt.b;return new Ce.a(function(i){var o;return o=t[n](e,function(t,e){r.schedule(function(){i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(function(){return i.complete()})},function(t){r.schedule(function(){return i.error(t)})}),"on"===n?{unsubscribe:function(){null!=o&&t.off(e,o)}}:{unsubscribe:function(){}}}).pipe(Object(oe.a)(function(t){var n=t.snapshot,r=t.prevKey,i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),Object(WS.a)())}function eT(t,e){for(var n=t.length,r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function nT(t,e){var n=e.payload,r=e.prevKey,o=e.key,s=eT(t,o),a=function(t,e){if(XS(e))return 0;var n=eT(t,e);return-1===n?t.length:n+1}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){var u=null;e.payload.forEach(function(e){var n={payload:e,type:"value",prevKey:u,key:e.key};return u=e.key,t=[].concat(i(t),[n]),!1})}return t;case"child_added":if(s>-1){var c=t[s-1];(c&&c.key||null)!==r&&(t=t.filter(function(t){return t.payload.key!==n.key})).splice(a,0,e)}else{if(null==r)return[e].concat(i(t));(t=t.slice()).splice(a,0,e)}return t;case"child_removed":return t.filter(function(t){return t.payload.key!==n.key});case"child_changed":return t.map(function(t){return t.payload.key===o?e:t});case"child_moved":if(s>-1){var l=t.splice(s,1)[0];return(t=t.slice()).splice(a,0,l),t}return t;default:return t}}function rT(t){return(XS(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function iT(t,e,n){return function(t,e,n){return tT(t,"value","once",n).pipe(Xi(function(r){var i=[Object(Kt.a)(r)];return e.forEach(function(e){return i.push(tT(t,e,"on",n))}),Object(bu.a).apply(void 0,i).pipe($i(nT,[]))}),Hu())}(t,e=rT(e),n)}function oT(t,e,n){var r=(e=rT(e)).map(function(e){return tT(t,e,"on",n)});return Object(bu.a).apply(void 0,i(r))}function sT(t,e){return function(n,r){return $S(n,{stringCase:function(){return t.child(n)[e](r)},firebaseCase:function(){return n[e](r)},snapshotCase:function(){return n.ref[e](r)}})}}function aT(t,e){return function(){return tT(t,"value","on",e)}}o("6Uf2");var uT,cT,lT,hT=new a.r("angularfire2.realtimeDatabaseURL"),fT=new a.r("angularfire2.database.use-emulator"),dT=((cT=function(){function n(t,e,r,o,s,a,u){f(this,n),this.schedulers=new Au.d(s),this.keepUnstableUntilFirst=Object(Au.h)(this.schedulers);var c=a,l=Object(Au.g)(t,s,e);!Qu.a.auth&&u&&Object(Au.j)(),this.database=Object(Au.f)("".concat(l.name,".database.").concat(r),"AngularFireDatabase",l,function(){var t=s.runOutsideAngular(function(){return l.database(r||void 0)});return c&&t.useEmulator.apply(t,i(c)),t},[c])}return p(n,[{key:"list",value:function(n,r){var o=this,s=this.schedulers.ngZone.runOutsideAngular(function(){return JS(o.database,n)}),a=s;return r&&(a=r(s)),function(n,r){var o,s=r.schedulers.outsideAngular,a=r.schedulers.ngZone.run(function(){return n.ref});return{query:n,update:sT(a,"update"),set:sT(a,"set"),push:function(t){return a.push(t)},remove:(o=a,function(t){return t?$S(t,{stringCase:function(){return o.child(t).remove()},firebaseCase:function(){return t.remove()},snapshotCase:function(){return t.ref.remove()}}):o.remove()}),snapshotChanges:function(t){return iT(n,t,s).pipe(r.keepUnstableUntilFirst)},stateChanges:function(t){return oT(n,t,s).pipe(r.keepUnstableUntilFirst)},auditTrail:function(t){return function(t,n,r){return function(t,n,r){return function(t,e){return tT(t,"value","on",e).pipe(Object(oe.a)(function(t){var e;return t.payload.forEach(function(t){return e=t.key,!1}),{data:t,lastKeyToLoad:e}}))}(t,r).pipe(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){var n;return"function"==typeof e[e.length-1]&&(n=e.pop()),t.lift(new QS(e,n))}}(n),Object(oe.a)(function(t){var n=e(t,2),r=n[0],i=n[1],o=r.lastKeyToLoad,s=i.map(function(t){return t.key});return{actions:i,lastKeyToLoad:o,loadedKeys:s}}),(i=function(t){return-1===t.loadedKeys.indexOf(t.lastKeyToLoad)},function(t){return t.lift(new KS(i))}),Object(oe.a)(function(t){return t.actions}));var i}(t,oT(t,n).pipe($i(function(t,e){return[].concat(i(t),[e])},[])),r)}(n,t,s).pipe(r.keepUnstableUntilFirst)},valueChanges:function(e,i){return iT(n,e,s).pipe(Object(oe.a)(function(e){return e.map(function(e){return i&&i.idField?Object.assign(Object.assign({},e.payload.val()),t({},i.idField,e.key)):e.payload.val()})}),r.keepUnstableUntilFirst)}}}(a,this)}},{key:"object",value:function(t){var e,n,r=this,i=this.schedulers.ngZone.runOutsideAngular(function(){return JS(r.database,t)});return n=this,{query:e=i,snapshotChanges:function(){return aT(e,n.schedulers.outsideAngular)().pipe(n.keepUnstableUntilFirst)},update:function(t){return e.ref.update(t)},set:function(t){return e.ref.set(t)},remove:function(){return e.ref.remove()},valueChanges:function(){return aT(e,n.schedulers.outsideAngular)().pipe(n.keepUnstableUntilFirst,Object(oe.a)(function(t){return t.payload.exists()?t.payload.val():null}))}}}},{key:"createPushId",value:function(){var t=this;return this.schedulers.ngZone.runOutsideAngular(function(){return t.database.ref()}).push().key}}]),n}()).\u0275fac=function(t){return new(t||cT)(a.Tb(Au.c),a.Tb(Au.b,8),a.Tb(hT,8),a.Tb(a.C),a.Tb(a.A),a.Tb(fT,8),a.Tb(ju,8))},cT.\u0275prov=Object(a.Ib)({factory:function(){return new cT(Object(a.Tb)(Au.c),Object(a.Tb)(Au.b,8),Object(a.Tb)(hT,8),Object(a.Tb)(a.C),Object(a.Tb)(a.A),Object(a.Tb)(fT,8),Object(a.Tb)(ju,8))},token:cT,providedIn:"any"}),cT),pT=((uT=function t(){f(this,t)}).\u0275mod=a.Kb({type:uT}),uT.\u0275inj=a.Jb({factory:function(t){return new(t||uT)},providers:[dT]}),uT),vT={apiKey:"",authDomain:"",projectId:"",storageBucket:"",messagingSenderId:"",appId:"",measurementId:""},yT=((lT=function t(){f(this,t)}).\u0275mod=a.Kb({type:lT,bootstrap:[zS]}),lT.\u0275inj=a.Jb({factory:function(t){return new(t||lT)},providers:[Vu,RE],imports:[[Ni,_O,Wt,HS,gi,pT,NE,DS,Au.a.initializeApp(vT)]]}),lT);Object(a.U)(),Ht().bootstrapModule(yT).catch(function(t){return console.error(t)})},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD"),s=function(t){v(n,t);var e=g(n);function n(t){var r;return f(this,n),(r=e.call(this)).parent=t,r}return p(n,[{key:"_next",value:function(t){this.parent.notifyNext(t)}},{key:"_error",value:function(t){this.parent.notifyError(t),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(),this.unsubscribe()}}]),n}(r.a),a=function(t){v(n,t);var e=g(n);function n(){return f(this,n),e.apply(this,arguments)}return p(n,[{key:"notifyNext",value:function(t){this.destination.next(t)}},{key:"notifyError",value:function(t){this.destination.error(t)}},{key:"notifyComplete",value:function(){this.destination.complete()}}]),n}(r.a);function u(t,e){if(!e.closed)return t instanceof i.a?t.subscribe(e):Object(o.a)(t)(e)}}},[[0,0]]])}();