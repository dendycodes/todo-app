(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return s});var r=n("os0x"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:"[DEFAULT]",optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService(i);if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(s){if(n)return null;throw s}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService("[DEFAULT]")}catch(l){}try{for(var i=Object(r.h)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=Object(r.e)(o.value,2),a=s[1],u=this.normalizeInstanceIdentifier(s[0]);try{var c=this.getOrInitializeService(u);a.resolve(c)}catch(l){}}}catch(h){e={error:h}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}),t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()})))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t="[DEFAULT]"),this.instances.has(t)},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}(),a=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new s(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"6Uf2":function(t,e,n){"use strict";(function(t){var e,r=n("zIRd"),i=n("os0x"),o=n("qOnz"),s=n("q/0M"),a=n("/6Yf"),u=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(o.F)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(o.z)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),c=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(o.h)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),l=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new u(e)}}catch(n){}return new c},h=l("localStorage"),d=l("sessionStorage"),f=new s.b("@firebase/database"),p=(e=1,function(){return e++}),g=function(t){var e=Object(o.E)(t),n=new o.c;n.update(e);var r=n.digest();return o.f.encodeByteArray(r)},y=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=y.apply(null,i):n+="object"==typeof i?Object(o.F)(i):i,n+=" "}return n},m=null,v=!0,_=function(t,e){Object(o.d)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(f.logLevel=s.a.VERBOSE,m=f.log.bind(f),e&&d.set("logging_enabled",!0)):"function"==typeof t?m=t:(m=null,d.remove("logging_enabled"))},b=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===v&&(v=!1,null===m&&!0===d.get("logging_enabled")&&_(!0)),m){var n=y.apply(null,t);m(n)}},w=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];b.apply(void 0,Object(i.f)([t],e))}},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+y.apply(void 0,Object(i.f)(t));f.error(n)},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+y.apply(void 0,Object(i.f)(t));throw f.error(n),new Error(n)},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+y.apply(void 0,Object(i.f)(t));f.warn(n)},S=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},T="[MIN_NAME]",I="[MAX_NAME]",x=function(t,e){if(t===e)return 0;if(t===T||e===I)return-1;if(e===T||t===I)return 1;var n=M(t),r=M(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},k=function(t,e){return t===e?0:t<e?-1:1},A=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(o.F)(e))},j=function(t){if("object"!=typeof t||null===t)return Object(o.F)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Object(o.F)(e[i]),r+=":",r+=j(t[e[i]]);return r+"}"},P=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function N(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var R=function(t){var e,n,r,i,s;Object(o.d)(!S(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},D=new RegExp("^-?(0*)\\d{1,10}$"),M=function(t){if(D.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},L=function(t){try{t()}catch(e){setTimeout(function(){throw O("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},F=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},V=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function U(){return new V("")}function q(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function B(t){return t.pieces_.length-t.pieceNum_}function H(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new V(t.pieces_,e)}function z(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function W(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Q(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function G(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new V(e,0)}function K(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof V)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new V(n,0)}function $(t){return t.pieceNum_>=t.pieces_.length}function Y(t,e){var n=q(t),r=q(e);if(null===n)return e;if(n===r)return Y(H(t),H(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function X(t,e){for(var n=Q(t,0),r=Q(e,0),i=0;i<n.length&&i<r.length;i++){var o=x(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Z(t,e){if(B(t)!==B(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function J(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(B(t)>B(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var tt,et,nt,rt,it,ot,st,at,ut,ct=function(){function t(t,e){this.errorPrefix_=e,this.parts_=Q(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(o.D)(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=Object(o.D)(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=Object(o.D)(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),lt=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ht=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=h.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&h.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(Object(o.d)("string"==typeof t,"typeof type must == string"),Object(o.d)("object"==typeof e,"typeof params must == object"),"websocket"===t)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if("long_polling"!==t)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return N(e,function(t,e){r.push(t+"="+e)}),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}(),dt=function(t,e){var n=ft(t),r=n.namespace;return"firebase.com"===n.domain&&C(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||C("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&O("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new ht(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new V(n.pathString)}},ft=function(t){var e="",n="",r="",o="",s="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var d=t.indexOf("?");-1===d&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(o=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,d)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var o=Object(i.h)(t.split("&")),s=o.next();!s.done;s=o.next()){var a=s.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):O("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,d)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:o,namespace:s}},pt=/[\[\].#$\/\u0000-\u001F\u007F]/,gt=/[\[\].#$\u0000-\u001F\u007F]/,yt=function(t){return"string"==typeof t&&0!==t.length&&!pt.test(t)},mt=function(t){return"string"==typeof t&&0!==t.length&&!gt.test(t)},vt=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!S(t)||t&&"object"==typeof t&&Object(o.h)(t,".sv")},_t=function(t,e,n,r,i){i&&void 0===n||bt(Object(o.l)(t,e,i),n,r)},bt=function(t,e,n){var r=n instanceof V?new ct(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(S(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>10485760/3&&Object(o.D)(e)>10485760)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,s=!1;if(N(e,function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!yt(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),bt(t,n,r),r.pop()}),i&&s)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},wt=function(t,e,n,r,i){if(!i||void 0!==n){var s=Object(o.l)(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(s+" must be an object containing the children to replace.");var a=[];N(n,function(t,e){var n=new V(t);if(bt(s,e,K(r,n)),".priority"===z(n)&&!vt(e))throw new Error(s+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=Q(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!yt(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(X);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&J(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(s,a)}},Et=function(t,e,n,r){if(!r||void 0!==n){if(S(n))throw new Error(Object(o.l)(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!vt(n))throw new Error(Object(o.l)(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Ct=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(o.l)(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Ot=function(t,e,n,r){if(!(r&&void 0===n||yt(n)))throw new Error(Object(o.l)(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},St=function(t,e,n,r){if(!(r&&void 0===n||mt(n)))throw new Error(Object(o.l)(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Tt=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),St(t,e,n,r)},It=function(t,e){if(".info"===q(e))throw new Error(t+" failed = Can't modify data under /.info/")},xt=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!yt(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),mt(t)}(r))throw new Error(Object(o.l)(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},kt=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(o.l)(t,e,r)+"must be a boolean.")},At=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Object(o.G)("OnDisconnect.cancel",0,1,arguments.length),Object(o.H)("OnDisconnect.cancel",1,t,!0);var e=new o.a;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Object(o.G)("OnDisconnect.remove",0,1,arguments.length),It("OnDisconnect.remove",this.path_),Object(o.H)("OnDisconnect.remove",1,t,!0);var e=new o.a;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Object(o.G)("OnDisconnect.set",1,2,arguments.length),It("OnDisconnect.set",this.path_),_t("OnDisconnect.set",1,t,this.path_,!1),Object(o.H)("OnDisconnect.set",2,e,!0);var n=new o.a;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Object(o.G)("OnDisconnect.setWithPriority",2,3,arguments.length),It("OnDisconnect.setWithPriority",this.path_),_t("OnDisconnect.setWithPriority",1,t,this.path_,!1),Et("OnDisconnect.setWithPriority",2,e,!1),Object(o.H)("OnDisconnect.setWithPriority",3,n,!0);var r=new o.a;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(Object(o.G)("OnDisconnect.update",1,2,arguments.length),It("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,O("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}wt("OnDisconnect.update",1,t,this.path_,!1),Object(o.H)("OnDisconnect.update",2,e,!0);var i=new o.a;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),jt=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(o.G)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Pt="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Nt=(tt=0,et=[],function(t){var e,n=t===tt;tt=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=Pt.charAt(t%64),t=Math.floor(t/64);Object(o.d)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===et[e];e--)et[e]=0;et[e]++}else for(e=0;e<12;e++)et[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=Pt.charAt(et[e]);return Object(o.d)(20===i.length,"nextPushId: Length should be 20."),i}),Rt=function(t){if("2147483647"===t)return"-";var e=M(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return I;var o=Pt.charAt(Pt.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},Dt=function(t){if("-2147483648"===t)return T;var e=M(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=Pt.charAt(Pt.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))},Mt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Lt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Mt(T,t),r=new Mt(T,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Mt.MIN},t}(),Ft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return nt},set:function(t){nt=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return x(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(o.e)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Mt.MIN},e.prototype.maxPost=function(){return new Mt(I,nt)},e.prototype.makePost=function(t,e){return Object(o.d)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Mt(t,nt)},e.prototype.toString=function(){return".key"},e}(Lt),Vt=new Ft,Ut=function(t){return"number"==typeof t?"number:"+R(t):"string:"+t},qt=function(t){if(t.isLeafNode()){var e=t.val();Object(o.d)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(o.h)(e,".sv"),"Priority must be a string or number.")}else Object(o.d)(t===rt||t.isEmpty(),"priority of unexpected type.");Object(o.d)(t===rt||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Bt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(o.d)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),qt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return it},set:function(t){it=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return $(e)?this:".priority"===q(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=q(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(o.d)(".priority"!==r||1===B(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(H(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Ut(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?R(this.value_):this.value_,this.lazyHash_=g(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(o.d)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(o.d)(i>=0,"Unknown leaf type: "+n),Object(o.d)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Ht=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Mt.MIN},e.prototype.maxPost=function(){return new Mt(I,new Bt("[PRIORITY-POST]",st))},e.prototype.makePost=function(t,e){var n=ot(t);return new Mt(e,new Bt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Lt)),zt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Wt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Gt.EMPTY_NODE,this.right=null!=o?o:Gt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Gt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Gt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Qt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Wt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Gt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Wt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Wt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new zt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new zt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new zt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new zt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Qt,t}(),Kt=Math.log(2),$t=function(){function t(t){this.count=parseInt(Math.log(t+1)/Kt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Yt=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Wt(s,o.node,Wt.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new Wt(s,o.node,Wt.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new Wt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,Wt.BLACK):(a(h,Wt.BLACK),a(h,Wt.RED))}return o}(new $t(t.length));return new Gt(r||e,o)},Xt={},Zt=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(o.d)(Xt&&Ht,"ChildrenNode.ts has not been loaded"),at=at||new t({".priority":Xt},{".priority":Ht})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(o.C)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Gt?e:null},t.prototype.hasIndex=function(t){return Object(o.h)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(o.d)(e!==Vt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,s=[],a=!1,u=n.getIterator(Mt.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),s.push(c),c=u.getNext();r=a?Yt(s,e.getCompare()):Xt;var l=e.toString(),h=Object(i.a)({},this.indexSet_);h[l]=e;var d=Object(i.a)({},this.indexes_);return d[l]=r,new t(d,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(o.A)(this.indexes_,function(t,i){var s=Object(o.C)(r.indexSet_,i);if(Object(o.d)(s,"Missing index implementation for "+i),t===Xt){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(Mt.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),Yt(a,s.getCompare())}return Xt}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Mt(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(o.A)(this.indexes_,function(t){if(t===Xt)return t;var r=n.get(e.name);return r?t.remove(new Mt(e.name,r)):t}),this.indexSet_)},t}();function Jt(t,e){return x(t.name,e.name)}function te(t,e){return x(t,e)}var ee=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&qt(this.priorityNode_),this.children_.isEmpty()&&Object(o.d)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return ut||(ut=new t(new Gt(te),null,Zt.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||ut},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?ut:e},t.prototype.getChild=function(t){var e=q(t);return null===e?this:this.getImmediateChild(e).getChild(H(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(o.d)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Mt(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?ut:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=q(t);if(null===n)return e;Object(o.d)(".priority"!==q(t)||1===B(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(H(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Ht,function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Ut(this.getPriority().val())+":"),this.forEachChild(Ht,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":g(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Mt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Mt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Mt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Mt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Mt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ne?-1:0},t.prototype.withIndex=function(e){if(e===Vt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Vt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Ht),r=e.getIterator(Ht),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Vt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),ne=new(function(t){function e(){return t.call(this,new Gt(te),ee.EMPTY_NODE,Zt.Default)||this}return Object(i.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return ee.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(ee));function re(t,e){if(void 0===e&&(e=null),null===t)return ee.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(o.d)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Bt(t,re(e));if(t instanceof Array){var n=ee.EMPTY_NODE;return N(t,function(e,r){if(Object(o.h)(t,e)&&"."!==e.substring(0,1)){var i=re(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}}),n.updatePriority(re(e))}var r=[],i=!1;if(N(t,function(t,e){if("."!==t.substring(0,1)){var n=re(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Mt(t,n)))}}),0===r.length)return ee.EMPTY_NODE;var s=Yt(r,Jt,function(t){return t.name},te);if(i){var a=Yt(r,Ht.getCompare());return new ee(s,re(e),new Zt({".priority":a},{".priority":Ht}))}return new ee(s,re(e),Zt.Default)}Object.defineProperties(Mt,{MIN:{value:new Mt(T,ee.EMPTY_NODE)},MAX:{value:new Mt(I,ne)}}),Ft.__EMPTY_NODE=ee.EMPTY_NODE,Bt.__childrenNodeConstructor=ee,rt=ne,st=ne,ot=re;var ie=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?x(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Mt.MIN},e.prototype.maxPost=function(){return Mt.MAX},e.prototype.makePost=function(t,e){var n=re(t);return new Mt(e,n)},e.prototype.toString=function(){return".value"},e}(Lt)),oe=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(o.d)(!$(e)&&".priority"!==q(e),"Can't create PathIndex with empty path or .priority key"),n}return Object(i.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=re(t),r=ee.EMPTY_NODE.updateChild(this.indexPath_,n);return new Mt(e,r)},e.prototype.maxPost=function(){var t=ee.EMPTY_NODE.updateChild(this.indexPath_,ne);return new Mt(I,t)},e.prototype.toString=function(){return Q(this.indexPath_,0).join("/")},e}(Lt),se=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Object(o.G)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Object(o.G)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Object(o.G)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Object(o.G)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Object(o.G)("DataSnapshot.child",0,1,arguments.length),e=String(e),St("DataSnapshot.child",1,e,!1);var n=new V(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,Ht)},t.prototype.hasChild=function(t){Object(o.G)("DataSnapshot.hasChild",1,1,arguments.length),St("DataSnapshot.hasChild",1,t,!1);var e=new V(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Object(o.G)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(Object(o.G)("DataSnapshot.forEach",1,1,arguments.length),Object(o.H)("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,function(r,i){return e(new t(i,n.ref_.child(r),Ht))})},t.prototype.hasChildren=function(){return Object(o.G)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(o.G)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Object(o.G)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),ae=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(o.F)(this.snapshot.exportVal())},t}(),ue=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),ce=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new ae("value",this,new se(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.d)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new ue(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),le=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Object(o.h)(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new ue(this,t,e):null},t.prototype.createEvent=function(t,e){Object(o.d)(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new ae(t.type,this,new se(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.d)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return i.every(function(t){return e.callbacks_[t]===n.callbacks_[t]})}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}();function he(t){return{type:"value",snapshotNode:t}}function de(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function fe(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function pe(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var ge,ye=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){Object(o.d)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(fe(e,a)):Object(o.d)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(de(e,n)):s.trackChildChange(pe(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Ht,function(t,r){e.hasChild(t)||n.trackChildChange(fe(t,r))}),e.isLeafNode()||e.forEachChild(Ht,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(pe(e,r,i))}else n.trackChildChange(de(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?ee.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),me=function(){function t(e){this.indexedFilter_=new ye(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Mt(e,n))||(n=ee.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=ee.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(ee.EMPTY_NODE);var i=this;return e.forEachChild(Ht,function(t,e){i.matches(new Mt(t,e))||(r=r.updateImmediateChild(t,ee.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),ve=function(){function t(t){this.rangedFilter_=new me(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Mt(e,n))||(n=ee.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=ee.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=ee.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(ee.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,ee.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(o.d)(u.numChildren()===this.limit_,"");var c=new Mt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var d=u.getImmediateChild(e),f=r.getChildAfterChild(this.index_,l,this.reverse_);null!=f&&(f.name===e||u.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:s(f,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(pe(e,n,d)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(fe(e,d));var g=u.updateImmediateChild(e,ee.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(de(f.name,f.node)),g.updateImmediateChild(f.name,f.node)):g}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=i&&(i.trackChildChange(fe(l.name,l.node)),i.trackChildChange(de(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,ee.EMPTY_NODE)):t},t}(),_e=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ht}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return Object(o.d)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(o.d)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:T},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(o.d)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(o.d)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:I},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(o.d)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Ht},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function be(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function we(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function Ee(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Ce(t,e,n){var r;return t.index_===Vt?("string"==typeof e&&(e=Rt(e)),r=Ee(t,e,n)):r=Ee(t,e,null==n?I:Rt(n)),r.startAfterSet_=!0,r}function Oe(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Se(t,e,n){var r;return t.index_===Vt?("string"==typeof e&&(e=Dt(e)),r=Oe(t,e,n)):r=Oe(t,e,null==n?T:Dt(n)),r.endBeforeSet_=!0,r}function Te(t,e){var n=t.copy();return n.index_=e,n}function Ie(t){var e,n={};return t.isDefault()||(t.index_===Ht?e="$priority":t.index_===ie?e="$value":t.index_===Vt?e="$key":(Object(o.d)(t.index_ instanceof oe,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=Object(o.F)(e),t.startSet_&&(n.startAt=Object(o.F)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Object(o.F)(t.indexStartName_))),t.endSet_&&(n.endAt=Object(o.F)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Object(o.F)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}var xe=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.d)(ge,"Reference.ts has not been loaded"),ge},set:function(t){ge=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Vt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==T)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==I)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Ht){if(null!=e&&!vt(e)||null!=n&&!vt(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(o.d)(t.getIndex()instanceof oe||t.getIndex()===ie,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Object(o.G)("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){Object(o.G)("Query.on",2,4,arguments.length),Ct("Query.on",1,e,!1),Object(o.H)("Query.on",2,n,!1);var s=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,s.cancel,s.context);else{var a={};a[e]=n,this.onChildEvent(a,s.cancel,s.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new ce(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new le(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){Object(o.G)("Query.off",0,3,arguments.length),Ct("Query.off",1,t,!0),Object(o.H)("Query.off",2,e,!0),Object(o.I)("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var s=e||null;r=new ce(s,null,n||null)}else t&&(e&&((i={})[t]=e),r=new le(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.get=function(){return this.repo.getValue(this)},t.prototype.once=function(e,n,r,i){var s=this;Object(o.G)("Query.once",1,4,arguments.length),Ct("Query.once",1,e,!1),Object(o.H)("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new o.a;c.promise.catch(function(){});var l=function(t){u&&(u=!1,s.off(e,l),n&&n.bind(a.context)(t),c.resolve(t))};return this.on(e,l,function(t){s.off(e,l),a.cancel&&a.cancel.bind(a.context)(t),c.reject(t)}),c.promise},t.prototype.limitToFirst=function(e){if(Object(o.G)("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,be(this.queryParams_,e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Object(o.G)("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,we(this.queryParams_,e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(Object(o.G)("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');St("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new V(e);if($(n))throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new oe(n),i=Te(this.queryParams_,r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){Object(o.G)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=Te(this.queryParams_,Vt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){Object(o.G)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=Te(this.queryParams_,Ht);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){Object(o.G)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=Te(this.queryParams_,ie);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Object(o.G)("Query.startAt",0,2,arguments.length),_t("Query.startAt",1,e,this.path,!0),Ot("Query.startAt",2,n,!0);var r=Ee(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.startAfter=function(e,n){void 0===e&&(e=null),Object(o.G)("Query.startAfter",0,2,arguments.length),_t("Query.startAfter",1,e,this.path,!1),Ot("Query.startAfter",2,n,!0);var r=Ce(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAfter: Starting point was already set (by another call to startAt, startAfter or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Object(o.G)("Query.endAt",0,2,arguments.length),_t("Query.endAt",1,e,this.path,!0),Ot("Query.endAt",2,n,!0);var r=Oe(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endBefore=function(e,n){void 0===e&&(e=null),Object(o.G)("Query.endBefore",0,2,arguments.length),_t("Query.endBefore",1,e,this.path,!1),Ot("Query.endBefore",2,n,!0);var r=Se(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endBefore: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Object(o.G)("Query.equalTo",1,2,arguments.length),_t("Query.equalTo",1,t,this.path,!1),Ot("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Object(o.G)("Query.toString",0,0,arguments.length),this.repo.toString()+W(this.path)},t.prototype.toJSON=function(){return Object(o.G)("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return function(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Ht&&(e.i=t.index_.toString()),e}(this.queryParams_)},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=j(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Object(o.G)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=Z(this.path,e.path),s=this.queryIdentifier()===e.queryIdentifier();return r&&i&&s},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Object(o.H)(t,3,r.cancel,!0),r.context=n,Object(o.I)(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(o.l)(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),ke=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),Ae=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=K(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),je=function(t,e,n){return t&&"object"==typeof t?(Object(o.d)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?Pe(t[".sv"],e,n):"object"==typeof t[".sv"]?Ne(t[".sv"],e):void Object(o.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Pe=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(o.d)(!1,"Unexpected server value: "+t)}},Ne=function(t,e,n){t.hasOwnProperty("increment")||Object(o.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(o.d)(!1,"Unexpected increment value: "+r);var i=e.node();if(Object(o.d)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!=typeof s?r:s+r},Re=function(t,e,n,r){return Me(e,new Ae(n,t),r)},De=function(t,e,n){return Me(t,new ke(e),n)};function Me(t,e,n){var r,i=t.getPriority().val(),o=je(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=je(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Bt(a,re(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Bt(o))),u.forEachChild(Ht,function(t,i){var o=Me(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}var Le=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!$(t)&&this.children.size>0){var e=q(t);return t=H(t),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if($(e))this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=q(e);this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=H(e),i.remember(e,n)}},t.prototype.forget=function(t){if($(t))return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Ht,function(t,e){n.remember(new V(t),e)}),this.forget(t)}if(this.children.size>0){var r=q(t);return t=H(t),this.children.has(r)&&this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild(function(n,r){var i=new V(t.toString()+"/"+n);r.forEachTree(i,e)})},t.prototype.forEachChild=function(t){this.children.forEach(function(e,n){t(n,e)})},t}(),Fe=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({});function Ve(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Ue,qe=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Fe.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if($(this.path)){if(null!=this.affectedTree.value)return Object(o.d)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new V(e));return new t(U(),n,this.revert)}return Object(o.d)(q(this.path)===e,"operationForChild called for unrelated child."),new t(H(this.path),this.affectedTree,this.revert)},t}(),Be=function(){function t(t,e){void 0===e&&(Ue||(Ue=new Gt(k)),e=Ue),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return N(e,function(t,e){n=n.set(new V(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:U(),value:this.value};if($(t))return null;var n=q(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(H(t),e);return null!=i?{path:K(new V(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if($(e))return this;var n=q(e),r=this.children.get(n);return null!==r?r.subtree(H(e)):new t(null)},t.prototype.set=function(e,n){if($(e))return new t(n,this.children);var r=q(e),i=(this.children.get(r)||new t(null)).set(H(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if($(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=q(e),r=this.children.get(n);if(r){var i=r.remove(H(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if($(t))return this.value;var e=q(t),n=this.children.get(e);return n?n.get(H(t)):null},t.prototype.setTree=function(e,n){if($(e))return n;var r,i=q(e),o=(this.children.get(i)||new t(null)).setTree(H(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(U(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(K(t,r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,U(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if($(t))return null;var i=q(t),o=this.children.get(i);return o?o.findOnPath_(H(t),K(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,U(),e)},t.prototype.foreachOnPath_=function(e,n,r){if($(e))return this;this.value&&r(n,this.value);var i=q(e),o=this.children.get(i);return o?o.foreachOnPath_(H(e),K(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(U(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(K(t,n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t}(),He=function(){function t(t,e){this.source=t,this.path=e,this.type=Fe.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return $(this.path)?new t(this.source,U()):new t(this.source,H(this.path))},t}(),ze=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Fe.OVERWRITE}return t.prototype.operationForChild=function(e){return $(this.path)?new t(this.source,U(),this.snap.getImmediateChild(e)):new t(this.source,H(this.path),this.snap)},t}(),We=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Fe.MERGE}return t.prototype.operationForChild=function(e){if($(this.path)){var n=this.children.subtree(new V(e));return n.isEmpty()?null:n.value?new ze(this.source,U(),n.value):new t(this.source,U(),n)}return Object(o.d)(q(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,H(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Qe=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if($(t))return this.isFullyInitialized()&&!this.filtered_;var e=q(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Ge=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new Qe(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new Qe(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t}(),Ke=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(o.d)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Object(o.d)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,pe(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,fe(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,de(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw Object(o.e)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,pe(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),$e=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Ye=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Qe(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),Xe=function(){return function(t,e){this.viewCache=t,this.changes=e}}(),Ze=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){Object(o.d)(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Object(o.d)(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var s,a,u=new Ke;if(n.type===Fe.OVERWRITE){var c=n;c.source.fromUser?s=this.applyUserOverwrite_(e,c.path,c.snap,r,i,u):(Object(o.d)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.getServerCache().isFiltered()&&!$(c.path),s=this.applyServerOverwrite_(e,c.path,c.snap,r,i,a,u))}else if(n.type===Fe.MERGE){var l=n;l.source.fromUser?s=this.applyUserMerge_(e,l.path,l.children,r,i,u):(Object(o.d)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.getServerCache().isFiltered(),s=this.applyServerMerge_(e,l.path,l.children,r,i,a,u))}else if(n.type===Fe.ACK_USER_WRITE){var h=n;s=h.revert?this.revertUserWrite_(e,h.path,r,i,u):this.ackUserWrite_(e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==Fe.LISTEN_COMPLETE)throw Object(o.e)("Unknown operation type: "+n.type);s=this.listenComplete_(e,n.path,r,u)}var d=u.getChanges();return t.maybeAddValueEvent_(e,s,d),new Xe(s,d)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(he(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var s=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,u=void 0;if($(e))if(Object(o.d)(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var c=t.getCompleteServerSnap(),l=n.calcCompleteEventChildren(c instanceof ee?c:ee.EMPTY_NODE);a=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var h=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var d=q(e);if(".priority"===d){Object(o.d)(1===B(e),"Can't have a priority with additional path components");var f=s.getNode();u=t.getServerCache().getNode();var p=n.calcEventCacheAfterServerOverwrite(e,f,u);a=null!=p?this.filter_.updatePriority(f,p):s.getNode()}else{var g=H(e),y=void 0;if(s.isCompleteForChild(d)){u=t.getServerCache().getNode();var m=n.calcEventCacheAfterServerOverwrite(e,s.getNode(),u);y=null!=m?s.getNode().getImmediateChild(d).updateChild(g,m):s.getNode().getImmediateChild(d)}else y=n.calcCompleteChild(d,t.getServerCache());a=null!=y?this.filter_.updateChild(s.getNode(),d,y,g,r,i):s.getNode()}}return t.updateEventSnap(a,s.isFullyInitialized()||$(e),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if($(e))a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),l,null)}else{var h=q(e);if(!u.isCompleteForPath(e)&&B(e)>1)return t;var d=H(e),f=u.getNode().getImmediateChild(h).updateChild(d,n);a=".priority"===h?c.updatePriority(u.getNode(),f):c.updateChild(u.getNode(),h,f,d,$e,null)}var p=t.updateServerSnap(a,u.isFullyInitialized()||$(e),c.filtersNodes()),g=new Ye(r,p,i);return this.generateEventCacheAfterServerEvent_(p,e,r,g,s)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new Ye(r,t,i);if($(e))a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var l=q(e);if(".priority"===l)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var h=H(e),d=u.getNode().getImmediateChild(l),f=void 0;if($(h))f=n;else{var p=c.getCompleteChild(l);f=null!=p?".priority"===z(h)&&p.getChild(G(h)).isEmpty()?p:p.updateChild(h,n):ee.EMPTY_NODE}if(d.equals(f))s=t;else{var g=this.filter_.updateChild(u.getNode(),l,f,h,c,o);s=t.updateEventSnap(g,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,s){var a=this,u=e;return r.foreach(function(r,c){var l=K(n,r);t.cacheHasChild_(e,q(l))&&(u=a.applyUserOverwrite_(u,l,c,i,o,s))}),r.foreach(function(r,c){var l=K(n,r);t.cacheHasChild_(e,q(l))||(u=a.applyUserOverwrite_(u,l,c,i,o,s))}),u},t.prototype.applyMerge_=function(t,e){return e.foreach(function(e,n){t=t.updateChild(e,n)}),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=$(e)?n:new Be(null).setTree(e,n);var l=t.getServerCache().getNode();return u.children.inorderTraversal(function(e,n){if(l.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),h=a.applyMerge_(u,n);c=a.applyServerOverwrite_(c,new V(e),h,r,i,o,s)}}),u.children.inorderTraversal(function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!l.hasChild(e)&&!u){var h=t.getServerCache().getNode().getImmediateChild(e),d=a.applyMerge_(h,n);c=a.applyServerOverwrite_(c,new V(e),d,r,i,o,s)}}),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if($(e)&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),r,i,s,o);if($(e)){var u=new Be(null);return a.getNode().forEachChild(Vt,function(t,e){u=u.set(new V(t),e)}),this.applyServerMerge_(t,e,u,r,i,s,o)}return t}var c=new Be(null);return n.foreach(function(t,n){var r=K(e,t);a.isCompleteForPath(r)&&(c=c.set(t,a.getNode().getChild(r)))}),this.applyServerMerge_(t,e,c,r,i,s,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||$(e),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,$e,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var s;if(null!=n.shadowingWrite(e))return t;var a=new Ye(n,t,r),u=t.getEventCache().getNode(),c=void 0;if($(e)||".priority"===q(e)){var l=void 0;if(t.getServerCache().isFullyInitialized())l=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();Object(o.d)(h instanceof ee,"serverChildren would be complete if leaf node"),l=n.calcCompleteEventChildren(h)}c=this.filter_.updateFullNode(u,l=l,i)}else{var d=q(e),f=n.calcCompleteChild(d,t.getServerCache());null==f&&t.getServerCache().isCompleteForChild(d)&&(f=u.getImmediateChild(d)),(c=null!=f?this.filter_.updateChild(u,d,f,H(e),a,i):t.getEventCache().getNode().hasChild(d)?this.filter_.updateChild(u,d,ee.EMPTY_NODE,H(e),a,i):u).isEmpty()&&t.getServerCache().isFullyInitialized()&&(s=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(c=this.filter_.updateFullNode(c,s,i))}return s=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(U()),t.updateEventSnap(c,s,this.filter_.filtersNodes())},t}(),Je=function(){return function(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}}();function tn(t,e,n,r,i,s){var a=r.filter(function(t){return t.type===n});a.sort(function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw Object(o.e)("Should only compare child_ events.");var r=new Mt(e.childName,e.snapshotNode),i=new Mt(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,e,n)}),a.forEach(function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,s);i.forEach(function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))})})}var en,nn=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_.getQueryParams(),i=new ye(r.getIndex()),o=(n=r).loadsAllData()?new ye(n.getIndex()):n.hasLimit()?new ve(n):new me(n);this.processor_=new Ze(o);var s=e.getServerCache(),a=e.getEventCache(),u=i.updateFullNode(ee.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(ee.EMPTY_NODE,a.getNode(),null),l=new Qe(u,s.isFullyInitialized(),i.filtersNodes()),h=new Qe(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=new Ge(h,l),this.eventGenerator_=new Je(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteNode=function(){return this.viewCache_.getCompleteEventSnap()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!$(t)&&!e.getImmediateChild(q(t)).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){Object(o.d)(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach(function(t){var i=t.createCancelEvent(e,r);i&&n.push(i)})}if(t){for(var i=[],s=0;s<this.eventRegistrations_.length;++s){var a=this.eventRegistrations_[s];if(a.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(s+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===Fe.MERGE&&null!==t.source.queryId&&(Object(o.d)(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Object(o.d)(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),Object(o.d)(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Ht,function(t,e){n.push(de(t,e))}),e.isFullyInitialized()&&n.push(he(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){return function(t,e,n,r){var i=[],o=[];return e.forEach(function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push({type:"child_moved",snapshotNode:e.snapshotNode,childName:e.childName})}),tn(t,i,"child_removed",e,r,n),tn(t,i,"child_added",e,r,n),tn(t,i,"child_moved",o,r,n),tn(t,i,"child_changed",e,r,n),tn(t,i,"value",e,r,n),i}(this.eventGenerator_,t,e,n?[n]:this.eventRegistrations_)},t}(),rn=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.d)(en,"Reference.ts has not been loaded"),en},set:function(t){Object(o.d)(!en,"__referenceConstructor has already been defined"),en=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,s,a=t.source.queryId;if(null!==a){var u=this.views.get(a);return Object(o.d)(null!=u,"SyncTree gave us an op for an invalid query."),u.applyOperation(t,e,n)}var c=[];try{for(var l=Object(i.h)(this.views.values()),h=l.next();!h.done;h=l.next())c=c.concat((u=h.value).applyOperation(t,e,n))}catch(d){r={error:d}}finally{try{h&&!h.done&&(s=l.return)&&s.call(l)}finally{if(r)throw r.error}}return c},t.prototype.getView=function(t,e,n,r){var i=t.queryIdentifier(),o=this.views.get(i);if(!o){var s=e.calcCompleteEventCache(r?n:null),a=!1;s?a=!0:n instanceof ee?(s=e.calcCompleteEventChildren(n),a=!1):(s=ee.EMPTY_NODE,a=!1);var u=new Ge(new Qe(s,a,!1),new Qe(n,r,!1));return new nn(t,u)}return o},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=this.getView(t,n,r,i);return this.views.has(t.queryIdentifier())||this.views.set(t.queryIdentifier(),o),o.addEventRegistration(e),o.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var o,s,a=e.queryIdentifier(),u=[],c=[],l=this.hasCompleteView();if("default"===a)try{for(var h=Object(i.h)(this.views.entries()),d=h.next();!d.done;d=h.next()){var f,p=Object(i.e)(d.value,2),g=p[0];c=c.concat((f=p[1]).removeEventRegistration(n,r)),f.isEmpty()&&(this.views.delete(g),f.getQuery().getQueryParams().loadsAllData()||u.push(f.getQuery()))}}catch(y){o={error:y}}finally{try{d&&!d.done&&(s=h.return)&&s.call(h)}finally{if(o)throw o.error}}else(f=this.views.get(a))&&(c=c.concat(f.removeEventRegistration(n,r)),f.isEmpty()&&(this.views.delete(a),f.getQuery().getQueryParams().loadsAllData()||u.push(f.getQuery())));return l&&!this.hasCompleteView()&&u.push(new t.__referenceConstructor(e.repo,e.path)),{removed:u,events:c}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=Object(i.h)(this.views.values()),o=r.next();!o.done;o=r.next()){var s=o.value;s.getQuery().getQueryParams().loadsAllData()||n.push(s)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var o=Object(i.h)(this.views.values()),s=o.next();!s.done;s=o.next())r=r||s.value.getCompleteServerCache(t)}catch(a){e={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=Object(i.h)(this.views.values()),r=n.next();!r.done;r=n.next()){var o=r.value;if(o.getQuery().getQueryParams().loadsAllData())return o}}catch(s){t={error:s}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),on=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new Be(null))},t}();function sn(t,e,n){if($(e))return new on(new Be(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=Y(i,e);return o=o.updateChild(s,n),new on(t.writeTree_.set(i,o))}var a=new Be(n),u=t.writeTree_.setTree(e,a);return new on(u)}function an(t,e,n){var r=t;return N(n,function(t,n){r=sn(r,K(e,t),n)}),r}function un(t,e){if($(e))return on.empty();var n=t.writeTree_.setTree(e,new Be(null));return new on(n)}function cn(t,e){return null!=ln(t,e)}function ln(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(Y(n.path,e)):null}function hn(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Ht,function(t,n){e.push(new Mt(t,n))}):t.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new Mt(t,n.value))}),e}function dn(t,e){if($(e))return t;var n=ln(t,e);return new on(null!=n?new Be(n):t.writeTree_.subtree(e))}function fn(t){return t.writeTree_.isEmpty()}function pn(t,e){return gn(U(),t.writeTree_,e)}function gn(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,i){".priority"===e?(Object(o.d)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=gn(K(t,e),i,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(K(t,".priority"),r)),n}var yn=function(){function t(){this.visibleWrites_=on.empty(),this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new mn(t,this)},t.prototype.addOverwrite=function(t,e,n,r){Object(o.d)(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=sn(this.visibleWrites_,t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){Object(o.d)(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=an(this.visibleWrites_,t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex(function(e){return e.writeId===t});Object(o.d)(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,s=!1,a=this.allWrites_.length-1;i&&a>=0;){var u=this.allWrites_[a];u.visible&&(a>=n&&this.recordContainsPath_(u,r.path)?i=!1:J(r.path,u.path)&&(s=!0)),a--}return!!i&&(s?(this.resetTree_(),!0):(r.snap?this.visibleWrites_=un(this.visibleWrites_,r.path):N(r.children,function(t){e.visibleWrites_=un(e.visibleWrites_,K(r.path,t))}),!0))},t.prototype.getCompleteWriteData=function(t){return ln(this.visibleWrites_,t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=dn(this.visibleWrites_,e);return!i&&fn(o)?n:i||null!=n||cn(o,U())?pn(t.layerTree_(this.allWrites_,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(J(t.path,e)||J(e,t.path))},e),n||ee.EMPTY_NODE):null}var s=ln(this.visibleWrites_,e);if(null!=s)return s;var a=dn(this.visibleWrites_,e);return fn(a)?n:null!=n||cn(a,U())?pn(a,n||ee.EMPTY_NODE):null},t.prototype.calcCompleteEventChildren=function(t,e){var n=ee.EMPTY_NODE,r=ln(this.visibleWrites_,t);if(r)return r.isLeafNode()||r.forEachChild(Ht,function(t,e){n=n.updateImmediateChild(t,e)}),n;if(e){var i=dn(this.visibleWrites_,t);return e.forEachChild(Ht,function(t,e){var r=pn(dn(i,new V(t)),e);n=n.updateImmediateChild(t,r)}),hn(i).forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n}return hn(dn(this.visibleWrites_,t)).forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){Object(o.d)(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=K(t,e);if(cn(this.visibleWrites_,i))return null;var s=dn(this.visibleWrites_,i);return fn(s)?r.getChild(e):pn(s,r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=K(t,e),i=ln(this.visibleWrites_,r);return null!=i?i:n.isCompleteForChild(e)?pn(dn(this.visibleWrites_,r),n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return ln(this.visibleWrites_,t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=dn(this.visibleWrites_,t),u=ln(a,U());if(null!=u)s=u;else{if(null==e)return[];s=pn(a,e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),d=h.getNext();d&&c.length<r;)0!==l(d,n)&&c.push(d),d=h.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return J(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&J(K(t.path,n),e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,U()),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=on.empty(),i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)J(n,a)?r=sn(r,u=Y(n,a),s.snap):J(a,n)&&(u=Y(a,n),r=sn(r,U(),s.snap.getChild(u)));else{if(!s.children)throw Object(o.e)("WriteRecord should have .snap or .children");if(J(n,a))r=an(r,u=Y(n,a),s.children);else if(J(a,n))if($(u=Y(a,n)))r=an(r,U(),s.children);else{var c=Object(o.C)(s.children,q(u));if(c){var l=c.getChild(H(u));r=sn(r,U(),l)}}}}}return r},t}(),mn=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(K(this.treePath_,t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(K(this.treePath_,e),this.writeTree_)},t}(),vn=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=new Be(null),this.pendingWriteTree_=new yn,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new ze({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=Be.fromObject(e);return this.applyOperationToSyncPoints_(new We({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=new Be(null);return null!=n.snap?r=r.set(U(),!0):N(n.children,function(t){r=r.set(new V(t),!0)}),this.applyOperationToSyncPoints_(new qe(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new ze({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))},t.prototype.applyServerMerge=function(t,e){var n=Be.fromObject(e);return this.applyOperationToSyncPoints_(new We({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new He({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=Y(s,e),c=new ze(Ve(a),u,n);return this.applyTaggedOperation_(s,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=Y(s,e),c=Be.fromObject(n),l=new We(Ve(a),u,c);return this.applyTaggedOperation_(s,l)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,s=i.queryId,a=Y(o,e),u=new He(Ve(s),a);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,s=!1;this.syncPointTree_.foreachOnPath(r,function(t,e){var n=Y(t,r);i=i||e.getCompleteServerCache(n),s=s||e.hasCompleteView()});var a,u=this.syncPointTree_.get(r);u?(s=s||u.hasCompleteView(),i=i||u.getCompleteServerCache(U())):(u=new rn,this.syncPointTree_=this.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=ee.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=e.getCompleteServerCache(U());n&&(i=i.updateImmediateChild(t,n))}));var c=u.viewExistsForQuery(e);if(!c&&!e.getQueryParams().loadsAllData()){var l=t.makeQueryKey_(e);Object(o.d)(!this.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=t.getNextQueryTag_();this.queryToTagMap.set(l,h),this.tagToQueryMap.set(h,l)}var d=this.pendingWriteTree_.childWrites(r),f=u.addEventRegistration(e,n,d,i,a);if(!c&&!s){var p=u.viewForQuery(e);f=f.concat(this.setupListener_(e,p))}return f},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===e.queryIdentifier()||s.viewExistsForQuery(e))){var u=s.removeEventRegistration(e,n,r);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;a=u.events;var l=-1!==c.findIndex(function(t){return t.getQueryParams().loadsAllData()}),h=this.syncPointTree_.findOnPath(o,function(t,e){return e.hasCompleteView()});if(l&&!h){var d=this.syncPointTree_.subtree(o);if(!d.isEmpty())for(var f=this.collectDistinctViewsForSubTree_(d),p=0;p<f.length;++p){var g=f[p],y=g.getQuery(),m=this.createListenerForView_(g);this.listenProvider_.startListening(t.queryForListening_(y),this.tagForQuery_(y),m.hashFn,m.onComplete)}}!h&&c.length>0&&!r&&(l?this.listenProvider_.stopListening(t.queryForListening_(e),null):c.forEach(function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)})),this.removeTags_(c)}return a},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,function(e,n){var r=Y(e,t),i=n.getCompleteServerCache(r);if(i)return i});return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.getServerValue=function(t){var e=t.path,n=null;this.syncPointTree_.foreachOnPath(e,function(t,r){var i=Y(t,e);n=n||r.getCompleteServerCache(i)});var r=this.syncPointTree_.get(e);r?n=n||r.getCompleteServerCache(U()):(r=new rn,this.syncPointTree_=this.syncPointTree_.set(e,r));var i=null!=n,o=i?new Qe(n,!0,!1):null,s=this.pendingWriteTree_.childWrites(t.path);return r.getView(t,s,i?o.getNode():ee.EMPTY_NODE,i).getCompleteNode()},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),N(n,function(t,e){r=r.concat(e)}),r})},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),s=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),i,s.hashFn,s.onComplete),u=this.syncPointTree_.subtree(r);if(i)Object(o.d)(!u.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!$(t)&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),N(n,function(t,e){r=r.concat(e)}),r}),l=0;l<c.length;++l){var h=c[l];this.listenProvider_.stopListening(t.queryForListening_(h),this.tagForQuery_(h))}return a},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||ee.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return Object(o.d)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new V(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);Object(o.d)(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(U()))},t.prototype.applyOperationHelper_=function(t,e,n,r){if($(t.path))return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(U());null==n&&null!=i&&(n=i.getCompleteServerCache(U()));var o=[],s=q(t.path),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(U());null==n&&null!=o&&(n=o.getCompleteServerCache(U()));var s=[];return e.children.inorderTraversal(function(e,o){var a=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(s=s.concat(i.applyOperationDescendantsHelper_(c,o,a,u)))}),o&&(s=s.concat(o.applyOperation(t,r,n))),s},t.nextQueryTag_=1,t}(),_n=function(){function t(){this.rootNode_=ee.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),bn=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(o.h)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(o.j)(this.counters_)},t}(),wn=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new bn),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),En=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(i.a)({},t);return this.last_&&N(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),Cn=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new En(t);var n=1e4+2e4*Math.random();F(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;N(e,function(e,i){i>0&&Object(o.h)(t.statsToReport_,e)&&(n[e]=i,r=!0)}),r&&this.server_.reportStats(n),F(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),On=function(){return function(){this.eventLists_=[],this.recursionDepth_=0}}();function Sn(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||Z(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Tn(t,e,n){Sn(t,n),xn(t,function(t){return Z(t,e)})}function In(t,e,n){Sn(t,n),xn(t,function(t){return J(t,e)||J(e,t)})}function xn(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(kn(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function kn(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();m&&b("event: "+n.toString()),L(r)}}}var An=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(o.d)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(i.f)(this.listeners_[t]),o=0;o<r.length;o++)r[o].callback.apply(r[o].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(o.d)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),jn=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.d)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(An),Pn=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(o.t)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.d)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(An),Nn=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&L(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),Rn=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=w(t),this.stats_=wn.getCollection(e),this.urlFn=function(t){return e.connectionURL("long_polling",t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Nn(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(Object(o.v)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new Dn(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,5),o=r[0],s=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===o)n.id=s,n.password=a;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,2),o=r[0],s=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(o,s)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.hostname&&lt.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(o.v)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(o.F)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(o.g)(e),r=P(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(o.v)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(o.F)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),Dn=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(o.v)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=p(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){b("frame writing exception"),u.stack&&b(u.stack),b(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||b("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;Object(o.v)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){b("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),Mn="";function Ln(t){Mn=t}var Fn=null;"undefined"!=typeof MozWebSocket?Fn=MozWebSocket:"undefined"!=typeof WebSocket&&(Fn=WebSocket);var Vn=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=w(this.connId),this.stats_=wn.getCollection(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!Object(o.v)()&&"undefined"!=typeof location&&location.hostname&&lt.test(location.hostname)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL("websocket",r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,h.set("previous_websocket_failure",!0);try{if(Object(o.v)()){var r={headers:{"User-Agent":"Firebase/5/"+Mn+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},i=process.env,s=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new Fn(this.connURL,[],r)}else this.mySock=new Fn(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(u){this.log_("Error instantiating WebSocket.");var a=u.message||u.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Fn&&!t.forceDisallow_},t.previouslyFailed=function(){return h.isInMemoryStorage||!0===h.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){h.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(o.z)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(o.d)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(o.F)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=P(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),Un=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Rn,Vn]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,o=Vn&&Vn.isAvailable(),s=o&&!Vn.previouslyFailed();if(e.webSocketOnly&&(o||O("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Vn];else{var a=this.transports_=[];try{for(var u=Object(i.h)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),qn=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=w("c:"+this.id+":"),this.transportManager_=new Un(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=F(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=A("t",t),n=A("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=A("t",t),n=A("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=A("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?E("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):E("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&O("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),F(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):F(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(h.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),Bn=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),Hn=function(t){function e(n,r,i,s,a,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=s,l.onServerInfoUpdate_=a,l.authTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=w("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=1e3,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Object(o.v)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),jn.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&Pn.getInstance().on("online",l.onOnline_,l),l}return Object(i.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r,a:t,b:e};this.log_(Object(o.F)(i)),Object(o.d)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new o.a,r={p:t.path.toString(),q:t.queryObject()},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),s=t.path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Object(o.d)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Object(o.d)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(o.h)(t,"w")){var n=Object(o.C)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();O("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(o.n)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(o.y)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Object(o.d)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(o.F)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):E("Unrecognized action received from server: "+Object(o.F)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(o.d)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this,u=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())};this.realtime_={close:h,sendRequest:function(t){Object(o.d)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(t)}};var d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(d).then(function(t){c?b("getToken() completed but was canceled"):(b("getToken() completed. Creating connection."),a.authToken_=t&&t.accessToken,l=new qn(s,a.repoInfo_,a.applicationId_,n,r,i,function(t){O(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")},u))}).then(null,function(e){a.log_("Failed to get token: "+e),c||(t.repoInfo_.nodeAdmin&&O(e),h())})}},e.prototype.interrupt=function(t){b("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){b("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(o.r)(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return j(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new V(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){b("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var o=Object(i.h)(this.listens.values()),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(d){n={error:d}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(f){t={error:f}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(o.v)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+Mn.replace(/\./g,"-")]=1,Object(o.t)()?t["framework.cordova"]=1:Object(o.w)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=Pn.getInstance().currentlyOnline();return Object(o.r)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(Bn),zn=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=w("p:rest:"),i.listens_={},i}return Object(i.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(o.d)(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=Ie(t.getQueryParams());this.restRequest_(a+".json",l,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(o.C)(s.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=Ie(t.getQueryParams()),r=t.path.toString(),i=new o.a;return this.restRequest_(r+".json",n,function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))}),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then(function(i){var s=i&&i.accessToken;s&&(e.auth=s);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(o.B)(e);r.log_("Sending REST request for "+a);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=Object(o.z)(u.responseText)}catch(e){O("Failed to parse JSON response for "+a+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&O("Got unsuccessful REST response for "+a+" Status: "+u.status),n(u.status);n=null}},u.open("GET",a,!0),u.send()})},e}(Bn),Wn=function(){return function(){this.children={},this.childCount=0,this.value=null}}(),Qn=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new Wn),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof V?e:new V(e),r=this,i=q(n);null!==i;)r=new t(i,r,Object(o.C)(r.node_.children,i)||new Wn),i=q(n=H(n));return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){Object(o.d)(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;N(this.node_.children,function(r,i){e(new t(r,n,i))})},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild(function(e){e.forEachDescendant(t,!0,n)}),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild(function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)})},t.prototype.path=function(){return new V(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=Object(o.h)(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}(),Gn=function(t){return t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT",t}({}),Kn=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new On,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new Le,this.transactionQueueTree_=new Qn,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.start=function(){var t=this;if(this.stats_=wn.getCollection(this.repoInfo_),this.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new zn(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var e=this.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(o.F)(e)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}this.persistentConnection_=new Hn(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,e),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),this.statsReporter_=wn.getOrCreateReporter(this.repoInfo_,function(){return new Cn(t.stats_,t.server_)}),this.infoData_=new _n,this.infoSyncTree_=new vn({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e.path);return s.isEmpty()||(o=t.infoSyncTree_.applyServerOverwrite(e.path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new vn({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);In(t.eventQueue_,e.path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})},t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new V(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new V(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var s=[];if(r)if(n){var a=Object(o.A)(e,function(t){return re(t)});s=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var u=re(e);s=this.serverSyncTree_.applyTaggedQueryOverwrite(i,u,r)}else if(n){var c=Object(o.A)(e,function(t){return re(t)});s=this.serverSyncTree_.applyServerMerge(i,c)}else{var l=re(e);s=this.serverSyncTree_.applyServerOverwrite(i,l)}var h=i;s.length>0&&(h=this.rerunTransactions_(i)),In(this.eventQueue_,h,s)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;N(t,function(t,n){e.updateInfo_(t,n)})},t.prototype.updateInfo_=function(t,e){var n=new V("/.info/"+t),r=re(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);In(this.eventQueue_,n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.getValue=function(t){var e=this,n=this.serverSyncTree_.getServerValue(t);return null!=n?Promise.resolve(new se(n,t.getRef(),t.getQueryParams().getIndex())):this.server_.get(t).then(function(n){var r=re(n),i=e.serverSyncTree_.applyServerOverwrite(t.path,r);return Tn(e.eventQueue_,t.path,i),Promise.resolve(new se(r,t.getRef(),t.getQueryParams().getIndex()))},function(n){return e.log_("get for query "+Object(o.F)(t)+" failed: "+n),Promise.reject(new Error(n))})},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),s=re(e,n),a=this.serverSyncTree_.calcCompleteEventCache(t),u=De(s,a,o),c=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserOverwrite(t,u,c,!0);Sn(this.eventQueue_,l),this.server_.put(t.toString(),s.val(!0),function(e,n){var o="ok"===e;o||O("set at "+t+" failed: "+e);var s=i.serverSyncTree_.ackUserWrite(c,!o);In(i.eventQueue_,t,s),i.callOnCompleteCallback(r,e,n)});var h=this.abortTransactions_(t);this.rerunTransactions_(h),In(this.eventQueue_,h,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),s={};if(N(e,function(e,n){i=!1,s[e]=Re(K(t,e),re(n),r.serverSyncTree_,o)}),i)b("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,s,a);Sn(this.eventQueue_,u),this.server_.merge(t.toString(),e,function(e,i){var o="ok"===e;o||O("update at "+t+" failed: "+e);var s=r.serverSyncTree_.ackUserWrite(a,!o),u=s.length>0?r.rerunTransactions_(t):t;In(r.eventQueue_,u,s),r.callOnCompleteCallback(n,e,i)}),N(e,function(e){var n=r.abortTransactions_(K(t,e));r.rerunTransactions_(n)}),In(this.eventQueue_,t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new Le;this.onDisconnect_.forEachTree(U(),function(r,i){var o=Re(r,i,t.serverSyncTree_,e);n.remember(r,o)});var r=[];n.forEachTree(U(),function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)}),this.onDisconnect_=new Le,In(this.eventQueue_,U(),r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)})},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=re(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)})},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=re(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)})},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(Object(o.r)(e))return b("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,function(i,o){"ok"===i&&N(e,function(e,n){var i=re(n);r.onDisconnect_.remember(K(t,e),i)}),r.callOnCompleteCallback(n,i,o)})},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===q(t.path)?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),Tn(this.eventQueue_,t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===q(t.path)?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),Tn(this.eventQueue_,t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new En(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce(function(t,e){return Math.max(e.length,t)},0);N(e,function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)})}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),b.apply(void 0,Object(i.f)([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&L(function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}})},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new tr(this))},enumerable:!1,configurable:!0}),t.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},s=new $n(this,t);s.on("value",i);var a={path:t,update:e,onComplete:n,status:null,order:p(),applyLocally:r,retryCount:0,unwatcher:function(){s.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=this.getLatestState_(t);a.currentInputSnapshot=u;var c=a.update(u.val());if(void 0===c){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var l=new se(a.currentInputSnapshot,new $n(this,a.path),Ht);a.onComplete(null,!1,l)}}else{bt("transaction failed: Data returned ",c,a.path),a.status=Gn.RUN;var h=this.transactionQueueTree_.subTree(t),d=h.getValue()||[];d.push(a),h.setValue(d);var f=void 0;"object"==typeof c&&null!==c&&Object(o.h)(c,".priority")?(f=Object(o.C)(c,".priority"),Object(o.d)(vt(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):f=(this.serverSyncTree_.calcCompleteEventCache(t)||ee.EMPTY_NODE).getPriority().val();var g=this.generateServerValues(),y=re(c,f),m=De(y,u,g);a.currentOutputSnapshotRaw=y,a.currentOutputSnapshotResolved=m,a.currentWriteId=this.getNextWriteId_();var v=this.serverSyncTree_.applyUserOverwrite(t,m,a.currentWriteId,a.applyLocally);In(this.eventQueue_,t,v),this.sendReadyTransactions_()}},t.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||ee.EMPTY_NODE},t.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);Object(o.d)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return t.status===Gn.RUN})&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild(function(t){e.sendReadyTransactions_(t)})},t.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map(function(t){return t.currentWriteId}),i=this.getLatestState_(t,r),s=i,a=i.hash(),u=0;u<e.length;u++){var c=e[u];Object(o.d)(c.status===Gn.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=Gn.SENT,c.retryCount++;var l=Y(t,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),d=t;this.server_.put(d.toString(),h,function(r){n.log_("transaction put response",{path:d.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<e.length;s++){if(e[s].status=Gn.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[s].currentWriteId)),e[s].onComplete){var a=e[s].currentOutputSnapshotResolved,u=new $n(n,e[s].path),c=new se(a,u,Ht);o.push(e[s].onComplete.bind(null,null,!0,c))}e[s].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),In(n.eventQueue_,t,i),s=0;s<o.length;s++)L(o[s])}else{if("datastale"===r)for(s=0;s<e.length;s++)e[s].status=e[s].status===Gn.SENT_NEEDS_ABORT?Gn.NEEDS_ABORT:Gn.RUN;else for(O("transaction at "+d.toString()+" failed: "+r),s=0;s<e.length;s++)e[s].status=Gn.NEEDS_ABORT,e[s].abortReason=r;n.rerunTransactions_(t)}},a)},t.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},t.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter(function(t){return t.status===Gn.RUN}).map(function(t){return t.currentWriteId}),s=0;s<t.length;s++){var a=t[s],u=Y(e,a.path),c=!1,l=void 0;if(Object(o.d)(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===Gn.NEEDS_ABORT)c=!0,l=a.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===Gn.RUN)if(a.retryCount>=25)c=!0,l="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var h=this.getLatestState_(a.path,i);a.currentInputSnapshot=h;var d=t[s].update(h.val());if(void 0!==d){bt("transaction failed: Data returned ",d,a.path);var f=re(d);"object"==typeof d&&null!=d&&Object(o.h)(d,".priority")||(f=f.updatePriority(h.getPriority()));var p=a.currentWriteId,g=this.generateServerValues(),y=De(f,h,g);a.currentOutputSnapshotRaw=f,a.currentOutputSnapshotResolved=y,a.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(p),1),r=(r=r.concat(this.serverSyncTree_.applyUserOverwrite(a.path,y,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(p,!0))}else c=!0,l="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(In(this.eventQueue_,e,r),r=[],c&&(t[s].status=Gn.COMPLETED,setTimeout(t[s].unwatcher,Math.floor(0)),t[s].onComplete))if("nodata"===l){var m=new $n(this,t[s].path),v=new se(t[s].currentInputSnapshot,m,Ht);n.push(t[s].onComplete.bind(null,null,!1,v))}else n.push(t[s].onComplete.bind(null,new Error(l),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),s=0;s<n.length;s++)L(n[s]);this.sendReadyTransactions_()}},t.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=q(t);null!==e&&null===n.getValue();)n=n.subTree(e),e=q(t=H(t));return n},t.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},t.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},t.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==Gn.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},t.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},t.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,s=0;s<e.length;s++)e[s].status===Gn.SENT_NEEDS_ABORT||(e[s].status===Gn.SENT?(Object(o.d)(i===s-1,"All SENT items should be at beginning of queue."),i=s,e[s].status=Gn.SENT_NEEDS_ABORT,e[s].abortReason="set"):(Object(o.d)(e[s].status===Gn.RUN,"Unexpected transaction status in abort"),e[s].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[s].currentWriteId,!0)),e[s].onComplete&&n.push(e[s].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,In(this.eventQueue_,t.path(),r),s=0;s<n.length;s++)L(n[s])}},t}(),$n=function(t){function e(e,n){if(!(e instanceof Kn))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,new _e,!1)||this}return Object(i.c)(e,t),e.prototype.getKey=function(){return Object(o.G)("Reference.key",0,0,arguments.length),$(this.path)?null:z(this.path)},e.prototype.child=function(t){return Object(o.G)("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof V||(null===q(this.path)?Tt("Reference.child",1,t,!1):St("Reference.child",1,t,!1)),new e(this.repo,K(this.path,t))},e.prototype.getParent=function(){Object(o.G)("Reference.parent",0,0,arguments.length);var t=G(this.path);return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){Object(o.G)("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){Object(o.G)("Reference.set",1,2,arguments.length),It("Reference.set",this.path),_t("Reference.set",1,t,this.path,!1),Object(o.H)("Reference.set",2,e,!0);var n=new o.a;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Object(o.G)("Reference.update",1,2,arguments.length),It("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,O("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}wt("Reference.update",1,t,this.path,!1),Object(o.H)("Reference.update",2,e,!0);var i=new o.a;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(Object(o.G)("Reference.setWithPriority",2,3,arguments.length),It("Reference.setWithPriority",this.path),_t("Reference.setWithPriority",1,t,this.path,!1),Et("Reference.setWithPriority",2,e,!1),Object(o.H)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new o.a;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return Object(o.G)("Reference.remove",0,1,arguments.length),It("Reference.remove",this.path),Object(o.H)("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(Object(o.G)("Reference.transaction",1,3,arguments.length),It("Reference.transaction",this.path),Object(o.H)("Reference.transaction",1,t,!1),Object(o.H)("Reference.transaction",2,e,!0),kt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new o.a;"function"==typeof e&&r.promise.catch(function(){});var i=function(t,n,i){t?r.reject(t):r.resolve(new jt(n,i)),"function"==typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){Object(o.G)("Reference.setPriority",1,2,arguments.length),It("Reference.setPriority",this.path),Et("Reference.setPriority",1,t,!1),Object(o.H)("Reference.setPriority",2,e,!0);var n=new o.a;return this.repo.setWithPriority(K(this.path,".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Object(o.G)("Reference.push",0,2,arguments.length),It("Reference.push",this.path),_t("Reference.push",1,t,this.path,!0),Object(o.H)("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=Nt(r),s=this.child(i),a=this.child(i);return n=null!=t?s.set(t,e).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch(function(){}),s},e.prototype.onDisconnect=function(){return It("Reference.onDisconnect",this.path),new At(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(xe);xe.__referenceConstructor=$n,rn.__referenceConstructor=$n;var Yn,Xn=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then(function(t){return n.auth_=t})}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(b("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout(function(){return t(null)},0),this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';O(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),Zn=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),Jn=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return Yn||(Yn=new t),Yn},t.prototype.interrupt=function(){var t,e,n,r;try{for(var o=Object(i.h)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].interrupt()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,r;try{for(var o=Object(i.h)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].resume()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.applyEmulatorSettings=function(t,e,n){t.repoInfo_=new ht(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new Zn)},t.prototype.databaseFromApp=function(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||C("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),b("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=dt(i,r),a=s.repoInfo,u=void 0;"undefined"!=typeof process&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(o=!0,a=(s=dt(i="http://"+u+"?ns="+a.namespace,r)).repoInfo):o=!s.repoInfo.secure;var c=r&&o?new Zn:new Xn(t,e);return xt("Invalid Firebase Database URL",1,s),$(s.path)||C("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(a,t,c).database},t.prototype.deleteRepo=function(t){var e=Object(o.C)(this.repos_,t.app.name);e&&Object(o.C)(e,t.key)===t||C("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.key]},t.prototype.createRepo=function(t,e,n){var r=Object(o.C)(this.repos_,e.name);r||(this.repos_[e.name]=r={});var i=Object(o.C)(r,t.toURLString());return i&&C("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Kn(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),tr=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return Object(i.b)(e,void 0,void 0,function(){return Object(i.d)(this,function(t){return this.checkDeleted_("delete"),Jn.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]})})}},t instanceof Kn||C("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new $n(this.repo_,U())),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?C("Cannot call useEmulator() after instance has already been initialized."):Jn.getInstance().applyEmulatorSettings(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),Object(o.G)("database.ref",0,1,arguments.length),t instanceof $n?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Object(o.G)(e,1,1,arguments.length);var n=dt(t,this.repo_.repoInfo_.nodeAdmin);xt(e,1,n);var r=n.repoInfo;return this.repo_.repoInfo_.isCustomHost()||r.host===this.repo_.repoInfo_.host||C(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&C("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Object(o.G)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){Object(o.G)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),er=Object.freeze({__proto__:null,forceLongPolling:function(){Vn.forceDisallow(),Rn.forceAllow()},forceWebSockets:function(){Rn.forceDisallow()},isWebSocketsAvailable:function(){return Vn.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,i=t.namespace,o=t.nodeAdmin,s=void 0!==o&&o;Ln(t.version);var u=new a.c("auth-internal",new a.b("database-standalone"));return u.setComponent(new a.a("auth-internal",function(){return r},"PRIVATE")),{instance:Jn.getInstance().databaseFromApp(e,u,n,s),namespace:i}}}),nr=Hn;Hn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Hn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var rr=Object.freeze({__proto__:null,DataConnection:nr,RealTimeConnection:qn,hijackHash:function(t){var e=Hn.prototype.put;return Hn.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Hn.prototype.put=e}},ConnectionTarget:ht,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){Jn.getInstance().forceRestClient(t)}}),ir=tr.ServerValue;!function(e){Ln(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new a.a("database",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return Jn.getInstance().databaseFromApp(n,r,e)},"PUBLIC").setServiceProps({Reference:$n,Query:xe,Database:tr,DataSnapshot:se,enableLogging:_,INTERNAL:er,ServerValue:ir,TEST_ACCESS:rr}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.9.4"),Object(o.v)()&&(t.exports=n)}(r.a)}).call(this,n("3UD+")(t))},"7Hc7":function(t,e,n){"use strict";n.d(e,"b",function(){return d}),n.d(e,"a",function(){return f});let r=1;const i=(()=>Promise.resolve())(),o={};function s(t){return t in o&&(delete o[t],!0)}const a={setImmediate(t){const e=r++;return o[e]=!0,i.then(()=>s(e)&&t()),e},clearImmediate(t){s(t)}};var u=n("3N8a");class c extends u.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=a.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(a.clearImmediate(e),t.scheduled=void 0)}}var l=n("IjjT");class h extends l.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const d=new h(c),f=d},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r=n("3N8a");const i=new(n("IjjT").a)(r.a),o=i},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EQ5u:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return u});var r=n("XNiG"),i=n("HDdC"),o=(n("7o/Q"),n("quSY")),s=n("x+ZX");class a extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new o.a,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=o.a.EMPTY)),t}refCount(){return Object(s.a)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.a}),r.a.registerVersion("firebase","8.2.9","app")},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},WMd4:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("EY2u"),i=n("LRne"),o=n("HDdC");let s=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(i.a)(this.value);case"E":return t=this.error,new o.a(e=>e.error(t));case"C":return Object(r.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})()},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Y7HM:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("DH7j");function i(t){return!Object(r.a)(t)&&t-parseFloat(t)+1>=0}},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return $e}),n.d(e,"b",function(){return ru}),n.d(e,"c",function(){return Za}),n.d(e,"d",function(){return Ya}),n.d(e,"e",function(){return Xa}),n.d(e,"f",function(){return Yu}),n.d(e,"g",function(){return Uu}),n.d(e,"h",function(){return na}),n.d(e,"i",function(){return pu}),n.d(e,"j",function(){return Ts}),n.d(e,"k",function(){return su}),n.d(e,"l",function(){return As}),n.d(e,"m",function(){return cr}),n.d(e,"n",function(){return Aa}),n.d(e,"o",function(){return Gi}),n.d(e,"p",function(){return yn}),n.d(e,"q",function(){return k}),n.d(e,"r",function(){return Ke}),n.d(e,"s",function(){return co}),n.d(e,"t",function(){return $s}),n.d(e,"u",function(){return Xs}),n.d(e,"v",function(){return ou}),n.d(e,"w",function(){return fa}),n.d(e,"x",function(){return Bu}),n.d(e,"y",function(){return da}),n.d(e,"z",function(){return Du}),n.d(e,"A",function(){return mu}),n.d(e,"B",function(){return mn}),n.d(e,"C",function(){return nu}),n.d(e,"D",function(){return eu}),n.d(e,"E",function(){return Pa}),n.d(e,"F",function(){return Ns}),n.d(e,"G",function(){return Ps}),n.d(e,"H",function(){return fr}),n.d(e,"I",function(){return Ds}),n.d(e,"J",function(){return ir}),n.d(e,"K",function(){return vn}),n.d(e,"L",function(){return Wu}),n.d(e,"M",function(){return ua}),n.d(e,"N",function(){return Ou}),n.d(e,"O",function(){return Ye}),n.d(e,"P",function(){return Ls}),n.d(e,"Q",function(){return Ms}),n.d(e,"R",function(){return ga}),n.d(e,"S",function(){return D}),n.d(e,"T",function(){return Mu}),n.d(e,"U",function(){return Nu}),n.d(e,"V",function(){return f}),n.d(e,"W",function(){return fn}),n.d(e,"X",function(){return Pu}),n.d(e,"Y",function(){return Ku}),n.d(e,"Z",function(){return Iu}),n.d(e,"ab",function(){return iu}),n.d(e,"bb",function(){return $i}),n.d(e,"cb",function(){return fs}),n.d(e,"db",function(){return nr}),n.d(e,"eb",function(){return Vn}),n.d(e,"fb",function(){return xn}),n.d(e,"gb",function(){return An}),n.d(e,"hb",function(){return Rn}),n.d(e,"ib",function(){return Pn}),n.d(e,"jb",function(){return jn}),n.d(e,"kb",function(){return Nn}),n.d(e,"lb",function(){return cs}),n.d(e,"mb",function(){return Gu}),n.d(e,"nb",function(){return ls}),n.d(e,"ob",function(){return hs}),n.d(e,"pb",function(){return kn}),n.d(e,"qb",function(){return U}),n.d(e,"rb",function(){return _o}),n.d(e,"sb",function(){return Do}),n.d(e,"tb",function(){return No}),n.d(e,"ub",function(){return Ro}),n.d(e,"vb",function(){return us}),n.d(e,"wb",function(){return Et}),n.d(e,"xb",function(){return l}),n.d(e,"yb",function(){return In}),n.d(e,"zb",function(){return ho}),n.d(e,"Ab",function(){return yt}),n.d(e,"Bb",function(){return Cs}),n.d(e,"Cb",function(){return Jr}),n.d(e,"Db",function(){return Eo}),n.d(e,"Eb",function(){return $o}),n.d(e,"Fb",function(){return za}),n.d(e,"Gb",function(){return X}),n.d(e,"Hb",function(){return it}),n.d(e,"Ib",function(){return b}),n.d(e,"Jb",function(){return w}),n.d(e,"Kb",function(){return et}),n.d(e,"Lb",function(){return ot}),n.d(e,"Mb",function(){return To}),n.d(e,"Nb",function(){return jo}),n.d(e,"Ob",function(){return Ao}),n.d(e,"Pb",function(){return ko}),n.d(e,"Qb",function(){return Po}),n.d(e,"Rb",function(){return We}),n.d(e,"Sb",function(){return is}),n.d(e,"Tb",function(){return dn}),n.d(e,"Ub",function(){return Qe}),n.d(e,"Vb",function(){return $a}),n.d(e,"Wb",function(){return Mo}),n.d(e,"Xb",function(){return Wa}),n.d(e,"Yb",function(){return Vo}),n.d(e,"Zb",function(){return Bo}),n.d(e,"ac",function(){return qo}),n.d(e,"bc",function(){return Io}),n.d(e,"cc",function(){return Ho}),n.d(e,"dc",function(){return zo}),n.d(e,"ec",function(){return Ba}),n.d(e,"fc",function(){return So}),n.d(e,"gc",function(){return Ut}),n.d(e,"hc",function(){return or}),n.d(e,"ic",function(){return nt}),n.d(e,"jc",function(){return Ko}),n.d(e,"kc",function(){return Oo}),n.d(e,"lc",function(){return es}),n.d(e,"mc",function(){return ns}),n.d(e,"nc",function(){return rs}),n.d(e,"oc",function(){return Ha});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("w1tV");function u(t){for(let e in t)if(t[e]===u)return e;throw Error("Could not find renamed property on target object.")}function c(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function l(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(l).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function h(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const d=u({__forward_ref__:u});function f(t){return t.__forward_ref__=f,t.toString=function(){return l(this())},t}function p(t){return g(t)?t():t}function g(t){return"function"==typeof t&&t.hasOwnProperty(d)&&t.__forward_ref__===f}class y extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function m(t){return"string"==typeof t?t:null==t?"":String(t)}function v(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():m(t)}function _(t,e){const n=e?` in ${e}`:"";throw new y("201",`No provider for ${v(t)} found${n}`)}function b(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function w(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function E(t){return C(t,S)||C(t,I)}function C(t,e){return t.hasOwnProperty(e)?t[e]:null}function O(t){return t&&(t.hasOwnProperty(T)||t.hasOwnProperty(x))?t[T]:null}const S=u({"\u0275prov":u}),T=u({"\u0275inj":u}),I=u({ngInjectableDef:u}),x=u({ngInjectorDef:u});var k=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let A;function j(t){const e=A;return A=t,e}function P(t,e,n){const r=E(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&k.Optional?null:void 0!==e?e:void _(l(t),"Injector")}function N(t){return{toString:t}.toString()}var R=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),D=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const M="undefined"!=typeof globalThis&&globalThis,L="undefined"!=typeof window&&window,F="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,V="undefined"!=typeof global&&global,U=M||V||L||F,q={},B=[],H=u({"\u0275cmp":u}),z=u({"\u0275dir":u}),W=u({"\u0275pipe":u}),Q=u({"\u0275mod":u}),G=u({"\u0275loc":u}),K=u({"\u0275fac":u}),$=u({__NG_ELEMENT_ID__:u});let Y=0;function X(t){return N(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===R.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||B,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||D.Emulated,id:"c",styles:t.styles||B,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=Y++,n.inputs=rt(t.inputs,e),n.outputs=rt(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(Z):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(J):null,n})}function Z(t){return st(t)||function(t){return t[z]||null}(t)}function J(t){return function(t){return t[W]||null}(t)}const tt={};function et(t){const e={type:t.type,bootstrap:t.bootstrap||B,declarations:t.declarations||B,imports:t.imports||B,exports:t.exports||B,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&N(()=>{tt[t.id]=t.type}),e}function nt(t,e){return N(()=>{const n=at(t,!0);n.declarations=e.declarations||B,n.imports=e.imports||B,n.exports=e.exports||B})}function rt(t,e){if(null==t)return q;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const it=X;function ot(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function st(t){return t[H]||null}function at(t,e){const n=t[Q]||null;if(!n&&!0===e)throw new Error(`Type ${l(t)} does not have '\u0275mod' property.`);return n}function ut(t){return Array.isArray(t)&&"object"==typeof t[1]}function ct(t){return Array.isArray(t)&&!0===t[1]}function lt(t){return 0!=(8&t.flags)}function ht(t){return 2==(2&t.flags)}function dt(t){return 1==(1&t.flags)}function ft(t){return null!==t.template}function pt(t,e){return t.hasOwnProperty(K)?t[K]:null}class gt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function yt(){return mt}function mt(t){return t.type.prototype.ngOnChanges&&(t.setInput=_t),vt}function vt(){const t=bt(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===q)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function _t(t,e,n,r){const i=bt(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:q,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new gt(u&&u.currentValue,e,s===q),t[r]=e}function bt(t){return t.__ngSimpleChanges__||null}let wt;function Et(t){wt=t}function Ct(t){return!!t.listen}yt.ngInherit=!0;const Ot={createRenderer:(t,e)=>void 0!==wt?wt:"undefined"!=typeof document?document:void 0};function St(t){for(;Array.isArray(t);)t=t[0];return t}function Tt(t,e){return St(e[t])}function It(t,e){return St(e[t.index])}function xt(t,e){return t.data[e]}function kt(t,e){const n=e[t];return ut(n)?n:n[0]}function At(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function jt(t){return 4==(4&t[2])}function Pt(t){return 128==(128&t[2])}function Nt(t,e){return null==e?null:t[e]}function Rt(t){t[18]=0}function Dt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Mt={lFrame:re(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Lt(){return Mt.bindingsEnabled}function Ft(){return Mt.lFrame.lView}function Vt(){return Mt.lFrame.tView}function Ut(t){Mt.lFrame.contextLView=t}function qt(){let t=Bt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Bt(){return Mt.lFrame.currentTNode}function Ht(t,e){const n=Mt.lFrame;n.currentTNode=t,n.isParent=e}function zt(){return Mt.lFrame.isParent}function Wt(){Mt.lFrame.isParent=!1}function Qt(){return Mt.isInCheckNoChangesMode}function Gt(t){Mt.isInCheckNoChangesMode=t}function Kt(){return Mt.lFrame.bindingIndex++}function $t(t,e){const n=Mt.lFrame;n.bindingIndex=n.bindingRootIndex=t,Yt(e)}function Yt(t){Mt.lFrame.currentDirectiveIndex=t}function Xt(){return Mt.lFrame.currentQueryIndex}function Zt(t){Mt.lFrame.currentQueryIndex=t}function Jt(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function te(t,e,n){if(n&k.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&k.Host||(r=Jt(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Mt.lFrame=ne();return r.currentTNode=e,r.lView=t,!0}function ee(t){const e=ne(),n=t[1];Mt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ne(){const t=Mt.lFrame,e=null===t?null:t.child;return null===e?re(t):e}function re(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function ie(){const t=Mt.lFrame;return Mt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const oe=ie;function se(){const t=ie();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ae(){return Mt.lFrame.selectedIndex}function ue(t){Mt.lFrame.selectedIndex=t}function ce(){const t=Mt.lFrame;return xt(t.tView,t.selectedIndex)}function le(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function he(t,e,n){pe(t,e,3,n)}function de(t,e,n,r){(3&t[2])===n&&pe(t,e,n,r)}function fe(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function pe(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(ge(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function ge(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}class ye{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function me(t,e,n){const r=Ct(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];_e(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function ve(t){return 3===t||4===t||6===t}function _e(t){return 64===t.charCodeAt(0)}function be(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||we(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function we(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Ee(t){return-1!==t}function Ce(t){return 32767&t}function Oe(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Se=!0;function Te(t){const e=Se;return Se=t,e}let Ie=0;function xe(t,e){const n=Ae(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,ke(r.data,t),ke(e,null),ke(r.blueprint,null));const i=je(t,e),o=t.injectorIndex;if(Ee(i)){const t=Ce(i),n=Oe(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function ke(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Ae(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function je(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function Pe(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty($)&&(r=n[$]),null==r&&(r=n[$]=Ie++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Ne(t,e,n){if(n&k.Optional)return t;_(e,"NodeInjector")}function Re(t,e,n,r){if(n&k.Optional&&void 0===r&&(r=null),0==(n&(k.Self|k.Host))){const i=t[9],o=j(void 0);try{return i?i.get(e,r,n&k.Optional):P(e,r,n&k.Optional)}finally{j(o)}}return Ne(r,e,n)}function De(t,e,n,r=k.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty($)?t[$]:void 0;return"number"==typeof e?e>=0?255&e:Le:e}(n);if("function"==typeof o){if(!te(e,t,r))return r&k.Host?Ne(i,n,r):Re(e,n,r,i);try{const t=o();if(null!=t||r&k.Optional)return t;_(n)}finally{oe()}}else if("number"==typeof o){let i=null,s=Ae(t,e),a=-1,u=r&k.Host?e[16][6]:null;for((-1===s||r&k.SkipSelf)&&(a=-1===s?je(t,e):e[s+8],-1!==a&&Be(r,!1)?(i=e[1],s=Ce(a),e=Oe(a,e)):s=-1);-1!==s;){const t=e[1];if(qe(o,s,t.data)){const t=Fe(s,e,n,i,r,u);if(t!==Me)return t}a=e[s+8],-1!==a&&Be(r,e[1].data[s+8]===u)&&qe(o,s,e)?(i=t,s=Ce(a),e=Oe(a,e)):s=-1}}}return Re(e,n,r,i)}const Me={};function Le(){return new He(qt(),Ft())}function Fe(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=Ve(a,s,n,null==r?ht(a)&&Se:r!=s&&0!=(3&a.type),i&k.Host&&o===a);return null!==u?Ue(e,s,u,a):Me}function Ve(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&ft(t)&&t.type===n)return u}return null}function Ue(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof ye){const s=i;s.resolving&&function(t,e){throw new y("200",`Circular dependency in DI detected for ${t}`)}(v(o[n]));const a=Te(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?j(s.injectImpl):null;te(t,r,k.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=mt(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&j(u),Te(a),s.resolving=!1,oe()}}return i}function qe(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Be(t,e){return!(t&k.Self||t&k.Host&&e)}class He{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return De(this._tNode,this._lView,t,void 0,e)}}function ze(t){const e=t;if(g(t))return()=>{const t=ze(p(e));return t?t():null};let n=pt(e);if(null===n){const t=O(e);n=t&&t.factory}return n||null}function We(t){return N(()=>{const e=t.prototype.constructor,n=e[K]||ze(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[K]||ze(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function Qe(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(ve(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(qt(),t)}function Ge(t,e,n){return N(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty("__parameters__")?t.__parameters__:Object.defineProperty(t,"__parameters__",{value:[]}).__parameters__;for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class Ke{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=b({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const $e=new Ke("AnalyzeForEntryComponents"),Ye=Function;function Xe(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),Xe(r,e)):e!==t&&e.push(r)}return e}function Ze(t,e){t.forEach(t=>Array.isArray(t)?Ze(t,e):e(t))}function Je(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function tn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function en(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function nn(t,e,n){let r=on(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function rn(t,e){const n=on(t,e);if(n>=0)return t[1|n]}function on(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const sn={},an=/\n/gm,un=u({provide:String,useValue:u});let cn;function ln(t){const e=cn;return cn=t,e}function hn(t,e=k.Default){if(void 0===cn)throw new Error("inject() must be called from an injection context");return null===cn?P(t,void 0,e):cn.get(t,e&k.Optional?null:void 0,e)}function dn(t,e=k.Default){return(A||hn)(p(t),e)}const fn=dn;function pn(t){const e=[];for(let n=0;n<t.length;n++){const r=p(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=k.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(dn(t,n))}else e.push(dn(r))}return e}function gn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const yn=gn(Ge("Inject",t=>({token:t})),-1),mn=gn(Ge("Optional"),8),vn=gn(Ge("SkipSelf"),4);let _n;function bn(t){var e;return(null===(e=function(){if(void 0===_n&&(_n=null,U.trustedTypes))try{_n=U.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return _n}())||void 0===e?void 0:e.createHTML(t))||t}class wn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class En extends wn{getTypeName(){return"HTML"}}class Cn extends wn{getTypeName(){return"Style"}}class On extends wn{getTypeName(){return"Script"}}class Sn extends wn{getTypeName(){return"URL"}}class Tn extends wn{getTypeName(){return"ResourceURL"}}function In(t){return t instanceof wn?t.changingThisBreaksApplicationSecurity:t}function xn(t,e){const n=kn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function kn(t){return t instanceof wn&&t.getTypeName()||null}function An(t){return new En(t)}function jn(t){return new Cn(t)}function Pn(t){return new On(t)}function Nn(t){return new Sn(t)}function Rn(t){return new Tn(t)}class Dn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(bn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Mn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=bn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=bn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Ln=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Fn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Vn(t){return(t=String(t)).match(Ln)||t.match(Fn)?t:"unsafe:"+t}function Un(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function qn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Bn=Un("area,br,col,hr,img,wbr"),Hn=Un("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),zn=Un("rp,rt"),Wn=qn(zn,Hn),Qn=qn(Bn,qn(Hn,Un("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),qn(zn,Un("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Wn),Gn=Un("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Kn=Un("srcset"),$n=qn(Gn,Kn,Un("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Un("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Yn=Un("script,style,template");class Xn{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Qn.hasOwnProperty(e))return this.sanitizedSomething=!0,!Yn.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!$n.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;Gn[o]&&(s=Vn(s)),Kn[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Vn(t.trim())).join(", ")),this.buf.push(" ",e,'="',tr(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Qn.hasOwnProperty(e)&&!Bn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(tr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const Zn=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Jn=/([^\#-~ |!])/g;function tr(t){return t.replace(/&/g,"&amp;").replace(Zn,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(Jn,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let er;function nr(t,e){let n=null;try{er=er||function(t){const e=new Mn(t);return function(){try{return!!(new window.DOMParser).parseFromString(bn(""),"text/html")}catch(t){return!1}}()?new Dn(e):e}(t);let r=e?String(e):"";n=er.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=er.getInertBodyElement(r)}while(r!==o);return bn((new Xn).sanitizeChildren(rr(n)||n))}finally{if(n){const t=rr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function rr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var ir=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function or(t){const e=function(){const t=Ft();return t&&t[12]}();return e?e.sanitize(ir.URL,t)||"":xn(t,"URL")?In(t):Vn(m(t))}function sr(t){return t.ngDebugContext}function ar(t){return t.ngOriginalError}function ur(t,...e){t.error(...e)}class cr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||ur}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?sr(t)?sr(t):this._findContext(ar(t)):null}_findOriginalError(t){let e=ar(t);for(;e&&ar(e);)e=ar(e);return e}}function lr(t,e){t.__ngContext__=e}const hr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(U))();function dr(t){return t instanceof Function?t():t}var fr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function pr(t,e){return(void 0)(t,e)}function gr(t){const e=t[3];return ct(e)?e[3]:e}function yr(t){return vr(t[13])}function mr(t){return vr(t[4])}function vr(t){for(;null!==t&&!ct(t);)t=t[4];return t}function _r(t,e,n,r,i){if(null!=r){let o,s=!1;ct(r)?o=r:ut(r)&&(s=!0,r=r[0]);const a=St(r);0===t&&null!==n?null==i?Ir(e,n,a):Tr(e,n,a,i||null,!0):1===t&&null!==n?Tr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=kr(t,e);r&&function(t,e,n,r){Ct(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==St(n)&&_r(e,t,r,o,i);for(let s=10;s<n.length;s++){const i=n[s];Lr(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function br(t,e,n){return Ct(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function wr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Dt(i,-1)),n.splice(r,1)}function Er(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&wr(o,r),e>0&&(t[n-1][4]=r[4]);const s=tn(t,10+e);Lr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Cr(t,e){if(!(256&e[2])){const n=e[11];Ct(n)&&n.destroyNode&&Lr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Or(t[1],t);for(;e;){let n=null;if(ut(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)ut(e)&&Or(e[1],e),e=e[3];null===e&&(e=t),ut(e)&&Or(e[1],e),n=e&&e[4]}e=n}}(e)}}function Or(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof ye)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):St(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&Ct(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&ct(e[3])){n!==e[3]&&wr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Sr(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===D.None||e===D.Emulated)return null}return It(r,n)}(t,e.parent,n)}function Tr(t,e,n,r,i){Ct(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Ir(t,e,n){Ct(t)?t.appendChild(e,n):e.appendChild(n)}function xr(t,e,n,r,i){null!==r?Tr(t,e,n,r,i):Ir(t,e,n)}function kr(t,e){return Ct(t)?t.parentNode(e):e.parentNode}function Ar(t,e,n){return jr(t,e,n)}let jr=function(t,e,n){return 40&t.type?It(t,n):null};function Pr(t,e,n,r){const i=Sr(t,r,e),o=e[11],s=Ar(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)xr(o,i,n[a],s,!1);else xr(o,i,n,s,!1)}function Nr(t,e){if(null!==e){const n=e.type;if(3&n)return It(e,t);if(4&n)return Dr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Nr(t,n);{const n=t[e.index];return ct(n)?Dr(-1,n):St(n)}}if(32&n)return pr(e,t)()||St(t[e.index]);{const n=Rr(t,e);return null!==n?Array.isArray(n)?n[0]:Nr(gr(t[16]),n):Nr(t,e.next)}}return null}function Rr(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Dr(t,e){const n=10+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Nr(t,r)}return e[7]}function Mr(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&lr(St(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Mr(t,e,n.child,r,i,o,!1),_r(e,t,i,a,o);else if(32&u){const s=pr(n,r);let u;for(;u=s();)_r(e,t,i,u,o);_r(e,t,i,a,o)}else 16&u?Fr(t,e,r,n,i,o):_r(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Lr(t,e,n,r,i,o){Mr(n,r,t.firstChild,e,i,o,!1)}function Fr(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)_r(e,t,i,a[u],o);else Mr(t,e,a,s[3],i,o,!0)}function Vr(t,e,n){Ct(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Ur(t,e,n){Ct(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function qr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}function Br(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==qr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Hr(t){return 4===t.type&&"ng-template"!==t.value}function zr(t,e,n){return e===(4!==t.type||n?t.value:"ng-template")}function Wr(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(ve(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!zr(t,u,n)||""===u&&1===e.length){if(Qr(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Br(t.attrs,c,n)){if(Qr(r))return!1;s=!0}continue}const l=Gr(8&r?"class":u,i,Hr(t),n);if(-1===l){if(Qr(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==qr(e,c,0)||2&r&&c!==t){if(Qr(r))return!1;s=!0}}}}else{if(!s&&!Qr(r)&&!Qr(u))return!1;if(s&&Qr(u))continue;s=!1,r=u|1&r}}return Qr(r)||s}function Qr(t){return 0==(1&t)}function Gr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Kr(t,e,n=!1){for(let r=0;r<e.length;r++)if(Wr(t,e[r],n))return!0;return!1}function $r(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function Yr(t,e){return t?":not("+e.trim()+")":e}function Xr(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Qr(s)||(e+=Yr(o,i),i=""),r=s,o=o||!Qr(r);n++}return""!==i&&(e+=Yr(o,i)),e}const Zr={};function Jr(t){ti(Vt(),Ft(),ae()+t,Qt())}function ti(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&he(e,r,n)}else{const r=t.preOrderHooks;null!==r&&de(e,r,0,n)}ue(n)}function ei(t,e){return t<<17|e<<2}function ni(t){return t>>17&32767}function ri(t){return 2|t}function ii(t){return(131068&t)>>2}function oi(t,e){return-131069&t|e<<2}function si(t){return 1|t}function ai(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];Zt(i),n.contentQueries(2,e[o],o)}}}function ui(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Rt(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function ci(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Bt(),s=zt(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),Mt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=Mt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return Ht(o,!0),o}function li(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function hi(t,e,n){ee(e);try{const r=t.viewQuery;null!==r&&Ui(1,r,n);const i=t.template;null!==i&&pi(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&ai(t,e),t.staticViewQueries&&Ui(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Di(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,se()}}function di(t,e,n,r){const i=e[2];if(256==(256&i))return;ee(e);const o=Qt();try{Rt(e),Mt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&pi(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&he(e,n,null)}else{const n=t.preOrderHooks;null!==n&&de(e,n,0,null),fe(e,0)}if(function(t){for(let e=yr(t);null!==e;e=mr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Dt(r,1),n[2]|=1024}}}(e),function(t){for(let e=yr(t);null!==e;e=mr(e))for(let t=10;t<e.length;t++){const n=e[t],r=n[1];Pt(n)&&di(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&ai(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&he(e,n)}else{const n=t.contentHooks;null!==n&&de(e,n,1),fe(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)ue(~r);else{const i=r,o=n[++t],s=n[++t];$t(o,i),s(2,e[i])}}}finally{ue(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Ni(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&Ui(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&he(e,n)}else{const n=t.viewHooks;null!==n&&de(e,n,2),fe(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Dt(e[3],-1))}finally{se()}}function fi(t,e,n,r){const i=e[10],o=!Qt(),s=jt(e);try{o&&!s&&i.begin&&i.begin(),s&&hi(t,e,r),di(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function pi(t,e,n,r,i){const o=ae();try{ue(-1),2&r&&e.length>20&&ti(t,e,20,Qt()),n(r,i)}finally{ue(o)}}function gi(t,e,n){Lt()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||xe(n,e),lr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=ft(r);o&&ki(e,n,r);const u=Ue(e,t,a,n);lr(u,e),null!==s&&Ai(0,a-i,u,r,0,s),o&&(kt(n.index,e)[8]=u)}}(t,e,n,It(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Mt.lFrame.currentDirectiveIndex;try{ue(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];Yt(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Oi(r,i)}}finally{ue(-1),Yt(s)}}(t,e,n))}function yi(t,e,n=It){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function mi(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=vi(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function vi(t,e,n,r,i,o,s,a,u,c){const l=20+r,h=l+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Zr);return n}(l,h),f="function"==typeof c?c():c;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function _i(t,e,n,r){const i=Bi(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Hi(t).push(r,i.length-1))}function bi(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function wi(t,e,n,r,i,o,s,a){const u=It(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(Wi(t,n,c,r,i),ht(e)&&function(t,e){const n=kt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,Ct(o)?o.setProperty(u,r,i):_e(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Ei(t,e,n,r){let i=!1;if(Lt()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Kr(n,s.selectors,!1)&&(i||(i=[]),Pe(xe(n,e),t,s.type),ft(s)?(Si(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,Ii(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=li(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=be(n.mergedAttrs,c.hostAttrs),xi(t,n,e,u,c),Ti(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Hr(e)?null:ji(n,i);o.push(c),s=bi(n,u,s),a=bi(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new y("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=be(n.mergedAttrs,n.attrs),i}function Ci(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function Oi(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Si(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Ti(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;ft(e)&&(n[""]=t)}}function Ii(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function xi(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=pt(i.type)),s=new ye(o,ft(i),null);t.blueprint[r]=s,n[r]=s,Ci(t,e,0,r,li(t,n,i.hostVars,Zr),i)}function ki(t,e,n){const r=It(e,t),i=mi(n),o=t[10],s=Mi(t,ui(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Ai(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function ji(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Pi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Ni(t,e){const n=kt(e,t);if(Pt(n)){const t=n[1];80&n[2]?di(t,n,t.template,n[8]):n[5]>0&&Ri(n)}}function Ri(t){for(let n=yr(t);null!==n;n=mr(n))for(let t=10;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];di(t,e,t.template,e[8])}else e[5]>0&&Ri(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=kt(e[n],t);Pt(r)&&r[5]>0&&Ri(r)}}function Di(t,e){const n=kt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),hi(r,n,n[8])}function Mi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Li(t){for(;t;){t[2]|=64;const e=gr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Fi(t,e,n){const r=e[10];r.begin&&r.begin();try{di(t,e,t.template,n)}catch(i){throw zi(e,i),i}finally{r.end&&r.end()}}function Vi(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=At(n),i=r[1];fi(i,r,i.template,n)}}(t[8])}function Ui(t,e,n){Zt(0),e(t,n)}const qi=(()=>Promise.resolve(null))();function Bi(t){return t[7]||(t[7]=[])}function Hi(t){return t.cleanup||(t.cleanup=[])}function zi(t,e){const n=t[9],r=n?n.get(cr,null):null;r&&r.handleError(e)}function Wi(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Qi(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=h(i,t):2==o&&(r=h(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const Gi=new Ke("INJECTOR",-1);class Ki{get(t,e=sn){if(e===sn){const e=new Error(`NullInjectorError: No provider for ${l(t)}!`);throw e.name="NullInjectorError",e}return e}}const $i=new Ke("Set Injector scope."),Yi={},Xi={},Zi=[];let Ji;function to(){return void 0===Ji&&(Ji=new Ki),Ji}function eo(t,e=null,n=null,r){return new no(t,n,e||to(),r)}class no{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&Ze(e,n=>this.processProvider(n,t,e)),Ze([t],t=>this.processInjectorType(t,[],i)),this.records.set(Gi,oo(void 0,this));const o=this.records.get($i);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:l(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=sn,n=k.Default){this.assertNotDestroyed();const r=ln(this);try{if(!(n&k.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof Ke)&&E(t);e=n&&this.injectableDefInScope(n)?oo(ro(t),Yi):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&k.Self?to():this.parent).get(t,e=n&k.Optional&&e===sn?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(l(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e.__source&&i.unshift(e.__source),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=l(e);if(Array.isArray(e))i=e.map(l).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):l(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(an,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{ln(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(l(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=p(t)))return!1;let r=O(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=O(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{Ze(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];Ze(r,t=>this.processProvider(t,n,r||Zi))}}this.injectorDefTypes.add(o),this.records.set(o,oo(r.factory,Yi));const a=r.providers;if(null!=a&&!s){const e=t;Ze(a,t=>this.processProvider(t,e,a))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=ao(t=p(t))?t:p(t&&t.provide);const i=function(t,e,n){return so(t)?oo(void 0,t.useValue):oo(io(t),Yi)}(t);if(ao(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=oo(void 0,Yi,!0),e.factory=()=>pn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===Yi&&(e.value=Xi,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function ro(t){const e=E(t),n=null!==e?e.factory:pt(t);if(null!==n)return n;const r=O(t);if(null!==r)return r.factory;if(t instanceof Ke)throw new Error(`Token ${l(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=en(e,"?");throw new Error(`Can't resolve all parameters for ${l(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[S]||t[I]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function io(t,e,n){let r;if(ao(t)){const e=p(t);return pt(e)||ro(e)}if(so(t))r=()=>p(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...pn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>dn(p(t.useExisting));else{const e=p(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return pt(e)||ro(e);r=()=>new e(...pn(t.deps))}var i;return r}function oo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function so(t){return null!==t&&"object"==typeof t&&un in t}function ao(t){return"function"==typeof t}const uo=function(t,e,n){return function(t,e=null,n=null,r){const i=eo(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let co=(()=>{class t{static create(t,e){return Array.isArray(t)?uo(t,e,""):uo(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=sn,t.NULL=new Ki,t.\u0275prov=b({token:t,providedIn:"any",factory:()=>dn(Gi)}),t.__NG_ELEMENT_ID__=-1,t})();function lo(t,e){le(At(t)[1],qt())}function ho(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(ft(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=fo(t.inputs),e.declaredInputs=fo(t.declaredInputs),e.outputs=fo(t.outputs);const n=i.hostBindings;n&&yo(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&po(t,o),s&&go(t,s),c(t.inputs,i.inputs),c(t.declaredInputs,i.declaredInputs),c(t.outputs,i.outputs),ft(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===ho&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=be(i.hostAttrs,n=be(n,i.hostAttrs))}}(r)}function fo(t){return t===q?{}:t===B?[]:t}function po(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function go(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function yo(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let mo=null;function vo(){if(!mo){const t=U.Symbol;if(t&&t.iterator)mo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(mo=n)}}}return mo}function _o(t){return!!bo(t)&&(Array.isArray(t)||!(t instanceof Map)&&vo()in t)}function bo(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function wo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Eo(t,e,n,r){const i=Ft();return wo(i,Kt(),e)&&(Vt(),function(t,e,n,r,i,o){const s=It(t,e);!function(t,e,n,r,i,o,s){if(null==o)Ct(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?m(o):s(o,r||"",i);Ct(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(ce(),i,t,e,n,r)),Eo}function Co(t,e,n,r){return wo(t,Kt(),n)?e+m(n)+r:Zr}function Oo(t,e,n,r,i,o,s,a){const u=Ft(),c=Vt(),l=t+20,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=ci(e,t,4,s||null,Nt(c,a));Ei(e,n,l,Nt(c,u)),le(e,l);const h=l.tViews=vi(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];Ht(h,!1);const d=u[11].createComment("");Pr(c,u,d,h),lr(d,u),Mi(u,u[l]=Pi(d,u,d,h)),dt(h)&&gi(c,u,h),null!=s&&yi(u,h,a)}function So(t){return function(t,e){return t[e]}(Mt.lFrame.contextLView,20+t)}function To(t,e=k.Default){const n=Ft();return null===n?dn(t,e):De(qt(),n,p(t),e)}function Io(t,e,n){const r=Ft();return wo(r,Kt(),e)&&wi(Vt(),ce(),r,t,e,r[11],n,!1),Io}function xo(t,e,n,r,i){const o=i?"class":"style";Wi(t,n,e.inputs[o],o,r)}function ko(t,e,n,r){const i=Ft(),o=Vt(),s=20+t,a=i[11],u=i[s]=br(a,e,Mt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=ci(e,t,2,i,Nt(a,o));return Ei(e,n,u,Nt(a,s)),null!==u.attrs&&Qi(u,u.attrs,!1),null!==u.mergedAttrs&&Qi(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];Ht(c,!0);const l=c.mergedAttrs;null!==l&&me(a,u,l);const h=c.classes;null!==h&&Ur(a,u,h);const d=c.styles;null!==d&&Vr(a,u,d),64!=(64&c.flags)&&Pr(o,i,u,c),0===Mt.lFrame.elementDepthCount&&lr(u,i),Mt.lFrame.elementDepthCount++,dt(c)&&(gi(o,i,c),function(t,e,n){if(lt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&yi(i,c)}function Ao(){let t=qt();zt()?Wt():(t=t.parent,Ht(t,!1));const e=t;Mt.lFrame.elementDepthCount--;const n=Vt();n.firstCreatePass&&(le(n,t),lt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&xo(n,e,Ft(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&xo(n,e,Ft(),e.stylesWithoutHost,!1)}function jo(t,e,n,r){ko(t,e,n,r),Ao()}function Po(){return Ft()}function No(t){return!!t&&"function"==typeof t.then}function Ro(t){return!!t&&"function"==typeof t.subscribe}const Do=Ro;function Mo(t,e,n=!1,r){const i=Ft(),o=Vt(),s=qt();return function(t,e,n,r,i,o,s=!1,a){const u=dt(r),c=t.firstCreatePass&&Hi(t),l=Bi(e);let h=!0;if(3&r.type){const d=It(r,e),f=a?a(d):q,p=f.target||d,g=l.length,y=a?t=>a(St(t[r.index])).target:r.index;if(Ct(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=Fo(r,e,o,!1);const t=n.listen(f.name||p,i,o);l.push(o,t),c&&c.push(i,y,g,g+1)}}else o=Fo(r,e,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,y,g,s)}else o=Fo(r,e,o,!1);const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),Mo}function Lo(t,e,n){try{return!1!==e(n)}catch(r){return zi(t,r),!1}}function Fo(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?kt(t.index,e):e;0==(32&e[2])&&Li(s);let a=Lo(e,n,o),u=i.__ngNextListenerFn__;for(;u;)a=Lo(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Vo(t=1){return function(t){return(Mt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Mt.lFrame.contextLView))[8]}(t)}function Uo(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?Kr(t,o,!0):$r(r,o))return i}else n=i}return n}function qo(t){const e=Ft()[16][6];if(!e.projection){const n=e.projection=en(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?Uo(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function Bo(t,e=0,n){const r=Ft(),i=Vt(),o=ci(i,20+t,16,null,n||null);null===o.projection&&(o.projection=e),Wt(),64!=(64&o.flags)&&function(t,e,n){Fr(e[11],0,e,n,Sr(t,n,e),Ar(n.parent||e[6],n,e))}(i,r,o)}function Ho(t,e,n){return zo(t,"",e,"",n),Ho}function zo(t,e,n,r,i){const o=Ft(),s=Co(o,e,n,r);return s!==Zr&&wi(Vt(),ce(),o,t,s,o[11],i,!1),zo}const Wo=[];function Qo(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?ni(o):ii(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];Go(t[a],e)&&(u=!0,t[a+1]=r?si(n):ri(n)),a=r?ni(n):ii(n)}u&&(t[n+1]=r?ri(o):si(o))}function Go(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&on(t,e)>=0}function Ko(t,e,n){return Yo(t,e,n,!1),Ko}function $o(t,e){return Yo(t,e,null,!0),$o}function Yo(t,e,n,r){const i=Ft(),o=Vt(),s=function(t){const e=Mt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+2,n}();o.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[ae()],s=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(t.flags&(e?16:32))})(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=Mt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Zo(n=Xo(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=Xo(i,t,e,n,r),null===o){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==ii(r))return t[ni(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=Xo(null,t,e,n[1],r),n=Zo(n,e.attrs,r),function(t,e,n,r){t[ni(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Zo(r,t[o].hostAttrs,n);return Zo(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=ni(s),u=ii(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||on(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=ni(t[a+1]);t[r+1]=ei(e,a),0!==e&&(t[e+1]=oi(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=ei(a,0),0!==a&&(t[a+1]=oi(t[a+1],r)),a=r;else t[r+1]=ei(u,0),0===a?a=r:t[u+1]=oi(t[u+1],r),u=r;l&&(t[r+1]=ri(t[r+1])),Qo(t,c,r,!0),Qo(t,c,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&on(o,e)>=0&&(n[r+1]=si(n[r+1]))}(e,c,t,r,o),s=ei(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}(o,t,s,r),e!==Zr&&wo(i,s,e)&&function(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];ts(1==(1&c)?Jo(u,e,n,i,ii(c),s):void 0)||(ts(o)||function(t){return 2==(2&t)}(c)&&(o=Jo(u,null,n,i,a,s)),function(t,e,n,r,i){const o=Ct(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{let e=-1===r.indexOf("-")?void 0:fr.DashCase;if(null==i)o?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const s="string"==typeof i&&i.endsWith("!important");s&&(i=i.slice(0,-10),e|=fr.Important),o?t.setStyle(n,r,i,e):n.style.setProperty(r,i,s?"important":"")}}}(r,s,Tt(ae(),n),i,o))}(o,o.data[ae()],i,i[11],t,i[s+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=l(In(t)))),t}(e,n),r,s)}function Xo(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Zo(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Zo(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),nn(t,s,!!n||e[++o]))}return void 0===t?null:t}function Jo(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===Zr&&(l=c?Wo:void 0);let h=c?rn(l,r):u===r?l:void 0;if(o&&!ts(h)&&(h=rn(e,r)),ts(h)&&(a=h,s))return a;const d=t[i+1];i=s?ni(d):ii(d)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=rn(t,r))}return a}function ts(t){return void 0!==t}function es(t,e=""){const n=Ft(),r=Vt(),i=t+20,o=r.firstCreatePass?ci(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return Ct(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Pr(r,n,s,o),Ht(o,!1)}function ns(t){return rs("",t,""),ns}function rs(t,e,n){const r=Ft(),i=Co(r,t,e,n);return i!==Zr&&function(t,e,n){const r=Tt(e,t);!function(t,e,n){Ct(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,ae(),i),rs}function is(t,e,n){const r=Ft();return wo(r,Kt(),e)&&wi(Vt(),ce(),r,t,e,r[11],n,!0),is}const os=void 0;var ss=["en",[["a","p"],["AM","PM"],os],[["AM","PM"],os,os],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],os,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],os,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",os,"{1} 'at' {0}",os],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let as={};function us(t,e,n){"string"!=typeof e&&(n=e,e=t[fs.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),as[e]=t,n&&(as[e][fs.ExtraData]=n)}function cs(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=ds(e);if(n)return n;const r=e.split("-")[0];if(n=ds(r),n)return n;if("en"===r)return ss;throw new Error(`Missing locale data for the locale "${t}".`)}function ls(t){return cs(t)[fs.CurrencyCode]||null}function hs(t){return cs(t)[fs.PluralCase]}function ds(t){return t in as||(as[t]=U.ng&&U.ng.common&&U.ng.common.locales&&U.ng.common.locales[t]),as[t]}var fs=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});let ps="en-US";function gs(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(ps=t.toLowerCase().replace(/_/g,"-"))}function ys(t,e,n,r,i){if(t=p(t),Array.isArray(t))for(let o=0;o<t.length;o++)ys(t[o],e,n,r,i);else{const o=Vt(),s=Ft();let a=ao(t)?t:p(t.provide),u=io(t);const c=qt(),l=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(ao(t)||!t.multi){const r=new ye(u,i,To),f=_s(a,e,i?l:l+d,h);-1===f?(Pe(xe(c,s),o,a),ms(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[f]=r,s[f]=r)}else{const f=_s(a,e,l+d,h),p=_s(a,e,l,l+d),g=f>=0&&n[f],y=p>=0&&n[p];if(i&&!y||!i&&!g){Pe(xe(c,s),o,a);const l=function(t,e,n,r,i){const o=new ye(t,n,To);return o.multi=[],o.index=e,o.componentProviders=0,vs(o,i,r&&!n),o}(i?ws:bs,n.length,i,r,u);!i&&y&&(n[p].providerFactory=l),ms(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else ms(o,t,f>-1?f:p,vs(n[i?p:f],u,!i&&r));!i&&r&&y&&n[p].componentProviders++}}}function ms(t,e,n,r){const i=ao(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function vs(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function _s(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function bs(t,e,n,r){return Es(this.multi,[])}function ws(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Ue(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),Es(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],Es(i,o);return o}function Es(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Cs(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Vt();if(r.firstCreatePass){const i=ft(t);ys(n,r.data,r.blueprint,i,!0),ys(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class Os{}class Ss{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${l(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Ts=(()=>{class t{}return t.NULL=new Ss,t})();function Is(...t){}function xs(t,e){return new As(It(t,e))}const ks=function(){return xs(qt(),Ft())};let As=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=ks,t})();function js(t){return t instanceof As?t.nativeElement:t}class Ps{}let Ns=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Rs(),t})();const Rs=function(){const t=Ft(),e=kt(qt().index,t);return function(t){return t[11]}(ut(e)?e:t)};let Ds=(()=>{class t{}return t.\u0275prov=b({token:t,providedIn:"root",factory:()=>null}),t})();class Ms{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Ls=new Ms("11.2.2");class Fs{constructor(){}supports(t){return _o(t)}create(t){return new Us(t)}}const Vs=(t,e)=>e;class Us{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Vs}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<zs(n,r,i)?e:n,s=zs(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!_o(t))throw new Error(`Error trying to diff '${l(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[vo()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new qs(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Hs),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Hs),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class qs{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Bs{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Hs{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Bs,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function zs(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Ws{constructor(){}supports(t){return t instanceof Map||bo(t)}create(){return new Qs}}class Qs{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||bo(t)))throw new Error(`Error trying to diff '${l(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Gs(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Gs{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ks(){return new $s([new Fs])}let $s=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Ks()),deps:[[t,new vn,new mn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=b({token:t,providedIn:"root",factory:Ks}),t})();function Ys(){return new Xs([new Ws])}let Xs=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Ys()),deps:[[t,new vn,new mn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=b({token:t,providedIn:"root",factory:Ys}),t})();function Zs(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(St(o)),ct(o))for(let t=10;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&Zs(e[1],e,n,r)}const s=n.type;if(8&s)Zs(t,e,n.child,r);else if(32&s){const t=pr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=Rr(e,n);if(Array.isArray(t))r.push(...t);else{const n=gr(e[16]);Zs(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class Js{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Zs(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(ct(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Er(t,n),tn(e,n))}this._attachedToViewContainer=!1}Cr(this._lView[1],this._lView)}onDestroy(t){_i(this._lView[1],this._lView,null,t)}markForCheck(){Li(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Fi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Gt(!0);try{Fi(t,e,n)}finally{Gt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Lr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class ta extends Js{constructor(t){super(t),this._view=t}detectChanges(){Vi(this._view)}checkNoChanges(){!function(t){Gt(!0);try{Vi(t)}finally{Gt(!1)}}(this._view)}get context(){return null}}const ea=ra;let na=(()=>{class t{}return t.__NG_ELEMENT_ID__=ea,t.__ChangeDetectorRef__=!0,t})();function ra(t=!1){return function(t,e,n){if(!n&&ht(t)){const n=kt(t.index,e);return new Js(n,n)}return 47&t.type?new Js(e[16],e):null}(qt(),Ft(),t)}const ia=[new Ws],oa=new $s([new Fs]),sa=new Xs(ia),aa=function(){return ha(qt(),Ft())};let ua=(()=>{class t{}return t.__NG_ELEMENT_ID__=aa,t})();const ca=ua,la=class extends ca{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=ui(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),hi(e,n,t),new Js(n)}};function ha(t,e){return 4&t.type?new la(e,t,xs(t,e)):null}class da{}class fa{}const pa=function(){return ba(qt(),Ft())};let ga=(()=>{class t{}return t.__NG_ELEMENT_ID__=pa,t})();const ya=ga,ma=class extends ya{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return xs(this._hostTNode,this._hostLView)}get injector(){return new He(this._hostTNode,this._hostLView)}get parentInjector(){const t=je(this._hostTNode,this._hostLView);if(Ee(t)){const e=Oe(t,this._hostLView),n=Ce(t);return new He(e[1].data[n+8],e)}return new He(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=va(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(da,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(ct(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new ma(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=10+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-10?(e[4]=n[i],Je(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=Dr(i,o),a=n[11],u=kr(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Lr(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),Je(_a(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=va(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Er(this._lContainer,e);n&&(tn(_a(this._lContainer),e),Cr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Er(this._lContainer,e);return n&&null!=tn(_a(this._lContainer),e)?new Js(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function va(t){return t[8]}function _a(t){return t[8]||(t[8]=[])}function ba(t,e){let n;const r=e[t.index];if(ct(r))n=r;else{let i;if(8&t.type)i=St(r);else{const n=e[11];i=n.createComment("");const r=It(t,e);Tr(n,kr(n,r),i,function(t,e){return Ct(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Pi(r,e,i,t),Mi(e,n)}return new ma(n,t,e)}const wa={};class Ea extends Ts{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=st(t);return new Sa(e,this.ngModule)}}function Ca(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const Oa=new Ke("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>hr});class Sa extends Os{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Xr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Ca(this.componentDef.inputs)}get outputs(){return Ca(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,wa,i);return o!==wa||r===wa?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Ps,Ot),s=i.get(Ds,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(Ct(t))return t.selectRootElement(e,n===D.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):br(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:hr,clean:qi,playerHandler:null,flags:0},d=vi(0,null,null,1,0,null,null,null,null,null),f=ui(null,d,h,l,null,null,o,a,s,i);let p,g;ee(f);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=ci(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Qi(a,u,!0),null!==t&&(me(i,t,u),null!==a.classes&&Ur(i,t,a.classes),null!==a.styles&&Vr(i,t,a.styles)));const c=r.createRenderer(t,e),l=ui(n,mi(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(Pe(xe(a,n),s,e.type),Si(s,a),Ii(a,n.length,1)),Mi(n,l),n[20]=l}(c,this.componentDef,f,o,a);if(c)if(n)me(a,c,["ng-version",Ls.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Qr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&me(a,c,t),e&&e.length>0&&Ur(a,c,e.join(" "))}if(g=xt(d,20),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=qt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),xi(t,r,e,li(t,e,1,null),n));const i=Ue(e,t,r.directiveStart,r);lr(i,e);const o=It(r,e);return o&&lr(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=qt();e.contentQueries(1,s,t.directiveStart)}const a=qt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(ue(a.index),Ci(n[1],a,0,a.directiveStart,a.directiveEnd,e),Oi(e,s)),s}(t,this.componentDef,f,h,[lo]),hi(d,f,null)}finally{se()}return new Ta(this.componentType,p,xs(g,f),f,g)}}class Ta extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new ta(r),this.componentType=t}get injector(){return new He(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Ia=new Map;class xa extends da{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ea(this);const n=at(t),r=t[G]||null;r&&gs(r),this._bootstrapComponents=dr(n.bootstrap),this._r3Injector=eo(t,e,[{provide:da,useValue:this},{provide:Ts,useValue:this.componentFactoryResolver}],l(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=co.THROW_IF_NOT_FOUND,n=k.Default){return t===co||t===da||t===Gi?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class ka extends fa{constructor(t){super(),this.moduleType=t,null!==at(t)&&function(t){const e=new Set;!function t(n){const r=at(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${l(e)} vs ${l(e.name)}`)}(i,Ia.get(i),n),Ia.set(i,n));const o=dr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new xa(this.moduleType,t)}}const Aa=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}};function ja(){return this._results[vo()]()}class Pa{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=vo(),n=Pa.prototype;n[e]||(n[e]=ja)}get changes(){return this._changes||(this._changes=new Aa)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){this.dirty=!1;const n=Xe(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(this._results,n,e))&&(this._results=n,this.length=n.length,this.last=n[this.length-1],this.first=n[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Na{constructor(t){this.queryList=t,this.matches=null}clone(){return new Na(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ra{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Ra(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Ka(t,e).matches&&this.queries[e].setDirty()}}class Da{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Ma{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Ma(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class La{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new La(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Fa(e,i)),this.matchTNodeWithReadOption(t,e,Ve(e,t,i,!1,!1))}else n===ua?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Ve(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===As||r===ga||r===ua&&4&e.type)this.addMatch(e.index,-2);else{const n=Ve(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Fa(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Va(t,e,n,r){return-1===n?function(t,e){return 11&t.type?xs(t,e):4&t.type?ha(t,e):null}(e,t):-2===n?function(t,e,n){return n===As?xs(e,t):n===ua?ha(e,t):n===ga?ba(e,t):void 0}(t,e,r):Ue(t,t[1],n,e)}function Ua(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Va(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function qa(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=Ua(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=10;t<s.length;t++){const e=s[t];e[17]===e[3]&&qa(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];qa(n[1],n,i,r)}}}}}return r}function Ba(t){const e=Ft(),n=Vt(),r=Xt();Zt(r+1);const i=Ka(n,r);if(t.dirty&&jt(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?qa(n,e,r,[]):Ua(n,e,i,r);t.reset(o,js),t.notifyOnChanges()}return!0}return!1}function Ha(t,e,n){const r=Vt();r.firstCreatePass&&(Ga(r,new Da(t,e,n),-1),2==(2&e)&&(r.staticViewQueries=!0)),Qa(r,Ft(),e)}function za(t,e,n,r){const i=Vt();if(i.firstCreatePass){const o=qt();Ga(i,new Da(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}Qa(i,Ft(),n)}function Wa(){return t=Ft(),e=Xt(),t[19].queries[e].queryList;var t,e}function Qa(t,e,n){const r=new Pa(4==(4&n));_i(t,e,r,r.destroy),null===e[19]&&(e[19]=new Ra),e[19].queries.push(new Na(r))}function Ga(t,e,n){null===t.queries&&(t.queries=new Ma),t.queries.track(new La(e,n))}function Ka(t,e){return t.queries.getByIndex(e)}function $a(t=k.Default){const e=ra(!0);if(null!=e||t&k.Optional)return e;_("ChangeDetectorRef")}const Ya=new Ke("Application Initializer");let Xa=(()=>{class t{constructor(t){this.appInits=t,this.resolve=Is,this.reject=Is,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();No(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(dn(Ya,8))},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();const Za=new Ke("AppId"),Ja={provide:Za,useFactory:function(){return`${tu()}${tu()}${tu()}`},deps:[]};function tu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const eu=new Ke("Platform Initializer"),nu=new Ke("Platform ID"),ru=new Ke("appBootstrapListener");let iu=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();const ou=new Ke("LocaleId"),su=new Ke("DefaultCurrencyCode");class au{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const uu=function(t){return new ka(t)},cu=uu,lu=function(t){return Promise.resolve(uu(t))},hu=function(t){const e=uu(t),n=dr(at(t).declarations).reduce((t,e)=>{const n=st(e);return n&&t.push(new Sa(n)),t},[]);return new au(e,n)},du=hu,fu=function(t){return Promise.resolve(hu(t))};let pu=(()=>{class t{constructor(){this.compileModuleSync=cu,this.compileModuleAsync=lu,this.compileModuleAndAllComponentsSync=du,this.compileModuleAndAllComponentsAsync=fu}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();const gu=(()=>Promise.resolve(0))();function yu(t){"undefined"==typeof Zone?gu.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class mu{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Aa(!1),this.onMicrotaskEmpty=new Aa(!1),this.onStable=new Aa(!1),this.onError=new Aa(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=!n&&e,this.shouldCoalesceRunChangeDetection=n,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){let t=U.requestAnimationFrame,e=U.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(U,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,bu(t),_u(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),bu(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return wu(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),Eu(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return wu(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),Eu(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,bu(t),_u(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(this)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!mu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(mu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,vu,Is,Is);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const vu={};function _u(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function bu(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function wu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Eu(t){t._nesting--,_u(t)}class Cu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Aa,this.onMicrotaskEmpty=new Aa,this.onStable=new Aa,this.onError=new Aa}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let Ou=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{mu.assertNotInAngularZone(),yu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())yu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(dn(mu))},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})(),Su=(()=>{class t{constructor(){this._applications=new Map,ku.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return ku.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();class Tu{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Iu(t){ku=t}let xu,ku=new Tu,Au=!0,ju=!1;function Pu(){return ju=!0,Au}function Nu(){if(ju)throw new Error("Cannot enable prod mode after platform setup.");Au=!1}const Ru=new Ke("AllowMultipleToken");class Du{constructor(t,e){this.name=t,this.token=e}}function Mu(t,e,n=[]){const r=`Platform: ${e}`,i=new Ke(r);return(e=[])=>{let o=Lu();if(!o||o.injector.get(Ru,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:$i,useValue:"platform"});!function(t){if(xu&&!xu.destroyed&&!xu.injector.get(Ru,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");xu=t.get(Fu);const e=t.get(eu,null);e&&e.forEach(t=>t())}(co.create({providers:t,name:r}))}return function(t){const e=Lu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Lu(){return xu&&!xu.destroyed?xu:null}let Fu=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Cu:("zone.js"===t?void 0:t)||new mu({enableLongStackTrace:Pu(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:mu,useValue:n}];return n.run(()=>{const e=co.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(cr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{qu(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return No(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Xa);return t.runInitializers(),t.donePromise.then(()=>(gs(i.injector.get(ou,"en-US")||"en-US"),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Vu({},e);return function(t,e,n){const r=new ka(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Uu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${l(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(dn(co))},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();function Vu(t,e){return Array.isArray(e)?e.reduce(Vu,t):Object.assign(Object.assign({},t),e)}let Uu=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const u=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),c=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{mu.assertNotInAngularZone(),yu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{mu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(u,c.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Os?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(da),i=n.create(co.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(Ou,null),a=s&&i.injector.get(Su);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),qu(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;qu(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(ru,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(dn(mu),dn(co),dn(cr),dn(Ts),dn(Xa))},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();function qu(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Bu{}class Hu{}const zu={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Wu=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||zu}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Qu(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Qu(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(dn(pu),dn(Hu,8))},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();function Qu(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Gu=function(t){return null},Ku=Mu(null,"core",[{provide:nu,useValue:"unknown"},{provide:Fu,deps:[co]},{provide:Su,deps:[]},{provide:iu,deps:[]}]),$u=[{provide:Uu,useClass:Uu,deps:[mu,co,cr,Ts,Xa]},{provide:Oa,deps:[mu],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Xa,useClass:Xa,deps:[[new mn,Ya]]},{provide:pu,useClass:pu,deps:[]},Ja,{provide:$s,useFactory:function(){return oa},deps:[]},{provide:Xs,useFactory:function(){return sa},deps:[]},{provide:ou,useFactory:function(t){return gs(t=t||"undefined"!=typeof $localize&&$localize.locale||"en-US"),t},deps:[[new yn(ou),new mn,new vn]]},{provide:su,useValue:"USD"}];let Yu=(()=>{class t{constructor(t){}}return t.\u0275mod=et({type:t}),t.\u0275inj=w({factory:function(e){return new(e||t)(dn(Uu))},providers:$u}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},os0x:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"h",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return l}),n.d(e,"g",function(){return h});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t}function h(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"a",function(){return a});var r=n("7o/Q"),i=n("WMd4");function o(t,e=0){return function(n){return n.lift(new s(t,e))}}class s{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new a(t,this.scheduler,this.delay))}}class a extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(a.dispatch,this.delay,new u(t,this.destination)))}_next(t){this.scheduleMessage(i.a.createNext(t))}_error(t){this.scheduleMessage(i.a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(i.a.createComplete()),this.unsubscribe()}}class u{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return d}),n.d(e,"d",function(){return f});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function d(t){o.forEach(function(e){e.setLogLevel(t)})}function f(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return d}),n.d(e,"b",function(){return O}),n.d(e,"c",function(){return L}),n.d(e,"d",function(){return i}),n.d(e,"e",function(){return o}),n.d(e,"f",function(){return a}),n.d(e,"g",function(){return u}),n.d(e,"h",function(){return P}),n.d(e,"i",function(){return F}),n.d(e,"j",function(){return l}),n.d(e,"k",function(){return h}),n.d(e,"l",function(){return B}),n.d(e,"m",function(){return f}),n.d(e,"n",function(){return j}),n.d(e,"o",function(){return y}),n.d(e,"p",function(){return m}),n.d(e,"q",function(){return _}),n.d(e,"r",function(){return R}),n.d(e,"s",function(){return b}),n.d(e,"t",function(){return p}),n.d(e,"u",function(){return g}),n.d(e,"v",function(){return E}),n.d(e,"w",function(){return v}),n.d(e,"x",function(){return w}),n.d(e,"y",function(){return A}),n.d(e,"z",function(){return I}),n.d(e,"A",function(){return D}),n.d(e,"B",function(){return M}),n.d(e,"C",function(){return N}),n.d(e,"D",function(){return Q}),n.d(e,"E",function(){return W}),n.d(e,"F",function(){return x}),n.d(e,"G",function(){return q}),n.d(e,"H",function(){return H}),n.d(e,"I",function(){return z});var r=n("os0x"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var d=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function f(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())}function g(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function y(){return"object"==typeof self&&self.self===self}function m(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function v(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _(){return f().indexOf("Electron/")>=0}function b(){var t=f();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w(){return f().indexOf("MSAppHost/")>=0}function E(){return!1}var C=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,O.prototype.create),o}return Object(r.c)(e,t),e}(Error),O=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?S(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new C(i,a,r);return u},t}();function S(t,e){return t.replace(T,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var T=/\{\$([^}]+)}/g;function I(t){return JSON.parse(t)}function x(t){return JSON.stringify(t)}var k=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=I(c(o[0])||""),n=I(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},A=function(t){var e=k(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},j=function(t){var e=k(t).claims;return"object"==typeof e&&!0===e.admin};function P(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function N(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function R(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function D(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function M(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var L=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function F(t,e){var n=new V(t,e);return n.subscribe.bind(n)}var V=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=U),void 0===r.error&&(r.error=U),void 0===r.complete&&(r.complete=U);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function U(){}var q=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function B(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}function H(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(B(t,e,r)+"must be a valid function.")}function z(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(B(t,e,r)+"must be a valid context object.")}var W=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},Q=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return T}),n.d(e,"b",function(){return _}),n.d(e,"c",function(){return v}),n.d(e,"d",function(){return f}),n.d(e,"e",function(){return m}),n.d(e,"f",function(){return O}),n.d(e,"g",function(){return w}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return y}),n.d(e,"j",function(){return E});var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class d{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class f{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.b))}}function p(t){return function(e){return(e=e.lift(new d(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],y=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),m=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.r("angularfire2.app.options"),_=new u.r("angularfire2.app.nameOrConfig"),b=new u.Q("6.1.4");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&C("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const E=()=>{C("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},C=(t,...e)=>{Object(u.X)()&&"undefined"!=typeof console&&console[t](...e)};function O(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&C("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const S={provide:class{},useFactory:w,deps:[v,u.A,[new u.B,_]]};let T=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",b.full,t.toString()),c.a.registerVersion("angular",u.P.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:_,useValue:n}]}}}return t.\u0275mod=u.Kb({type:t}),t.\u0275inj=u.Jb({factory:function(e){return new(e||t)(u.Tb(u.C))},providers:[S]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("7Hc7"),o=n("Y7HM");class s extends r.a{constructor(t,e=0,n=i.a){super(),this.source=t,this.delayTime=e,this.scheduler=n,(!Object(o.a)(e)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=i.a)}static create(t,e=0,n=i.a){return new s(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(s.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function a(t,e=0){return function(n){return n.lift(new u(t,e))}}class u{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new s(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},w1tV:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("EQ5u"),i=n("x+ZX"),o=n("XNiG");function s(){return new o.a}function a(){return t=>{return Object(i.a)()((e=s,function(t){let n;n="function"==typeof e?e:function(){return e};const i=Object.create(t,r.b);return i.source=t,i.subjectFactory=n,i})(t));var e}}},"x+ZX":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(){return function(t){return t.lift(new o(t))}}class o{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class s extends r.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},zIRd:function(t,e,n){"use strict";var r,i,o=n("os0x"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),f=new u.b("@firebase/app"),p=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.j)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){f.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();p.prototype.name&&p.prototype.options||p.prototype.delete||console.log("dc");var g=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name="[DEFAULT]");var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.h)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void f.warn(c.join(" "))}o(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.2.9",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||"[DEFAULT]",!Object(s.h)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return f.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.k)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(p);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.k)(e,t)},createSubscribe:s.i,ErrorFactory:s.b,deepExtend:s.k}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.o)()&&void 0!==self.firebase){f.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var m=self.firebase.SDK_VERSION;m&&m.indexOf("LITE")>=0&&f.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var v=g.initializeApp;g.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.u)()&&f.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),v.apply(void 0,t)};var _=g;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new y(t)},"PRIVATE")),t.registerVersion(h,"0.6.15",void 0),t.registerVersion("fire-js","")}(_),e.a=_},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");let i=null;function o(){return i}const s=new r.r("DocumentToken");let a=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Ib)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return Object(r.Tb)(l)}const c=new r.r("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=o().getLocation(),this._history=o().getHistory()}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(s))},t.\u0275prov=Object(r.Ib)({factory:d,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function d(){return new l(Object(r.Tb)(s))}function f(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Ib)({factory:m,token:t,providedIn:"root"}),t})();function m(t){const e=Object(r.Tb)(s).location;return new _(Object(r.Tb)(a),e&&e.origin||"")}const v=new r.r("appBaseHref");let _=(()=>{class t extends y{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return f(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(a),r.Tb(v,8))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),b=(()=>{class t extends y{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=f(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(a),r.Tb(v,8))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(C(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,C(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(y),r.Tb(a))},t.normalizeQueryParams=g,t.joinWithSlash=f,t.stripTrailingSlash=p,t.\u0275prov=Object(r.Ib)({factory:E,token:t,providedIn:"root"}),t})();function E(){return new w(Object(r.Tb)(y),Object(r.Tb)(a))}function C(t){return t.replace(/\/index.html$/,"")}var O=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const S=r.ob;class T{}let I=(()=>{class t extends T{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(S(e||this.locale)(t)){case O.Zero:return"zero";case O.One:return"one";case O.Two:return"two";case O.Few:return"few";case O.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(r.v))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),x=(()=>{class t{constructor(t,e,n,r){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Object(r.rb)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Object(r.xb)(t.item)}`);this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.t),r.Mb(r.u),r.Mb(r.l),r.Mb(r.F))},t.\u0275dir=r.Hb({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class k{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let A=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new k(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new j(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new j(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.R),r.Mb(r.M),r.Mb(r.t))},t.\u0275dir=r.Hb({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class j{constructor(t,e){this.record=t,this.view=e}}let P=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new N,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){R("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){R("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.R),r.Mb(r.M))},t.\u0275dir=r.Hb({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class N{constructor(){this.$implicit=null,this.ngIf=null}}function R(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.xb)(e)}'.`)}let D=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},providers:[{provide:T,useClass:I}]}),t})();function M(t){return"server"===t}let L=(()=>{class t{}return t.\u0275prov=Object(r.Ib)({token:t,providedIn:"root",factory:()=>new F(Object(r.Tb)(s),window)}),t})();class F{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){var e;if(!this.supportsScrolling())return;const n=null!==(e=this.document.getElementById(t))&&void 0!==e?e:this.document.getElementsByName(t)[0];void 0!==n&&(this.scrollToElement(n),this.attemptFocus(n))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=V(this.window.history)||V(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function V(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class U extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new U,i||(i=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=B||(B=document.querySelector("base"),B)?B.getAttribute("href"):null;return null==e?null:(n=e,q||(q=document.createElement("a")),q.setAttribute("href",n),"/"===q.pathname.charAt(0)?q.pathname:"/"+q.pathname);var n}resetBaseElement(){B=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let q,B=null;const H=new r.r("TRANSITION_ID"),z=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[H,s,r.s],multi:!0}];class W{static init(){Object(r.Z)(new W)}addToWindow(t){r.qb.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.qb.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.qb.getAllAngularRootElements=()=>t.getAllRootElements(),r.qb.frameworkStabilizers||(r.qb.frameworkStabilizers=[]),r.qb.frameworkStabilizers.push(t=>{const e=r.qb.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const Q=new r.r("EventManagerPlugins");let G=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(Q),r.Tb(r.A))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();class K{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let $=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),Y=(()=>{class t extends ${constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>o().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(s))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();const X={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Z=/%COMP%/g;function J(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?J(t,i,n):(i=i.replace(Z,t),n.push(i))}return n}function tt(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let et=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new nt(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.S.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new rt(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.S.ShadowDom:return new it(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=J(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(G),r.Tb(Y),r.Tb(r.c))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();class nt{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(X[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=X[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=X[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.H.DashCase|r.H.Important)?t.style.setProperty(e,n,i&r.H.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.H.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,tt(n)):this.eventManager.addEventListener(t,e,tt(n))}}class rt extends nt{constructor(t,e,n,r){super(t),this.component=n;const i=J(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(Z,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(Z,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class it extends nt{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=J(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let ot=(()=>{class t extends K{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(s))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();const st=["alt","control","meta","shift"],at={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ut={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ct={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let lt=(()=>{class t extends K{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(st.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&ut.hasOwnProperty(e)&&(e=ut[e]))}return at[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),st.forEach(r=>{r!=n&&(0,ct[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(s))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();const ht=[{provide:r.C,useValue:"browser"},{provide:r.D,useValue:function(){U.makeCurrent(),W.init()},multi:!0},{provide:s,useFactory:function(){return Object(r.wb)(document),document},deps:[]}],dt=Object(r.T)(r.Y,"browser",ht),ft=[[],{provide:r.bb,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:Q,useClass:ot,multi:!0,deps:[s,r.A,r.C]},{provide:Q,useClass:lt,multi:!0,deps:[s]},[],{provide:et,useClass:et,deps:[G,Y,r.c]},{provide:r.G,useExisting:et},{provide:$,useExisting:Y},{provide:Y,useClass:Y,deps:[s]},{provide:r.N,useClass:r.N,deps:[r.A]},{provide:G,useClass:G,deps:[Q,r.A]},[]];let pt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:H,useExisting:r.c},z]}}}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)(r.Tb(t,12))},providers:ft,imports:[D,r.f]}),t})();"undefined"!=typeof window&&window;var gt=n("XNiG"),yt=n("quSY"),mt=n("LRne");function vt(t,...e){return e.length?e.some(e=>t[e]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}var _t=n("vkgz"),bt=n("7o/Q"),wt=n("D0XW");class Et{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new Ct(t,this.dueTime,this.scheduler))}}class Ct extends bt.a{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Ot,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function Ot(t){t.debouncedNext()}function St(t,e){return function(n){return n.lift(new Tt(t,e))}}class Tt{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new It(t,this.predicate,this.thisArg))}}class It extends bt.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}var xt=n("lJxs");const kt=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();var At=n("EY2u");function jt(t){return e=>0===t?Object(At.b)():e.lift(new Pt(t))}class Pt{constructor(t){if(this.total=t,this.total<0)throw new kt}call(t,e){return e.subscribe(new Nt(t,this.total))}}class Nt extends bt.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Rt(t){return null!=t&&"false"!=`${t}`}function Dt(t){return Array.isArray(t)?t:[t]}function Mt(t){return null==t?"":"string"==typeof t?t:`${t}px`}function Lt(t){return t instanceof r.l?t.nativeElement:t}let Ft;try{Ft="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(DS){Ft=!1}let Vt,Ut,qt,Bt=(()=>{class t{constructor(t){this._platformId=t,this.isBrowser=this._platformId?"browser"===this._platformId:"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Ft)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(r.C))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Tb)(r.C))},token:t,providedIn:"root"}),t})(),Ht=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)}}),t})();function zt(t){return function(){if(null==Vt&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Vt=!0}))}finally{Vt=Vt||!1}return Vt}()?t:!!t.capture}function Wt(){if(null==Ut){if("object"!=typeof document||!document)return Ut=!1,Ut;if("scrollBehavior"in document.documentElement.style)Ut=!0;else{const t=Element.prototype.scrollTo;Ut=!!t&&!/\{\s*\[native code\]\s*\}/.test(t.toString())}}return Ut}var Qt=n("HDdC");class Gt extends class{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new gt.a,this._typeaheadSubscription=yt.a.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new gt.a,this.change=new gt.a,t instanceof r.E&&t.changes.subscribe(t=>{if(this._activeItem){const e=t.toArray().indexOf(this._activeItem);e>-1&&e!==this._activeItemIndex&&(this._activeItemIndex=e)}})}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(Object(_t.a)(t=>this._pressedLetters.push(t)),function(t,e=wt.a){return n=>n.lift(new Et(t,e))}(t),St(()=>this._pressedLetters.length>0),Object(xt.a)(()=>this._pressedLetters.join(""))).subscribe(t=>{const e=this._getItemsArray();for(let n=1;n<e.length+1;n++){const r=(this._activeItemIndex+n)%e.length,i=e[r];if(!this._skipPredicateFn(i)&&0===i.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(r);break}}this._pressedLetters=[]}),this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}setActiveItem(t){const e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,n=["altKey","ctrlKey","metaKey","shiftKey"].every(e=>!t[e]||this._allowedModifierKeys.indexOf(e)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&n){this.setNextItemActive();break}return;case 38:if(this._vertical&&n){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&n){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&n){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&n){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&n){this.setLastItemActive();break}return;default:return void((n||vt(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),n="number"==typeof t?t:e.indexOf(t),r=e[n];this._activeItem=null==r?null:r,this._activeItemIndex=n}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let n=1;n<=e.length;n++){const r=(this._activeItemIndex+t*n+e.length)%e.length;if(!this._skipPredicateFn(e[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const n=this._getItemsArray();if(n[t]){for(;this._skipPredicateFn(n[t]);)if(!n[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof r.E?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}}function Kt(t){return 0===t.buttons}"undefined"!=typeof Element&&Element;const $t=new r.r("cdk-focus-monitor-default-options"),Yt=zt({passive:!0,capture:!0});let Xt=(()=>{class t{constructor(t,e,n,r){this._ngZone=t,this._platform=e,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._documentKeydownListener=()=>{this._lastTouchTarget=null,this._setOriginForCurrentEventQueue("keyboard")},this._documentMousedownListener=t=>{if(!this._lastTouchTarget){const e=Kt(t)?"keyboard":"mouse";this._setOriginForCurrentEventQueue(e)}},this._documentTouchstartListener=t=>{null!=this._touchTimeoutId&&clearTimeout(this._touchTimeoutId),this._lastTouchTarget=Zt(t),this._touchTimeoutId=setTimeout(()=>this._lastTouchTarget=null,650)},this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._rootNodeFocusAndBlurListener=t=>{const e=Zt(t),n="focus"===t.type?this._onFocus:this._onBlur;for(let r=e;r;r=r.parentElement)n.call(this,t,r)},this._document=n,this._detectionMode=(null==r?void 0:r.detectionMode)||0}monitor(t,e=!1){const n=Lt(t);if(!this._platform.isBrowser||1!==n.nodeType)return Object(mt.a)(null);const r=function(t){if(function(){if(null==qt){const t="undefined"!=typeof document?document.head:null;qt=!(!t||!t.createShadowRoot&&!t.attachShadow)}return qt}()){const e=t.getRootNode?t.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(n)||this._getDocument(),i=this._elementInfo.get(n);if(i)return e&&(i.checkChildren=!0),i.subject;const o={checkChildren:e,subject:new gt.a,rootNode:r};return this._elementInfo.set(n,o),this._registerGlobalListeners(o),o.subject}stopMonitoring(t){const e=Lt(t),n=this._elementInfo.get(e);n&&(n.subject.complete(),this._setClasses(e),this._elementInfo.delete(e),this._removeGlobalListeners(n))}focusVia(t,e,n){const r=Lt(t);r===this._getDocument().activeElement?this._getClosestElementsInfo(r).forEach(([t,n])=>this._originChanged(t,e,n)):(this._setOriginForCurrentEventQueue(e),"function"==typeof r.focus&&r.focus(n))}ngOnDestroy(){this._elementInfo.forEach((t,e)=>this.stopMonitoring(e))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(t,e,n){n?t.classList.add(e):t.classList.remove(e)}_getFocusOrigin(t){return this._origin?this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(t)?"touch":"program"}_setClasses(t,e){this._toggleClass(t,"cdk-focused",!!e),this._toggleClass(t,"cdk-touch-focused","touch"===e),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===e),this._toggleClass(t,"cdk-mouse-focused","mouse"===e),this._toggleClass(t,"cdk-program-focused","program"===e)}_setOriginForCurrentEventQueue(t){this._ngZone.runOutsideAngular(()=>{this._origin=t,0===this._detectionMode&&(this._originTimeoutId=setTimeout(()=>this._origin=null,1))})}_wasCausedByTouch(t){const e=Zt(t);return this._lastTouchTarget instanceof Node&&e instanceof Node&&(e===this._lastTouchTarget||e.contains(this._lastTouchTarget))}_onFocus(t,e){const n=this._elementInfo.get(e);n&&(n.checkChildren||e===Zt(t))&&this._originChanged(e,this._getFocusOrigin(t),n)}_onBlur(t,e){const n=this._elementInfo.get(e);!n||n.checkChildren&&t.relatedTarget instanceof Node&&e.contains(t.relatedTarget)||(this._setClasses(e),this._emitOrigin(n.subject,null))}_emitOrigin(t,e){this._ngZone.run(()=>t.next(e))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const e=t.rootNode,n=this._rootNodeFocusListenerCount.get(e)||0;n||this._ngZone.runOutsideAngular(()=>{e.addEventListener("focus",this._rootNodeFocusAndBlurListener,Yt),e.addEventListener("blur",this._rootNodeFocusAndBlurListener,Yt)}),this._rootNodeFocusListenerCount.set(e,n+1),1==++this._monitoredElementCount&&this._ngZone.runOutsideAngular(()=>{const t=this._getDocument(),e=this._getWindow();t.addEventListener("keydown",this._documentKeydownListener,Yt),t.addEventListener("mousedown",this._documentMousedownListener,Yt),t.addEventListener("touchstart",this._documentTouchstartListener,Yt),e.addEventListener("focus",this._windowFocusListener)})}_removeGlobalListeners(t){const e=t.rootNode;if(this._rootNodeFocusListenerCount.has(e)){const t=this._rootNodeFocusListenerCount.get(e);t>1?this._rootNodeFocusListenerCount.set(e,t-1):(e.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Yt),e.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Yt),this._rootNodeFocusListenerCount.delete(e))}if(!--this._monitoredElementCount){const t=this._getDocument(),e=this._getWindow();t.removeEventListener("keydown",this._documentKeydownListener,Yt),t.removeEventListener("mousedown",this._documentMousedownListener,Yt),t.removeEventListener("touchstart",this._documentTouchstartListener,Yt),e.removeEventListener("focus",this._windowFocusListener),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._touchTimeoutId),clearTimeout(this._originTimeoutId)}}_originChanged(t,e,n){this._setClasses(t,e),this._emitOrigin(n.subject,e),this._lastFocusOrigin=e}_getClosestElementsInfo(t){const e=[];return this._elementInfo.forEach((n,r)=>{(r===t||n.checkChildren&&r.contains(t))&&e.push([r,n])}),e}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(r.A),r.Tb(Bt),r.Tb(s,8),r.Tb($t,8))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Tb)(r.A),Object(r.Tb)(Bt),Object(r.Tb)(s,8),Object(r.Tb)($t,8))},token:t,providedIn:"root"}),t})();function Zt(t){return t.composedPath?t.composedPath()[0]:t.target}let Jt=(()=>{class t{constructor(t,e){this._platform=t,this._document=e}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const e=this._document.defaultView||window,n=e&&e.getComputedStyle?e.getComputedStyle(t):null,r=(n&&n.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),r){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove("cdk-high-contrast-active"),t.remove("cdk-high-contrast-black-on-white"),t.remove("cdk-high-contrast-white-on-black");const e=this.getHighContrastMode();1===e?(t.add("cdk-high-contrast-active"),t.add("cdk-high-contrast-black-on-white")):2===e&&(t.add("cdk-high-contrast-active"),t.add("cdk-high-contrast-white-on-black"))}}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(Bt),r.Tb(s))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Tb)(Bt),Object(r.Tb)(s))},token:t,providedIn:"root"}),t})();const te=new r.r("cdk-dir-doc",{providedIn:"root",factory:function(){return Object(r.W)(s)}});let ee=(()=>{class t{constructor(t){if(this.value="ltr",this.change=new r.n,t){const e=t.documentElement?t.documentElement.dir:null,n=(t.body?t.body.dir:null)||e;this.value="ltr"===n||"rtl"===n?n:"ltr"}}ngOnDestroy(){this.change.complete()}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(te,8))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Tb)(te,8))},token:t,providedIn:"root"}),t})(),ne=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)}}),t})();const re=new r.Q("11.2.1");var ie=n("bHdf");function oe(...t){return Object(ie.a)(1)(Object(mt.a)(...t))}var se=n("z+Ro");function ae(...t){const e=t[t.length-1];return Object(se.a)(e)?(t.pop(),n=>oe(t,n,e)):e=>oe(t,e)}class ue{}function ce(t,e){return{type:7,name:t,definitions:e,options:{}}}function le(t,e=null){return{type:4,styles:e,timings:t}}function he(t,e=null){return{type:2,steps:t,options:e}}function de(t){return{type:6,styles:t,offset:null}}function fe(t,e,n){return{type:0,name:t,styles:e,options:n}}function pe(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function ge(t){Promise.resolve(null).then(t)}class ye{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){ge(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class me{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const i=this.players.length;0==i?ge(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==i&&this._onFinish()}),t.onDestroy(()=>{++n==i&&this._onDestroy()}),t.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){const t=this.players.reduce((t,e)=>null===t||e.totalTime>t.totalTime?e:t,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}function ve(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function _e(t){switch(t.length){case 0:return new ye;case 1:return t[0];default:return new me(t)}}function be(t,e,n,r,i={},o={}){const s=[],a=[];let u=-1,c=null;if(r.forEach(t=>{const n=t.offset,r=n==u,l=r&&c||{};Object.keys(t).forEach(n=>{let r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,s),a){case"!":a=i[n];break;case"*":a=o[n];break;default:a=e.normalizeStyleValue(n,r,a,s)}l[r]=a}),r||a.push(l),c=l,u=n}),s.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${s.join(t)}`)}return a}function we(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&Ee(n,"start",t)));break;case"done":t.onDone(()=>r(n&&Ee(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&Ee(n,"destroy",t)))}}function Ee(t,e,n){const r=n.totalTime,i=Ce(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),o=t._data;return null!=o&&(i._data=o),i}function Ce(t,e,n,r,i="",o=0,s){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function Oe(t,e,n){let r;return t instanceof Map?(r=t.get(e),r||t.set(e,r=n)):(r=t[e],r||(r=t[e]=n)),r}function Se(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let Te=(t,e)=>!1,Ie=(t,e)=>!1,xe=(t,e,n)=>[];const ke=ve();(ke||"undefined"!=typeof Element)&&(Te=(t,e)=>t.contains(e),Ie=(()=>{if(ke||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):Ie}})(),xe=(t,e,n)=>{let r=[];if(n){const n=t.querySelectorAll(e);for(let t=0;t<n.length;t++)r.push(n[t])}else{const n=t.querySelector(e);n&&r.push(n)}return r});let Ae=null,je=!1;function Pe(t){Ae||(Ae=("undefined"!=typeof document?document.body:null)||{},je=!!Ae.style&&"WebkitAppearance"in Ae.style);let e=!0;return Ae.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in Ae.style,!e&&je)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in Ae.style),e}const Ne=Ie,Re=Te,De=xe;function Me(t){const e={};return Object.keys(t).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}let Le=(()=>{class t{validateStyleProperty(t){return Pe(t)}matchesElement(t,e){return Ne(t,e)}containsElement(t,e){return Re(t,e)}query(t,e,n){return De(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,i,o=[],s){return new ye(n,r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),Fe=(()=>{class t{}return t.NOOP=new Le,t})();function Ve(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Ue(parseFloat(e[1]),e[2])}function Ue(t,e){switch(e){case"s":return 1e3*t;default:return t}}function qe(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,i=0,o="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=Ue(parseFloat(n[1]),n[2]);const s=n[3];null!=s&&(i=Ue(parseFloat(s),n[4]));const a=n[5];a&&(o=a)}else r=t;if(!n){let n=!1,o=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(o,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:i,easing:o}}(t,e,n)}function Be(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function He(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else Be(t,n);return n}function ze(t,e,n){return n?e+":"+n+";":""}function We(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=ze(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=ze(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function Qe(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const i=tn(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),ve()&&We(t))}function Ge(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=tn(e);t.style[n]=""}),ve()&&We(t))}function Ke(t){return Array.isArray(t)?1==t.length?t[0]:he(t):t}const $e=new RegExp("{{\\s*(.+?)\\s*}}","g");function Ye(t){let e=[];if("string"==typeof t){let n;for(;n=$e.exec(t);)e.push(n[1]);$e.lastIndex=0}return e}function Xe(t,e,n){const r=t.toString(),i=r.replace($e,(t,r)=>{let i=e[r];return e.hasOwnProperty(r)||(n.push(`Please provide a value for the animation param ${r}`),i=""),i.toString()});return i==r?t:i}function Ze(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const Je=/-+([a-z0-9])/g;function tn(t){return t.replace(Je,(...t)=>t[1].toUpperCase())}function en(t,e){return 0===t||0===e}function nn(t,e,n){const r=Object.keys(n);if(r.length&&e.length){let o=e[0],s=[];if(r.forEach(t=>{o.hasOwnProperty(t)||s.push(t),o[t]=n[t]}),s.length)for(var i=1;i<e.length;i++){let n=e[i];s.forEach(function(e){n[e]=on(t,e)})}}return e}function rn(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function on(t,e){return window.getComputedStyle(t)[e]}function sn(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const i=r[1],o=r[2],s=r[3];e.push(cn(i,s)),"<"!=o[0]||"*"==i&&"*"==s||e.push(cn(s,i))}(t,n,e)):n.push(t),n}const an=new Set(["true","1"]),un=new Set(["false","0"]);function cn(t,e){const n=an.has(t)||un.has(t),r=an.has(e)||un.has(e);return(i,o)=>{let s="*"==t||t==i,a="*"==e||e==o;return!s&&n&&"boolean"==typeof i&&(s=i?an.has(t):un.has(t)),!a&&r&&"boolean"==typeof o&&(a=o?an.has(e):un.has(e)),s&&a}}const ln=new RegExp("s*:selfs*,?","g");function hn(t,e,n){return new dn(t).build(e,n)}class dn{constructor(t){this._driver=t}build(t,e){const n=new fn(e);return this._resetContextStyleTimingState(n),rn(this,Ke(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const i=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,i.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const i=this.visitTransition(t,e);n+=i.queryCount,r+=i.depCount,o.push(i)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:i,transitions:o,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const i=new Set,o=r||{};if(n.styles.forEach(t=>{if(pn(t)){const e=t;Object.keys(e).forEach(t=>{Ye(e[t]).forEach(t=>{o.hasOwnProperty(t)||i.add(t)})})}}),i.size){const n=Ze(i.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=rn(this,Ke(t.animation),e);return{type:1,matchers:sn(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:gn(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>rn(this,t,e)),options:gn(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const i=t.steps.map(t=>{e.currentTime=n;const i=rn(this,t,e);return r=Math.max(r,e.currentTime),i});return e.currentTime=r,{type:3,steps:i,options:gn(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return yn(qe(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=yn(0,0,"");return t.dynamic=!0,t.strValue=r,t}return n=n||qe(r,e),yn(n.duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let i=t.styles?t.styles:de({});if(5==i.type)r=this.visitKeyframes(i,e);else{let i=t.styles,o=!1;if(!i){o=!0;const t={};n.easing&&(t.easing=n.easing),i=de(t)}e.currentTime+=n.duration+n.delay;const s=this.visitStyle(i,e);s.isEmptyStep=o,r=s}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?"*"==t?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,i=null;return n.forEach(t=>{if(pn(t)){const e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,i=e.currentTime;n&&i>0&&(i-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const o=e.collectedStyles[e.currentQuerySelector],s=o[n];let a=!0;s&&(i!=r&&i>=s.startTime&&r<=s.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${s.startTime}ms" and "${s.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=s.startTime),a&&(o[n]={startTime:i,endTime:r}),e.options&&function(t,e,n){const r=e.params||{},i=Ye(t);i.length&&i.forEach(t=>{r.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let o=!1,s=!1,a=0;const u=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let u=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(pn(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(pn(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),c=0;return null!=u&&(r++,c=n.offset=u),s=s||c<0||c>1,o=o||c<a,a=c,i.push(c),n});s&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),o&&e.errors.push("Please ensure that all keyframe offsets are in order");const c=t.steps.length;let l=0;r>0&&r<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(l=1/(c-1));const h=c-1,d=e.currentTime,f=e.currentAnimateTimings,p=f.duration;return u.forEach((t,r)=>{const o=l>0?r==h?1:l*r:i[r],s=o*p;e.currentTime=d+f.delay+s,f.duration=s,this._validateStyleAst(t,e),t.offset=o,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:rn(this,Ke(t.animation),e),options:gn(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:gn(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:gn(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[i,o]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(ln,"")),[t=t.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,".ng-animating"),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+i:i,Oe(e.collectedStyles,e.currentQuerySelector,{});const s=rn(this,Ke(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:s,originalSelector:t.selector,options:gn(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:qe(t.timings,e.errors,!0);return{type:12,animation:rn(this,Ke(t.animation),e),timings:n,options:null}}}class fn{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function pn(t){return!Array.isArray(t)&&"object"==typeof t}function gn(t){var e;return t?(t=Be(t)).params&&(t.params=(e=t.params)?Be(e):null):t={},t}function yn(t,e,n){return{duration:t,delay:e,easing:n}}function mn(t,e,n,r,i,o,s=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}class vn{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const _n=new RegExp(":enter","g"),bn=new RegExp(":leave","g");function wn(t,e,n,r,i,o={},s={},a,u,c=[]){return(new En).buildKeyframes(t,e,n,r,i,o,s,a,u,c)}class En{buildKeyframes(t,e,n,r,i,o,s,a,u,c=[]){u=u||new vn;const l=new On(t,e,u,r,i,c,[]);l.options=a,l.currentTimeline.setStyles([o],null,l.errors,a),rn(this,n,l);const h=l.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(s).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([s],null,l.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[mn(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);i!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const i=null!=n.duration?Ve(n.duration):null,o=null!=n.delay?Ve(n.delay):null;return 0!==i&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,i,o);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),rn(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const i=t.options;if(i&&(i.params||i.delay)&&(r=e.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Cn);const t=Ve(i.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>rn(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const i=t.options&&t.options.delay?Ve(t.options.delay):0;t.steps.forEach(o=>{const s=e.createSubContext(t.options);i&&s.delayNextStep(i),rn(this,o,s),r=Math.max(r,s.currentTimeline.currentTime),n.push(s.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return qe(e.params?Xe(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,o=e.createSubContext().currentTimeline;o.easing=n.easing,t.styles.forEach(t=>{o.forwardTime((t.offset||0)*i),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(r+i),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},i=r.delay?Ve(r.delay):0;i&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Cn);let o=n;const s=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=s.length;let a=null;s.forEach((n,r)=>{e.currentQueryIndex=r;const s=e.createSubContext(t.options,n);i&&s.delayNextStep(i),n===e.element&&(a=s.currentTimeline),rn(this,t.animation,s),s.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,s.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,i=t.timings,o=Math.abs(i.duration),s=o*(e.currentQueryTotal-1);let a=o*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=s-a;break;case"full":a=n.currentStaggerTime}const u=e.currentTimeline;a&&u.delayNextStep(a);const c=u.currentTime;rn(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}const Cn={};class On{constructor(t,e,n,r,i,o,s,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=o,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Cn,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new Sn(this._driver,e,0),s.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=Ve(n.duration)),null!=n.delay&&(r.delay=Ve(n.delay));const i=n.params;if(i){let t=r.params;t||(t=this.options.params={}),Object.keys(i).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=Xe(i[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,i=new On(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(t){return this.previousNode=Cn,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new Tn(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,i,o){let s=[];if(r&&s.push(this.element),t.length>0){t=(t=t.replace(_n,"."+this._enterClassName)).replace(bn,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),s.push(...e)}return i||0!=s.length||o.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),s}}class Sn{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new Sn(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||"*",this._currentKeyframe[t]="*"}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const i=r&&r.params||{},o=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e),r.forEach(t=>{n[t]="*"})):He(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(o).forEach(t=>{const e=Xe(o[t],i,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:"*"),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,o)=>{const s=He(i,!0);Object.keys(s).forEach(n=>{const r=s[n];"!"==r?t.add(n):"*"==r&&e.add(n)}),n||(s.offset=o/this.duration),r.push(s)});const i=t.size?Ze(t.values()):[],o=e.size?Ze(e.values()):[];if(n){const t=r[0],e=Be(t);t.offset=0,e.offset=1,r=[t,e]}return mn(this.element,r,i,o,this.duration,this.startTime,this.easing,!1)}}class Tn extends Sn{constructor(t,e,n,r,i,o,s=!1){super(t,e,o.delay),this.element=e,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=s,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const i=[],o=n+e,s=e/o,a=He(t[0],!1);a.offset=0,i.push(a);const u=He(t[0],!1);u.offset=In(s),i.push(u);const c=t.length-1;for(let r=1;r<=c;r++){let s=He(t[r],!1);s.offset=In((e+s.offset*n)/o),i.push(s)}n=o,e=0,r="",t=i}return mn(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function In(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class xn{}class kn extends xn{normalizePropertyName(t,e){return tn(t)}normalizeStyleValue(t,e,n,r){let i="";const o=n.toString().trim();if(An[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return o+i}}const An=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function jn(t,e,n,r,i,o,s,a,u,c,l,h,d){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:d}}const Pn={};class Nn{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,i){return t.some(t=>t(e,n,r,i))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],i=this._stateStyles[t],o=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):o}build(t,e,n,r,i,o,s,a,u,c){const l=[],h=this.ast.options&&this.ast.options.params||Pn,d=this.buildStyles(n,s&&s.params||Pn,l),f=a&&a.params||Pn,p=this.buildStyles(r,f,l),g=new Set,y=new Map,m=new Map,v="void"===r,_={params:Object.assign(Object.assign({},h),f)},b=c?[]:wn(t,e,this.ast.animation,i,o,d,p,_,u,l);let w=0;if(b.forEach(t=>{w=Math.max(t.duration+t.delay,w)}),l.length)return jn(e,this._triggerName,n,r,v,d,p,[],[],y,m,w,l);b.forEach(t=>{const n=t.element,r=Oe(y,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const i=Oe(m,n,{});t.postStyleProps.forEach(t=>i[t]=!0),n!==e&&g.add(n)});const E=Ze(g.values());return jn(e,this._triggerName,n,r,v,d,p,b,E,y,m,w)}}class Rn{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},r=Be(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const i=t;Object.keys(i).forEach(t=>{let o=i[t];o.length>1&&(o=Xe(o,r,e)),n[t]=o})}}),n}}class Dn{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new Rn(t.style,t.options&&t.options.params||{})}),Mn(this.states,"true","1"),Mn(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new Nn(t,e,this.states))}),this.fallbackTransition=new Nn(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(i=>i.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function Mn(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const Ln=new vn;class Fn{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=hn(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,i=be(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],i=this._animations[t];let o;const s=new Map;if(i?(o=wn(this._driver,e,i,"ng-enter","ng-leave",{},{},n,Ln,r),o.forEach(t=>{const e=Oe(s,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),o=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);s.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,"*")})});const a=_e(o.map(t=>{const e=s.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,r){const i=Ce(e,"","","");return we(this._getPlayer(t),n,i,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const Vn=[],Un={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},qn={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class Bn{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(r=n?t.value:t)?r:null,n){const e=Be(t);delete e.value,this.options=e}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const Hn=new Bn("void");class zn{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Xn(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var i;const o=Oe(this._elementListeners,t,[]),s={name:e,phase:n,callback:r};o.push(s);const a=Oe(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(Xn(t,"ng-trigger"),Xn(t,"ng-trigger-"+e),a[e]=Hn),()=>{this._engine.afterFlush(()=>{const t=o.indexOf(s);t>=0&&o.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const i=this._getTrigger(e),o=new Qn(this.id,e,t);let s=this._engine.statesByElement.get(t);s||(Xn(t,"ng-trigger"),Xn(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,s={}));let a=s[e];const u=new Bn(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&u.absorbOptions(a.options),s[e]=u,a||(a=Hn),"void"!==u.value&&a.value===u.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(a.params,u.params)){const e=[],n=i.matchStyles(a.value,a.params,e),r=i.matchStyles(u.value,u.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{Ge(t,n),Qe(t,r)})}return}const c=Oe(this._engine.playersByElement,t,[]);c.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let l=i.matchTransition(a.value,u.value,t,u.params),h=!1;if(!l){if(!r)return;l=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:l,fromState:a,toState:u,player:o,isFallbackTransition:h}),h||(Xn(t,"ng-animate-queued"),o.onStart(()=>{Zn(t,"ng-animate-queued")})),o.onDone(()=>{let e=this.players.indexOf(o);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(o);t>=0&&n.splice(t,1)}}),this.players.push(o),c.push(o),o}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,".ng-trigger",!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,r){const i=this._engine.statesByElement.get(t);if(i){const o=[];if(Object.keys(i).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,"void",r);n&&o.push(n)}}),o.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&_e(o).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const r=new Set;e.forEach(e=>{const i=e.name;if(r.has(i))return;r.add(i);const o=this._triggers[i].fallbackTransition,s=n[i]||Hn,a=new Bn("void"),u=new Qn(this.id,i,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:i,transition:o,fromState:s,toState:a,player:u,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const r=t.__ng_removed;r&&r!==Un||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){Xn(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,o=this._elementListeners.get(i);o&&o.forEach(e=>{if(e.name==n.triggerName){const r=Ce(i,n.triggerName,n.fromState.value,n.toState.value);r._data=t,we(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class Wn{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new zn(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=n[t[r]].namespaceId;if(i){const t=this._fetchNamespace(i);t&&e.add(t)}}}return e}trigger(t,e,n,r){if(Gn(e)){const i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!Gn(e))return;const i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Xn(t,"ng-animate-disabled")):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Zn(t,"ng-animate-disabled"))}removeNode(t,e,n,r){if(Gn(e)){const i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,i){return Gn(e)?this._fetchNamespace(t).listen(e,n,r,i):()=>{}}_buildInstruction(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}destroyInnerAnimations(t){let e=this.driver.query(t,".ng-trigger",!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,".ng-animating",!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return _e(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=Un,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,".ng-animate-disabled")&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)Xn(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?_e(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new vn,r=[],i=new Map,o=[],s=new Map,a=new Map,u=new Map,c=new Set;this.disabledNodes.forEach(t=>{c.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)c.add(e[n])});const l=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=Yn(h,this.collectedEnterElements),f=new Map;let p=0;d.forEach((t,e)=>{const n="ng-enter"+p++;f.set(e,n),t.forEach(t=>Xn(t,n))});const g=[],y=new Set,m=new Set;for(let A=0;A<this.collectedLeaveElements.length;A++){const t=this.collectedLeaveElements[A],e=t.__ng_removed;e&&e.setForRemoval&&(g.push(t),y.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>y.add(t)):m.add(t))}const v=new Map,_=Yn(h,Array.from(y));_.forEach((t,e)=>{const n="ng-leave"+p++;v.set(e,n),t.forEach(t=>Xn(t,n))}),t.push(()=>{d.forEach((t,e)=>{const n=f.get(e);t.forEach(t=>Zn(t,n))}),_.forEach((t,e)=>{const n=v.get(e);t.forEach(t=>Zn(t,n))}),g.forEach(t=>{this.processLeaveNode(t)})});const b=[],w=[];for(let A=this._namespaceList.length-1;A>=0;A--)this._namespaceList[A].drainQueuedTransitions(e).forEach(t=>{const e=t.player,i=t.element;if(b.push(e),this.collectedEnterElements.length){const t=i.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const c=!l||!this.driver.containsElement(l,i),h=v.get(i),d=f.get(i),p=this._buildInstruction(t,n,d,h,c);if(p.errors&&p.errors.length)w.push(p);else{if(c)return e.onStart(()=>Ge(i,p.fromStyles)),e.onDestroy(()=>Qe(i,p.toStyles)),void r.push(e);if(t.isFallbackTransition)return e.onStart(()=>Ge(i,p.fromStyles)),e.onDestroy(()=>Qe(i,p.toStyles)),void r.push(e);p.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(i,p.timelines),o.push({instruction:p,player:e,element:i}),p.queriedElements.forEach(t=>Oe(s,t,[]).push(e)),p.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),p.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=u.get(e);r||u.set(e,r=new Set),n.forEach(t=>r.add(t))})}});if(w.length){const t=[];w.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),b.forEach(t=>t.destroy()),this.reportError(t)}const E=new Map,C=new Map;o.forEach(t=>{const e=t.element;n.has(e)&&(C.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,E))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{Oe(E,e,[]).push(t),t.destroy()})});const O=g.filter(t=>er(t,a,u)),S=new Map;$n(S,this.driver,m,u,"*").forEach(t=>{er(t,a,u)&&O.push(t)});const T=new Map;d.forEach((t,e)=>{$n(T,this.driver,new Set(t),a,"!")}),O.forEach(t=>{const e=S.get(t),n=T.get(t);S.set(t,Object.assign(Object.assign({},e),n))});const I=[],x=[],k={};o.forEach(t=>{const{element:e,player:o,instruction:s}=t;if(n.has(e)){if(c.has(e))return o.onDestroy(()=>Qe(e,s.toStyles)),o.disabled=!0,o.overrideTotalTime(s.totalTime),void r.push(o);let t=k;if(C.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=C.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>C.set(e,t))}const n=this._buildAnimation(o.namespaceId,s,E,i,T,S);if(o.setRealPlayer(n),t===k)I.push(o);else{const e=this.playersByElement.get(t);e&&e.length&&(o.parentPlayer=_e(e)),r.push(o)}}else Ge(e,s.fromStyles),o.onDestroy(()=>Qe(e,s.toStyles)),x.push(o),c.has(e)&&r.push(o)}),x.forEach(t=>{const e=i.get(t.element);if(e&&e.length){const n=_e(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let A=0;A<g.length;A++){const t=g[A],e=t.__ng_removed;if(Zn(t,"ng-leave"),e&&e.hasAnimation)continue;let n=[];if(s.size){let e=s.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,".ng-animating",!0);for(let t=0;t<r.length;t++){let e=s.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?Jn(this,t,r):this.processLeaveNode(t)}return g.length=0,I.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),I}elementContainsData(t,e){let n=!1;const r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,i){let o=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(o=e)}else{const e=this.playersByElement.get(t);if(e){const t=!i||"void"==i;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&o.push(e)})}}return(n||r)&&(o=o.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),o}_beforeAnimationBuild(t,e,n){const r=e.element,i=e.isRemovalTransition?void 0:t,o=e.isRemovalTransition?void 0:e.triggerName;for(const s of e.timelines){const t=s.element,a=t!==r,u=Oe(n,t,[]);this._getPreviousPlayers(t,a,i,o,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),u.push(t)})}Ge(r,e.fromStyles)}_buildAnimation(t,e,n,r,i,o){const s=e.triggerName,a=e.element,u=[],c=new Set,l=new Set,h=e.timelines.map(e=>{const h=e.element;c.add(h);const d=h.__ng_removed;if(d&&d.removedBeforeQueried)return new ye(e.duration,e.delay);const f=h!==a,p=function(t){const e=[];return tr(t,e),e}((n.get(h)||Vn).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),g=i.get(h),y=o.get(h),m=be(0,this._normalizer,0,e.keyframes,g,y),v=this._buildPlayer(e,m,p);if(e.subTimeline&&r&&l.add(h),f){const e=new Qn(t,s,h);e.setRealPlayer(v),u.push(e)}return v});u.forEach(t=>{Oe(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e),r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e],r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r}(this.playersByQueriedElement,t.element,t))}),c.forEach(t=>Xn(t,"ng-animating"));const d=_e(h);return d.onDestroy(()=>{c.forEach(t=>Zn(t,"ng-animating")),Qe(a,e.toStyles)}),l.forEach(t=>{Oe(r,t,[]).push(d)}),d}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new ye(t.duration,t.delay)}}class Qn{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new ye,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>we(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Oe(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function Gn(t){return t&&1===t.nodeType}function Kn(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function $n(t,e,n,r,i){const o=[];n.forEach(t=>o.push(Kn(t)));const s=[];r.forEach((n,r)=>{const o={};n.forEach(t=>{const n=o[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=qn,s.push(r))}),t.set(r,o)});let a=0;return n.forEach(t=>Kn(t,o[a++])),s}function Yn(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),i=new Map;function o(t){if(!t)return 1;let e=i.get(t);if(e)return e;const s=t.parentNode;return e=n.has(s)?s:r.has(s)?1:o(s),i.set(t,e),e}return e.forEach(t=>{const e=o(t);1!==e&&n.get(e).push(t)}),n}function Xn(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function Zn(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function Jn(t,e,n){_e(n).onDone(()=>t.processLeaveNode(e))}function tr(t,e){for(let n=0;n<t.length;n++){const r=t[n];r instanceof me?tr(r.players,e):e.push(r)}}function er(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(t=>i.add(t)):e.set(t,r),n.delete(t),!0}class nr{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new Wn(t,e,n),this._timelineEngine=new Fn(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,i){const o=t+"-"+r;let s=this._triggerCache[o];if(!s){const t=[],e=hn(this._driver,i,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);s=function(t,e){return new Dn(t,e)}(r,e),this._triggerCache[o]=s}this._transitionEngine.registerTrigger(e,r,s)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,i]=Se(n);this._timelineEngine.command(t,e,i,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,i){if("@"==n.charAt(0)){const[t,r]=Se(n);return this._timelineEngine.listen(t,e,r,i)}return this._transitionEngine.listen(t,e,n,r,i)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function rr(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=or(e[0]),e.length>1&&(r=or(e[e.length-1]))):e&&(n=or(e)),n||r?new ir(t,n,r):null}let ir=(()=>{class t{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let i=t.initialStylesByElement.get(e);i||t.initialStylesByElement.set(e,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&Qe(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Qe(this._element,this._initialStyles),this._endStyles&&(Qe(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(Ge(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ge(this._element,this._endStyles),this._endStyles=null),Qe(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function or(t){let e=null;const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];sr(i)&&(e=e||{},e[i]=t[i])}return e}function sr(t){return"display"===t||"position"===t}class ar{constructor(t,e,n,r,i,o,s){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=o,this._onDoneFn=s,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=fr(t,"").trim();n.length&&(function(t,e){let n=0;for(let r=0;r<t.length;r++)","===t.charAt(r)&&n++}(n),e=`${n}, ${e}`),dr(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),hr(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){ur(this._element,this._name,"paused")}resume(){ur(this._element,this._name,"running")}setPosition(t){const e=cr(this._element,this._name);this._position=t*this._duration,dr(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),hr(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=fr(t,"").split(","),r=lr(n,e);r>=0&&(n.splice(r,1),dr(t,"",n.join(",")))}(this._element,this._name))}}function ur(t,e,n){dr(t,"PlayState",n,cr(t,e))}function cr(t,e){const n=fr(t,"");return n.indexOf(",")>0?lr(n.split(","),e):lr([n],e)}function lr(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function hr(t,e,n){n?t.removeEventListener("animationend",e):t.addEventListener("animationend",e)}function dr(t,e,n,r){const i="animation"+e;if(null!=r){const e=t.style[i];if(e.length){const t=e.split(",");t[r]=n,n=t.join(",")}}t.style[i]=n}function fr(t,e){return t.style["animation"+e]||""}class pr{constructor(t,e,n,r,i,o,s,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=s,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=r+i,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new ar(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:on(this.element,n))})}this.currentSnapshot=t}}class gr extends ye{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=Me(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class yr{constructor(){this._count=0,this._head=document.querySelector("head")}validateStyleProperty(t){return Pe(t)}matchesElement(t,e){return Ne(t,e)}containsElement(t,e){return Re(t,e)}query(t,e,n){return De(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>Me(t));let r=`@keyframes ${e} {\n`,i="";n.forEach(t=>{i=" ";const e=parseFloat(t.offset);r+=`${i}${100*e}% {\n`,i+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${e}: ${n};\n`)}}),r+=`${i}}\n`}),r+="}\n";const o=document.createElement("style");return o.textContent=r,o}animate(t,e,n,r,i,o=[],s){const a=o.filter(t=>t instanceof pr),u={};en(n,r)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const c=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=nn(t,e,u));if(0==n)return new gr(t,c);const l="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,l,e);document.querySelector("head").appendChild(h);const d=rr(t,e),f=new pr(t,e,l,n,r,i,c,d);return f.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),f}}class mr{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:on(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class vr{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(_r().toString()),this._cssKeyframesDriver=new yr}validateStyleProperty(t){return Pe(t)}matchesElement(t,e){return Ne(t,e)}containsElement(t,e){return Re(t,e)}query(t,e,n){return De(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,i,o=[],s){if(!s&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,o);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const u={},c=o.filter(t=>t instanceof mr);en(n,r)&&c.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const l=rr(t,e=nn(t,e=e.map(t=>He(t,!1)),u));return new mr(t,e,a,l)}}function _r(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}let br=(()=>{class t extends ue{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:r.S.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?he(t):t;return Cr(this._renderer,null,e,"register",[n]),new wr(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(r.G),r.Tb(s))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();class wr extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new Er(this._id,t,e||{},this._renderer)}}class Er{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return Cr(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function Cr(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}let Or=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new Sr("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,i=e.id+"-"+this._currentId;this._currentId++,this.engine.register(i,t);const o=e=>{Array.isArray(e)?e.forEach(o):this.engine.registerTrigger(r,i,t,e.name,e)};return e.data.animation.forEach(o),new Tr(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(r.G),r.Tb(nr),r.Tb(r.A))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();class Sr{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){"@"==e.charAt(0)&&"@.disabled"==e?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class Tr extends Sr{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&"@.disabled"==e?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if("@"==e.charAt(0)){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let i=e.substr(1),o="";return"@"!=i.charAt(0)&&([i,o]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,r,i,o,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let Ir=(()=>{class t extends nr{constructor(t,e,n){super(t.body,e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(s),r.Tb(Fe),r.Tb(xn))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();const xr=new r.r("AnimationModuleType"),kr=[{provide:Fe,useFactory:function(){return"function"==typeof _r()?new vr:new yr}},{provide:xr,useValue:"BrowserAnimations"},{provide:ue,useClass:br},{provide:xn,useFactory:function(){return new kn}},{provide:nr,useClass:Ir},{provide:r.G,useFactory:function(t,e,n){return new Or(t,e,n)},deps:[et,nr,r.A]}];let Ar=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},providers:kr,imports:[pt]}),t})();const jr=new r.Q("11.2.1"),Pr=new r.r("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let Nr,Rr=(()=>{class t{constructor(t,e,n){this._hasDoneGlobalChecks=!1,this._document=n,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=e,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getWindow(){const t=this._document.defaultView||window;return"object"==typeof t&&t?t:null}_checksAreEnabled(){return Object(r.X)()&&!this._isTestEnv()}_isTestEnv(){const t=this._getWindow();return t&&(t.__karma__||t.jasmine)}_checkDoctypeIsDefined(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype)&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checksAreEnabled()||!1===this._sanityChecks||!this._sanityChecks.theme||!this._document.body||"function"!=typeof getComputedStyle)return;const t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);const e=getComputedStyle(t);e&&"none"!==e.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}_checkCdkVersionMatch(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&jr.full!==re.full&&console.warn("The Angular Material version ("+jr.full+") does not match the Angular CDK version ("+re.full+").\nPlease ensure the versions of these two packages exactly match.")}}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)(r.Tb(Jt),r.Tb(Pr,8),r.Tb(s))},imports:[[ne],ne]}),t})();function Dr(t){return class extends t{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=Rt(t)}}}function Mr(t){return class extends t{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Rt(t)}}}try{Nr="undefined"!=typeof Intl}catch(DS){Nr=!1}class Lr{constructor(t,e,n){this._renderer=t,this.element=e,this.config=n,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Fr={enterDuration:450,exitDuration:400},Vr=zt({passive:!0}),Ur=["mousedown","touchstart"],qr=["mouseup","mouseleave","touchend","touchcancel"];class Br{constructor(t,e,n,r){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Lt(n))}fadeInRipple(t,e,n={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),i=Object.assign(Object.assign({},Fr),n.animation);n.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);const o=n.radius||function(t,e,n){const r=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),i=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(r*r+i*i)}(t,e,r),s=t-r.left,a=e-r.top,u=i.enterDuration,c=document.createElement("div");c.classList.add("mat-ripple-element"),c.style.left=s-o+"px",c.style.top=a-o+"px",c.style.height=2*o+"px",c.style.width=2*o+"px",null!=n.color&&(c.style.backgroundColor=n.color),c.style.transitionDuration=`${u}ms`,this._containerElement.appendChild(c),window.getComputedStyle(c).getPropertyValue("opacity"),c.style.transform="scale(1)";const l=new Lr(this,c,n);return l.state=0,this._activeRipples.add(l),n.persistent||(this._mostRecentTransientRipple=l),this._runTimeoutOutsideZone(()=>{const t=l===this._mostRecentTransientRipple;l.state=1,n.persistent||t&&this._isPointerDown||l.fadeOut()},u),l}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const n=t.element,r=Object.assign(Object.assign({},Fr),t.config.animation);n.style.transitionDuration=`${r.exitDuration}ms`,n.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,n.parentNode.removeChild(n)},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}setupTriggerEvents(t){const e=Lt(t);e&&e!==this._triggerElement&&(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(Ur))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(qr),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=Kt(t),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;this._target.rippleDisabled||e||n||(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let t=0;t<e.length;t++)this.fadeInRipple(e[t].clientX,e[t].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(t=>{this._triggerElement.addEventListener(t,this,Vr)})})}_removeTriggerEvents(){this._triggerElement&&(Ur.forEach(t=>{this._triggerElement.removeEventListener(t,this,Vr)}),this._pointerUpEventsRegistered&&qr.forEach(t=>{this._triggerElement.removeEventListener(t,this,Vr)}))}}const Hr=new r.r("mat-ripple-global-options");let zr=(()=>{class t{constructor(t,e,n,r,i){this._elementRef=t,this._animationMode=i,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=r||{},this._rippleRenderer=new Br(this,e,t,n)}get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,e=0,n){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,e,Object.assign(Object.assign({},this.rippleConfig),n)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.l),r.Mb(r.A),r.Mb(Bt),r.Mb(Hr,8),r.Mb(xr,8))},t.\u0275dir=r.Hb({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,e){2&t&&r.Eb("mat-ripple-unbounded",e.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),t})(),Wr=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},imports:[[Rr,Ht],Rr]}),t})(),Qr=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},imports:[[Wr,Rr],Rr]}),t})();var Gr=n("Cfvw"),Kr=n("9ppp");class $r extends gt.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Kr.a;return this._value}next(t){super.next(this._value=t)}}var Yr=n("DH7j");class Xr extends bt.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Zr extends bt.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Jr=n("SeVD");function ti(t,e,n,r,i=new Zr(t,n,r)){if(!i.closed)return e instanceof Qt.a?e.subscribe(i):Object(Jr.a)(e)(i)}var ei=n("yCtX");const ni={};class ri{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new ii(t,this.resultSelector))}}class ii extends Xr{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(ni),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(ti(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===ni?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const oi=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();function si(t){return new Qt.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(Gr.a)(n):Object(At.b)()).subscribe(e)})}var ai=n("EQ5u"),ui=n("zx2A");function ci(t,e){return"function"==typeof e?n=>n.pipe(ci((n,r)=>Object(Gr.a)(t(n,r)).pipe(Object(xt.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new li(t))}class li{constructor(t){this.project=t}call(t,e){return e.subscribe(new hi(t,this.project))}}class hi extends ui.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new ui.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(ui.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}function di(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new fi(t,e,n))}}class fi{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new pi(t,this.accumulator,this.seed,this.hasSeed))}}class pi extends bt.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function gi(t){return function(e){const n=new yi(t),r=e.lift(n);return n.caught=r}}class yi{constructor(t){this.selector=t}call(t,e){return e.subscribe(new mi(t,this.selector,this.caught))}}class mi extends ui.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new ui.a(this);this.add(r);const i=Object(ui.c)(n,r);i!==r&&this.add(i)}}}var vi=n("5+tZ");function _i(t,e){return Object(vi.a)(t,e,1)}function bi(t){return function(e){return 0===t?Object(At.b)():e.lift(new wi(t))}}class wi{constructor(t){if(this.total=t,this.total<0)throw new kt}call(t,e){return e.subscribe(new Ei(t,this.total))}}class Ei extends bt.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function Ci(t=Ti){return e=>e.lift(new Oi(t))}class Oi{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Si(t,this.errorFactory))}}class Si extends bt.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(gE){t=gE}this.destination.error(t)}}}function Ti(){return new oi}function Ii(t=null){return e=>e.lift(new xi(t))}class xi{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new ki(t,this.defaultValue))}}class ki extends bt.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var Ai=n("SpAZ");function ji(t,e){const n=arguments.length>=2;return r=>r.pipe(t?St((e,n)=>t(e,n,r)):Ai.a,jt(1),n?Ii(e):Ci(()=>new oi))}var Pi=n("x+ZX");class Ni{constructor(t){this.callback=t}call(t,e){return e.subscribe(new Ri(t,this.callback))}}class Ri extends bt.a{constructor(t,e){super(t),this.add(new yt.a(e))}}class Di{constructor(t,e){this.id=t,this.url=e}}class Mi extends Di{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Li extends Di{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Fi extends Di{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Vi extends Di{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ui extends Di{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qi extends Di{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bi extends Di{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Hi extends Di{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zi extends Di{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wi{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Qi{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Gi{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ki{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $i{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Yi{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xi{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Zi{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Ji(t){return new Zi(t)}function to(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function eo(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function no(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!ro(t[i],e[i]))return!1;return!0}function ro(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function io(t){return Array.prototype.concat.apply([],t)}function oo(t){return t.length>0?t[t.length-1]:null}function so(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function ao(t){return Object(r.sb)(t)?t:Object(r.tb)(t)?Object(Gr.a)(Promise.resolve(t)):Object(mt.a)(t)}function uo(t,e,n){return n?function(t,e){return no(t,e)}(t.queryParams,e.queryParams)&&co(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>ro(t[n],e[n]))}(t.queryParams,e.queryParams)&&lo(t.root,e.root)}function co(t,e){if(!yo(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!co(t.children[n],e.children[n]))return!1}return!0}function lo(t,e){return ho(t,e,e.segments)}function ho(t,e,n){if(t.segments.length>n.length)return!!yo(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!yo(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!lo(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!yo(t.segments,r)&&!!t.children.primary&&ho(t.children.primary,e,i)}}class fo{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ji(this.queryParams)),this._queryParamMap}toString(){return _o.serialize(this)}}class po{constructor(t,e){this.segments=t,this.children=e,this.parent=null,so(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return bo(this)}}class go{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Ji(this.parameters)),this._parameterMap}toString(){return Io(this)}}function yo(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class mo{}class vo{parse(t){const e=new Po(t);return new fo(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${wo(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Co(e)}=${Co(t)}`).join("&"):`${Co(e)}=${Co(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const _o=new vo;function bo(t){return t.segments.map(t=>Io(t)).join("/")}function wo(t,e){if(!t.hasChildren())return bo(t);if(e){const e=t.children.primary?wo(t.children.primary,!1):"",n=[];return so(t.children,(t,e)=>{"primary"!==e&&n.push(`${e}:${wo(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return so(t.children,(t,r)=>{"primary"===r&&(n=n.concat(e(t,r)))}),so(t.children,(t,r)=>{"primary"!==r&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>"primary"===n?[wo(t.children.primary,!1)]:[`${n}:${wo(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${bo(t)}/${e[0]}`:`${bo(t)}/(${e.join("//")})`}}function Eo(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Co(t){return Eo(t).replace(/%3B/gi,";")}function Oo(t){return Eo(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function So(t){return decodeURIComponent(t)}function To(t){return So(t.replace(/\+/g,"%20"))}function Io(t){return`${Oo(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Oo(t)}=${Oo(e[t])}`).join("")}`;var e}const xo=/^[^\/()?;=#]+/;function ko(t){const e=t.match(xo);return e?e[0]:""}const Ao=/^[^=?&#]+/,jo=/^[^?&#]+/;class Po{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new po([],{}):new po([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new po(t,e)),n}parseSegment(){const t=ko(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new go(So(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=ko(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=ko(this.remaining);t&&(n=t,this.capture(n))}t[So(e)]=So(n)}parseQueryParam(t){const e=function(t){const e=t.match(Ao);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(jo);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=To(e),i=To(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=ko(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i="primary");const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new po([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class No{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Ro(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Ro(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Do(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Do(t,this._root).map(t=>t.value)}}function Ro(t,e){if(t===e.value)return e;for(const n of e.children){const e=Ro(t,n);if(e)return e}return null}function Do(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Do(t,n);if(r.length)return r.unshift(e),r}return[]}class Mo{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Lo(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Fo extends No{constructor(t,e){super(t),this.snapshot=e,zo(this,t)}toString(){return this.snapshot.toString()}}function Vo(t,e){const n=function(t,e){const n=new Bo([],{},{},"",{},"primary",e,null,t.root,-1,{});return new Ho("",new Mo(n,[]))}(t,e),r=new $r([new go("",{})]),i=new $r({}),o=new $r({}),s=new $r({}),a=new $r(""),u=new Uo(r,i,s,a,o,"primary",e,n.root);return u.snapshot=n.root,new Fo(new Mo(u,[]),n)}class Uo{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(xt.a)(t=>Ji(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(xt.a)(t=>Ji(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function qo(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Bo{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ji(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ji(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ho extends No{constructor(t,e){super(e),this.url=t,zo(this,e)}toString(){return Wo(this._root)}}function zo(t,e){e.value._routerState=t,e.children.forEach(e=>zo(t,e))}function Wo(t){const e=t.children.length>0?` { ${t.children.map(Wo).join(", ")} } `:"";return`${t.value}${e}`}function Qo(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,no(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),no(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!no(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),no(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Go(t,e){return no(t.params,e.params)&&function(t,e){return yo(t,e)&&t.every((t,n)=>no(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Go(t.parent,e.parent))}function Ko(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return Ko(t,e,r);return Ko(t,e)})}(t,e,n);return new Mo(r,i)}{const n=t.retrieve(e.value);if(n){const t=n.route;return $o(e,t),t}{const n=new Uo(new $r((r=e.value).url),new $r(r.params),new $r(r.queryParams),new $r(r.fragment),new $r(r.data),r.outlet,r.component,r),i=e.children.map(e=>Ko(t,e));return new Mo(n,i)}}var r}function $o(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)$o(t.children[n],e.children[n])}function Yo(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Xo(t){return"object"==typeof t&&null!=t&&t.outlets}function Zo(t,e,n,r,i){let o={};return r&&so(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new fo(n.root===t?e:Jo(n.root,t,e),o,i)}function Jo(t,e,n){const r={};return so(t.children,(t,i)=>{r[i]=t===e?n:Jo(t,e,n)}),new po(t.segments,r)}class ts{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Yo(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(Xo);if(r&&r!==oo(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class es{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function ns(t,e,n){if(t||(t=new po([],{})),0===t.segments.length&&t.hasChildren())return rs(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(Xo(s))break;const a=`${s}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!as(a,u,e))return o;r+=2}else{if(!as(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new po(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new po(t.segments.slice(r.pathIndex),t.children),rs(e,0,i)}return r.match&&0===i.length?new po(t.segments,{}):r.match&&!t.hasChildren()?is(t,e,n):r.match?rs(t,0,i):is(t,e,n)}function rs(t,e,n){if(0===n.length)return new po(t.segments,{});{const r=function(t){return Xo(t[0])?t[0].outlets:{primary:t}}(n),i={};return so(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=ns(t.children[r],e,n))}),so(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new po(t.segments,i)}}function is(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Xo(o)){const t=os(o.outlets);return new po(r,t)}if(0===i&&Yo(n[0])){r.push(new go(t.segments[e].path,ss(n[0]))),i++;continue}const s=Xo(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Yo(a)?(r.push(new go(s,ss(a))),i+=2):(r.push(new go(s,{})),i++)}return new po(r,{})}function os(t){const e={};return so(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=is(new po([],{}),0,t))}),e}function ss(t){const e={};return so(t,(t,n)=>e[n]=`${t}`),e}function as(t,e,n){return t==n.path&&no(e,n.parameters)}class us{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Qo(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Lo(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),so(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=Lo(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}activateChildRoutes(t,e,n){const r=Lo(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Yi(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Ki(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Qo(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),cs(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function cs(t){Qo(t.value),t.children.forEach(cs)}class ls{constructor(t,e){this.routes=t,this.module=e}}function hs(t){return"function"==typeof t}function ds(t){return t instanceof fo}const fs=Symbol("INITIAL_VALUE");function ps(){return ci(t=>function(...t){let e,n;return Object(se.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(Yr.a)(t[0])&&(t=t[0]),Object(ei.a)(t,n).lift(new ri(e))}(t.map(t=>t.pipe(jt(1),ae(fs)))).pipe(di((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==fs)return t;if(r===fs&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||ds(r))return r}return t},t)},fs),St(t=>t!==fs),Object(xt.a)(t=>ds(t)?t:!0===t),jt(1)))}let gs=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Gb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Nb(0,"router-outlet")},directives:function(){return[sa]},encapsulation:2}),t})();function ys(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];ms(r,vs(e,r))}}function ms(t,e){t.children&&ys(t.children,e)}function vs(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function _s(t){const e=t.children&&t.children.map(_s),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=gs),n}function bs(t){return t.outlet||"primary"}function ws(t,e){const n=t.filter(t=>bs(t)===e);return n.push(...t.filter(t=>bs(t)!==e)),n}const Es={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Cs(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},Es):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||eo)(n,t,e);if(!i)return Object.assign({},Es);const o={};so(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function Os(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>Ss(t,e,n)&&"primary"!==bs(n))}(t,n,r)){const i=new po(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&"primary"!==bs(o)){const n=new po([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[bs(o)]=n}return i}(t,e,r,new po(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Ss(t,e,n))}(t,n,r)){const o=new po(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(Ss(t,n,a)&&!i[bs(a)]){const n=new po([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[bs(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new po(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function Ss(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function Ts(t,e,n,r){return!!(bs(t)===r||"primary"!==r&&Ss(e,n,t))&&("**"===t.path||Cs(e,t,n).matched)}function Is(t,e,n){return 0===e.length&&!t.children[n]}class xs{constructor(t){this.segmentGroup=t||null}}class ks{constructor(t){this.urlTree=t}}function As(t){return new Qt.a(e=>e.error(new xs(t)))}function js(t){return new Qt.a(e=>e.error(new ks(t)))}function Ps(t){return new Qt.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Ns{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.y)}apply(){const t=Os(this.urlTree.root,[],[],this.config).segmentGroup,e=new po(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,"primary").pipe(Object(xt.a)(t=>this.createUrlTree(Rs(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(gi(t=>{if(t instanceof ks)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof xs)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,"primary").pipe(Object(xt.a)(e=>this.createUrlTree(Rs(e),t.queryParams,t.fragment))).pipe(gi(t=>{if(t instanceof xs)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new po([],{primary:t}):t;return new fo(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(xt.a)(t=>new po([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return Object(Gr.a)(r).pipe(_i(r=>{const i=n.children[r],o=ws(e,r);return this.expandSegmentGroup(t,o,i,r).pipe(Object(xt.a)(t=>({segment:t,outlet:r})))}),di((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?St((e,n)=>t(e,n,r)):Ai.a,bi(1),n?Ii(e):Ci(()=>new oi))}())}expandSegment(t,e,n,r,i,o){return Object(Gr.a)(n).pipe(_i(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(gi(t=>{if(t instanceof xs)return Object(mt.a)(null);throw t}))),ji(t=>!!t),gi((t,n)=>{if(t instanceof oi||"EmptyError"===t.name){if(Is(e,r,i))return Object(mt.a)(new po([],{}));throw new xs(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return Ts(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):As(e):As(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?js(i):this.lineralizeSegments(n,i).pipe(Object(vi.a)(n=>{const i=new po(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=Cs(e,r,i);if(!s)return As(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?js(l):this.lineralizeSegments(r,l).pipe(Object(vi.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?Object(mt.a)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(Object(xt.a)(t=>(n._loadedConfig=t,new po(r,{})))):Object(mt.a)(new po(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=Cs(e,n,r);if(!o)return As(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe(Object(vi.a)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=Os(e,s,u,o),l=new po(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe(Object(xt.a)(t=>new po(s,t)));if(0===o.length&&0===c.length)return Object(mt.a)(new po(s,{}));const h=bs(n)===i;return this.expandSegment(r,l,o,c,h?"primary":i,!0).pipe(Object(xt.a)(t=>new po(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(mt.a)(new ls(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(mt.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(vi.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(xt.a)(t=>(e._loadedConfig=t,t))):function(t){return new Qt.a(e=>e.error(to(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(mt.a)(new ls([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(mt.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&hs(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!hs(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return ao(o)});return Object(mt.a)(i).pipe(ps(),Object(_t.a)(t=>{if(!ds(t))return;const e=to(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(xt.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(mt.a)(n);if(r.numberOfChildren>1||!r.children.primary)return Ps(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new fo(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return so(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return so(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new po(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Rs(t){const e={};for(const n of Object.keys(t.children)){const r=Rs(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new po(t.segments.concat(e.segments),e.children)}return t}(new po(t.segments,e))}class Ds{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Ms{constructor(t,e){this.component=t,this.route=e}}function Ls(t,e,n){const r=t._root;return Vs(r,e?e._root:null,n,[r.value])}function Fs(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Vs(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Lo(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!yo(t.url,e.url);case"pathParamsOrQueryParamsChange":return!yo(t.url,e.url)||!no(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Go(t,e)||!no(t.queryParams,e.queryParams);case"paramsChange":default:return!Go(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Ds(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Vs(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ms(a.outlet.component,s))}else s&&Us(e,a,i),i.canActivateChecks.push(new Ds(r)),Vs(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),so(o,(t,e)=>Us(t,n.getContext(e),i)),i}function Us(t,e,n){const r=Lo(t),i=t.value;so(r,(t,r)=>{Us(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Ms(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class qs{}function Bs(t){return new Qt.a(e=>e.error(t))}class Hs{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=Os(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,"primary");if(null===e)return null;const n=new Bo([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Mo(n,e),i=new Ho(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=qo(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=ws(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=function(t){const e=[];for(const n of t){if(!zs(n)){e.push(n);continue}const t=e.find(t=>n.value.routeConfig===t.value.routeConfig);void 0!==t?t.children.push(...n.children):e.push(n)}return e}(n);return r.sort((t,e)=>"primary"===t.value.outlet?-1:"primary"===e.value.outlet?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return Is(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!Ts(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?oo(n).parameters:{};i=new Bo(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Gs(t),bs(t),t.component,t,Ws(e),Qs(e)+n.length,Ks(t))}else{const r=Cs(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new Bo(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Gs(t),bs(t),t.component,t,Ws(e),Qs(e)+o.length,Ks(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=Os(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new Mo(i,t)]}if(0===a.length&&0===c.length)return[new Mo(i,[])];const l=bs(t)===r,h=this.processSegment(a,u,c,l?"primary":r);return null===h?null:[new Mo(i,h)]}}function zs(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Ws(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Qs(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Gs(t){return t.data||{}}function Ks(t){return t.resolve||{}}function $s(t){return ci(e=>{const n=t(e);return n?Object(Gr.a)(n).pipe(Object(xt.a)(()=>e)):Object(mt.a)(e)})}class Ys extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const Xs=new r.r("ROUTES");class Zs{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe(Object(xt.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new ls(io(i.injector.get(Xs,void 0,r.q.Self|r.q.Optional)).map(_s),i)}),gi(t=>{throw e._loader$=void 0,t}));return e._loader$=new ai.a(n,()=>new gt.a).pipe(Object(Pi.a)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?Object(Gr.a)(this.loader.load(t)):ao(t()).pipe(Object(vi.a)(t=>t instanceof r.w?Object(mt.a)(t):Object(Gr.a)(this.compiler.compileModuleAsync(t))))}}class Js{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ta,this.attachRef=null}}class ta{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Js,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class ea{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function na(t){throw t}function ra(t,e,n){return e.parse("/")}function ia(t,e){return Object(mt.a)(null)}let oa=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new gt.a,this.errorHandler=na,this.malformedUriErrorHandler=ra,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ia,afterPreactivation:ia},this.urlHandlingStrategy=new ea,this.routeReuseStrategy=new Ys,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(r.y),this.console=o.get(r.ab);const c=o.get(r.A);this.isNgZoneEnabled=c instanceof r.A&&r.A.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new fo(new po([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Zs(s,a,t=>this.triggerEvent(new Wi(t)),t=>this.triggerEvent(new Qi(t))),this.routerState=Vo(this.currentUrlTree,this.rootComponentType),this.transitions=new $r({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(St(t=>0!==t.id),Object(xt.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),ci(t=>{let n=!1,r=!1;return Object(mt.a)(t).pipe(Object(_t.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),ci(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(mt.a)(t).pipe(ci(t=>{const n=this.transitions.getValue();return e.next(new Mi(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?At.a:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,ci(t=>function(t,e,n,r,i){return new Ns(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(xt.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),Object(_t.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return Object(vi.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new Hs(t,e,n,r,i,o).recognize();return null===s?Bs(new qs):Object(mt.a)(s)}catch(gE){return Bs(gE)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(xt.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(_t.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new Ui(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new Mi(n,this.serializeUrl(r),i,o);e.next(a);const u=Vo(r,this.rootComponentType).snapshot;return Object(mt.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),At.a}),$s(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(_t.a)(t=>{const e=new qi(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(xt.a)(t=>Object.assign(Object.assign({},t),{guards:Ls(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return Object(vi.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(mt.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(Gr.a)(t).pipe(Object(vi.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(mt.a)(!0);const s=o.map(o=>{const s=Fs(o,e,i);let a;if(function(t){return t&&hs(t.canDeactivate)}(s))a=ao(s.canDeactivate(t,e,n,r));else{if(!hs(s))throw new Error("Invalid CanDeactivate guard");a=ao(s(t,e,n,r))}return a.pipe(ji())});return Object(mt.a)(s).pipe(ps())}(t.component,t.route,n,e,r)),ji(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(vi.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(Gr.a)(e).pipe(_i(e=>oe(function(t,e){return null!==t&&e&&e(new Gi(t)),Object(mt.a)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new $i(t)),Object(mt.a)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>si(()=>{const i=e.guards.map(i=>{const o=Fs(i,e.node,n);let s;if(function(t){return t&&hs(t.canActivateChild)}(o))s=ao(o.canActivateChild(r,t));else{if(!hs(o))throw new Error("Invalid CanActivateChild guard");s=ao(o(r,t))}return s.pipe(ji())});return Object(mt.a)(i).pipe(ps())}));return Object(mt.a)(i).pipe(ps())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(mt.a)(!0);const i=r.map(r=>si(()=>{const i=Fs(r,e,n);let o;if(function(t){return t&&hs(t.canActivate)}(i))o=ao(i.canActivate(e,t));else{if(!hs(i))throw new Error("Invalid CanActivate guard");o=ao(i(e,t))}return o.pipe(ji())}));return Object(mt.a)(i).pipe(ps())}(t,e.route,n))),ji(t=>!0!==t,!0))}(r,o,t,e):Object(mt.a)(n)),Object(xt.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(_t.a)(t=>{if(ds(t.guardsResult)){const e=to(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new Bi(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),St(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Fi(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),$s(t=>{if(t.guards.canActivateChecks.length)return Object(mt.a)(t).pipe(Object(_t.a)(t=>{const e=new Hi(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),ci(t=>{let n=!1;return Object(mt.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,Object(vi.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(mt.a)(t);let o=0;return Object(Gr.a)(n).pipe(_i(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(mt.a)({});const o={};return Object(Gr.a)(i).pipe(Object(vi.a)(i=>function(t,e,n,r){const i=Fs(t,e,r);return ao(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(_t.a)(t=>{o[i]=t}))),bi(1),Object(vi.a)(()=>Object.keys(o).length===i.length?Object(mt.a)(o):At.a))}(t._resolve,t,e,r).pipe(Object(xt.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),qo(t,n).resolve),null)))}(t.route,e,r,i)),Object(_t.a)(()=>o++),bi(1),Object(vi.a)(e=>o===n.length?Object(mt.a)(t):At.a))})),Object(_t.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new Fi(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(_t.a)(t=>{const e=new zi(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),$s(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(xt.a)(t=>{const e=function(t,e,n){const r=Ko(t,e._root,n?n._root:void 0);return new Fo(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(_t.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),Object(xt.a)(t=>(new us(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),Object(_t.a)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new Fi(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new Ni(i))),gi(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=ds(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Fi(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Vi(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(Ff){t.reject(Ff)}}var i;return At.a}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){ys(t),this.config=t.map(_s),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return Zo(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new ts(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return so(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new ts(n,e,r)}(n);if(o.toRoot())return Zo(e.root,new po([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new es(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new es(t,t===e.root,0)}const r=Yo(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new es(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?rs(s.segmentGroup,s.index,o.commands):ns(s.segmentGroup,s.index,o.commands);return Zo(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,u)}navigateByUrl(t,e={skipLocationChange:!1}){const n=ds(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(gE){e=this.malformedUriErrorHandler(gE,this.urlSerializer,t)}return e}isActive(t,e){if(ds(t))return uo(this.currentUrlTree,t,e);const n=this.parseUrl(t);return uo(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new Li(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(r.O),r.Tb(mo),r.Tb(ta),r.Tb(w),r.Tb(r.s),r.Tb(r.x),r.Tb(r.i),r.Tb(void 0))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),sa=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||"primary",t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new aa(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(ta),r.Mb(r.R),r.Mb(r.j),r.Ub("name"),r.Mb(r.h))},t.\u0275dir=r.Hb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class aa{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Uo?this.route:t===ta?this.childContexts:this.parent.get(t,e)}}class ua{}class ca{preload(t,e){return Object(mt.a)(null)}}let la=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Zs(e,n,e=>t.triggerEvent(new Wi(e)),e=>t.triggerEvent(new Qi(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(St(t=>t instanceof Li),_i(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.y);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(Gr.a)(n).pipe(Object(ie.a)(),Object(xt.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?Object(mt.a)(e._loadedConfig):this.loader.load(t.injector,e)).pipe(Object(vi.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(oa),r.Tb(r.x),r.Tb(r.i),r.Tb(r.s),r.Tb(ua))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),ha=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Mi?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Li&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Xi&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Xi(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(oa),r.Tb(L),r.Tb(void 0))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();const da=new r.r("ROUTER_CONFIGURATION"),fa=new r.r("ROUTER_FORROOT_GUARD"),pa=[w,{provide:mo,useClass:vo},{provide:oa,useFactory:function(t,e,n,r,i,s,a,u={},c,l){const h=new oa(null,t,e,n,r,i,s,io(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(u,h),u.enableTracing){const t=o();h.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return h},deps:[mo,ta,w,r.s,r.x,r.i,Xs,da,[class{},new r.B],[class{},new r.B]]},ta,{provide:Uo,useFactory:function(t){return t.routerState.root},deps:[oa]},{provide:r.x,useClass:r.L},la,ca,class{preload(t,e){return e().pipe(gi(()=>Object(mt.a)(null)))}},{provide:da,useValue:{enableTracing:!1}}];function ga(){return new r.z("Router",oa)}let ya=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[pa,ba(e),{provide:fa,useFactory:_a,deps:[[oa,new r.B,new r.K]]},{provide:da,useValue:n||{}},{provide:y,useFactory:va,deps:[a,[new r.p(v),new r.B],da]},{provide:ha,useFactory:ma,deps:[oa,L,da]},{provide:ua,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:ca},{provide:r.z,multi:!0,useFactory:ga},[wa,{provide:r.d,multi:!0,useFactory:Ea,deps:[wa]},{provide:Oa,useFactory:Ca,deps:[wa]},{provide:r.b,multi:!0,useExisting:Oa}]]}}static forChild(e){return{ngModule:t,providers:[ba(e)]}}}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)(r.Tb(fa,8),r.Tb(oa,8))}}),t})();function ma(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new ha(t,e,n)}function va(t,e,n={}){return n.useHash?new b(t,e):new _(t,e)}function _a(t){return"guarded"}function ba(t){return[{provide:r.a,multi:!0,useValue:t},{provide:Xs,multi:!0,useValue:t}]}let wa=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new gt.a}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(oa),r=this.injector.get(da);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Object(mt.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(da),n=this.injector.get(la),i=this.injector.get(ha),o=this.injector.get(oa),s=this.injector.get(r.g);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(r.s))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();function Ea(t){return t.appInitializer.bind(t)}function Ca(t){return t.bootstrapListener.bind(t)}const Oa=new r.r("Router Initializer");function Sa(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(gE){o(gE)}}function a(t){try{u(r.throw(t))}catch(gE){o(gE)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}class Ta{constructor(){this.items=[],this.disabled=!0}}var Ia=n("VRyK"),xa=n("pxpQ"),ka=n("qgXg"),Aa=n("Ylt2");class ja extends gt.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new Pa(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new Kr.a;if(this.isStopped||this.hasError?o=yt.a.EMPTY:(this.observers.push(t),o=new Aa.a(this,t)),r&&t.add(t=new xa.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||ka.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class Pa{constructor(t,e){this.time=t,this.value=e}}function Na(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new ja(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}})):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}function Ra(t,e){return e?ci(()=>t,e):ci(()=>t)}var Da=n("tf+s"),Ma=n("spgP");const La=new r.r("angularfire2.auth.use-emulator"),Fa=new r.r("angularfire2.auth.settings"),Va=new r.r("angularfire2.auth.tenant-id"),Ua=new r.r("angularfire2.auth.langugage-code"),qa=new r.r("angularfire2.auth.use-device-language"),Ba=new r.r("angularfire.auth.persistence");let Ha=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new Ma.d(i),d=Object(Ma.h)(h),f=new gt.a,p=Object(mt.a)(void 0).pipe(Object(xa.b)(h.outsideAngular),ci(()=>i.runOutsideAngular(()=>n.e(5).then(n.bind(null,"6nsN")))),Object(xt.a)(()=>Object(Ma.g)(t,i,e)),Object(xt.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(Ma.f)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());return e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n&&(r.settings=n),l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),Na({bufferSize:1,refCount:!1}));if(M(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(mt.a)(null);else{p.pipe(ji()).subscribe();const t=p.pipe(ci(t=>t.getRedirectResult().then(t=>t,()=>null)),d,Na({bufferSize:1,refCount:!1})),e=t=>new Qt.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(ci(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(ci(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(Ra(n),Object(Da.a)(h.outsideAngular),Object(xa.b)(h.insideAngular)),this.user=t.pipe(Ra(r),Object(Da.a)(h.outsideAngular),Object(xa.b)(h.insideAngular)),this.idToken=this.user.pipe(ci(t=>t?Object(Gr.a)(t.getIdToken()):Object(mt.a)(null))),this.idTokenResult=this.user.pipe(ci(t=>t?Object(Gr.a)(t.getIdTokenResult()):Object(mt.a)(null))),this.credential=Object(Ia.a)(t,f,this.authState.pipe(St(t=>!t))).pipe(Object(xt.a)(t=>(null==t?void 0:t.user)?t:null),Object(Da.a)(h.outsideAngular),Object(xa.b)(h.insideAngular))}return Object(Ma.i)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>f.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(Ma.c),r.Tb(Ma.b,8),r.Tb(r.C),r.Tb(r.A),r.Tb(La,8),r.Tb(Fa,8),r.Tb(Va,8),r.Tb(Ua,8),r.Tb(qa,8),r.Tb(Ba,8))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Tb)(Ma.c),Object(r.Tb)(Ma.b,8),Object(r.Tb)(r.C),Object(r.Tb)(r.A),Object(r.Tb)(La,8),Object(r.Tb)(Fa,8),Object(r.Tb)(Va,8),Object(r.Tb)(Ua,8),Object(r.Tb)(qa,8),Object(r.Tb)(Ba,8))},token:t,providedIn:"any"}),t})();Object(Ma.e)(Ha,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);let za=(()=>{class t{constructor(t){this.firebaseAuth=t,this.isLoggedIn=!1}signin(t,e){return Sa(this,void 0,void 0,function*(){yield this.firebaseAuth.signInWithEmailAndPassword(t,e).then(t=>{localStorage.setItem("user",JSON.stringify(t.user)),localStorage.setItem("email",t.user.email),localStorage.setItem("uid",t.user.uid),this.isLoggedIn=!0}).catch(t=>{console.log("Invalid userInfo")})})}signup(t,e){return Sa(this,void 0,void 0,function*(){yield this.firebaseAuth.createUserWithEmailAndPassword(t,e).then(e=>{this.isLoggedIn=!0,localStorage.setItem("user",JSON.stringify(e.user)),localStorage.setItem("email",t),localStorage.setItem("uid",e.user.uid)}).catch(t=>console.log("Invalid userInfo"))})}logout(){this.firebaseAuth.signOut(),localStorage.removeItem("user"),window.location.reload()}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(Ha))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Wa(){return t=>t.lift(new Qa)}class Qa{call(t,e){return e.subscribe(new Ga(t))}}class Ga extends bt.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}function Ka(t,e){return n=>n.lift(new $a(t,e))}class $a{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Ya(t,this.compare,this.keySelector))}}class Ya extends bt.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var Xa=n("Jgta"),Za=n("zIRd"),Ja=n("q/0M"),tu=n("qOnz"),eu=function(t,e){return(eu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function nu(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var ru,iu="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ou=ou||{},su=iu||self;function au(){}function uu(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function cu(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var lu="closure_uid_"+(1e9*Math.random()>>>0),hu=0;function du(t,e,n){return t.call.apply(t.bind,arguments)}function fu(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function pu(t,e,n){return(pu=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?du:fu).apply(null,arguments)}function gu(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function yu(){return Date.now()}function mu(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function vu(){this.j=this.j,this.i=this.i}vu.prototype.j=!1,vu.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,lu)&&t[lu]||(t[lu]=++hu)}(this)},vu.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var _u=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},bu=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function wu(t){return Array.prototype.concat.apply([],arguments)}function Eu(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Cu(t){return/^[\s\xa0]*$/.test(t)}var Ou,Su=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Tu(t,e){return-1!=t.indexOf(e)}function Iu(t,e){return t<e?-1:t>e?1:0}t:{var xu=su.navigator;if(xu){var ku=xu.userAgent;if(ku){Ou=ku;break t}}Ou=""}function Au(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function ju(t){var e={};for(var n in t)e[n]=t[n];return e}var Pu="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Nu(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Pu.length;o++)n=Pu[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Ru(t){return Ru[" "](t),t}Ru[" "]=au;var Du,Mu,Lu=Tu(Ou,"Opera"),Fu=Tu(Ou,"Trident")||Tu(Ou,"MSIE"),Vu=Tu(Ou,"Edge"),Uu=Vu||Fu,qu=Tu(Ou,"Gecko")&&!(Tu(Ou.toLowerCase(),"webkit")&&!Tu(Ou,"Edge"))&&!(Tu(Ou,"Trident")||Tu(Ou,"MSIE"))&&!Tu(Ou,"Edge"),Bu=Tu(Ou.toLowerCase(),"webkit")&&!Tu(Ou,"Edge");function Hu(){var t=su.document;return t?t.documentMode:void 0}t:{var zu="",Wu=(Mu=Ou,qu?/rv:([^\);]+)(\)|;)/.exec(Mu):Vu?/Edge\/([\d\.]+)/.exec(Mu):Fu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Mu):Bu?/WebKit\/(\S+)/.exec(Mu):Lu?/(?:Version)[ \/]?(\S+)/.exec(Mu):void 0);if(Wu&&(zu=Wu?Wu[1]:""),Fu){var Qu=Hu();if(null!=Qu&&Qu>parseFloat(zu)){Du=String(Qu);break t}}Du=zu}var Gu={};function Ku(t){return function(t,e){var n=Gu;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=Su(String(Du)).split("."),r=Su(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Iu(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Iu(0==s[2].length,0==a[2].length)||Iu(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var $u=su.document&&Fu&&(Hu()||parseInt(Du,10))||void 0,Yu=!Fu||9<=Number($u),Xu=Fu&&!Ku("9"),Zu=function(){if(!su.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{su.addEventListener("test",au,e),su.removeEventListener("test",au,e)}catch(n){}return t}();function Ju(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function tc(t,e){if(Ju.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(qu){t:{try{Ru(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ec[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Ju.prototype.b=function(){this.defaultPrevented=!0},mu(tc,Ju);var ec={2:"touch",3:"pen",4:"mouse"};tc.prototype.b=function(){tc.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Xu)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var nc="closure_listenable_"+(1e6*Math.random()|0),rc=0;function ic(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++rc,this.Y=this.Z=!1}function oc(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function sc(t){this.src=t,this.a={},this.b=0}function ac(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=_u(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(oc(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function uc(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}sc.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=uc(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new ic(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var cc="closure_lm_"+(1e6*Math.random()|0),lc={};function hc(t,e,n,r,i){if(r&&r.once)return fc(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)hc(t,e[o],n,r,i);return null}return n=wc(n),t&&t[nc]?t.va(e,n,cu(r)?!!r.capture:!!r,i):dc(t,e,n,!1,r,i)}function dc(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=cu(i)?!!i.capture:!!i;if(s&&!Yu)return null;var a=_c(t);if(a||(t[cc]=a=new sc(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=vc,e=Yu?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Zu||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(yc(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function fc(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)fc(t,e[o],n,r,i);return null}return n=wc(n),t&&t[nc]?t.wa(e,n,cu(r)?!!r.capture:!!r,i):dc(t,e,n,!0,r,i)}function pc(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)pc(t,e[o],n,r,i);else r=cu(r)?!!r.capture:!!r,n=wc(n),t&&t[nc]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=uc(o=t.a[e],n,r,i))&&(oc(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=_c(t))&&(e=t.a[e.toString()],t=-1,e&&(t=uc(e,n,r,i)),(n=-1<t?e[t]:null)&&gc(n))}function gc(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[nc])ac(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(yc(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=_c(e))?(ac(n,t),0==n.b&&(n.src=null,e[cc]=null)):oc(t)}}}function yc(t){return t in lc?lc[t]:lc[t]="on"+t}function mc(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&gc(t),n.call(r,e)}function vc(t,e){if(t.Y)return!0;if(!Yu){if(!e)t:{e=["window","event"];for(var n=su,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return mc(t,e=new tc(e,this))}return mc(t,new tc(e,this))}function _c(t){return(t=t[cc])instanceof sc?t:null}var bc="__closure_events_fn_"+(1e9*Math.random()>>>0);function wc(t){return"function"==typeof t?t:(t[bc]||(t[bc]=function(e){return t.handleEvent(e)}),t[bc])}function Ec(){vu.call(this),this.c=new sc(this),this.J=this,this.C=null}function Cc(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Ju(e,t);else if(e instanceof Ju)e.target=e.target||t;else{var i=e;Nu(e=new Ju(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Oc(s,r,!0,e)&&i}if(i=Oc(s=e.a=t,r,!0,e)&&i,i=Oc(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Oc(s=e.a=n[o],r,!1,e)&&i}function Oc(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&ac(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}mu(Ec,vu),Ec.prototype[nc]=!0,(ru=Ec.prototype).addEventListener=function(t,e,n,r){hc(this,t,e,n,r)},ru.removeEventListener=function(t,e,n,r){pc(this,t,e,n,r)},ru.G=function(){if(Ec.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)oc(n[r]);delete e.a[t],e.b--}}this.C=null},ru.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},ru.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Sc=su.JSON.stringify;function Tc(){this.b=this.a=null}var Ic,xc=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new Ac},function(t){t.reset()});function kc(){var t=Rc,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Ac(){this.next=this.b=this.a=null}function jc(t){su.setTimeout(function(){throw t},0)}function Pc(t,e){Ic||function(){var t=su.Promise.resolve(void 0);Ic=function(){t.then(Dc)}}(),Nc||(Ic(),Nc=!0),Rc.add(t,e)}Tc.prototype.add=function(t,e){var n=xc.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Ac.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Ac.prototype.reset=function(){this.next=this.b=this.a=null};var Nc=!1,Rc=new Tc;function Dc(){for(var t;t=kc();){try{t.a.call(t.b)}catch(n){jc(n)}var e=xc;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Nc=!1}function Mc(t,e){Ec.call(this),this.b=t||1,this.a=e||su,this.f=pu(this.Za,this),this.g=yu()}function Lc(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Fc(t,e,n){if("function"==typeof t)n&&(t=pu(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=pu(t.handleEvent,t)}return 2147483647<Number(e)?-1:su.setTimeout(t,e||0)}function Vc(t){t.a=Fc(function(){t.a=null,t.c&&(t.c=!1,Vc(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}mu(Mc,Ec),(ru=Mc.prototype).aa=!1,ru.M=null,ru.Za=function(){if(this.aa){var t=yu()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Cc(this,"tick"),this.aa&&(Lc(this),this.start()))}},ru.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=yu())},ru.G=function(){Mc.X.G.call(this),Lc(this),delete this.a};var Uc=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}eu(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Vc(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(su.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(vu);function qc(t){vu.call(this),this.b=t,this.a={}}mu(qc,vu);var Bc=[];function Hc(t,e,n,r){Array.isArray(n)||(n&&(Bc[0]=n.toString()),n=Bc);for(var i=0;i<n.length;i++){var o=hc(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function zc(t){Au(t.a,function(t,e){this.a.hasOwnProperty(e)&&gc(t)},t),t.a={}}function Wc(){this.a=!0}function Qc(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Sc(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}qc.prototype.G=function(){qc.X.G.call(this),zc(this)},qc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Wc.prototype.info=function(){};var Gc={},Kc=null;function $c(){return Kc=Kc||new Ec}function Yc(t){Ju.call(this,Gc.Fa,t)}function Xc(t){var e=$c();Cc(e,new Yc(e,t))}function Zc(t,e){Ju.call(this,Gc.STAT_EVENT,t),this.stat=e}function Jc(t){var e=$c();Cc(e,new Zc(e,t))}function tl(t){Ju.call(this,Gc.Ga,t)}function el(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return su.setTimeout(function(){t()},e)}Gc.Fa="serverreachability",mu(Yc,Ju),Gc.STAT_EVENT="statevent",mu(Zc,Ju),Gc.Ga="timingevent",mu(tl,Ju);var nl={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},rl={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function il(){}function ol(){}il.prototype.a=null;var sl,al={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function ul(){Ju.call(this,"d")}function cl(){Ju.call(this,"c")}function ll(){}function hl(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new qc(this),this.P=dl,this.R=new Mc(t=Uu?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}mu(ul,Ju),mu(cl,Ju),mu(ll,il),sl=new ll;var dl=45e3,fl={},pl={};function gl(t,e,n){t.H=1,t.i=Ll(jl(e)),t.j=n,t.I=!0,yl(t,null)}function yl(t,e){t.u=yu(),_l(t),t.l=jl(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Yl(n.b,"t",r),t.D=0,t.a=zh(t.g,t.g.C?e:null),0<t.O&&(t.F=new Uc(pu(t.Ca,t,t.a),t.O)),Hc(t.J,t.a,"readystatechange",t.Xa),e=t.B?ju(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Xc(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function ml(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=vl(t,n);if(i==pl){4==e&&(t.h=4,Jc(14),r=!1),Qc(t.c,t.f,null,"[Incomplete Response]");break}if(i==fl){t.h=4,Jc(15),Qc(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Qc(t.c,t.f,i,null),Ol(t,i)}4==e&&0==n.length&&(t.h=1,Jc(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Mh(e),e.F=!0,Jc(11))):(Qc(t.c,t.f,n,"[Invalid Chunked Response]"),Cl(t),El(t))}function vl(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?pl:(n=Number(e.substring(n,r)),isNaN(n)?fl:(r+=1)+n>e.length?pl:(e=e.substr(r,n),t.D=r+n,e))}function _l(t){t.T=yu()+t.P,bl(t,t.P)}function bl(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=el(pu(t.Va,t),e)}function wl(t){t.o&&(su.clearTimeout(t.o),t.o=null)}function El(t){0==t.g.v||t.A||Vh(t.g,t)}function Cl(t){wl(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Lc(t.R),zc(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Ol(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||rh(n.b,t)))if(n.I=t.N,!t.C&&rh(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(xw){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Fh(n),Ih(n)}Dh(n),Jc(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=el(pu(n.Sa,n),6e3));if(1>=nh(n.b)&&n.ea){try{n.ea()}catch(xw){}n.ea=void 0}}else qh(n,11)}else if((t.C||n.a==t)&&Fh(n),!Cu(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(Tu(l,"spdy")||Tu(l,"quic")||Tu(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(ih(h,h.b),h.b=null))}if(u.A){var d=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;d&&(u.na=d,Ml(u.B,u.A,d))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=yu()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var f=t;if((u=n).la=Hh(u,u.C?u.ga:null,u.fa),f.C){oh(u.b,f);var p=f,g=u.D;g&&p.setTimeout(g),p.o&&(wl(p),_l(p)),u.a=f}else Rh(u);0<n.g.length&&Ah(n)}else"stop"!=i[0]&&"close"!=i[0]||qh(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?qh(n,7):Th(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Xc(4)}catch(xw){}}function Sl(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(uu(t)||"string"==typeof t)bu(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(uu(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(uu(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Tl(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Tl)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Il(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];xl(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)xl(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function xl(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(ru=hl.prototype).setTimeout=function(t){this.P=t},ru.Xa=function(t){t=t.target;var e=this.F;e&&3==Eh(t)?e.f():this.Ca(t)},ru.Ca=function(t){try{if(t==this.a)t:{var e=Eh(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!Uu&&!this.a.$())){this.A||4!=e||7==n||Xc(8==n||0>=r?3:2),wl(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Cu(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,Jc(12),Cl(this),El(this);break t}Qc(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Ol(this,u)}this.I?(ml(this,e,o),Uu&&this.b&&3==e&&(Hc(this.J,this.R,"tick",this.Wa),this.R.start())):(Qc(this.c,this.f,o,null),Ol(this,o)),4==e&&Cl(this),this.b&&!this.A&&(4==e?Vh(this.g,this):(this.b=!1,_l(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Jc(12)):(this.h=0,Jc(13)),Cl(this),El(this)}}}catch(c){}},ru.Wa=function(){if(this.a){var t=Eh(this.a),e=this.a.$();this.D<e.length&&(wl(this),ml(this,t,e),this.b&&4!=t&&_l(this))}},ru.cancel=function(){this.A=!0,Cl(this)},ru.Va=function(){this.o=null;var t=yu();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(Xc(3),Jc(17)),Cl(this),this.h=2,El(this)):bl(this,this.T-t)},(ru=Tl.prototype).K=function(){Il(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},ru.L=function(){return Il(this),this.a.concat()},ru.get=function(t,e){return xl(this.b,t)?this.b[t]:e},ru.set=function(t,e){xl(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},ru.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var kl=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Al(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Al){this.a=void 0!==e?e:t.a,Pl(this,t.f),this.j=t.j,Nl(this,t.c),Rl(this,t.h),this.g=t.g,e=t.b;var n=new Ql;n.c=e.c,e.a&&(n.a=new Tl(e.a),n.b=e.b),Dl(this,n),this.i=t.i}else t&&(n=String(t).match(kl))?(this.a=!!e,Pl(this,n[1]||"",!0),this.j=Fl(n[2]||""),Nl(this,n[3]||"",!0),Rl(this,n[4]),this.g=Fl(n[5]||"",!0),Dl(this,n[6]||"",!0),this.i=Fl(n[7]||"")):(this.a=!!e,this.b=new Ql(null,this.a))}function jl(t){return new Al(t)}function Pl(t,e,n){t.f=n?Fl(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Nl(t,e,n){t.c=n?Fl(e,!0):e}function Rl(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Dl(t,e,n){e instanceof Ql?(t.b=e,function(t,e){e&&!t.f&&(Gl(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Kl(this,e),Yl(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=Vl(e,zl)),t.b=new Ql(e,t.a))}function Ml(t,e,n){t.b.set(e,n)}function Ll(t){return Ml(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^yu()).toString(36)),t}function Fl(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Vl(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Ul),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ul(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Al.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Vl(e,ql,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Vl(e,ql,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Vl(n,"/"==n.charAt(0)?Hl:Bl,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Vl(n,Wl)),t.join("")};var ql=/[#\/\?@]/g,Bl=/[#\?:]/g,Hl=/[#\?]/g,zl=/[#\?@]/g,Wl=/#/g;function Ql(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Gl(t){t.a||(t.a=new Tl,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Kl(t,e){Gl(t),e=Xl(t,e),xl(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,xl((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Il(t)))}function $l(t,e){return Gl(t),e=Xl(t,e),xl(t.a.b,e)}function Yl(t,e,n){Kl(t,e),0<n.length&&(t.c=null,t.a.set(Xl(t,e),Eu(n)),t.b+=n.length)}function Xl(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(ru=Ql.prototype).add=function(t,e){Gl(this),this.c=null,t=Xl(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},ru.forEach=function(t,e){Gl(this),this.a.forEach(function(n,r){bu(n,function(n){t.call(e,n,r,this)},this)},this)},ru.L=function(){Gl(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},ru.K=function(t){Gl(this);var e=[];if("string"==typeof t)$l(this,t)&&(e=wu(e,this.a.get(Xl(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=wu(e,t[n])}return e},ru.set=function(t,e){return Gl(this),this.c=null,$l(this,t=Xl(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},ru.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},ru.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Zl=function(){return function(t,e){this.b=t,this.a=e}}();function Jl(t){this.g=t||th,t=su.PerformanceNavigationTiming?0<(t=su.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(su.ia&&su.ia.ya&&su.ia.ya()&&su.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var th=10;function eh(t){return!!t.b||!!t.a&&t.a.size>=t.f}function nh(t){return t.b?1:t.a?t.a.size:0}function rh(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function ih(t,e){t.a?t.a.add(e):t.b=e}function oh(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function sh(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=nu(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Eu(t.c)}function ah(){}function uh(){this.a=new ah}function ch(t,e,n){var r=n||"";try{Sl(t,function(t,n){var i=t;cu(t)&&(i=Sc(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(gE){throw e.push(r+"type="+encodeURIComponent("_badmap")),gE}}function lh(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}Jl.prototype.cancel=function(){var t,e;if(this.c=sh(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=nu(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},ah.prototype.stringify=function(t){return su.JSON.stringify(t,void 0)},ah.prototype.parse=function(t){return su.JSON.parse(t,void 0)};var hh=su.JSON.parse;function dh(t){Ec.call(this),this.headers=new Tl,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=fh,this.D=this.F=!1}mu(dh,Ec);var fh="",ph=/^https?$/i,gh=["POST","PUT"];function yh(t){return"content-type"==t.toLowerCase()}function mh(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,vh(t),bh(t)}function vh(t){t.u||(t.u=!0,Cc(t,"complete"),Cc(t,"error"))}function _h(t){if(t.b&&void 0!==ou&&(!t.s[1]||4!=Eh(t)||2!=t.W()))if(t.l&&4==Eh(t))Fc(t.za,0,t);else if(Cc(t,"readystatechange"),4==Eh(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(kl)[1]||null;if(!o&&su.self&&su.self.location){var s=su.self.location.protocol;o=s.substr(0,s.length-1)}i=!ph.test(o?o.toLowerCase():"")}e=i}if(e)Cc(t,"complete"),Cc(t,"success");else{t.h=6;try{var a=2<Eh(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",vh(t)}}finally{bh(t)}}}function bh(t,e){if(t.a){wh(t);var n=t.a,r=t.s[0]?au:null;t.a=null,t.s=null,e||Cc(t,"ready");try{n.onreadystatechange=r}catch(gE){}}}function wh(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(su.clearTimeout(t.m),t.m=null)}function Eh(t){return t.a?t.a.readyState:0}function Ch(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Au(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Ml(t,e,n))}function Oh(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Sh(t){this.pa=0,this.g=[],this.c=new Wc,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Oh("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Oh("baseRetryDelayMs",5e3,t),this.Ra=Oh("retryDelaySeedMs",1e4,t),this.Ma=Oh("forwardChannelMaxRetries",2,t),this.ma=Oh("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Jl(t&&t.concurrentRequestLimit),this.ka=new uh,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Th(t){if(xh(t),3==t.v){var e=t.R++,n=jl(t.B);Ml(n,"SID",t.J),Ml(n,"RID",e),Ml(n,"TYPE","terminate"),Ph(t,n),(e=new hl(t,t.c,e,void 0)).H=2,e.i=Ll(jl(n)),n=!1,su.navigator&&su.navigator.sendBeacon&&(n=su.navigator.sendBeacon(e.i.toString(),"")),!n&&su.Image&&((new Image).src=e.i,n=!0),n||(e.a=zh(e.g,null),e.a.ba(e.i)),e.u=yu(),_l(e)}Bh(t)}function Ih(t){t.a&&(Mh(t),t.a.cancel(),t.a=null)}function xh(t){Ih(t),t.j&&(su.clearTimeout(t.j),t.j=null),Fh(t),t.b.cancel(),t.h&&("number"==typeof t.h&&su.clearTimeout(t.h),t.h=null)}function kh(t,e){t.g.push(new Zl(t.Oa++,e)),3==t.v&&Ah(t)}function Ah(t){eh(t.b)||t.h||(t.h=!0,Pc(t.Ba,t),t.u=0)}function jh(t,e){var n;n=e?e.f:t.R++;var r=jl(t.B);Ml(r,"SID",t.J),Ml(r,"RID",n),Ml(r,"AID",t.P),Ph(t,r),t.i&&t.l&&Ch(r,t.i,t.l),n=new hl(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Nh(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),ih(t.b,n),gl(n,r,e)}function Ph(t,e){t.f&&Sl({},function(t,n){Ml(e,n,t)})}function Nh(t,e,n){n=Math.min(t.g.length,n);var r=t.f?pu(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{ch(l,s,"req"+c+"_")}catch(h){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Rh(t){t.a||t.j||(t.T=1,Pc(t.Aa,t),t.o=0)}function Dh(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=el(pu(t.Aa,t),Uh(t,t.o)),t.o++,0))}function Mh(t){null!=t.s&&(su.clearTimeout(t.s),t.s=null)}function Lh(t){t.a=new hl(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=jl(t.la);Ml(e,"RID","rpc"),Ml(e,"SID",t.J),Ml(e,"CI",t.H?"0":"1"),Ml(e,"AID",t.P),Ph(t,e),Ml(e,"TYPE","xmlhttp"),t.i&&t.l&&Ch(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Ll(jl(e)),n.j=null,n.I=!0,yl(n,t)}function Fh(t){null!=t.m&&(su.clearTimeout(t.m),t.m=null)}function Vh(t,e){var n=null;if(t.a==e){Fh(t),Mh(t),t.a=null;var r=2}else{if(!rh(t.b,e))return;n=e.s,oh(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=yu()-e.u;var i=t.u;Cc(r=$c(),new tl(r,n,e,i)),Ah(t)}else Rh(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(nh(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=el(pu(t.Ba,t,e),Uh(t,t.u)),t.u++,0)))}(t,e)||2==r&&Dh(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:qh(t,5);break;case 4:qh(t,10);break;case 3:qh(t,6);break;default:qh(t,2)}}function Uh(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function qh(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=pu(t.Ya,t);n||(n=new Al("//www.google.com/images/cleardot.gif"),su.location&&"http"==su.location.protocol||Pl(n,"https"),Ll(n)),function(t,e){var n=new Wc;if(su.Image){var r=new Image;r.onload=gu(lh,n,r,"TestLoadImage: loaded",!0,e),r.onerror=gu(lh,n,r,"TestLoadImage: error",!1,e),r.onabort=gu(lh,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=gu(lh,n,r,"TestLoadImage: timeout",!1,e),su.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Jc(2);t.v=0,t.f&&t.f.ra(e),Bh(t),xh(t)}function Bh(t){t.v=0,t.I=-1,t.f&&(0==sh(t.b).length&&0==t.g.length||(t.b.c.length=0,Eu(t.g),t.g.length=0),t.f.qa())}function Hh(t,e,n){var r=function(t){return t instanceof Al?jl(t):new Al(t,void 0)}(n);if(""!=r.c)e&&Nl(r,e+"."+r.c),Rl(r,r.h);else{var i=su.location;r=function(t,e,n,r){var i=new Al(null,void 0);return t&&Pl(i,t),e&&Nl(i,e),n&&Rl(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Au(t.V,function(t,e){Ml(r,e,t)}),n=t.na,(e=t.A)&&n&&Ml(r,e,n),Ml(r,"VER",t.ha),Ph(t,r),r}function zh(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new dh(t.Na)).F=t.C,e}function Wh(){}function Qh(){if(Fu&&!(10<=Number($u)))throw Error("Environmental error: no available transport.")}function Gh(t,e){Ec.call(this),this.a=new Sh(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Cu(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Cu(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Yh(this)}function Kh(t){ul.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function $h(){cl.call(this),this.status=1}function Yh(t){this.a=t}(ru=dh.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:sl),this.a.onreadystatechange=pu(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void mh(this,o)}t=n||"";var i=new Tl(this.headers);r&&Sl(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=yh,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=su.FormData&&t instanceof su.FormData,!(0<=_u(gh,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{wh(this),0<this.o&&((this.D=function(t){return Fu&&Ku(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=pu(this.xa,this)):this.m=Fc(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){mh(this,o)}},ru.xa=function(){void 0!==ou&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Cc(this,"timeout"),this.abort(8))},ru.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Cc(this,"complete"),Cc(this,"abort"),bh(this))},ru.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),bh(this,!0)),dh.X.G.call(this)},ru.za=function(){this.j||(this.A||this.l||this.g?_h(this):this.Ua())},ru.Ua=function(){_h(this)},ru.W=function(){try{return 2<Eh(this)?this.a.status:-1}catch(Mu){return-1}},ru.$=function(){try{return this.a?this.a.responseText:""}catch(Mu){return""}},ru.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),hh(e)}},ru.ua=function(){return this.h},ru.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(ru=Sh.prototype).ha=8,ru.v=1,ru.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new hl(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Nu(r=ju(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Nh(this,n,e),Ml(i=jl(this.B),"RID",t),Ml(i,"CVER",22),this.A&&Ml(i,"X-HTTP-Session-Id",this.A),Ph(this,i),this.i&&r&&Ch(i,this.i,r),ih(this.b,n),this.Ia&&Ml(i,"TYPE","init"),this.da?(Ml(i,"$req",e),Ml(i,"SID","null"),n.U=!0,gl(n,i,null)):gl(n,i,e),this.v=2}}else 3==this.v&&(t?jh(this,t):0==this.g.length||eh(this.b)||jh(this))},ru.Aa=function(){if(this.j=null,Lh(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=el(pu(this.Ta,this),t)}},ru.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Jc(10),Ih(this),Lh(this))},ru.Sa=function(){null!=this.m&&(this.m=null,Ih(this),Dh(this),Jc(19))},ru.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Jc(2)):(this.c.info("Failed to ping google.com"),Jc(1))},(ru=Wh.prototype).ta=function(){},ru.sa=function(){},ru.ra=function(){},ru.qa=function(){},ru.Ja=function(){},Qh.prototype.a=function(t,e){return new Gh(t,e)},mu(Gh,Ec),Gh.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Jc(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Hh(t,null,t.fa),Ah(t)},Gh.prototype.close=function(){Th(this.a)},Gh.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,kh(this.a,e)}else this.l?((e={}).__data__=Sc(t),kh(this.a,e)):kh(this.a,t)},Gh.prototype.G=function(){this.a.f=null,delete this.f,Th(this.a),delete this.a,Gh.X.G.call(this)},mu(Kh,ul),mu($h,cl),mu(Yh,Wh),Yh.prototype.ta=function(){Cc(this.a,"a")},Yh.prototype.sa=function(t){Cc(this.a,new Kh(t))},Yh.prototype.ra=function(t){Cc(this.a,new $h(t))},Yh.prototype.qa=function(){Cc(this.a,"b")},Qh.prototype.createWebChannel=Qh.prototype.a,Gh.prototype.send=Gh.prototype.h,Gh.prototype.open=Gh.prototype.g,Gh.prototype.close=Gh.prototype.close,nl.NO_ERROR=0,nl.TIMEOUT=8,nl.HTTP_ERROR=6,rl.COMPLETE="complete",ol.EventType=al,al.OPEN="a",al.CLOSE="b",al.ERROR="c",al.MESSAGE="d",Ec.prototype.listen=Ec.prototype.va,dh.prototype.listenOnce=dh.prototype.wa,dh.prototype.getLastError=dh.prototype.Qa,dh.prototype.getLastErrorCode=dh.prototype.ua,dh.prototype.getStatus=dh.prototype.W,dh.prototype.getResponseJson=dh.prototype.Pa,dh.prototype.getResponseText=dh.prototype.$,dh.prototype.send=dh.prototype.ba;var Xh=nl,Zh=rl,Jh=Gc,td=ol,ed=dh,nd=n("os0x"),rd=function(t,e,n,r,i,o){this.t=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=o},id=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),od=new Ja.b("@firebase/firestore");function sd(){return od.logLevel}function ad(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(od.logLevel<=Ja.a.DEBUG){var r=e.map(ld);od.debug.apply(od,Object(nd.g)(["Firestore (8.2.9): "+t],r))}}function ud(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(od.logLevel<=Ja.a.ERROR){var r=e.map(ld);od.error.apply(od,Object(nd.g)(["Firestore (8.2.9): "+t],r))}}function cd(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(od.logLevel<=Ja.a.WARN){var r=e.map(ld);od.warn.apply(od,Object(nd.g)(["Firestore (8.2.9): "+t],r))}}function ld(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(gE){return t}}function hd(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.2.9) INTERNAL ASSERTION FAILED: "+t;throw ud(e),new Error(e)}function dd(t,e){t||hd()}function fd(t,e){return t}function pd(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var gd=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=pd(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function yd(t,e){return t<e?-1:t>e?1:0}function md(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function vd(t){return t+"\0"}var _d=function(){function t(t){this.h=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.h)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.h)},t.prototype.l=function(){return 2*this.h.length},t.prototype._=function(t){return yd(this.h,t.h)},t.prototype.isEqual=function(t){return this.h===t.h},t}();_d.T=new _d("");var bd={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},wd=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(nd.c)(e,t),e}(Error),Ed=function(){function t(t){this.I=t}return t.fromBase64String=function(e){try{return new t(_d.fromBase64String(e))}catch(e){throw new wd(bd.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(_d.fromUint8Array(e))},t.prototype.toBase64=function(){return this.I.toBase64()},t.prototype.toUint8Array=function(){return this.I.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.I.isEqual(t.I)},t}(),Cd=function(){function t(t){this.uid=t}return t.prototype.m=function(){return null!=this.uid},t.prototype.A=function(){return this.m()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();Cd.UNAUTHENTICATED=new Cd(null),Cd.R=new Cd("google-credentials-uid"),Cd.P=new Cd("first-party-uid");var Od=function(t,e){this.user=e,this.type="OAuth",this.g={},this.g.Authorization="Bearer "+t},Sd=function(){function t(){this.V=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.p=function(){},t.prototype.v=function(t){this.V=t,t(Cd.UNAUTHENTICATED)},t.prototype.S=function(){this.V=null},t}(),Td=function(){function t(t){var e=this;this.D=null,this.currentUser=Cd.UNAUTHENTICATED,this.C=!1,this.N=0,this.V=null,this.forceRefresh=!1,this.D=function(){e.N++,e.currentUser=e.$(),e.C=!0,e.V&&e.V(e.currentUser)},this.N=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.D):(this.D(null),t.get().then(function(t){e.auth=t,e.D&&e.auth.addAuthTokenListener(e.D)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.N,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.N!==e?(ad("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(dd("string"==typeof n.accessToken),new Od(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.p=function(){this.forceRefresh=!0},t.prototype.v=function(t){this.V=t,this.C&&t(this.currentUser)},t.prototype.S=function(){this.auth&&this.auth.removeAuthTokenListener(this.D),this.D=null,this.V=null},t.prototype.$=function(){var t=this.auth&&this.auth.getUid();return dd(null===t||"string"==typeof t),new Cd(t)},t}(),Id=function(){function t(t,e){this.F=t,this.O=e,this.type="FirstParty",this.user=Cd.P}return Object.defineProperty(t.prototype,"g",{get:function(){var t={"X-Goog-AuthUser":this.O},e=this.F.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),xd=function(){function t(t,e){this.F=t,this.O=e}return t.prototype.getToken=function(){return Promise.resolve(new Id(this.F,this.O))},t.prototype.v=function(t){t(Cd.P)},t.prototype.S=function(){},t.prototype.p=function(){},t}(),kd=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.k=function(t){return n.M(t)},this.L=function(t){return e.B(t)})}return t.prototype.M=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.L&&this.L(t),t},t}();kd.q=-1;var Ad=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new wd(bd.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new wd(bd.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new wd(bd.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new wd(bd.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.U=function(t){return this.seconds===t.seconds?yd(this.nanoseconds,t.nanoseconds):yd(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),jd=function(){function t(t){this.timestamp=t}return t.K=function(e){return new t(e)},t.min=function(){return new t(new Ad(0,0))},t.prototype._=function(t){return this.timestamp.U(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.W=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.j=function(){return this.timestamp},t}(),Pd=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&hd(),void 0===n?n=t.length-e:n>t.length-e&&hd(),this.segments=t,this.offset=e,this.G=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.G},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.H(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.J(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.Y=function(t){return this.J(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.X=function(){return this.J(this.segments,this.offset,this.length-1)},t.prototype.Z=function(){return this.segments[this.offset]},t.prototype.tt=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.et=function(){return 0===this.length},t.prototype.nt=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.st=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.it=function(){return this.segments.slice(this.offset,this.limit())},t.H=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Nd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(nd.c)(e,t),e.prototype.J=function(t,n,r){return new e(t,n,r)},e.prototype.rt=function(){return this.it().join("/")},e.prototype.toString=function(){return this.rt()},e.ot=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new wd(bd.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.ct=function(){return new e([])},e}(Pd),Rd=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Dd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(nd.c)(e,t),e.prototype.J=function(t,n,r){return new e(t,n,r)},e.at=function(t){return Rd.test(t)},e.prototype.rt=function(){return this.it().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.at(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.rt()},e.prototype.ut=function(){return 1===this.length&&"__name__"===this.get(0)},e.ht=function(){return new e(["__name__"])},e.lt=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new wd(bd.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new wd(bd.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new wd(bd.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new wd(bd.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.ct=function(){return new e([])},e}(Pd),Md=function(){function t(t){this.path=t}return t._t=function(e){return new t(Nd.ot(e))},t.ft=function(e){return new t(Nd.ot(e).Y(5))},t.prototype.dt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Nd.H(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.H=function(t,e){return Nd.H(t.path,e.path)},t.wt=function(t){return t.length%2==0},t.Et=function(e){return new t(new Nd(e.slice()))},t}();function Ld(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Fd(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Vd(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ud=function(){function t(t){this.fields=t,t.sort(Dd.H)}return t.prototype.Tt=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].nt(t))return!0;return!1},t.prototype.isEqual=function(t){return md(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),qd=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bd(t){if(dd(!!t),"string"==typeof t){var e=0,n=qd.exec(t);if(dd(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Hd(t.seconds),nanos:Hd(t.nanos)}}function Hd(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function zd(t){return"string"==typeof t?_d.fromBase64String(t):_d.fromUint8Array(t)}function Wd(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Qd(t){var e=t.mapValue.fields.__previous_value__;return Wd(e)?Qd(e):e}function Gd(t){var e=Bd(t.mapValue.fields.__local_write_time__.timestampValue);return new Ad(e.seconds,e.nanos)}function Kd(t){return null==t}function $d(t){return 0===t&&1/t==-1/0}function Yd(t){return"number"==typeof t&&Number.isInteger(t)&&!$d(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function Xd(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Wd(t)?4:10:hd()}function Zd(t,e){var n=Xd(t);if(n!==Xd(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Gd(t).isEqual(Gd(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Bd(t.timestampValue),r=Bd(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return zd(t.bytesValue).isEqual(zd(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Hd(t.geoPointValue.latitude)===Hd(e.geoPointValue.latitude)&&Hd(t.geoPointValue.longitude)===Hd(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Hd(t.integerValue)===Hd(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Hd(t.doubleValue),r=Hd(e.doubleValue);return n===r?$d(n)===$d(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return md(t.arrayValue.values||[],e.arrayValue.values||[],Zd);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Ld(n)!==Ld(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Zd(n[i],r[i])))return!1;return!0}(t,e);default:return hd()}}function Jd(t,e){return void 0!==(t.values||[]).find(function(t){return Zd(t,e)})}function tf(t,e){var n=Xd(t),r=Xd(e);if(n!==r)return yd(n,r);switch(n){case 0:return 0;case 1:return yd(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Hd(t.integerValue||t.doubleValue),r=Hd(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return ef(t.timestampValue,e.timestampValue);case 4:return ef(Gd(t),Gd(e));case 5:return yd(t.stringValue,e.stringValue);case 6:return function(t,e){var n=zd(t),r=zd(e);return n._(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=yd(n[i],r[i]);if(0!==o)return o}return yd(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=yd(Hd(t.latitude),Hd(e.latitude));return 0!==n?n:yd(Hd(t.longitude),Hd(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=tf(n[i],r[i]);if(o)return o}return yd(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=yd(r[s],o[s]);if(0!==a)return a;var u=tf(n[r[s]],i[o[s]]);if(0!==u)return u}return yd(r.length,o.length)}(t.mapValue,e.mapValue);default:throw hd()}}function ef(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return yd(t,e);var n=Bd(t),r=Bd(e),i=yd(n.seconds,r.seconds);return 0!==i?i:yd(n.nanos,r.nanos)}function nf(t){return rf(t)}function rf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Bd(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?zd(t.bytesValue).toBase64():"referenceValue"in t?Md.ft(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=rf(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+rf(t.fields[o])}return e+"}"}(t.mapValue):hd();var e}function of(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.rt()}}function sf(t){return!!t&&"integerValue"in t}function af(t){return!!t&&"arrayValue"in t}function uf(t){return!!t&&"nullValue"in t}function cf(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function lf(t){return!!t&&"mapValue"in t}var hf=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.et())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!lf(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.tt()])||null},t.prototype.isEqual=function(t){return Zd(this.proto,t.proto)},t}(),df=function(){function t(t){void 0===t&&(t=hf.empty()),this.It=t,this.At=new Map}return t.prototype.set=function(t,e){return this.Rt(t,e),this},t.prototype.delete=function(t){return this.Rt(t,null),this},t.prototype.Rt=function(t,e){for(var n=this.At,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Xd(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.tt(),e)},t.prototype.Pt=function(){var t=this.yt(Dd.ct(),this.At);return null!=t?new hf(t):this.It},t.prototype.yt=function(t,e){var n=this,r=!1,i=this.It.field(t),o=lf(i)?Object.assign({},i.mapValue.fields):{};return e.forEach(function(e,i){if(e instanceof Map){var s=n.yt(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)}),r?{mapValue:{fields:o}}:null},t}();function ff(t){var e=[];return Fd(t.fields||{},function(t,n){var r=new Dd([t]);if(lf(n)){var i=ff(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new Ud(e)}var pf=function(t,e){this.key=t,this.version=e},gf=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).gt=r,o.Vt=!!i.Vt,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(nd.c)(e,t),e.prototype.field=function(t){return this.gt.field(t)},e.prototype.data=function(){return this.gt},e.prototype.bt=function(){return this.gt.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Vt===t.Vt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.gt.isEqual(t.gt)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.gt.toString()+", {hasLocalMutations: "+this.Vt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Vt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(pf),yf=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(nd.c)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(pf),mf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(nd.c)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(pf),vf=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.vt=null};function _f(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new vf(t,e,n,r,i,o,s)}function bf(t){var e=fd(t);if(null===e.vt){var n=e.path.rt();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.rt()+t.op.toString()+nf(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.rt()+t.dir}(t)}).join(","),Kd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Nf(e.startAt)),e.endAt&&(n+="|ub:",n+=Nf(e.endAt)),e.vt=n}return e.vt}function wf(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Df(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!Zd(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Lf(t.startAt,e.startAt)&&Lf(t.endAt,e.endAt)}function Ef(t){return Md.wt(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Cf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(nd.c)(e,t),e.create=function(t,n,r){return t.ut()?"in"===n||"not-in"===n?this.St(t,n,r):new Of(t,n,r):"array-contains"===n?new xf(t,r):"in"===n?new kf(t,r):"not-in"===n?new Af(t,r):"array-contains-any"===n?new jf(t,r):new e(t,n,r)},e.St=function(t,e,n){return"in"===e?new Sf(t,n):new Tf(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Dt(tf(e,this.value)):null!==e&&Xd(this.value)===Xd(e)&&this.Dt(tf(e,this.value))},e.prototype.Dt=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return hd()}},e.prototype.Ct=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Of=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Md.ft(r.referenceValue),i}return Object(nd.c)(e,t),e.prototype.matches=function(t){var e=Md.H(t.key,this.key);return this.Dt(e)},e}(Cf),Sf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=If(0,n),r}return Object(nd.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(Cf),Tf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=If(0,n),r}return Object(nd.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(Cf);function If(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return Md.ft(t.referenceValue)})}var xf=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(nd.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return af(e)&&Jd(e.arrayValue,this.value)},e}(Cf),kf=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(nd.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Jd(this.value.arrayValue,e)},e}(Cf),Af=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(nd.c)(e,t),e.prototype.matches=function(t){if(Jd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!Jd(this.value.arrayValue,e)},e}(Cf),jf=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(nd.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!af(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Jd(e.value.arrayValue,t)})},e}(Cf),Pf=function(t,e){this.position=t,this.before=e};function Nf(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return nf(t)}).join(",")}var Rf=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Df(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Mf(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.ut()?Md.H(Md.ft(s.referenceValue),n.key):tf(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Lf(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Zd(t.position[n],e.position[n]))return!1;return!0}var Ff=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.xt=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.Nt=null,this.$t=null};function Vf(t,e,n,r,i,o,s,a){return new Ff(t,e,n,r,i,o,s,a)}function Uf(t){return new Ff(t)}function qf(t){return!Kd(t.limit)&&"F"===t.limitType}function Bf(t){return!Kd(t.limit)&&"L"===t.limitType}function Hf(t){return t.xt.length>0?t.xt[0].field:null}function zf(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.Ct())return r.field}return null}function Wf(t){return null!==t.collectionGroup}function Qf(t){var e=fd(t);if(null===e.Nt){e.Nt=[];var n=zf(e),r=Hf(e);if(null!==n&&null===r)n.ut()||e.Nt.push(new Rf(n)),e.Nt.push(new Rf(Dd.ht(),"asc"));else{for(var i=!1,o=0,s=e.xt;o<s.length;o++){var a=s[o];e.Nt.push(a),a.field.ut()&&(i=!0)}if(!i){var u=e.xt.length>0?e.xt[e.xt.length-1].dir:"asc";e.Nt.push(new Rf(Dd.ht(),u))}}}return e.Nt}function Gf(t){var e=fd(t);if(!e.$t)if("F"===e.limitType)e.$t=_f(e.path,e.collectionGroup,Qf(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Qf(e);r<i.length;r++){var o=i[r];n.push(new Rf(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new Pf(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Pf(e.startAt.position,!e.startAt.before):null;e.$t=_f(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.$t}function Kf(t,e,n){return new Ff(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function $f(t,e){return wf(Gf(t),Gf(e))&&t.limitType===e.limitType}function Yf(t){return bf(Gf(t))+"|lt:"+t.limitType}function Xf(t){return"Query(target="+function(t){var e=t.path.rt();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.rt()+" "+e.op+" "+nf(e.value);var e}).join(", ")+"]"),Kd(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.rt()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Nf(t.startAt)),t.endAt&&(e+=", endAt: "+Nf(t.endAt)),"Target("+e+")"}(Gf(t))+"; limitType="+t.limitType+")"}function Zf(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.dt(t.collectionGroup)&&t.path.nt(n):Md.wt(t.path)?t.path.isEqual(n):t.path.st(n)}(t,e)&&function(t,e){for(var n=0,r=t.xt;n<r.length;n++){var i=r[n];if(!i.field.ut()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Mf(t.startAt,Qf(t),e)||t.endAt&&Mf(t.endAt,Qf(t),e))}(t,e)}function Jf(t){return function(e,n){for(var r=!1,i=0,o=Qf(t);i<o.length;i++){var s=o[i],a=tp(s,e,n);if(0!==a)return a;r=r||s.field.ut()}return 0}}function tp(t,e,n){var r=t.field.ut()?Md.H(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?tf(r,i):hd()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return hd()}}var ep=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=jd.min()),void 0===o&&(o=jd.min()),void 0===s&&(s=_d.T),this.target=t,this.targetId=e,this.Ft=n,this.sequenceNumber=r,this.Ot=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.kt=function(e){return new t(this.target,this.targetId,this.Ft,e,this.Ot,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.Mt=function(e,n){return new t(this.target,this.targetId,this.Ft,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Lt=function(e){return new t(this.target,this.targetId,this.Ft,this.sequenceNumber,this.Ot,e,this.resumeToken)},t}();function np(t,e){if(t.Bt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$d(e)?"-0":e}}function rp(t){return{integerValue:""+t}}function ip(t,e){return Yd(e)?rp(e):np(t,e)}var op=function(){this.qt=void 0};function sp(t,e,n){return t instanceof cp?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof lp?hp(t,e):t instanceof dp?fp(t,e):function(t,e){var n=up(t,e),r=gp(n)+gp(t.Ut);return sf(n)&&sf(t.Ut)?rp(r):np(t.Qt,r)}(t,e)}function ap(t,e,n){return t instanceof lp?hp(t,e):t instanceof dp?fp(t,e):n}function up(t,e){return t instanceof pp?sf(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var cp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(nd.c)(e,t),e}(op),lp=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(nd.c)(e,t),e}(op);function hp(t,e){for(var n=yp(e),r=function(t){n.some(function(e){return Zd(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var dp=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(nd.c)(e,t),e}(op);function fp(t,e){for(var n=yp(e),r=function(t){n=n.filter(function(e){return!Zd(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var pp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qt=e,r.Ut=n,r}return Object(nd.c)(e,t),e}(op);function gp(t){return Hd(t.integerValue||t.doubleValue)}function yp(t){return af(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var mp=function(t,e){this.field=t,this.transform=e},vp=function(t,e){this.version=t,this.transformResults=e},_p=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Kt=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"Wt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function bp(t,e){return void 0!==t.updateTime?e instanceof gf&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof gf}var wp=function(){};function Ep(t,e,n){return t instanceof Ip?function(t,e,n){var r=t.value;if(n.transformResults){var i=Ap(t.fieldTransforms,e,n.transformResults);r=Pp(t.fieldTransforms,r,i)}return new gf(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof xp?function(t,e,n){if(!bp(t.jt,e))return new mf(t.key,n.version);var r=kp(t,e,n.transformResults?Ap(t.fieldTransforms,e,n.transformResults):[]);return new gf(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new yf(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function Cp(t,e,n){return t instanceof Ip?function(t,e,n){if(!bp(t.jt,e))return e;var r=t.value,i=jp(t.fieldTransforms,n,e);r=Pp(t.fieldTransforms,r,i);var o=Tp(e);return new gf(t.key,o,r,{Vt:!0})}(t,e,n):t instanceof xp?function(t,e,n){if(!bp(t.jt,e))return e;var r=Tp(e),i=kp(t,e,jp(t.fieldTransforms,n,e));return new gf(t.key,r,i,{Vt:!0})}(t,e,n):function(t,e){return bp(t.jt,e)?new yf(t.key,jd.min()):e}(t,e)}function Op(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof gf?e.field(o.field):void 0,a=up(o.transform,s||null);null!=a&&(n=null==n?(new df).set(o.field,a):n.set(o.field,a))}return n?n.Pt():null}(t.fieldTransforms,e)}function Sp(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.jt.isEqual(e.jt)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&md(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof lp&&e instanceof lp||t instanceof dp&&e instanceof dp?md(t.elements,e.elements,Zd):t instanceof pp&&e instanceof pp?Zd(t.Ut,e.Ut):t instanceof cp&&e instanceof cp}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.Gt.isEqual(e.Gt))}function Tp(t){return t instanceof gf?t.version:jd.min()}var Ip=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.jt=r,o.fieldTransforms=i,o.type=0,o}return Object(nd.c)(e,t),e}(wp),xp=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.Gt=r,s.jt=i,s.fieldTransforms=o,s.type=1,s}return Object(nd.c)(e,t),e}(wp);function kp(t,e,n){var r;return r=function(t,e){var n=new df(e);return t.Gt.fields.forEach(function(e){if(!e.et()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}}),n.Pt()}(t,r=e instanceof gf?e.data():hf.empty()),Pp(t.fieldTransforms,r,n)}function Ap(t,e,n){var r=[];dd(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof gf&&(a=e.field(o.field)),r.push(ap(s,a,n[i]))}return r}function jp(t,e,n){for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=null;n instanceof gf&&(u=n.field(s.field)),r.push(sp(a,u,e))}return r}function Pp(t,e,n){for(var r=new df(e),i=0;i<t.length;i++)r.set(t[i].field,n[i]);return r.Pt()}var Np,Rp,Dp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.jt=n,r.type=2,r.fieldTransforms=[],r}return Object(nd.c)(e,t),e}(wp),Mp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.jt=n,r.type=3,r.fieldTransforms=[],r}return Object(nd.c)(e,t),e}(wp),Lp=function(t){this.count=t};function Fp(t){switch(t){case bd.OK:return hd();case bd.CANCELLED:case bd.UNKNOWN:case bd.DEADLINE_EXCEEDED:case bd.RESOURCE_EXHAUSTED:case bd.INTERNAL:case bd.UNAVAILABLE:case bd.UNAUTHENTICATED:return!1;case bd.INVALID_ARGUMENT:case bd.NOT_FOUND:case bd.ALREADY_EXISTS:case bd.PERMISSION_DENIED:case bd.FAILED_PRECONDITION:case bd.ABORTED:case bd.OUT_OF_RANGE:case bd.UNIMPLEMENTED:case bd.DATA_LOSS:return!0;default:return hd()}}function Vp(t){if(void 0===t)return ud("GRPC error has no .code"),bd.UNKNOWN;switch(t){case Np.OK:return bd.OK;case Np.CANCELLED:return bd.CANCELLED;case Np.UNKNOWN:return bd.UNKNOWN;case Np.DEADLINE_EXCEEDED:return bd.DEADLINE_EXCEEDED;case Np.RESOURCE_EXHAUSTED:return bd.RESOURCE_EXHAUSTED;case Np.INTERNAL:return bd.INTERNAL;case Np.UNAVAILABLE:return bd.UNAVAILABLE;case Np.UNAUTHENTICATED:return bd.UNAUTHENTICATED;case Np.INVALID_ARGUMENT:return bd.INVALID_ARGUMENT;case Np.NOT_FOUND:return bd.NOT_FOUND;case Np.ALREADY_EXISTS:return bd.ALREADY_EXISTS;case Np.PERMISSION_DENIED:return bd.PERMISSION_DENIED;case Np.FAILED_PRECONDITION:return bd.FAILED_PRECONDITION;case Np.ABORTED:return bd.ABORTED;case Np.OUT_OF_RANGE:return bd.OUT_OF_RANGE;case Np.UNIMPLEMENTED:return bd.UNIMPLEMENTED;case Np.DATA_LOSS:return bd.DATA_LOSS;default:return hd()}}(Rp=Np||(Np={}))[Rp.OK=0]="OK",Rp[Rp.CANCELLED=1]="CANCELLED",Rp[Rp.UNKNOWN=2]="UNKNOWN",Rp[Rp.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Rp[Rp.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Rp[Rp.NOT_FOUND=5]="NOT_FOUND",Rp[Rp.ALREADY_EXISTS=6]="ALREADY_EXISTS",Rp[Rp.PERMISSION_DENIED=7]="PERMISSION_DENIED",Rp[Rp.UNAUTHENTICATED=16]="UNAUTHENTICATED",Rp[Rp.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Rp[Rp.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Rp[Rp.ABORTED=10]="ABORTED",Rp[Rp.OUT_OF_RANGE=11]="OUT_OF_RANGE",Rp[Rp.UNIMPLEMENTED=12]="UNIMPLEMENTED",Rp[Rp.INTERNAL=13]="INTERNAL",Rp[Rp.UNAVAILABLE=14]="UNAVAILABLE",Rp[Rp.DATA_LOSS=15]="DATA_LOSS";var Up=function(){function t(t,e){this.H=t,this.root=e||Bp.EMPTY}return t.prototype.zt=function(e,n){return new t(this.H,this.root.zt(e,n,this.H).copy(null,null,Bp.Ht,null,null))},t.prototype.remove=function(e){return new t(this.H,this.root.remove(e,this.H).copy(null,null,Bp.Ht,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.et();){var n=this.H(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.et();){var r=this.H(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.et=function(){return this.root.et()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.Jt=function(){return this.root.Jt()},t.prototype.Yt=function(){return this.root.Yt()},t.prototype.Xt=function(t){return this.root.Xt(t)},t.prototype.forEach=function(t){this.Xt(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.Xt(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.Zt=function(t){return this.root.Zt(t)},t.prototype.te=function(){return new qp(this.root,null,this.H,!1)},t.prototype.ee=function(t){return new qp(this.root,t,this.H,!1)},t.prototype.ne=function(){return new qp(this.root,null,this.H,!0)},t.prototype.se=function(t){return new qp(this.root,t,this.H,!0)},t}(),qp=function(){function t(t,e,n,r){this.ie=r,this.re=[];for(var i=1;!t.et();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.ie?t.left:t.right;else{if(0===i){this.re.push(t);break}this.re.push(t),t=this.ie?t.right:t.left}}return t.prototype.oe=function(){var t=this.re.pop(),e={key:t.key,value:t.value};if(this.ie)for(t=t.left;!t.et();)this.re.push(t),t=t.right;else for(t=t.right;!t.et();)this.re.push(t),t=t.left;return e},t.prototype.ce=function(){return this.re.length>0},t.prototype.ae=function(){if(0===this.re.length)return null;var t=this.re[this.re.length-1];return{key:t.key,value:t.value}},t}(),Bp=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.et=function(){return!1},t.prototype.Xt=function(t){return this.left.Xt(t)||t(this.key,this.value)||this.right.Xt(t)},t.prototype.Zt=function(t){return this.right.Zt(t)||t(this.key,this.value)||this.left.Zt(t)},t.prototype.min=function(){return this.left.et()?this:this.left.min()},t.prototype.Jt=function(){return this.min().key},t.prototype.Yt=function(){return this.right.et()?this.key:this.right.Yt()},t.prototype.zt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.zt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.zt(t,e,n))).ue()},t.prototype.he=function(){if(this.left.et())return t.EMPTY;var e=this;return e.left.le()||e.left.left.le()||(e=e._e()),(e=e.copy(null,null,null,e.left.he(),null)).ue()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.et()||i.left.le()||i.left.left.le()||(i=i._e()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.le()&&(i=i.fe()),i.right.et()||i.right.le()||i.right.left.le()||(i=i.de()),0===n(e,i.key)){if(i.right.et())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.he())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.ue()},t.prototype.le=function(){return this.color},t.prototype.ue=function(){var t=this;return t.right.le()&&!t.left.le()&&(t=t.we()),t.left.le()&&t.left.left.le()&&(t=t.fe()),t.left.le()&&t.right.le()&&(t=t.Ee()),t},t.prototype._e=function(){var t=this.Ee();return t.right.left.le()&&(t=(t=(t=t.copy(null,null,null,null,t.right.fe())).we()).Ee()),t},t.prototype.de=function(){var t=this.Ee();return t.left.left.le()&&(t=(t=t.fe()).Ee()),t},t.prototype.we=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.fe=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Ee=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Te=function(){var t=this.Ie();return Math.pow(2,t)<=this.size+1},t.prototype.Ie=function(){if(this.le()&&this.left.le())throw hd();if(this.right.le())throw hd();var t=this.left.Ie();if(t!==this.right.Ie())throw hd();return t+(this.le()?0:1)},t}();Bp.EMPTY=null,Bp.RED=!0,Bp.Ht=!1,Bp.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw hd()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw hd()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw hd()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw hd()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw hd()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.zt=function(t,e,n){return new Bp(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.et=function(){return!0},t.prototype.Xt=function(t){return!1},t.prototype.Zt=function(t){return!1},t.prototype.Jt=function(){return null},t.prototype.Yt=function(){return null},t.prototype.le=function(){return!1},t.prototype.Te=function(){return!0},t.prototype.Ie=function(){return 0},t}());var Hp=function(){function t(t){this.H=t,this.data=new Up(this.H)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Jt()},t.prototype.last=function(){return this.data.Yt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Xt(function(e,n){return t(e),!1})},t.prototype.me=function(t,e){for(var n=this.data.ee(t[0]);n.ce();){var r=n.oe();if(this.H(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Ae=function(t,e){var n;for(n=void 0!==e?this.data.ee(e):this.data.te();n.ce();)if(!t(n.oe().key))return},t.prototype.Re=function(t){var e=this.data.ee(t);return e.ce()?e.oe().key:null},t.prototype.te=function(){return new zp(this.data.te())},t.prototype.ee=function(t){return new zp(this.data.ee(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).zt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.et=function(){return this.data.et()},t.prototype.Pe=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.te(),r=e.data.te();n.ce();){var i=n.oe().key,o=r.oe().key;if(0!==this.H(i,o))return!1}return!0},t.prototype.it=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.H);return n.data=e,n},t}(),zp=function(){function t(t){this.ye=t}return t.prototype.oe=function(){return this.ye.oe().key},t.prototype.ce=function(){return this.ye.ce()},t}(),Wp=new Up(Md.H);function Qp(){return Wp}function Gp(){return Qp()}var Kp=new Up(Md.H);function $p(){return Kp}var Yp=new Up(Md.H);function Xp(){return Yp}var Zp=new Hp(Md.H);function Jp(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Zp,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var tg=new Hp(yd);function eg(){return tg}var ng=function(){function t(t){this.H=t?function(e,n){return t(e,n)||Md.H(e.key,n.key)}:function(t,e){return Md.H(t.key,e.key)},this.ge=$p(),this.Ve=new Up(this.H)}return t.pe=function(e){return new t(e.H)},t.prototype.has=function(t){return null!=this.ge.get(t)},t.prototype.get=function(t){return this.ge.get(t)},t.prototype.first=function(){return this.Ve.Jt()},t.prototype.last=function(){return this.Ve.Yt()},t.prototype.et=function(){return this.Ve.et()},t.prototype.indexOf=function(t){var e=this.ge.get(t);return e?this.Ve.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Ve.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Ve.Xt(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.ge.zt(t.key,t),e.Ve.zt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.ge.remove(t),this.Ve.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Ve.te(),r=e.Ve.te();n.ce();){var i=n.oe().key,o=r.oe().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.H=this.H,r.ge=e,r.Ve=n,r},t}(),rg=function(){function t(){this.be=new Up(Md.H)}return t.prototype.track=function(t){var e=t.doc.key,n=this.be.get(e);n?0!==t.type&&3===n.type?this.be=this.be.zt(e,t):3===t.type&&1!==n.type?this.be=this.be.zt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.be=this.be.zt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.be=this.be.remove(e):1===t.type&&2===n.type?this.be=this.be.zt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):hd():this.be=this.be.zt(e,t)},t.prototype.ve=function(){var t=[];return this.be.Xt(function(e,n){t.push(n)}),t},t}(),ig=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Se=n,this.docChanges=r,this.De=i,this.fromCache=o,this.Ce=s,this.xe=a}return t.Ne=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,ng.pe(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.De.et()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Ce===t.Ce&&this.De.isEqual(t.De)&&$f(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Se.isEqual(t.Se)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),og=function(){function t(t,e,n,r,i){this.Ot=t,this.$e=e,this.Fe=n,this.Oe=r,this.ke=i}return t.Me=function(e,n){var r=new Map;return r.set(e,sg.Le(e,n)),new t(jd.min(),r,eg(),Qp(),Jp())},t}(),sg=function(){function t(t,e,n,r,i){this.resumeToken=t,this.Be=e,this.qe=n,this.Ue=r,this.Qe=i}return t.Le=function(e,n){return new t(_d.T,n,Jp(),Jp(),Jp())},t}(),ag=function(t,e,n,r){this.Ke=t,this.removedTargetIds=e,this.key=n,this.We=r},ug=function(t,e){this.targetId=t,this.je=e},cg=function(t,e,n,r){void 0===n&&(n=_d.T),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},lg=function(){function t(){this.Ge=0,this.ze=fg(),this.He=_d.T,this.Je=!1,this.Ye=!0}return Object.defineProperty(t.prototype,"Be",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.He},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Xe",{get:function(){return 0!==this.Ge},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ze",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),t.prototype.tn=function(t){t.l()>0&&(this.Ye=!0,this.He=t)},t.prototype.en=function(){var t=Jp(),e=Jp(),n=Jp();return this.ze.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:hd()}}),new sg(this.He,this.Je,t,e,n)},t.prototype.nn=function(){this.Ye=!1,this.ze=fg()},t.prototype.sn=function(t,e){this.Ye=!0,this.ze=this.ze.zt(t,e)},t.prototype.rn=function(t){this.Ye=!0,this.ze=this.ze.remove(t)},t.prototype.on=function(){this.Ge+=1},t.prototype.cn=function(){this.Ge-=1},t.prototype.an=function(){this.Ye=!0,this.Je=!0},t}(),hg=function(){function t(t){this.un=t,this.hn=new Map,this.ln=Qp(),this._n=dg(),this.fn=new Hp(yd)}return t.prototype.dn=function(t){for(var e=0,n=t.Ke;e<n.length;e++){var r=n[e];t.We instanceof gf?this.wn(r,t.We):t.We instanceof yf&&this.En(r,t.key,t.We)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.En(r=o[i],t.key,t.We)},t.prototype.Tn=function(t){var e=this;this.In(t,function(n){var r=e.mn(n);switch(t.state){case 0:e.An(n)&&r.tn(t.resumeToken);break;case 1:r.cn(),r.Xe||r.nn(),r.tn(t.resumeToken);break;case 2:r.cn(),r.Xe||e.removeTarget(n);break;case 3:e.An(n)&&(r.an(),r.tn(t.resumeToken));break;case 4:e.An(n)&&(e.Rn(n),r.tn(t.resumeToken));break;default:hd()}})},t.prototype.In=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.hn.forEach(function(t,r){n.An(r)&&e(r)})},t.prototype.Pn=function(t){var e=t.targetId,n=t.je.count,r=this.yn(e);if(r){var i=r.target;if(Ef(i))if(0===n){var o=new Md(i.path);this.En(e,o,new yf(o,jd.min()))}else dd(1===n);else this.gn(e)!==n&&(this.Rn(e),this.fn=this.fn.add(e))}},t.prototype.Vn=function(t){var e=this,n=new Map;this.hn.forEach(function(r,i){var o=e.yn(i);if(o){if(r.Be&&Ef(o.target)){var s=new Md(o.target.path);null!==e.ln.get(s)||e.pn(i,s)||e.En(i,s,new yf(s,t))}r.Ze&&(n.set(i,r.en()),r.nn())}});var r=Jp();this._n.forEach(function(t,n){var i=!0;n.Ae(function(t){var n=e.yn(t);return!n||2===n.Ft||(i=!1,!1)}),i&&(r=r.add(t))});var i=new og(t,n,this.fn,this.ln,r);return this.ln=Qp(),this._n=dg(),this.fn=new Hp(yd),i},t.prototype.wn=function(t,e){if(this.An(t)){var n=this.pn(t,e.key)?2:0;this.mn(t).sn(e.key,n),this.ln=this.ln.zt(e.key,e),this._n=this._n.zt(e.key,this.bn(e.key).add(t))}},t.prototype.En=function(t,e,n){if(this.An(t)){var r=this.mn(t);this.pn(t,e)?r.sn(e,1):r.rn(e),this._n=this._n.zt(e,this.bn(e).delete(t)),n&&(this.ln=this.ln.zt(e,n))}},t.prototype.removeTarget=function(t){this.hn.delete(t)},t.prototype.gn=function(t){var e=this.mn(t).en();return this.un.vn(t).size+e.qe.size-e.Qe.size},t.prototype.on=function(t){this.mn(t).on()},t.prototype.mn=function(t){var e=this.hn.get(t);return e||(e=new lg,this.hn.set(t,e)),e},t.prototype.bn=function(t){var e=this._n.get(t);return e||(e=new Hp(yd),this._n=this._n.zt(t,e)),e},t.prototype.An=function(t){var e=null!==this.yn(t);return e||ad("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.yn=function(t){var e=this.hn.get(t);return e&&e.Xe?null:this.un.Sn(t)},t.prototype.Rn=function(t){var e=this;this.hn.set(t,new lg),this.un.vn(t).forEach(function(n){e.En(t,n,null)})},t.prototype.pn=function(t,e){return this.un.vn(t).has(e)},t}();function dg(){return new Up(Md.H)}function fg(){return new Up(Md.H)}var pg={asc:"ASCENDING",desc:"DESCENDING"},gg={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yg=function(t,e){this.t=t,this.Bt=e};function mg(t,e){return t.Bt?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function vg(t,e){return t.Bt?e.toBase64():e.toUint8Array()}function _g(t,e){return mg(t,e.j())}function bg(t){return dd(!!t),jd.K(function(t){var e=Bd(t);return new Ad(e.seconds,e.nanos)}(t))}function wg(t,e){return function(t){return new Nd(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).rt()}function Eg(t){var e=Nd.ot(t);return dd(Qg(e)),e}function Cg(t,e){return wg(t.t,e.path)}function Og(t,e){var n=Eg(e);if(n.get(1)!==t.t.projectId)throw new wd(bd.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.t.projectId);if(n.get(3)!==t.t.database)throw new wd(bd.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.t.database);return new Md(xg(n))}function Sg(t,e){return wg(t.t,e)}function Tg(t){var e=Eg(t);return 4===e.length?Nd.ct():xg(e)}function Ig(t){return new Nd(["projects",t.t.projectId,"databases",t.t.database]).rt()}function xg(t){return dd(t.length>4&&"documents"===t.get(4)),t.Y(5)}function kg(t,e,n){return{name:Cg(t,e),fields:n.proto.mapValue.fields}}function Ag(t,e,n){var r=Og(t,e.name),i=bg(e.updateTime),o=new hf({mapValue:{fields:e.fields}});return new gf(r,i,o,{hasCommittedMutations:!!n})}function jg(t,e){var n;if(e instanceof Ip)n={update:kg(t,e.key,e.value)};else if(e instanceof Dp)n={delete:Cg(t,e.key)};else if(e instanceof xp)n={update:kg(t,e.key,e.data),updateMask:Wg(e.Gt)};else{if(!(e instanceof Mp))return hd();n={verify:Cg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof cp)return{fieldPath:e.field.rt(),setToServerValue:"REQUEST_TIME"};if(n instanceof lp)return{fieldPath:e.field.rt(),appendMissingElements:{values:n.elements}};if(n instanceof dp)return{fieldPath:e.field.rt(),removeAllFromArray:{values:n.elements}};if(n instanceof pp)return{fieldPath:e.field.rt(),increment:n.Ut};throw hd()}(0,t)})),e.jt.Wt||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:_g(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:hd()}(t,e.jt)),n}function Pg(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?_p.updateTime(bg(t.updateTime)):void 0!==t.exists?_p.exists(t.exists):_p.Kt()}(e.currentDocument):_p.Kt(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(dd("REQUEST_TIME"===e.setToServerValue),n=new cp):"appendMissingElements"in e?n=new lp(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new dp(e.removeAllFromArray.values||[]):"increment"in e?n=new pp(t,e.increment):hd();var r=Dd.lt(e.fieldPath);return new mp(r,n)}(t,e)}):[];if(e.update){var i=Og(t,e.update.name),o=new hf({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new Ud((t.fieldPaths||[]).map(function(t){return Dd.lt(t)}))}(e.updateMask);return new xp(i,o,s,n,r)}return new Ip(i,o,n,r)}if(e.delete){var a=Og(t,e.delete);return new Dp(a,n)}if(e.verify){var u=Og(t,e.verify);return new Mp(u,n)}return hd()}function Ng(t,e){return{documents:[Sg(t,e.path)]}}function Rg(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Sg(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Sg(t,r.X()),n.structuredQuery.from=[{collectionId:r.tt()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(cf(t.value))return{unaryFilter:{field:qg(t.field),op:"IS_NAN"}};if(uf(t.value))return{unaryFilter:{field:qg(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(cf(t.value))return{unaryFilter:{field:qg(t.field),op:"IS_NOT_NAN"}};if(uf(t.value))return{unaryFilter:{field:qg(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qg(t.field),op:Ug(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:qg(t.field),direction:Vg(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.Bt||Kd(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Lg(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Lg(e.endAt)),n}function Dg(t){var e=Tg(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){dd(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Mg(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new Rf(Bg(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return Kd(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Fg(n.startAt));var l=null;return n.endAt&&(l=Fg(n.endAt)),Vf(e,i,a,s,u,"F",c,l)}function Mg(t){return t?void 0!==t.unaryFilter?[zg(t)]:void 0!==t.fieldFilter?[Hg(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return Mg(t)}).reduce(function(t,e){return t.concat(e)}):hd():[]}function Lg(t){return{before:t.before,values:t.position}}function Fg(t){return new Pf(t.values||[],!!t.before)}function Vg(t){return pg[t]}function Ug(t){return gg[t]}function qg(t){return{fieldPath:t.rt()}}function Bg(t){return Dd.lt(t.fieldPath)}function Hg(t){return Cf.create(Bg(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return hd()}}(t.fieldFilter.op),t.fieldFilter.value)}function zg(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Bg(t.unaryFilter.field);return Cf.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Bg(t.unaryFilter.field);return Cf.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Bg(t.unaryFilter.field);return Cf.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Bg(t.unaryFilter.field);return Cf.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return hd()}}function Wg(t){var e=[];return t.fields.forEach(function(t){return e.push(t.rt())}),{fieldPaths:e}}function Qg(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var Gg=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},Kg=function(){function t(t){var e=this;this.Dn=null,this.Cn=null,this.result=void 0,this.error=void 0,this.xn=!1,this.Nn=!1,t(function(t){e.xn=!0,e.result=t,e.Dn&&e.Dn(t)},function(t){e.xn=!0,e.error=t,e.Cn&&e.Cn(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Nn&&hd(),this.Nn=!0,this.xn?this.error?this.$n(n,this.error):this.Fn(e,this.result):new t(function(t,i){r.Dn=function(n){r.Fn(e,n).next(t,i)},r.Cn=function(e){r.$n(n,e).next(t,i)}})},t.prototype.On=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.kn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Fn=function(e,n){return e?this.kn(function(){return e(n)}):t.resolve(n)},t.prototype.$n=function(e,n){return e?this.kn(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.Mn=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.Ln=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.Mn(r)},t}(),$g=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.Bn=new Gg,this.transaction.oncomplete=function(){n.Bn.resolve()},this.transaction.onabort=function(){e.error?n.Bn.reject(new Zg(t,e.error)):n.Bn.resolve()},this.transaction.onerror=function(e){var r=ry(e.target.error);n.Bn.reject(new Zg(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Zg(n,e)}},Object.defineProperty(t.prototype,"qn",{get:function(){return this.Bn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Bn.reject(t),this.aborted||(ad("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new ty(e)},t}(),Yg=function(){function t(e,n,r){this.name=e,this.version=n,this.Un=r,12.2===t.Qn(Object(tu.m)())&&ud("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return ad("SimpleDb","Removing database:",t),ey(window.indexedDB.deleteDatabase(t)).On()},t.Kn=function(){if("undefined"==typeof indexedDB)return!1;if(t.Wn())return!0;var e=Object(tu.m)(),n=t.Qn(e),r=0<n&&n<10,i=t.jn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Wn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Gn)},t.zn=function(t,e){return t.store(e)},t.Qn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.jn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Hn=function(t){return Object(nd.b)(this,void 0,void 0,function(){var e,n=this;return Object(nd.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(ad("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Zg(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new wd(bd.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Zg(t,n))},i.onupgradeneeded=function(t){ad("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.Un.Jn(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){ad("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Yn&&(this.db.onversionchange=function(t){return n.Yn(t)}),this.db)]}})})},t.prototype.Xn=function(t){this.Yn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(nd.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(nd.d)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(nd.d)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.Hn(t)];case 2:return a.db=h.sent(),e=$g.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),Kg.reject(t)}).On(),u={},s.catch(function(){}),[4,e.qn];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return ad("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Xg=function(){function t(t){this.Zn=t,this.ts=!1,this.es=null}return Object.defineProperty(t.prototype,"xn",{get:function(){return this.ts},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ns",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Zn=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.ts=!0},t.prototype.ss=function(t){this.es=t},t.prototype.delete=function(){return ey(this.Zn.delete())},t}(),Zg=function(t){function e(e,n){var r=this;return(r=t.call(this,bd.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(nd.c)(e,t),e}(wd);function Jg(t){return"IndexedDbTransactionError"===t.name}var ty=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(ad("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(ad("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),ey(n)},t.prototype.add=function(t){return ad("SimpleDb","ADD",this.store.name,t,t),ey(this.store.add(t))},t.prototype.get=function(t){var e=this;return ey(this.store.get(t)).next(function(n){return void 0===n&&(n=null),ad("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return ad("SimpleDb","DELETE",this.store.name,t),ey(this.store.delete(t))},t.prototype.count=function(){return ad("SimpleDb","COUNT",this.store.name),ey(this.store.count())},t.prototype.rs=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.os(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.cs=function(t,e){ad("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.us=!1;var r=this.cursor(n);return this.os(r,function(t,e,n){return n.delete()})},t.prototype.hs=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.os(r,e)},t.prototype.ls=function(t){var e=this.cursor({});return new Kg(function(n,r){e.onerror=function(t){var e=ry(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.os=function(t,e){var n=[];return new Kg(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Xg(i),s=e(i.primaryKey,i.value,o);if(s instanceof Kg){var a=s.catch(function(t){return o.done(),Kg.reject(t)});n.push(a)}o.xn?r():null===o.ns?i.continue():i.continue(o.ns)}else r()}}).next(function(){return Kg.Mn(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.us?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function ey(t){return new Kg(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=ry(t.target.error);n(e)}})}var ny=!1;function ry(t){var e=Yg.Qn(Object(tu.m)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new wd("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return ny||(ny=!0,setTimeout(function(){throw r},0)),r}}return t}var iy=function(){function t(t,e,n,r,i){this._s=t,this.fs=e,this.ds=n,this.op=r,this.ws=i,this.Es=new Gg,this.then=this.Es.promise.then.bind(this.Es.promise),this.Es.promise.catch(function(t){})}return t.Ts=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.Is=setTimeout(function(){return e.As()},t)},t.prototype.Rs=function(){return this.As()},t.prototype.cancel=function(t){null!==this.Is&&(this.clearTimeout(),this.Es.reject(new wd(bd.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.As=function(){var t=this;this._s.Ps(function(){return null!==t.Is?(t.clearTimeout(),t.op().then(function(e){return t.Es.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.Is&&(this.ws(this),clearTimeout(this.Is),this.Is=null)},t}();function oy(t,e){if(ud("AsyncQueue",e+": "+t),Jg(t))return new wd(bd.UNAVAILABLE,e+": "+t);throw t}var sy="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ay=function(){function t(){this.ys=[]}return t.prototype.gs=function(t){this.ys.push(t)},t.prototype.Vs=function(){this.ys.forEach(function(t){return t()})},t}();function uy(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=ly(e)),e=cy(t.get(n),e);return ly(e)}function cy(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function ly(t){return t+"\x01\x01"}function hy(t){var e=t.length;if(dd(e>=2),2===e)return dd("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Nd.ct();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&hd(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:hd()}o=s+2}return new Nd(r)}var dy=function(t,e){this.seconds=t,this.nanoseconds=e},fy=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};fy.store="owner",fy.key="owner";var py=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};py.store="mutationQueues",py.keyPath="userId";var gy=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};gy.store="mutations",gy.keyPath="batchId",gy.userMutationsIndex="userMutationsIndex",gy.userMutationsKeyPath=["userId","batchId"];var yy=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,uy(e)]},t.key=function(t,e,n){return[t,uy(e),n]},t}();yy.store="documentMutations",yy.PLACEHOLDER=new yy;var my=function(t,e){this.path=t,this.readTime=e},vy=function(t,e){this.path=t,this.version=e},_y=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};_y.store="remoteDocuments",_y.readTimeIndex="readTimeIndex",_y.readTimeIndexPath="readTime",_y.collectionReadTimeIndex="collectionReadTimeIndex",_y.collectionReadTimeIndexPath=["parentPath","readTime"];var by=function(t){this.byteSize=t};by.store="remoteDocumentGlobal",by.key="remoteDocumentGlobalKey";var wy=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};wy.store="targets",wy.keyPath="targetId",wy.queryTargetsIndexName="queryTargetsIndex",wy.queryTargetsKeyPath=["canonicalId","targetId"];var Ey=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Ey.store="targetDocuments",Ey.keyPath=["targetId","path"],Ey.documentTargetsIndex="documentTargetsIndex",Ey.documentTargetsKeyPath=["path","targetId"];var Cy=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Cy.key="targetGlobalKey",Cy.store="targetGlobal";var Oy=function(t,e){this.collectionId=t,this.parent=e};Oy.store="collectionParents",Oy.keyPath=["collectionId","parent"];var Sy=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Sy.store="clientMetadata",Sy.keyPath="clientId";var Ty=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Ty.store="bundles",Ty.keyPath="bundleId";var Iy=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Iy.store="namedQueries",Iy.keyPath="name";var xy=Object(nd.g)(Object(nd.g)(Object(nd.g)(Object(nd.g)([py.store,gy.store,yy.store,_y.store,wy.store,fy.store,Cy.store,Ey.store],[Sy.store]),[by.store]),[Oy.store]),[Ty.store,Iy.store]),ky=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ps=e,r.bs=n,r}return Object(nd.c)(e,t),e}(ay);function Ay(t,e){var n=fd(t);return Yg.zn(n.ps,e)}var jy=function(){function t(t,e,n,r){this.batchId=t,this.vs=e,this.baseMutations=n,this.mutations=r}return t.prototype.Ss=function(t,e,n){for(var r=n.Ds,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Ep(o,e,r[i]))}return e},t.prototype.Cs=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=Cp(s,e,this.vs));for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(t)&&(e=Cp(s,e,this.vs))}return e},t.prototype.xs=function(t){var e=this,n=t;return this.mutations.forEach(function(r){var i=e.Cs(r.key,t.get(r.key));i&&(n=n.zt(r.key,i))}),n},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Jp())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&md(this.mutations,t.mutations,function(t,e){return Sp(t,e)})&&md(this.baseMutations,t.baseMutations,function(t,e){return Sp(t,e)})},t}(),Py=function(){function t(t,e,n,r){this.batch=t,this.Ns=e,this.Ds=n,this.$s=r}return t.from=function(e,n,r){dd(e.mutations.length===r.length);for(var i=Xp(),o=e.mutations,s=0;s<o.length;s++)i=i.zt(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Ny=function(t){this.Fs=t};function Ry(t,e){if(e.document)return Ag(t.Fs,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Md.Et(e.noDocument.path),r=Vy(e.noDocument.readTime);return new yf(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=Md.Et(e.unknownDocument.path);return r=Vy(e.unknownDocument.version),new mf(i,r)}return hd()}function Dy(t,e,n){var r=My(n),i=e.key.path.X().it();if(e instanceof gf){var o=function(t,e){return{name:Cg(t,e.key),fields:e.bt().mapValue.fields,updateTime:mg(t,e.version.j())}}(t.Fs,e),s=e.hasCommittedMutations;return new _y(null,null,o,s,r,i)}if(e instanceof yf){var a=e.key.path.it(),u=Fy(e.version);return s=e.hasCommittedMutations,new _y(null,new my(a,u),null,s,r,i)}if(e instanceof mf){var c=e.key.path.it(),l=Fy(e.version);return new _y(new vy(c,l),null,null,!0,r,i)}return hd()}function My(t){var e=t.j();return[e.seconds,e.nanoseconds]}function Ly(t){var e=new Ad(t[0],t[1]);return jd.K(e)}function Fy(t){var e=t.j();return new dy(e.seconds,e.nanoseconds)}function Vy(t){var e=new Ad(t.seconds,t.nanoseconds);return jd.K(e)}function Uy(t,e){for(var n=(e.baseMutations||[]).map(function(e){return Pg(t.Fs,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return Pg(t.Fs,e)}),o=Ad.fromMillis(e.localWriteTimeMs);return new jy(e.batchId,o,n,i)}function qy(t){var e,n,r=Vy(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Vy(t.lastLimboFreeSnapshotVersion):jd.min();return void 0!==t.query.documents?(dd(1===(n=t.query).documents.length),e=Gf(Uf(Tg(n.documents[0])))):e=function(t){return Gf(Dg(t))}(t.query),new ep(e,t.targetId,0,t.lastListenSequenceNumber,r,i,_d.fromBase64String(t.resumeToken))}function By(t,e){var n,r=Fy(e.Ot),i=Fy(e.lastLimboFreeSnapshotVersion);n=Ef(e.target)?Ng(t.Fs,e.target):Rg(t.Fs,e.target);var o=e.resumeToken.toBase64();return new wy(e.targetId,bf(e.target),r,o,e.sequenceNumber,i,n)}function Hy(t){var e=Dg({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Kf(e,e.limit,"L"):e}var zy=function(){function t(){}return t.prototype.Os=function(t,e){return Wy(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:Vy(e.createTime),version:e.version};var e})},t.prototype.ks=function(t,e){return Wy(t).put({bundleId:(n=e).id,createTime:Fy(bg(n.createTime)),version:n.version});var n},t.prototype.Ms=function(t,e){return Qy(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:Hy(e.bundledQuery),readTime:Vy(e.readTime)};var e})},t.prototype.Ls=function(t,e){return Qy(t).put(function(t){return{name:t.name,readTime:Fy(bg(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Wy(t){return Ay(t,Ty.store)}function Qy(t){return Ay(t,Iy.store)}var Gy=function(){function t(){this.Bs=new Ky}return t.prototype.qs=function(t,e){return this.Bs.add(e),Kg.resolve()},t.prototype.Us=function(t,e){return Kg.resolve(this.Bs.getEntries(e))},t}(),Ky=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.tt(),n=t.X(),r=this.index[e]||new Hp(Nd.H),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.tt(),n=t.X(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Hp(Nd.H)).it()},t}(),$y=function(){function t(){this.Qs=new Ky}return t.prototype.qs=function(t,e){var n=this;if(!this.Qs.has(e)){var r=e.tt(),i=e.X();t.gs(function(){n.Qs.add(e)});var o={collectionId:r,parent:uy(i)};return Yy(t).put(o)}return Kg.resolve()},t.prototype.Us=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[vd(e),""],!1,!0);return Yy(t).rs(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(hy(o.parent))}return n})},t}();function Yy(t){return Ay(t,Oy.store)}var Xy={Ks:!1,Ws:0,js:0,Gs:0},Zy=function(){function t(t,e,n){this.zs=t,this.Hs=e,this.Js=n}return t.Ys=function(e){return new t(e,t.Xs,t.Zs)},t}();function Jy(t){return Object(nd.b)(this,void 0,void 0,function(){return Object(nd.d)(this,function(e){if(t.code!==bd.FAILED_PRECONDITION||t.message!==sy)throw t;return ad("LocalStore","Unexpectedly lost primary lease"),[2]})})}Zy.Xs=10,Zy.Zs=1e3,Zy.ti=new Zy(41943040,Zy.Xs,Zy.Zs),Zy.ei=new Zy(-1,0,0);var tm=function(){function t(t,e){this.ni=t,this.si=e,this.ii={}}return t.prototype.get=function(t){var e=this.ni(t),n=this.ii[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.si(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.ni(t),r=this.ii[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.si(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.ii[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.ni(t),n=this.ii[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.si(n[r][0],t))return 1===n.length?delete this.ii[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Fd(this.ii,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.et=function(){return Vd(this.ii)},t}(),em=function(){function t(){this.ri=new tm(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.oi=!1}return t.prototype.ci=function(t){var e=this.ri.get(t);return e?e.readTime:jd.min()},t.prototype.ai=function(t,e){this.ui(),this.ri.set(t.key,{hi:t,readTime:e})},t.prototype.li=function(t,e){void 0===e&&(e=null),this.ui(),this.ri.set(t,{hi:null,readTime:e})},t.prototype._i=function(t,e){this.ui();var n=this.ri.get(e);return void 0!==n?Kg.resolve(n.hi):this.fi(t,e)},t.prototype.getEntries=function(t,e){return this.di(t,e)},t.prototype.apply=function(t){return this.ui(),this.oi=!0,this.wi(t)},t.prototype.ui=function(){},t}();function nm(t,e,n){var r=t.store(gy.store),i=t.store(yy.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.hs({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){dd(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],f=yy.key(e,d.key.path,n.batchId);o.push(i.delete(f)),c.push(d.key)}return Kg.Mn(o).next(function(){return c})}function rm(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw hd();e=t.noDocument}return JSON.stringify(e).length}var im=function(){function t(t,e,n,r){this.userId=t,this.Qt=e,this.Ei=n,this.Ti=r,this.Ii={}}return t.mi=function(e,n,r,i){return dd(""!==e.uid),new t(e.m()?e.uid:"",n,r,i)},t.prototype.Ai=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return sm(t).hs({index:gy.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.Ri=function(t,e,n,r){var i=this,o=am(t),s=sm(t);return s.add({}).next(function(a){dd("number"==typeof a);for(var u=new jy(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return jg(t.Fs,e)}),i=n.mutations.map(function(e){return jg(t.Fs,e)});return new gy(e,n.batchId,n.vs.toMillis(),r,i)}(i.Qt,i.userId,u),l=[],h=new Hp(function(t,e){return yd(t.rt(),e.rt())}),d=0,f=r;d<f.length;d++){var p=f[d],g=yy.key(i.userId,p.key.path,a);h=h.add(p.key.path.X()),l.push(s.put(c)),l.push(o.put(g,yy.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ei.qs(t,e))}),t.gs(function(){i.Ii[a]=u.keys()}),Kg.Mn(l).next(function(){return u})})},t.prototype.Pi=function(t,e){var n=this;return sm(t).get(e).next(function(t){return t?(dd(t.userId===n.userId),Uy(n.Qt,t)):null})},t.prototype.yi=function(t,e){var n=this;return this.Ii[e]?Kg.resolve(this.Ii[e]):this.Pi(t,e).next(function(t){if(t){var r=t.keys();return n.Ii[e]=r,r}return null})},t.prototype.gi=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return sm(t).hs({index:gy.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(dd(e.batchId>=r),o=Uy(n.Qt,e)),i.done()}).next(function(){return o})},t.prototype.Vi=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return sm(t).hs({index:gy.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.pi=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return sm(t).rs(gy.userMutationsIndex,n).next(function(t){return t.map(function(t){return Uy(e.Qt,t)})})},t.prototype.bi=function(t,e){var n=this,r=yy.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return am(t).hs({range:i},function(r,i,s){var a=r[0],u=r[2],c=hy(r[1]);if(a===n.userId&&e.path.isEqual(c))return sm(t).get(u).next(function(t){if(!t)throw hd();dd(t.userId===n.userId),o.push(Uy(n.Qt,t))});s.done()}).next(function(){return o})},t.prototype.vi=function(t,e){var n=this,r=new Hp(yd),i=[];return e.forEach(function(e){var o=yy.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=am(t).hs({range:s},function(t,i,o){var s=t[0],a=t[2],u=hy(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),Kg.Mn(i).next(function(){return n.Si(t,r)})},t.prototype.Di=function(t,e){var n=this,r=e.path,i=r.length+1,o=yy.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Hp(yd);return am(t).hs({range:s},function(t,e,o){var s=t[0],u=t[2],c=hy(t[1]);s===n.userId&&r.nt(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Si(t,a)})},t.prototype.Si=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(sm(t).get(e).next(function(t){if(null===t)throw hd();dd(t.userId===n.userId),r.push(Uy(n.Qt,t))}))}),Kg.Mn(i).next(function(){return r})},t.prototype.Ci=function(t,e){var n=this;return nm(t.ps,this.userId,e).next(function(r){return t.gs(function(){n.xi(e.batchId)}),Kg.forEach(r,function(e){return n.Ti.Ni(t,e)})})},t.prototype.xi=function(t){delete this.Ii[t]},t.prototype.$i=function(t){var e=this;return this.Ai(t).next(function(n){if(!n)return Kg.resolve();var r=IDBKeyRange.lowerBound(yy.prefixForUser(e.userId)),i=[];return am(t).hs({range:r},function(t,n,r){if(t[0]===e.userId){var o=hy(t[1]);i.push(o)}else r.done()}).next(function(){dd(0===i.length)})})},t.prototype.Fi=function(t,e){return om(t,this.userId,e)},t.prototype.Oi=function(t){var e=this;return um(t).get(this.userId).next(function(t){return t||new py(e.userId,-1,"")})},t}();function om(t,e,n){var r=yy.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return am(t).hs({range:o,us:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function sm(t){return Ay(t,gy.store)}function am(t){return Ay(t,yy.store)}function um(t){return Ay(t,py.store)}var cm=function(){function t(t){this.ki=t}return t.prototype.next=function(){return this.ki+=2,this.ki},t.Mi=function(){return new t(0)},t.Li=function(){return new t(-1)},t}(),lm=function(){function t(t,e){this.Ti=t,this.Qt=e}return t.prototype.Bi=function(t){var e=this;return this.qi(t).next(function(n){var r=new cm(n.highestTargetId);return n.highestTargetId=r.next(),e.Ui(t,n).next(function(){return n.highestTargetId})})},t.prototype.Qi=function(t){return this.qi(t).next(function(t){return jd.K(new Ad(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.Ki=function(t){return this.qi(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.Wi=function(t,e,n){var r=this;return this.qi(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.j()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ui(t,i)})},t.prototype.ji=function(t,e){var n=this;return this.Gi(t,e).next(function(){return n.qi(t).next(function(r){return r.targetCount+=1,n.zi(e,r),n.Ui(t,r)})})},t.prototype.Hi=function(t,e){return this.Gi(t,e)},t.prototype.Ji=function(t,e){var n=this;return this.Yi(t,e.targetId).next(function(){return hm(t).delete(e.targetId)}).next(function(){return n.qi(t)}).next(function(e){return dd(e.targetCount>0),e.targetCount-=1,n.Ui(t,e)})},t.prototype.Xi=function(t,e,n){var r=this,i=0,o=[];return hm(t).hs(function(s,a){var u=qy(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.Ji(t,u)))}).next(function(){return Kg.Mn(o)}).next(function(){return i})},t.prototype.In=function(t,e){return hm(t).hs(function(t,n){var r=qy(n);e(r)})},t.prototype.qi=function(t){return dm(t).get(Cy.key).next(function(t){return dd(null!==t),t})},t.prototype.Ui=function(t,e){return dm(t).put(Cy.key,e)},t.prototype.Gi=function(t,e){return hm(t).put(By(this.Qt,e))},t.prototype.zi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.Zi=function(t){return this.qi(t).next(function(t){return t.targetCount})},t.prototype.tr=function(t,e){var n=bf(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return hm(t).hs({range:r,index:wy.queryTargetsIndexName},function(t,n,r){var o=qy(n);wf(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.er=function(t,e,n){var r=this,i=[],o=fm(t);return e.forEach(function(e){var s=uy(e.path);i.push(o.put(new Ey(n,s))),i.push(r.Ti.nr(t,n,e))}),Kg.Mn(i)},t.prototype.sr=function(t,e,n){var r=this,i=fm(t);return Kg.forEach(e,function(e){var o=uy(e.path);return Kg.Mn([i.delete([n,o]),r.Ti.ir(t,n,e)])})},t.prototype.Yi=function(t,e){var n=fm(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.rr=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=fm(t),i=Jp();return r.hs({range:n,us:!0},function(t,e,n){var r=hy(t[1]),o=new Md(r);i=i.add(o)}).next(function(){return i})},t.prototype.Fi=function(t,e){var n=uy(e.path),r=IDBKeyRange.bound([n],[vd(n)],!1,!0),i=0;return fm(t).hs({index:Ey.documentTargetsIndex,us:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.Sn=function(t,e){return hm(t).get(e).next(function(t){return t?qy(t):null})},t}();function hm(t){return Ay(t,wy.store)}function dm(t){return Ay(t,Cy.store)}function fm(t){return Ay(t,Ey.store)}function pm(t,e){var n=t[1],r=e[1],i=yd(t[0],e[0]);return 0===i?yd(n,r):i}var gm=function(){function t(t){this.cr=t,this.buffer=new Hp(pm),this.ar=0}return t.prototype.ur=function(){return++this.ar},t.prototype.hr=function(t){var e=[t,this.ur()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();pm(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),ym=function(){function t(t,e){this.lr=t,this._s=e,this._r=!1,this.dr=null}return t.prototype.start=function(t){-1!==this.lr.params.zs&&this.wr(t)},t.prototype.stop=function(){this.dr&&(this.dr.cancel(),this.dr=null)},Object.defineProperty(t.prototype,"Er",{get:function(){return null!==this.dr},enumerable:!1,configurable:!0}),t.prototype.wr=function(t){var e=this,n=this._r?3e5:6e4;ad("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.dr=this._s.Tr("lru_garbage_collection",n,function(){return Object(nd.b)(e,void 0,void 0,function(){var e;return Object(nd.d)(this,function(n){switch(n.label){case 0:this.dr=null,this._r=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Ir(this.lr)];case 2:return n.sent(),[3,7];case 3:return Jg(e=n.sent())?(ad("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Jy(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.wr(t)];case 8:return n.sent(),[2]}})})})},t}(),mm=function(){function t(t,e){this.mr=t,this.params=e}return t.prototype.Ar=function(t,e){return this.mr.Rr(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.Pr=function(t,e){var n=this;if(0===e)return Kg.resolve(kd.q);var r=new gm(e);return this.mr.In(t,function(t){return r.hr(t.sequenceNumber)}).next(function(){return n.mr.yr(t,function(t){return r.hr(t)})}).next(function(){return r.maxValue})},t.prototype.Xi=function(t,e,n){return this.mr.Xi(t,e,n)},t.prototype.gr=function(t,e){return this.mr.gr(t,e)},t.prototype.Vr=function(t,e){var n=this;return-1===this.params.zs?(ad("LruGarbageCollector","Garbage collection skipped; disabled"),Kg.resolve(Xy)):this.pr(t).next(function(r){return r<n.params.zs?(ad("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.zs),Xy):n.br(t,e)})},t.prototype.pr=function(t){return this.mr.pr(t)},t.prototype.br=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.Ar(t,this.params.Hs).next(function(e){return e>c.params.Js?(ad("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.Js+" from "+e),r=c.params.Js):r=e,o=Date.now(),c.Pr(t,r)}).next(function(r){return n=r,s=Date.now(),c.Xi(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.gr(t,n)}).next(function(t){return u=Date.now(),sd()<=Ja.a.DEBUG&&ad("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Kg.resolve({Ks:!0,Ws:r,js:i,Gs:t})})},t}(),vm=function(){function t(t,e){this.db=t,this.lr=function(t,e){return new mm(t,e)}(this,e)}return t.prototype.Rr=function(t){var e=this.vr(t);return this.db.Sr().Zi(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.vr=function(t){var e=0;return this.yr(t,function(t){e++}).next(function(){return e})},t.prototype.In=function(t,e){return this.db.Sr().In(t,e)},t.prototype.yr=function(t,e){return this.Dr(t,function(t,n){return e(n)})},t.prototype.nr=function(t,e,n){return _m(t,n)},t.prototype.ir=function(t,e,n){return _m(t,n)},t.prototype.Xi=function(t,e,n){return this.db.Sr().Xi(t,e,n)},t.prototype.Ni=function(t,e){return _m(t,e)},t.prototype.Cr=function(t,e){return function(t,e){var n=!1;return um(t).ls(function(r){return om(t,r,e).next(function(t){return t&&(n=!0),Kg.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.gr=function(t,e){var n=this,r=this.db.$r().Nr(),i=[],o=0;return this.Dr(t,function(s,a){if(a<=e){var u=n.Cr(t,s).next(function(e){if(!e)return o++,r._i(t,s).next(function(){return r.li(s),fm(t).delete([0,uy(s.path)])})});i.push(u)}}).next(function(){return Kg.Mn(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.kt(t.bs);return this.db.Sr().Hi(t,n)},t.prototype.Fr=function(t,e){return _m(t,e)},t.prototype.Dr=function(t,e){var n,r=fm(t),i=kd.q;return r.hs({index:Ey.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==kd.q&&e(new Md(hy(n)),i),i=s,n=o):i=kd.q}).next(function(){i!==kd.q&&e(new Md(hy(n)),i)})},t.prototype.pr=function(t){return this.db.$r().Or(t)},t}();function _m(t,e){return fm(t).put(function(t,e){return new Ey(0,uy(t.path),e)}(e,t.bs))}var bm=function(){function t(t,e){this.Qt=t,this.Ei=e}return t.prototype.ai=function(t,e,n){return Cm(t).put(Om(e),n)},t.prototype.li=function(t,e){var n=Cm(t),r=Om(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.kr(t,r)})},t.prototype._i=function(t,e){var n=this;return Cm(t).get(Om(e)).next(function(t){return n.Mr(t)})},t.prototype.Lr=function(t,e){var n=this;return Cm(t).get(Om(e)).next(function(t){var e=n.Mr(t);return e?{hi:e,size:rm(t)}:null})},t.prototype.getEntries=function(t,e){var n=this,r=Gp();return this.Br(t,e,function(t,e){var i=n.Mr(e);r=r.zt(t,i)}).next(function(){return r})},t.prototype.qr=function(t,e){var n=this,r=Gp(),i=new Up(Md.H);return this.Br(t,e,function(t,e){var o=n.Mr(e);o?(r=r.zt(t,o),i=i.zt(t,rm(e))):(r=r.zt(t,null),i=i.zt(t,0))}).next(function(){return{Ur:r,Qr:i}})},t.prototype.Br=function(t,e,n){if(e.et())return Kg.resolve();var r=IDBKeyRange.bound(e.first().path.it(),e.last().path.it()),i=e.te(),o=i.oe();return Cm(t).hs({range:r},function(t,e,r){for(var s=Md.Et(t);o&&Md.H(o,s)<0;)n(o,null),o=i.oe();o&&o.isEqual(s)&&(n(o,e),o=i.ce()?i.oe():null),o?r.ss(o.path.it()):r.done()}).next(function(){for(;o;)n(o,null),o=i.ce()?i.oe():null})},t.prototype.Kr=function(t,e,n){var r=this,i=$p(),o=e.path.length+1,s={};if(n.isEqual(jd.min())){var a=e.path.it();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.it(),c=My(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=_y.collectionReadTimeIndex}return Cm(t).hs(s,function(t,n,s){if(t.length===o){var a=Ry(r.Qt,n);e.path.nt(a.key.path)?a instanceof gf&&Zf(e,a)&&(i=i.zt(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.Nr=function(t){return new wm(this,!!t&&t.Wr)},t.prototype.Or=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Em(t).get(by.key).next(function(t){return dd(!!t),t})},t.prototype.kr=function(t,e){return Em(t).put(by.key,e)},t.prototype.Mr=function(t){if(t){var e=Ry(this.Qt,t);return e instanceof yf&&e.version.isEqual(jd.min())?null:e}return null},t}(),wm=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jr=e,r.Wr=n,r.Gr=new tm(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(nd.c)(e,t),e.prototype.wi=function(t){var e=this,n=[],r=0,i=new Hp(function(t,e){return yd(t.rt(),e.rt())});return this.ri.forEach(function(o,s){var a=e.Gr.get(o);if(s.hi){var u=Dy(e.jr.Qt,s.hi,e.ci(o));i=i.add(o.path.X());var c=rm(u);r+=c-a,n.push(e.jr.ai(t,o,u))}else if(r-=a,e.Wr){var l=Dy(e.jr.Qt,new yf(o,jd.min()),e.ci(o));n.push(e.jr.ai(t,o,l))}else n.push(e.jr.li(t,o))}),i.forEach(function(r){n.push(e.jr.Ei.qs(t,r))}),n.push(this.jr.updateMetadata(t,r)),Kg.Mn(n)},e.prototype.fi=function(t,e){var n=this;return this.jr.Lr(t,e).next(function(t){return null===t?(n.Gr.set(e,0),null):(n.Gr.set(e,t.size),t.hi)})},e.prototype.di=function(t,e){var n=this;return this.jr.qr(t,e).next(function(t){var e=t.Ur;return t.Qr.forEach(function(t,e){n.Gr.set(t,e)}),e})},e}(em);function Em(t){return Ay(t,by.store)}function Cm(t){return Ay(t,_y.store)}function Om(t){return t.path.it()}var Sm=function(){function t(t){this.Qt=t}return t.prototype.Jn=function(t,e,n,r){var i=this;dd(n<r&&n>=0&&r<=11);var o=new $g("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(fy.store)}(t),function(t){t.createObjectStore(py.store,{keyPath:py.keyPath}),t.createObjectStore(gy.store,{keyPath:gy.keyPath,autoIncrement:!0}).createIndex(gy.userMutationsIndex,gy.userMutationsKeyPath,{unique:!0}),t.createObjectStore(yy.store)}(t),Tm(t),function(t){t.createObjectStore(_y.store)}(t));var s=Kg.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Ey.store),t.deleteObjectStore(wy.store),t.deleteObjectStore(Cy.store)}(t),Tm(t)),s=s.next(function(){return function(t){var e=t.store(Cy.store),n=new Cy(0,0,jd.min().j(),0);return e.put(Cy.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(gy.store).rs().next(function(n){t.deleteObjectStore(gy.store),t.createObjectStore(gy.store,{keyPath:gy.keyPath,autoIncrement:!0}).createIndex(gy.userMutationsIndex,gy.userMutationsKeyPath,{unique:!0});var r=e.store(gy.store),i=n.map(function(t){return r.put(t)});return Kg.Mn(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(Sy.store,{keyPath:Sy.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.zr(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(by.store)}(t),i.Hr(o)})),n<7&&r>=7&&(s=s.next(function(){return i.Jr(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Yr(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(_y.store);e.createIndex(_y.readTimeIndex,_y.readTimeIndexPath,{unique:!1}),e.createIndex(_y.collectionReadTimeIndex,_y.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Xr(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(Ty.store,{keyPath:Ty.keyPath})}(t),function(t){t.createObjectStore(Iy.store,{keyPath:Iy.keyPath})}(t)})),s},t.prototype.Hr=function(t){var e=0;return t.store(_y.store).hs(function(t,n){e+=rm(n)}).next(function(){var n=new by(e);return t.store(by.store).put(by.key,n)})},t.prototype.zr=function(t){var e=this,n=t.store(py.store),r=t.store(gy.store);return n.rs().next(function(n){return Kg.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.rs(gy.userMutationsIndex,i).next(function(r){return Kg.forEach(r,function(r){dd(r.userId===n.userId);var i=Uy(e.Qt,r);return nm(t,n.userId,i).next(function(){})})})})})},t.prototype.Jr=function(t){var e=t.store(Ey.store),n=t.store(_y.store);return t.store(Cy.store).get(Cy.key).next(function(t){var r=[];return n.hs(function(n,i){var o=new Nd(n),s=function(t){return[0,uy(t)]}(o);r.push(e.get(s).next(function(n){return n?Kg.resolve():function(n){return e.put(new Ey(0,uy(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return Kg.Mn(r)})})},t.prototype.Yr=function(t,e){t.createObjectStore(Oy.store,{keyPath:Oy.keyPath});var n=e.store(Oy.store),r=new Ky,i=function(t){if(r.add(t)){var e=t.tt(),i=t.X();return n.put({collectionId:e,parent:uy(i)})}};return e.store(_y.store).hs({us:!0},function(t,e){var n=new Nd(t);return i(n.X())}).next(function(){return e.store(yy.store).hs({us:!0},function(t,e){var n=hy(t[1]);return i(n.X())})})},t.prototype.Xr=function(t){var e=this,n=t.store(wy.store);return n.hs(function(t,r){var i=qy(r),o=By(e.Qt,i);return n.put(o)})},t}();function Tm(t){t.createObjectStore(Ey.store,{keyPath:Ey.keyPath}).createIndex(Ey.documentTargetsIndex,Ey.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(wy.store,{keyPath:wy.keyPath}).createIndex(wy.queryTargetsIndexName,wy.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Cy.store)}var Im="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",xm=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Zr=o,this.window=s,this.document=a,this.eo=c,this.no=l,this.so=null,this.io=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ro=null,this.inForeground=!1,this.oo=null,this.co=null,this.ao=Number.NEGATIVE_INFINITY,this.uo=function(t){return Promise.resolve()},!t.Kn())throw new wd(bd.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Ti=new vm(this,i),this.ho=n+"main",this.Qt=new Ny(u),this.lo=new Yg(this.ho,11,new Sm(this.Qt)),this._o=new lm(this.Ti,this.Qt),this.Ei=new $y,this.fo=function(t,e){return new bm(t,e)}(this.Qt,this.Ei),this.wo=new zy,this.window&&this.window.localStorage?this.Eo=this.window.localStorage:(this.Eo=null,!1===l&&ud("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.To().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new wd(bd.FAILED_PRECONDITION,Im);return t.Io(),t.mo(),t.Ao(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t._o.Ki(e)})}).then(function(e){t.so=new kd(e,t.eo)}).then(function(){t.io=!0}).catch(function(e){return t.lo&&t.lo.close(),Promise.reject(e)})},t.prototype.Ro=function(t){var e=this;return this.uo=function(n){return Object(nd.b)(e,void 0,void 0,function(){return Object(nd.d)(this,function(e){return this.Er?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.Po=function(t){var e=this;this.lo.Xn(function(n){return Object(nd.b)(e,void 0,void 0,function(){return Object(nd.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.yo=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Zr.Ps(function(){return Object(nd.b)(e,void 0,void 0,function(){return Object(nd.d)(this,function(t){switch(t.label){case 0:return this.Er?[4,this.To()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.To=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return Am(e).put(new Sy(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Vo(e).next(function(e){e||(t.isPrimary=!1,t.Zr.po(function(){return t.uo(!1)}))})}).next(function(){return t.bo(e)}).next(function(n){return t.isPrimary&&!n?t.vo(e).next(function(){return!1}):!!n&&t.So(e).next(function(){return!0})})}).catch(function(e){if(Jg(e))return ad("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return ad("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Zr.po(function(){return t.uo(e)}),t.isPrimary=e})},t.prototype.Vo=function(t){var e=this;return km(t).get(fy.key).next(function(t){return Kg.resolve(e.Do(t))})},t.prototype.Co=function(t){return Am(t).delete(this.clientId)},t.prototype.xo=function(){return Object(nd.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(nd.d)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.No(this.ao,18e5)?[3,2]:(this.ao=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=Ay(t,Sy.store);return e.rs().next(function(t){var n=r.$o(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return Kg.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Eo)for(e=0,n=t;e<n.length;e++)this.Eo.removeItem(this.Fo(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.Ao=function(){var t=this;this.co=this.Zr.Tr("client_metadata_refresh",4e3,function(){return t.To().then(function(){return t.xo()}).then(function(){return t.Ao()})})},t.prototype.Do=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.bo=function(t){var e=this;return this.no?Kg.resolve(!0):km(t).get(fy.key).next(function(n){if(null!==n&&e.No(n.leaseTimestampMs,5e3)&&!e.Oo(n.ownerId)){if(e.Do(n)&&e.networkEnabled)return!0;if(!e.Do(n)){if(!n.allowTabSynchronization)throw new wd(bd.FAILED_PRECONDITION,Im);return!1}}return!(!e.networkEnabled||!e.inForeground)||Am(t).rs().next(function(t){return void 0===e.$o(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&ad("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.ko=function(){return Object(nd.b)(this,void 0,void 0,function(){var t=this;return Object(nd.d)(this,function(e){switch(e.label){case 0:return this.io=!1,this.Mo(),this.co&&(this.co.cancel(),this.co=null),this.Lo(),this.Bo(),[4,this.lo.runTransaction("shutdown","readwrite",[fy.store,Sy.store],function(e){var n=new ky(e,kd.q);return t.vo(n).next(function(){return t.Co(n)})})];case 1:return e.sent(),this.lo.close(),this.qo(),[2]}})})},t.prototype.$o=function(t,e){var n=this;return t.filter(function(t){return n.No(t.updateTimeMs,e)&&!n.Oo(t.clientId)})},t.prototype.Uo=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return Am(e).rs().next(function(e){return t.$o(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),t.prototype.Qo=function(t){return im.mi(t,this.Qt,this.Ei,this.Ti)},t.prototype.Sr=function(){return this._o},t.prototype.$r=function(){return this.fo},t.prototype.Ko=function(){return this.Ei},t.prototype.Wo=function(){return this.wo},t.prototype.runTransaction=function(t,e,n){var r,i=this;return ad("IndexedDbPersistence","Starting transaction:",t),this.lo.runTransaction(t,"readonly"===e?"readonly":"readwrite",xy,function(o){return r=new ky(o,i.so?i.so.next():kd.q),"readwrite-primary"===e?i.Vo(r).next(function(t){return!!t||i.bo(r)}).next(function(e){if(!e)throw ud("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Zr.po(function(){return i.uo(!1)}),new wd(bd.FAILED_PRECONDITION,sy);return n(r)}).next(function(t){return i.So(r).next(function(){return t})}):i.jo(r).next(function(){return n(r)})}).then(function(t){return r.Vs(),t})},t.prototype.jo=function(t){var e=this;return km(t).get(fy.key).next(function(t){if(null!==t&&e.No(t.leaseTimestampMs,5e3)&&!e.Oo(t.ownerId)&&!e.Do(t)&&!(e.no||e.allowTabSynchronization&&t.allowTabSynchronization))throw new wd(bd.FAILED_PRECONDITION,Im)})},t.prototype.So=function(t){var e=new fy(this.clientId,this.allowTabSynchronization,Date.now());return km(t).put(fy.key,e)},t.Kn=function(){return Yg.Kn()},t.prototype.vo=function(t){var e=this,n=km(t);return n.get(fy.key).next(function(t){return e.Do(t)?(ad("IndexedDbPersistence","Releasing primary lease."),n.delete(fy.key)):Kg.resolve()})},t.prototype.No=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(ud("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Io=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.oo=function(){t.Zr.Ps(function(){return t.inForeground="visible"===t.document.visibilityState,t.To()})},this.document.addEventListener("visibilitychange",this.oo),this.inForeground="visible"===this.document.visibilityState)},t.prototype.Lo=function(){this.oo&&(this.document.removeEventListener("visibilitychange",this.oo),this.oo=null)},t.prototype.mo=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ro=function(){e.Mo(),e.Zr.Ps(function(){return e.ko()})},this.window.addEventListener("unload",this.ro))},t.prototype.Bo=function(){this.ro&&(this.window.removeEventListener("unload",this.ro),this.ro=null)},t.prototype.Oo=function(t){var e;try{var n=null!==(null===(e=this.Eo)||void 0===e?void 0:e.getItem(this.Fo(t)));return ad("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return ud("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.Mo=function(){if(this.Eo)try{this.Eo.setItem(this.Fo(this.clientId),String(Date.now()))}catch(t){ud("Failed to set zombie client id.",t)}},t.prototype.qo=function(){if(this.Eo)try{this.Eo.removeItem(this.Fo(this.clientId))}catch(t){}},t.prototype.Fo=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function km(t){return Ay(t,fy.store)}function Am(t){return Ay(t,Sy.store)}function jm(t,e){var n=t.projectId;return t.o||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Pm=function(t,e){this.progress=t,this.Go=e},Nm=function(){function t(t,e,n){this.fo=t,this.zo=e,this.Ei=n}return t.prototype.Ho=function(t,e){var n=this;return this.zo.bi(t,e).next(function(r){return n.Jo(t,e,r)})},t.prototype.Jo=function(t,e,n){return this.fo._i(t,e).next(function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].Cs(e,t);return t})},t.prototype.Yo=function(t,e,n){var r=Gp();return e.forEach(function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].Cs(t,e);r=r.zt(t,e)}),r},t.prototype.Xo=function(t,e){var n=this;return this.fo.getEntries(t,e).next(function(e){return n.Zo(t,e)})},t.prototype.Zo=function(t,e){var n=this;return this.zo.vi(t,e).next(function(r){var i=n.Yo(t,e,r),o=Qp();return i.forEach(function(t,e){e||(e=new yf(t,jd.min())),o=o.zt(t,e)}),o})},t.prototype.Kr=function(t,e,n){return function(t){return Md.wt(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.tc(t,e.path):Wf(e)?this.ec(t,e,n):this.nc(t,e,n)},t.prototype.tc=function(t,e){return this.Ho(t,new Md(e)).next(function(t){var e=$p();return t instanceof gf&&(e=e.zt(t.key,t)),e})},t.prototype.ec=function(t,e,n){var r=this,i=e.collectionGroup,o=$p();return this.Ei.Us(t,i).next(function(s){return Kg.forEach(s,function(s){var a=function(t,e){return new Ff(e,null,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.nc(t,a,n).next(function(t){t.forEach(function(t,e){o=o.zt(t,e)})})}).next(function(){return o})})},t.prototype.nc=function(t,e,n){var r,i,o=this;return this.fo.Kr(t,e,n).next(function(n){return r=n,o.zo.Di(t,e)}).next(function(e){return o.sc(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=Cp(u,r.get(c),o.vs);r=l instanceof gf?r.zt(c,l):r.remove(c)}})}).next(function(){return r.forEach(function(t,n){Zf(e,n)||(r=r.remove(t))}),r})},t.prototype.sc=function(t,e,n){for(var r=Jp(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof xp&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.fo.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof gf&&(c=c.zt(t,e))}),c})},t}(),Rm=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.ic=n,this.rc=r}return t.oc=function(e,n){for(var r=Jp(),i=Jp(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Dm=function(){function t(){}return t.prototype.cc=function(t){this.ac=t},t.prototype.Kr=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.xt.length||1===t.xt.length&&t.xt[0].field.ut())}(e)||n.isEqual(jd.min())?this.uc(t,e):this.ac.Xo(t,r).next(function(o){var s=i.hc(e,o);return(qf(e)||Bf(e))&&i.lc(e.limitType,s,r,n)?i.uc(t,e):(sd()<=Ja.a.DEBUG&&ad("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Xf(e)),i.ac.Kr(t,e,n).next(function(t){return s.forEach(function(e){t=t.zt(e.key,e)}),t}))})},t.prototype.hc=function(t,e){var n=new Hp(Jf(t));return e.forEach(function(e,r){r instanceof gf&&Zf(t,r)&&(n=n.add(r))}),n},t.prototype.lc=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version._(r)>0)},t.prototype.uc=function(t,e){return sd()<=Ja.a.DEBUG&&ad("QueryEngine","Using full collection scan to execute query:",Xf(e)),this.ac.Kr(t,e,jd.min())},t}(),Mm=function(){function t(t,e,n,r){this.persistence=t,this._c=e,this.Qt=r,this.fc=new Up(yd),this.dc=new tm(function(t){return bf(t)},wf),this.wc=jd.min(),this.zo=t.Qo(n),this.Ec=t.$r(),this._o=t.Sr(),this.Tc=new Nm(this.Ec,this.zo,this.persistence.Ko()),this.wo=t.Wo(),this._c.cc(this.Tc)}return t.prototype.Ir=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.Vr(n,e.fc)})},t}();function Lm(t,e,n,r){return new Mm(t,e,n,r)}function Fm(t,e){return Object(nd.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(nd.d)(this,function(s){switch(s.label){case 0:return n=fd(t),r=n.zo,i=n.Tc,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n.zo.pi(t).next(function(s){return o=s,r=n.persistence.Qo(e),i=new Nm(n.Ec,r,n.persistence.Ko()),r.pi(t)}).next(function(e){for(var n=[],r=[],s=Jp(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var d=0,f=e;d<f.length;d++){var p=f[d];r.push(p.batchId);for(var g=0,y=p.mutations;g<y.length;g++)s=s.add(y[g].key)}return i.Xo(t,s).next(function(t){return{Ic:t,mc:n,Ac:r}})})})];case 1:return o=s.sent(),[2,(n.zo=r,n.Tc=i,n._c.cc(n.Tc),o)]}})})}function Vm(t,e){var n=fd(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.Ec.Nr({Wr:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Kg.resolve();return o.forEach(function(t){s=s.next(function(){return r._i(e,t)}).next(function(e){var o=e,s=n.$s.get(t);dd(null!==s),(!o||o.version._(s)<0)&&(o=i.Ss(t,o,n))&&r.ai(o,n.Ns)})}),s.next(function(){return t.zo.Ci(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n.zo.$i(t)}).next(function(){return n.Tc.Xo(t,r)})})}function Um(t){var e=fd(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e._o.Qi(t)})}function qm(t,e){var n=fd(t),r=e.Ot,i=n.fc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.Ec.Nr({Wr:!0});i=n.fc;var s=[];e.$e.forEach(function(e,o){var a=i.get(o);if(a){s.push(n._o.sr(t,e.Qe,o).next(function(){return n._o.er(t,e.qe,o)}));var u=e.resumeToken;if(u.l()>0){var c=a.Mt(u,r).kt(t.bs);i=i.zt(o,c),function(t,e,n){return dd(e.resumeToken.l()>0),0===t.resumeToken.l()||e.Ot.W()-t.Ot.W()>=3e8||n.qe.size+n.Ue.size+n.Qe.size>0}(a,c,e)&&s.push(n._o.Hi(t,c))}}});var a=Qp();if(e.Oe.forEach(function(r,i){e.ke.has(r)&&s.push(n.persistence.Ti.Fr(t,r))}),s.push(Bm(t,o,e.Oe,r,void 0).next(function(t){a=t})),!r.isEqual(jd.min())){var u=n._o.Qi(t).next(function(e){return n._o.Wi(t,t.bs,r)});s.push(u)}return Kg.Mn(s).next(function(){return o.apply(t)}).next(function(){return n.Tc.Zo(t,a)})}).then(function(t){return n.fc=i,t})}function Bm(t,e,n,r,i){var o=Jp();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=Qp();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s instanceof yf&&s.version.isEqual(jd.min())?(e.li(n,u),o=o.zt(n,s)):null==a||s.version._(a.version)>0||0===s.version._(a.version)&&a.hasPendingWrites?(e.ai(s,u),o=o.zt(n,s)):ad("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function Hm(t,e){var n=fd(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n.zo.gi(t,e)})}function zm(t,e){var n=fd(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n._o.tr(t,e).next(function(i){return i?Kg.resolve(r=i):n._o.Bi(t).next(function(i){return r=new ep(e,i,0,t.bs),n._o.ji(t,r).next(function(){return r})})})}).then(function(t){var r=n.fc.get(t.targetId);return(null===r||t.Ot._(r.Ot)>0)&&(n.fc=n.fc.zt(t.targetId,t),n.dc.set(e,t.targetId)),t})}function Wm(t,e,n){return Object(nd.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(nd.d)(this,function(a){switch(a.label){case 0:r=fd(t),i=r.fc.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.Ti.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Jg(s=a.sent()))throw s;return ad("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.fc=r.fc.remove(e),r.dc.delete(i.target),[2]}})})}function Qm(t,e,n){var r=fd(t),i=jd.min(),o=Jp();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=fd(t),i=r.dc.get(n);return void 0!==i?Kg.resolve(r.fc.get(i)):r._o.tr(e,n)}(r,t,Gf(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r._o.rr(t,e.targetId).next(function(t){o=t})}).next(function(){return r._c.Kr(t,e,n?i:jd.min(),n?o:Jp())}).next(function(t){return{documents:t,Rc:o}})})}function Gm(t,e){var n=fd(t),r=fd(n._o),i=n.fc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.Sn(t,e).next(function(t){return t?t.target:null})})}function Km(t){var e=fd(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=fd(t),i=Qp(),o=My(n),s=Cm(e),a=IDBKeyRange.lowerBound(o,!0);return s.hs({index:_y.readTimeIndex,range:a},function(t,e){var n=Ry(r.Qt,e);i=i.zt(n.key,n),o=e.readTime}).next(function(){return{Go:i,readTime:Ly(o)}})}(e.Ec,t,e.wc)}).then(function(t){var n=t.Go;return e.wc=t.readTime,n})}function $m(t){return Object(nd.b)(this,void 0,void 0,function(){var e;return Object(nd.d)(this,function(n){return[2,(e=fd(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=Cm(t),n=jd.min();return e.hs({index:_y.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=Ly(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.wc=t})]})})}function Ym(t,e,n,r){return Object(nd.b)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,d,f;return Object(nd.d)(this,function(p){switch(p.label){case 0:for(i=fd(t),o=Jp(),s=Qp(),a=Xp(),u=0,c=n;u<c.length;u++)h=e.Pc((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.zt(h,e.yc(l)),a=a.zt(h,e.gc(l.metadata.readTime));return d=i.Ec.Nr({Wr:!0}),[4,zm(i,function(t){return Gf(Uf(Nd.ot("__bundle__/docs/"+t)))}(r))];case 1:return f=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return Bm(t,d,s,jd.min(),a).next(function(e){return d.apply(t),e}).next(function(e){return i._o.Yi(t,f.targetId).next(function(){return i._o.er(t,o,f.targetId)}).next(function(){return i.Tc.Zo(t,e)})})})]}})})}function Xm(t,e,n){return void 0===n&&(n=Jp()),Object(nd.b)(this,void 0,void 0,function(){var r,i;return Object(nd.d)(this,function(o){switch(o.label){case 0:return[4,zm(t,Gf(Hy(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=fd(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=bg(e.readTime);if(r.Ot._(o)>=0)return i.wo.Ls(t,e);var s=r.Mt(_d.T,o);return i.fc=i.fc.zt(s.targetId,s),i._o.Hi(t,s).next(function(){return i._o.Yi(t,r.targetId)}).next(function(){return i._o.er(t,n,r.targetId)}).next(function(){return i.wo.Ls(t,e)})})]}})})}var Zm=function(){function t(t){this.Qt=t,this.Vc=new Map,this.bc=new Map}return t.prototype.Os=function(t,e){return Kg.resolve(this.Vc.get(e))},t.prototype.ks=function(t,e){var n;return this.Vc.set(e.id,{id:(n=e).id,version:n.version,createTime:bg(n.createTime)}),Kg.resolve()},t.prototype.Ms=function(t,e){return Kg.resolve(this.bc.get(e))},t.prototype.Ls=function(t,e){return this.bc.set(e.name,function(t){return{name:t.name,query:Hy(t.bundledQuery),readTime:bg(t.readTime)}}(e)),Kg.resolve()},t}(),Jm=function(){function t(){this.vc=new Hp(tv.Sc),this.Dc=new Hp(tv.Cc)}return t.prototype.et=function(){return this.vc.et()},t.prototype.nr=function(t,e){var n=new tv(t,e);this.vc=this.vc.add(n),this.Dc=this.Dc.add(n)},t.prototype.xc=function(t,e){var n=this;t.forEach(function(t){return n.nr(t,e)})},t.prototype.ir=function(t,e){this.Nc(new tv(t,e))},t.prototype.$c=function(t,e){var n=this;t.forEach(function(t){return n.ir(t,e)})},t.prototype.Fc=function(t){var e=this,n=new Md(new Nd([])),r=new tv(n,t),i=new tv(n,t+1),o=[];return this.Dc.me([r,i],function(t){e.Nc(t),o.push(t.key)}),o},t.prototype.Oc=function(){var t=this;this.vc.forEach(function(e){return t.Nc(e)})},t.prototype.Nc=function(t){this.vc=this.vc.delete(t),this.Dc=this.Dc.delete(t)},t.prototype.kc=function(t){var e=new Md(new Nd([])),n=new tv(e,t),r=new tv(e,t+1),i=Jp();return this.Dc.me([n,r],function(t){i=i.add(t.key)}),i},t.prototype.Fi=function(t){var e=new tv(t,0),n=this.vc.Re(e);return null!==n&&t.isEqual(n.key)},t}(),tv=function(){function t(t,e){this.key=t,this.Mc=e}return t.Sc=function(t,e){return Md.H(t.key,e.key)||yd(t.Mc,e.Mc)},t.Cc=function(t,e){return yd(t.Mc,e.Mc)||Md.H(t.key,e.key)},t}(),ev=function(){function t(t,e){this.Ei=t,this.Ti=e,this.zo=[],this.Lc=1,this.Bc=new Hp(tv.Sc)}return t.prototype.Ai=function(t){return Kg.resolve(0===this.zo.length)},t.prototype.Ri=function(t,e,n,r){var i=this.Lc;this.Lc++;var o=new jy(i,e,n,r);this.zo.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.Bc=this.Bc.add(new tv(u.key,i)),this.Ei.qs(t,u.key.path.X())}return Kg.resolve(o)},t.prototype.Pi=function(t,e){return Kg.resolve(this.qc(e))},t.prototype.gi=function(t,e){var n=this.Uc(e+1),r=n<0?0:n;return Kg.resolve(this.zo.length>r?this.zo[r]:null)},t.prototype.Vi=function(){return Kg.resolve(0===this.zo.length?-1:this.Lc-1)},t.prototype.pi=function(t){return Kg.resolve(this.zo.slice())},t.prototype.bi=function(t,e){var n=this,r=new tv(e,0),i=new tv(e,Number.POSITIVE_INFINITY),o=[];return this.Bc.me([r,i],function(t){var e=n.qc(t.Mc);o.push(e)}),Kg.resolve(o)},t.prototype.vi=function(t,e){var n=this,r=new Hp(yd);return e.forEach(function(t){var e=new tv(t,0),i=new tv(t,Number.POSITIVE_INFINITY);n.Bc.me([e,i],function(t){r=r.add(t.Mc)})}),Kg.resolve(this.Qc(r))},t.prototype.Di=function(t,e){var n=e.path,r=n.length+1,i=n;Md.wt(i)||(i=i.child(""));var o=new tv(new Md(i),0),s=new Hp(yd);return this.Bc.Ae(function(t){var e=t.key.path;return!!n.nt(e)&&(e.length===r&&(s=s.add(t.Mc)),!0)},o),Kg.resolve(this.Qc(s))},t.prototype.Qc=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.qc(t);null!==r&&n.push(r)}),n},t.prototype.Ci=function(t,e){var n=this;dd(0===this.Kc(e.batchId,"removed")),this.zo.shift();var r=this.Bc;return Kg.forEach(e.mutations,function(i){var o=new tv(i.key,e.batchId);return r=r.delete(o),n.Ti.Ni(t,i.key)}).next(function(){n.Bc=r})},t.prototype.xi=function(t){},t.prototype.Fi=function(t,e){var n=new tv(e,0),r=this.Bc.Re(n);return Kg.resolve(e.isEqual(r&&r.key))},t.prototype.$i=function(t){return Kg.resolve()},t.prototype.Kc=function(t,e){return this.Uc(t)},t.prototype.Uc=function(t){return 0===this.zo.length?0:t-this.zo[0].batchId},t.prototype.qc=function(t){var e=this.Uc(t);return e<0||e>=this.zo.length?null:this.zo[e]},t}(),nv=function(){function t(t,e){this.Ei=t,this.Wc=e,this.docs=new Up(Md.H),this.size=0}return t.prototype.ai=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.Wc(e);return this.docs=this.docs.zt(r,{hi:e,size:s,readTime:n}),this.size+=s-o,this.Ei.qs(t,r.path.X())},t.prototype.li=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype._i=function(t,e){var n=this.docs.get(e);return Kg.resolve(n?n.hi:null)},t.prototype.getEntries=function(t,e){var n=this,r=Gp();return e.forEach(function(t){var e=n.docs.get(t);r=r.zt(t,e?e.hi:null)}),Kg.resolve(r)},t.prototype.Kr=function(t,e,n){for(var r=$p(),i=new Md(e.path.child("")),o=this.docs.ee(i);o.ce();){var s=o.oe(),a=s.value,u=a.hi,c=a.readTime;if(!e.path.nt(s.key.path))break;c._(n)<=0||u instanceof gf&&Zf(e,u)&&(r=r.zt(u.key,u))}return Kg.resolve(r)},t.prototype.jc=function(t,e){return Kg.forEach(this.docs,function(t){return e(t)})},t.prototype.Nr=function(t){return new rv(this)},t.prototype.Or=function(t){return Kg.resolve(this.size)},t}(),rv=function(t){function e(e){var n=this;return(n=t.call(this)||this).jr=e,n}return Object(nd.c)(e,t),e.prototype.wi=function(t){var e=this,n=[];return this.ri.forEach(function(r,i){i&&i.hi?n.push(e.jr.ai(t,i.hi,e.ci(r))):e.jr.li(r)}),Kg.Mn(n)},e.prototype.fi=function(t,e){return this.jr._i(t,e)},e.prototype.di=function(t,e){return this.jr.getEntries(t,e)},e}(em),iv=function(){function t(t){this.persistence=t,this.Gc=new tm(function(t){return bf(t)},wf),this.lastRemoteSnapshotVersion=jd.min(),this.highestTargetId=0,this.zc=0,this.Hc=new Jm,this.targetCount=0,this.Jc=cm.Mi()}return t.prototype.In=function(t,e){return this.Gc.forEach(function(t,n){return e(n)}),Kg.resolve()},t.prototype.Qi=function(t){return Kg.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Ki=function(t){return Kg.resolve(this.zc)},t.prototype.Bi=function(t){return this.highestTargetId=this.Jc.next(),Kg.resolve(this.highestTargetId)},t.prototype.Wi=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.zc&&(this.zc=e),Kg.resolve()},t.prototype.Gi=function(t){this.Gc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Jc=new cm(e),this.highestTargetId=e),t.sequenceNumber>this.zc&&(this.zc=t.sequenceNumber)},t.prototype.ji=function(t,e){return this.Gi(e),this.targetCount+=1,Kg.resolve()},t.prototype.Hi=function(t,e){return this.Gi(e),Kg.resolve()},t.prototype.Ji=function(t,e){return this.Gc.delete(e.target),this.Hc.Fc(e.targetId),this.targetCount-=1,Kg.resolve()},t.prototype.Xi=function(t,e,n){var r=this,i=0,o=[];return this.Gc.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.Gc.delete(s),o.push(r.Yi(t,a.targetId)),i++)}),Kg.Mn(o).next(function(){return i})},t.prototype.Zi=function(t){return Kg.resolve(this.targetCount)},t.prototype.tr=function(t,e){var n=this.Gc.get(e)||null;return Kg.resolve(n)},t.prototype.er=function(t,e,n){return this.Hc.xc(e,n),Kg.resolve()},t.prototype.sr=function(t,e,n){this.Hc.$c(e,n);var r=this.persistence.Ti,i=[];return r&&e.forEach(function(e){i.push(r.Ni(t,e))}),Kg.Mn(i)},t.prototype.Yi=function(t,e){return this.Hc.Fc(e),Kg.resolve()},t.prototype.rr=function(t,e){var n=this.Hc.kc(e);return Kg.resolve(n)},t.prototype.Fi=function(t,e){return Kg.resolve(this.Hc.Fi(e))},t}(),ov=function(){function t(t,e){var n=this;this.Yc={},this.so=new kd(0),this.io=!1,this.io=!0,this.Ti=t(this),this._o=new iv(this),this.Ei=new Gy,this.fo=function(t,e){return new nv(t,function(t){return n.Ti.Xc(t)})}(this.Ei),this.Qt=new Ny(e),this.wo=new Zm(this.Qt)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.ko=function(){return this.io=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),t.prototype.Po=function(){},t.prototype.yo=function(){},t.prototype.Ko=function(){return this.Ei},t.prototype.Qo=function(t){var e=this.Yc[t.A()];return e||(e=new ev(this.Ei,this.Ti),this.Yc[t.A()]=e),e},t.prototype.Sr=function(){return this._o},t.prototype.$r=function(){return this.fo},t.prototype.Wo=function(){return this.wo},t.prototype.runTransaction=function(t,e,n){var r=this;ad("MemoryPersistence","Starting transaction:",t);var i=new sv(this.so.next());return this.Ti.Zc(),n(i).next(function(t){return r.Ti.ta(i).next(function(){return t})}).On().then(function(t){return i.Vs(),t})},t.prototype.ea=function(t,e){return Kg.Ln(Object.values(this.Yc).map(function(n){return function(){return n.Fi(t,e)}}))},t}(),sv=function(t){function e(e){var n=this;return(n=t.call(this)||this).bs=e,n}return Object(nd.c)(e,t),e}(ay),av=function(){function t(t){this.persistence=t,this.na=new Jm,this.sa=null}return t.ia=function(e){return new t(e)},Object.defineProperty(t.prototype,"ra",{get:function(){if(this.sa)return this.sa;throw hd()},enumerable:!1,configurable:!0}),t.prototype.nr=function(t,e,n){return this.na.nr(n,e),this.ra.delete(n.toString()),Kg.resolve()},t.prototype.ir=function(t,e,n){return this.na.ir(n,e),this.ra.add(n.toString()),Kg.resolve()},t.prototype.Ni=function(t,e){return this.ra.add(e.toString()),Kg.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.na.Fc(e.targetId).forEach(function(t){return n.ra.add(t.toString())});var r=this.persistence.Sr();return r.rr(t,e.targetId).next(function(t){t.forEach(function(t){return n.ra.add(t.toString())})}).next(function(){return r.Ji(t,e)})},t.prototype.Zc=function(){this.sa=new Set},t.prototype.ta=function(t){var e=this,n=this.persistence.$r().Nr();return Kg.forEach(this.ra,function(r){var i=Md._t(r);return e.oa(t,i).next(function(t){t||n.li(i)})}).next(function(){return e.sa=null,n.apply(t)})},t.prototype.Fr=function(t,e){var n=this;return this.oa(t,e).next(function(t){t?n.ra.delete(e.toString()):n.ra.add(e.toString())})},t.prototype.Xc=function(t){return 0},t.prototype.oa=function(t,e){var n=this;return Kg.Ln([function(){return Kg.resolve(n.na.Fi(e))},function(){return n.persistence.Sr().Fi(t,e)},function(){return n.persistence.ea(t,e)}])},t}();function uv(t,e){return"firestore_clients_"+t+"_"+e}function cv(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.m()&&(r+="_"+e.uid),r}function lv(t,e){return"firestore_targets_"+t+"_"+e}var hv=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.ca=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new wd(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(ud("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),dv=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.ca=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new wd(i.error.code,i.error.message)),o?new t(e,i.state,r):(ud("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),fv=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.ca=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=eg(),s=0;i&&s<r.activeTargetIds.length;++s)i=Yd(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(ud("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),pv=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.ca=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(ud("SharedClientState","Failed to parse online state: "+e),null)},t}(),gv=function(){function t(){this.activeTargetIds=eg()}return t.prototype.ua=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.aa=function(){var t={activeTargetIds:this.activeTargetIds.it(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),yv=function(){function t(t,e,n,r,i){this.window=t,this.Zr=e,this.persistenceKey=n,this.la=r,this._a=null,this.fa=null,this.k=null,this.da=this.wa.bind(this),this.Ea=new Up(yd),this.Er=!1,this.Ta=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ia=uv(this.persistenceKey,this.la),this.ma=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Ea=this.Ea.zt(this.la,new gv),this.Aa=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Ra=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Pa=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.ya=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.ga=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.da)}return t.Kn=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(nd.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(nd.d)(this,function(h){switch(h.label){case 0:return[4,this._a.Uo()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.la&&(i=this.getItem(uv(this.persistenceKey,r)))&&(o=fv.ca(r,i))&&(this.Ea=this.Ea.zt(o.clientId,o));for(this.Va(),(s=this.storage.getItem(this.ya))&&(a=this.pa(s))&&this.ba(a),u=0,c=this.Ta;u<c.length;u++)this.wa(c[u]);return this.Ta=[],this.window.addEventListener("unload",function(){return l.ko()}),this.Er=!0,[2]}})})},t.prototype.B=function(t){this.setItem(this.ma,JSON.stringify(t))},t.prototype.va=function(){return this.Sa(this.Ea)},t.prototype.Da=function(t){var e=!1;return this.Ea.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.Ca=function(t){this.xa(t,"pending")},t.prototype.Na=function(t,e,n){this.xa(t,e,n),this.$a(t)},t.prototype.Fa=function(t){var e="not-current";if(this.Da(t)){var n=this.storage.getItem(lv(this.persistenceKey,t));if(n){var r=dv.ca(t,n);r&&(e=r.state)}}return this.Oa.ua(t),this.Va(),e},t.prototype.ka=function(t){this.Oa.ha(t),this.Va()},t.prototype.Ma=function(t){return this.Oa.activeTargetIds.has(t)},t.prototype.La=function(t){this.removeItem(lv(this.persistenceKey,t))},t.prototype.Ba=function(t,e,n){this.qa(t,e,n)},t.prototype.Ua=function(t,e,n){var r=this;e.forEach(function(t){r.$a(t)}),this.currentUser=t,n.forEach(function(t){r.Ca(t)})},t.prototype.Qa=function(t){this.Ka(t)},t.prototype.Wa=function(){this.ja()},t.prototype.ko=function(){this.Er&&(this.window.removeEventListener("storage",this.da),this.removeItem(this.Ia),this.Er=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return ad("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){ad("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){ad("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.wa=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(ad("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ia)return void ud("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Zr.po(function(){return Object(nd.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(nd.d)(this,function(a){if(this.Er){if(null!==n.key)if(this.Aa.test(n.key)){if(null==n.newValue)return t=this.Ga(n.key),[2,this.za(t,null)];if(e=this.Ha(n.key,n.newValue))return[2,this.za(e.clientId,e)]}else if(this.Ra.test(n.key)){if(null!==n.newValue&&(r=this.Ja(n.key,n.newValue)))return[2,this.Ya(r)]}else if(this.Pa.test(n.key)){if(null!==n.newValue&&(i=this.Xa(n.key,n.newValue)))return[2,this.Za(i)]}else if(n.key===this.ya){if(null!==n.newValue&&(o=this.pa(n.newValue)))return[2,this.ba(o)]}else if(n.key===this.ma)(s=function(t){var e=kd.q;if(null!=t)try{var n=JSON.parse(t);dd("number"==typeof n),e=n}catch(t){ud("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==kd.q&&this.k(s);else if(n.key===this.ga)return[2,this._a.tu()]}else this.Ta.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Oa",{get:function(){return this.Ea.get(this.la)},enumerable:!1,configurable:!0}),t.prototype.Va=function(){this.setItem(this.Ia,this.Oa.aa())},t.prototype.xa=function(t,e,n){var r=new hv(this.currentUser,t,e,n),i=cv(this.persistenceKey,this.currentUser,t);this.setItem(i,r.aa())},t.prototype.$a=function(t){var e=cv(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Ka=function(t){this.storage.setItem(this.ya,JSON.stringify({clientId:this.la,onlineState:t}))},t.prototype.qa=function(t,e,n){var r=lv(this.persistenceKey,t),i=new dv(t,e,n);this.setItem(r,i.aa())},t.prototype.ja=function(){this.setItem(this.ga,"value-not-used")},t.prototype.Ga=function(t){var e=this.Aa.exec(t);return e?e[1]:null},t.prototype.Ha=function(t,e){var n=this.Ga(t);return fv.ca(n,e)},t.prototype.Ja=function(t,e){var n=this.Ra.exec(t),r=Number(n[1]);return hv.ca(new Cd(void 0!==n[2]?n[2]:null),r,e)},t.prototype.Xa=function(t,e){var n=this.Pa.exec(t),r=Number(n[1]);return dv.ca(r,e)},t.prototype.pa=function(t){return pv.ca(t)},t.prototype.Ya=function(t){return Object(nd.b)(this,void 0,void 0,function(){return Object(nd.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this._a.eu(t.batchId,t.state,t.error)]:(ad("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.Za=function(t){return this._a.nu(t.targetId,t.state,t.error)},t.prototype.za=function(t,e){var n=this,r=e?this.Ea.zt(t,e):this.Ea.remove(t),i=this.Sa(this.Ea),o=this.Sa(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this._a.su(s,a).then(function(){n.Ea=r})},t.prototype.ba=function(t){this.Ea.get(t.clientId)&&this.fa(t.onlineState)},t.prototype.Sa=function(t){var e=eg();return t.forEach(function(t,n){e=e.Pe(n.activeTargetIds)}),e},t}(),mv=function(){function t(){this.iu=new gv,this.ru={},this.fa=null,this.k=null}return t.prototype.Ca=function(t){},t.prototype.Na=function(t,e,n){},t.prototype.Fa=function(t){return this.iu.ua(t),this.ru[t]||"not-current"},t.prototype.Ba=function(t,e,n){this.ru[t]=e},t.prototype.ka=function(t){this.iu.ha(t)},t.prototype.Ma=function(t){return this.iu.activeTargetIds.has(t)},t.prototype.La=function(t){delete this.ru[t]},t.prototype.va=function(){return this.iu.activeTargetIds},t.prototype.Da=function(t){return this.iu.activeTargetIds.has(t)},t.prototype.start=function(){return this.iu=new gv,Promise.resolve()},t.prototype.Ua=function(t,e,n){},t.prototype.Qa=function(t){},t.prototype.ko=function(){},t.prototype.B=function(t){},t.prototype.Wa=function(){},t}(),vv=function(){function t(){}return t.prototype.ou=function(t){},t.prototype.ko=function(){},t}(),_v=function(){function t(){var t=this;this.cu=function(){return t.au()},this.uu=function(){return t.hu()},this.lu=[],this._u()}return t.prototype.ou=function(t){this.lu.push(t)},t.prototype.ko=function(){window.removeEventListener("online",this.cu),window.removeEventListener("offline",this.uu)},t.prototype._u=function(){window.addEventListener("online",this.cu),window.addEventListener("offline",this.uu)},t.prototype.au=function(){ad("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(0)},t.prototype.hu=function(){ad("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(1)},t.Kn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),bv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},wv=function(){function t(t){this.fu=t.fu,this.du=t.du}return t.prototype.wu=function(t){this.Eu=t},t.prototype.Tu=function(t){this.Iu=t},t.prototype.onMessage=function(t){this.mu=t},t.prototype.close=function(){this.du()},t.prototype.send=function(t){this.fu(t)},t.prototype.Au=function(){this.Eu()},t.prototype.Ru=function(t){this.Iu(t)},t.prototype.Pu=function(t){this.mu(t)},t}(),Ev=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.i=e.i,n}return Object(nd.c)(e,t),e.prototype.Su=function(t,e,n,r){return new Promise(function(i,o){var s=new ed;s.listenOnce(Zh.COMPLETE,function(){try{switch(s.getLastErrorCode()){case Xh.NO_ERROR:var e=s.getResponseJson();ad("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Xh.TIMEOUT:ad("Connection",'RPC "'+t+'" timed out'),o(new wd(bd.DEADLINE_EXCEEDED,"Request time out"));break;case Xh.HTTP_ERROR:var n=s.getStatus();if(ad("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(bd).indexOf(e)>=0?e:bd.UNKNOWN}(r.status);o(new wd(a,r.message))}else o(new wd(bd.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new wd(bd.UNAVAILABLE,"Connection failed."));break;default:hd()}}finally{ad("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.Cu=function(t,e){var n=[this.gu,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Qh,i=$c(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.vu(o.initMessageHeaders,e),Object(tu.t)()||Object(tu.w)()||Object(tu.q)()||Object(tu.s)()||Object(tu.x)()||Object(tu.p)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");ad("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new wv({fu:function(t){c?ad("Connection","Not sending because WebChannel is closed:",t):(u||(ad("Connection","Opening WebChannel transport."),a.open(),u=!0),ad("Connection","WebChannel sending:",t),a.send(t))},du:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,td.EventType.OPEN,function(){c||ad("Connection","WebChannel transport opened.")}),h(a,td.EventType.CLOSE,function(){c||(c=!0,ad("Connection","WebChannel transport closed"),l.Ru())}),h(a,td.EventType.ERROR,function(t){c||(c=!0,cd("Connection","WebChannel transport errored:",t),l.Ru(new wd(bd.UNAVAILABLE,"The operation could not be completed")))}),h(a,td.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];dd(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){ad("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=Np[t];if(void 0!==e)return Vp(e)}(i),s=r.message;void 0===o&&(o=bd.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Ru(new wd(o,s)),a.close()}else ad("Connection","WebChannel received:",n),l.Pu(n)}}),h(i,Jh.STAT_EVENT,function(t){10===t.stat?ad("Connection","Detected buffering proxy"):11===t.stat&&ad("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Au()},0),l},e}(function(){function t(t){this.yu=t,this.t=t.t,this.gu=(t.ssl?"https":"http")+"://"+t.host,this.Vu="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}return t.prototype.pu=function(t,e,n,r){var i=this.bu(t,e);ad("RestConnection","Sending: ",i,n);var o={};return this.vu(o,r),this.Su(t,i,o,n).then(function(t){return ad("RestConnection","Received: ",t),t},function(e){throw cd("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Du=function(t,e,n,r){return this.pu(t,e,n,r)},t.prototype.vu=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.9",t["Content-Type"]="text/plain",e)for(var n in e.g)e.g.hasOwnProperty(n)&&(t[n]=e.g[n])},t.prototype.bu=function(t,e){return this.gu+"/v1/"+e+":"+bv[t]},t}());function Cv(){return"undefined"!=typeof window?window:null}function Ov(){return"undefined"!=typeof document?document:null}function Sv(t){return new yg(t,!0)}var Tv=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Zr=t,this.fs=e,this.xu=n,this.Nu=r,this.$u=i,this.Fu=0,this.Ou=null,this.ku=Date.now(),this.reset()}return t.prototype.reset=function(){this.Fu=0},t.prototype.Mu=function(){this.Fu=this.$u},t.prototype.Lu=function(t){var e=this;this.cancel();var n=Math.floor(this.Fu+this.Bu()),r=Math.max(0,Date.now()-this.ku),i=Math.max(0,n-r);i>0&&ad("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Fu+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ou=this.Zr.Tr(this.fs,i,function(){return e.ku=Date.now(),t()}),this.Fu*=this.Nu,this.Fu<this.xu&&(this.Fu=this.xu),this.Fu>this.$u&&(this.Fu=this.$u)},t.prototype.qu=function(){null!==this.Ou&&(this.Ou.Rs(),this.Ou=null)},t.prototype.cancel=function(){null!==this.Ou&&(this.Ou.cancel(),this.Ou=null)},t.prototype.Bu=function(){return(Math.random()-.5)*this.Fu},t}(),Iv=function(){function t(t,e,n,r,i,o){this.Zr=t,this.Uu=n,this.Qu=r,this.Ku=i,this.listener=o,this.state=0,this.Wu=0,this.ju=null,this.stream=null,this.Gu=new Tv(t,e)}return t.prototype.zu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Hu=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Ju()},t.prototype.stop=function(){return Object(nd.b)(this,void 0,void 0,function(){return Object(nd.d)(this,function(t){switch(t.label){case 0:return this.zu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.Yu=function(){this.state=0,this.Gu.reset()},t.prototype.Xu=function(){var t=this;this.Hu()&&null===this.ju&&(this.ju=this.Zr.Tr(this.Uu,6e4,function(){return t.Zu()}))},t.prototype.th=function(t){this.eh(),this.stream.send(t)},t.prototype.Zu=function(){return Object(nd.b)(this,void 0,void 0,function(){return Object(nd.d)(this,function(t){return this.Hu()?[2,this.close(0)]:[2]})})},t.prototype.eh=function(){this.ju&&(this.ju.cancel(),this.ju=null)},t.prototype.close=function(t,e){return Object(nd.b)(this,void 0,void 0,function(){return Object(nd.d)(this,function(n){switch(n.label){case 0:return this.eh(),this.Gu.cancel(),this.Wu++,3!==t?this.Gu.reset():e&&e.code===bd.RESOURCE_EXHAUSTED?(ud(e.toString()),ud("Using maximum backoff delay to prevent overloading the backend."),this.Gu.Mu()):e&&e.code===bd.UNAUTHENTICATED&&this.Ku.p(),null!==this.stream&&(this.nh(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Tu(e)];case 1:return n.sent(),[2]}})})},t.prototype.nh=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.sh(this.Wu),n=this.Wu;this.Ku.getToken().then(function(e){t.Wu===n&&t.ih(e)},function(n){e(function(){var e=new wd(bd.UNKNOWN,"Fetching auth token failed: "+n.message);return t.rh(e)})})},t.prototype.ih=function(t){var e=this,n=this.sh(this.Wu);this.stream=this.oh(t),this.stream.wu(function(){n(function(){return e.state=2,e.listener.wu()})}),this.stream.Tu(function(t){n(function(){return e.rh(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.Ju=function(){var t=this;this.state=4,this.Gu.Lu(function(){return Object(nd.b)(t,void 0,void 0,function(){return Object(nd.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.rh=function(t){return ad("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.sh=function(t){var e=this;return function(n){e.Zr.Ps(function(){return e.Wu===t?n():(ad("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),xv=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).Qt=i,s}return Object(nd.c)(e,t),e.prototype.oh=function(t){return this.Qu.Cu("Listen",t)},e.prototype.onMessage=function(t){this.Gu.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:hd()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.Bt?(dd(void 0===e||"string"==typeof e),_d.fromBase64String(e||"")):(dd(void 0===e||e instanceof Uint8Array),_d.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?bd.UNKNOWN:Vp(t.code);return new wd(e,t.message||"")}(a);n=new cg(r,i,o,s||null)}else if("documentChange"in e){i=Og(t,(r=e.documentChange).document.name),o=bg(r.document.updateTime);var a=new hf({mapValue:{fields:r.document.fields}}),u=(s=new gf(i,o,a,{}),r.targetIds||[]);n=new ag(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=Og(t,(r=e.documentDelete).document),o=r.readTime?bg(r.readTime):jd.min(),a=new yf(i,o),n=new ag([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Og(t,(r=e.documentRemove).document),n=new ag([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return hd();var c=e.filter;i=new Lp(r=c.count||0),n=new ug(o=c.targetId,i)}return n}(this.Qt,t),n=function(t){if(!("targetChange"in t))return jd.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?jd.min():e.readTime?bg(e.readTime):jd.min()}(t);return this.listener.ah(e,n)},e.prototype.uh=function(t){var e={};e.database=Ig(this.Qt),e.addTarget=function(t,e){var n,r=e.target;return(n=Ef(r)?{documents:Ng(t,r)}:{query:Rg(t,r)}).targetId=e.targetId,e.resumeToken.l()>0?n.resumeToken=vg(t,e.resumeToken):e.Ot._(jd.min())>0&&(n.readTime=mg(t,e.Ot.j())),n}(this.Qt,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return hd()}}(0,e.Ft);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.th(e)},e.prototype.hh=function(t){var e={};e.database=Ig(this.Qt),e.removeTarget=t,this.th(e)},e}(Iv),kv=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).Qt=i,s.lh=!1,s}return Object(nd.c)(e,t),Object.defineProperty(e.prototype,"_h",{get:function(){return this.lh},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.lh=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.nh=function(){this.lh&&this.fh([])},e.prototype.oh=function(t){return this.Qu.Cu("Write",t)},e.prototype.onMessage=function(t){if(dd(!!t.streamToken),this.lastStreamToken=t.streamToken,this.lh){this.Gu.reset();var e=function(t,e){return t&&t.length>0?(dd(void 0!==e),t.map(function(t){return function(t,e){var n=bg(t.updateTime?t.updateTime:e);n.isEqual(jd.min())&&(n=bg(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new vp(n,r)}(t,e)})):[]}(t.writeResults,t.commitTime),n=bg(t.commitTime);return this.listener.dh(n,e)}return dd(!t.writeResults||0===t.writeResults.length),this.lh=!0,this.listener.wh()},e.prototype.Eh=function(){var t={};t.database=Ig(this.Qt),this.th(t)},e.prototype.fh=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return jg(e.Qt,t)})};this.th(n)},e}(Iv),Av=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Qu=n,i.Qt=r,i.Th=!1,i}return Object(nd.c)(e,t),e.prototype.Ih=function(){if(this.Th)throw new wd(bd.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.pu=function(t,e,n){var r=this;return this.Ih(),this.credentials.getToken().then(function(i){return r.Qu.pu(t,e,n,i)}).catch(function(t){throw t.code===bd.UNAUTHENTICATED&&r.credentials.p(),t})},e.prototype.Du=function(t,e,n){var r=this;return this.Ih(),this.credentials.getToken().then(function(i){return r.Qu.Du(t,e,n,i)}).catch(function(t){throw t.code===bd.UNAUTHENTICATED&&r.credentials.p(),t})},e.prototype.terminate=function(){this.Th=!1},e}(function(){}),jv=function(){function t(t,e){this._s=t,this.fa=e,this.state="Unknown",this.mh=0,this.Ah=null,this.Rh=!0}return t.prototype.Ph=function(){var t=this;0===this.mh&&(this.yh("Unknown"),this.Ah=this._s.Tr("online_state_timeout",1e4,function(){return t.Ah=null,t.gh("Backend didn't respond within 10 seconds."),t.yh("Offline"),Promise.resolve()}))},t.prototype.Vh=function(t){"Online"===this.state?this.yh("Unknown"):(this.mh++,this.mh>=1&&(this.ph(),this.gh("Connection failed 1 times. Most recent error: "+t.toString()),this.yh("Offline")))},t.prototype.set=function(t){this.ph(),this.mh=0,"Online"===t&&(this.Rh=!1),this.yh(t)},t.prototype.yh=function(t){t!==this.state&&(this.state=t,this.fa(t))},t.prototype.gh=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Rh?(ud(e),this.Rh=!1):ad("OnlineStateTracker",e)},t.prototype.ph=function(){null!==this.Ah&&(this.Ah.cancel(),this.Ah=null)},t}(),Pv=function(t,e,n,r,i){var o=this;this.bh=t,this.Sh=e,this._s=n,this.Dh={},this.Ch=[],this.xh=new Map,this.Nh=new Set,this.$h=[],this.Fh=i,this.Fh.ou(function(t){n.Ps(function(){return Object(nd.b)(o,void 0,void 0,function(){return Object(nd.d)(this,function(t){switch(t.label){case 0:return qv(this)?(ad("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(nd.b)(this,void 0,void 0,function(){var e;return Object(nd.d)(this,function(n){switch(n.label){case 0:return(e=fd(t)).Nh.add(4),[4,Rv(e)];case 1:return n.sent(),e.Oh.set("Unknown"),e.Nh.delete(4),[4,Nv(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Oh=new jv(n,r)};function Nv(t){return Object(nd.b)(this,void 0,void 0,function(){var e,n;return Object(nd.d)(this,function(r){switch(r.label){case 0:if(!qv(t))return[3,4];e=0,n=t.$h,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Rv(t){return Object(nd.b)(this,void 0,void 0,function(){var e,n;return Object(nd.d)(this,function(r){switch(r.label){case 0:e=0,n=t.$h,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Dv(t,e){var n=fd(t);n.xh.has(e.targetId)||(n.xh.set(e.targetId,e),Uv(n)?Vv(n):n_(n).Hu()&&Lv(n,e))}function Mv(t,e){var n=fd(t),r=n_(n);n.xh.delete(e),r.Hu()&&Fv(n,e),0===n.xh.size&&(r.Hu()?r.Xu():qv(n)&&n.Oh.set("Unknown"))}function Lv(t,e){t.kh.on(e.targetId),n_(t).uh(e)}function Fv(t,e){t.kh.on(e),n_(t).hh(e)}function Vv(t){t.kh=new hg({vn:function(e){return t.Dh.vn(e)},Sn:function(e){return t.xh.get(e)||null}}),n_(t).start(),t.Oh.Ph()}function Uv(t){return qv(t)&&!n_(t).zu()&&t.xh.size>0}function qv(t){return 0===fd(t).Nh.size}function Bv(t){t.kh=void 0}function Hv(t){return Object(nd.b)(this,void 0,void 0,function(){return Object(nd.d)(this,function(e){return t.xh.forEach(function(e,n){Lv(t,e)}),[2]})})}function zv(t,e){return Object(nd.b)(this,void 0,void 0,function(){return Object(nd.d)(this,function(n){return Bv(t),Uv(t)?(t.Oh.Vh(e),Vv(t)):t.Oh.set("Unknown"),[2]})})}function Wv(t,e,n){return Object(nd.b)(this,void 0,void 0,function(){var r,i,o;return Object(nd.d)(this,function(s){switch(s.label){case 0:if(t.Oh.set("Online"),!(e instanceof cg&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(nd.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(nd.d)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.xh.has(o=i[r])?[4,t.Dh.Mh(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.xh.delete(o),t.kh.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),ad("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Qv(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof ag?t.kh.dn(e):e instanceof ug?t.kh.Pn(e):t.kh.Tn(e),n.isEqual(jd.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Um(t.bh)];case 8:return i=s.sent(),n._(i)>=0?[4,function(t,e){var n=t.kh.Vn(e);return n.$e.forEach(function(n,r){if(n.resumeToken.l()>0){var i=t.xh.get(r);i&&t.xh.set(r,i.Mt(n.resumeToken,e))}}),n.Fe.forEach(function(e){var n=t.xh.get(e);if(n){t.xh.set(e,n.Mt(_d.T,n.Ot)),Fv(t,e);var r=new ep(n.target,e,1,n.sequenceNumber);Lv(t,r)}}),t.Dh.Lh(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return ad("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Qv(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function Qv(t,e,n){return Object(nd.b)(this,void 0,void 0,function(){var r=this;return Object(nd.d)(this,function(i){switch(i.label){case 0:if(!Jg(e))throw e;return t.Nh.add(1),[4,Rv(t)];case 1:return i.sent(),t.Oh.set("Offline"),n||(n=function(){return Um(t.bh)}),t._s.po(function(){return Object(nd.b)(r,void 0,void 0,function(){return Object(nd.d)(this,function(e){switch(e.label){case 0:return ad("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Nh.delete(1),[4,Nv(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function Gv(t,e){return e().catch(function(n){return Qv(t,n,e)})}function Kv(t){return Object(nd.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(nd.d)(this,function(s){switch(s.label){case 0:e=fd(t),n=r_(e),r=e.Ch.length>0?e.Ch[e.Ch.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return qv(t)&&t.Ch.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Hm(e.bh,r)];case 3:return null===(i=s.sent())?(0===e.Ch.length&&n.Xu(),[3,7]):(r=i.batchId,function(t,e){t.Ch.push(e);var n=r_(t);n.Hu()&&n._h&&n.fh(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Qv(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return $v(e)&&Yv(e),[2]}})})}function $v(t){return qv(t)&&!r_(t).zu()&&t.Ch.length>0}function Yv(t){r_(t).start()}function Xv(t){return Object(nd.b)(this,void 0,void 0,function(){return Object(nd.d)(this,function(e){return r_(t).Eh(),[2]})})}function Zv(t){return Object(nd.b)(this,void 0,void 0,function(){var e,n,r;return Object(nd.d)(this,function(i){for(e=r_(t),n=0,r=t.Ch;n<r.length;n++)e.fh(r[n].mutations);return[2]})})}function Jv(t,e,n){return Object(nd.b)(this,void 0,void 0,function(){var r,i;return Object(nd.d)(this,function(o){switch(o.label){case 0:return r=t.Ch.shift(),i=Py.from(r,e,n),[4,Gv(t,function(){return t.Dh.Bh(i)})];case 1:return o.sent(),[4,Kv(t)];case 2:return o.sent(),[2]}})})}function t_(t,e){return Object(nd.b)(this,void 0,void 0,function(){return Object(nd.d)(this,function(n){switch(n.label){case 0:return e&&r_(t)._h?[4,function(t,e){return Object(nd.b)(this,void 0,void 0,function(){var n,r;return Object(nd.d)(this,function(i){switch(i.label){case 0:return Fp(r=e.code)&&r!==bd.ABORTED?(n=t.Ch.shift(),r_(t).Yu(),[4,Gv(t,function(){return t.Dh.qh(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,Kv(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return $v(t)&&Yv(t),[2]}})})}function e_(t,e){return Object(nd.b)(this,void 0,void 0,function(){var n;return Object(nd.d)(this,function(r){switch(r.label){case 0:return n=fd(t),e?(n.Nh.delete(2),[4,Nv(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Nh.add(2),[4,Rv(n)]);case 3:r.sent(),n.Oh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function n_(t){var e=this;return t.Uh||(t.Uh=function(t,e,n){var r=fd(t);return r.Ih(),new xv(e,r.Qu,r.credentials,r.Qt,n)}(t.Sh,t._s,{wu:Hv.bind(null,t),Tu:zv.bind(null,t),ah:Wv.bind(null,t)}),t.$h.push(function(n){return Object(nd.b)(e,void 0,void 0,function(){return Object(nd.d)(this,function(e){switch(e.label){case 0:return n?(t.Uh.Yu(),Uv(t)?Vv(t):t.Oh.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Uh.stop()];case 2:e.sent(),Bv(t),e.label=3;case 3:return[2]}})})})),t.Uh}function r_(t){var e=this;return t.Qh||(t.Qh=function(t,e,n){var r=fd(t);return r.Ih(),new kv(e,r.Qu,r.credentials,r.Qt,n)}(t.Sh,t._s,{wu:Xv.bind(null,t),Tu:t_.bind(null,t),wh:Zv.bind(null,t),dh:Jv.bind(null,t)}),t.$h.push(function(n){return Object(nd.b)(e,void 0,void 0,function(){return Object(nd.d)(this,function(e){switch(e.label){case 0:return n?(t.Qh.Yu(),[4,Kv(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qh.stop()];case 3:e.sent(),t.Ch.length>0&&(ad("RemoteStore","Stopping write stream with "+t.Ch.length+" pending writes"),t.Ch=[]),e.label=4;case 4:return[2]}})})})),t.Qh}var i_=function(){this.Kh=void 0,this.listeners=[]},o_=function(){this.queries=new tm(function(t){return Yf(t)},$f),this.onlineState="Unknown",this.Wh=new Set};function s_(t,e){return Object(nd.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(nd.d)(this,function(c){switch(c.label){case 0:if(n=fd(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new i_),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.jh(r)];case 2:return s.Kh=c.sent(),[3,4];case 3:return a=c.sent(),u=oy(a,"Initialization of query '"+Xf(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.Gh(n.onlineState),o.Kh&&e.zh(o.Kh)&&l_(n),[2]}})})}function a_(t,e){return Object(nd.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(nd.d)(this,function(a){return n=fd(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.Hh(r))]:[2]})})}function u_(t,e){for(var n=fd(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].zh(s)&&(r=!0);a.Kh=s}}r&&l_(n)}function c_(t,e,n){var r=fd(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function l_(t){t.Wh.forEach(function(t){t.next()})}var h_=function(){function t(t,e,n){this.query=t,this.Jh=e,this.Yh=!1,this.Xh=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.zh=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new ig(t.query,t.docs,t.Se,e,t.De,t.fromCache,t.Ce,!0)}var o=!1;return this.Yh?this.Zh(t)&&(this.Jh.next(t),o=!0):this.tl(t,this.onlineState)&&(this.el(t),o=!0),this.Xh=t,o},t.prototype.onError=function(t){this.Jh.error(t)},t.prototype.Gh=function(t){this.onlineState=t;var e=!1;return this.Xh&&!this.Yh&&this.tl(this.Xh,t)&&(this.el(this.Xh),e=!0),e},t.prototype.tl=function(t,e){return!t.fromCache||!(this.options.nl&&"Offline"!==e||t.docs.et()&&"Offline"!==e)},t.prototype.Zh=function(t){return t.docChanges.length>0||!!(t.Ce||this.Xh&&this.Xh.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.el=function(t){t=ig.Ne(t.query,t.docs,t.De,t.fromCache),this.Yh=!0,this.Jh.next(t)},t}(),d_=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.sl=function(){return"metadata"in this.payload},t}(),f_=function(){function t(t){this.Qt=t}return t.prototype.Pc=function(t){return Og(this.Qt,t)},t.prototype.yc=function(t){return t.metadata.exists?Ag(this.Qt,t.document,!1):new yf(this.Pc(t.metadata.name),this.gc(t.metadata.readTime))},t.prototype.gc=function(t){return bg(t)},t}();!function(){function t(t,e,n){this.il=t,this.bh=e,this.Qt=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.rl=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.ol=function(t){for(var e=new Map,n=new f_(this.Qt),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.Pc(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||Jp()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(nd.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(nd.d)(this,function(o){switch(o.label){case 0:return[4,Ym(this.bh,new f_(this.Qt),this.documents,this.il.id)];case 1:t=o.sent(),e=this.ol(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,Xm(this.bh,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Pm(Object.assign({},this.progress),t))]}})})}}();var p_=function(t){this.key=t},g_=function(t){this.key=t},y_=function(){function t(t,e){this.query=t,this.cl=e,this.al=null,this.Be=!1,this.ul=Jp(),this.De=Jp(),this.hl=Jf(t),this.ll=new ng(this.hl)}return Object.defineProperty(t.prototype,"_l",{get:function(){return this.cl},enumerable:!1,configurable:!0}),t.prototype.fl=function(t,e){var n=this,r=e?e.dl:new rg,i=e?e.ll:this.ll,o=e?e.De:this.De,s=i,a=!1,u=qf(this.query)&&i.size===this.query.limit?i.last():null,c=Bf(this.query)&&i.size===this.query.limit?i.first():null;if(t.Xt(function(t,e){var l=i.get(t),h=e instanceof gf?e:null;h&&(h=Zf(n.query,h)?h:null);var d=!!l&&n.De.has(l.key),f=!!h&&(h.Vt||n.De.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?d!==f&&(r.track({type:3,doc:h}),p=!0):n.wl(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.hl(h,u)>0||c&&n.hl(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=f?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),qf(this.query)||Bf(this.query))for(;s.size>this.query.limit;){var l=qf(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{ll:s,dl:r,lc:a,De:o}},t.prototype.wl=function(t,e){return t.Vt&&e.hasCommittedMutations&&!e.Vt},t.prototype.wi=function(t,e,n){var r=this,i=this.ll;this.ll=t.ll,this.De=t.De;var o=t.dl.ve();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return hd()}};return n(t)-n(e)}(t.type,e.type)||r.hl(t.doc,e.doc)}),this.El(n);var s=e?this.Tl():[],a=0===this.ul.size&&this.Be?1:0,u=a!==this.al;return this.al=a,0!==o.length||u?{snapshot:new ig(this.query,t.ll,i,o,t.De,0===a,u,!1),Il:s}:{Il:s}},t.prototype.Gh=function(t){return this.Be&&"Offline"===t?(this.Be=!1,this.wi({ll:this.ll,dl:new rg,De:this.De,lc:!1},!1)):{Il:[]}},t.prototype.ml=function(t){return!this.cl.has(t)&&!!this.ll.has(t)&&!this.ll.get(t).Vt},t.prototype.El=function(t){var e=this;t&&(t.qe.forEach(function(t){return e.cl=e.cl.add(t)}),t.Ue.forEach(function(t){}),t.Qe.forEach(function(t){return e.cl=e.cl.delete(t)}),this.Be=t.Be)},t.prototype.Tl=function(){var t=this;if(!this.Be)return[];var e=this.ul;this.ul=Jp(),this.ll.forEach(function(e){t.ml(e.key)&&(t.ul=t.ul.add(e.key))});var n=[];return e.forEach(function(e){t.ul.has(e)||n.push(new g_(e))}),this.ul.forEach(function(t){e.has(t)||n.push(new p_(t))}),n},t.prototype.Al=function(t){this.cl=t.Rc,this.ul=Jp();var e=this.fl(t.documents);return this.wi(e,!0)},t.prototype.Rl=function(){return ig.Ne(this.query,this.ll,this.De,0===this.al)},t}(),m_=function(t,e,n){this.query=t,this.targetId=e,this.view=n},v_=function(t){this.key=t,this.Pl=!1},__=function(){function t(t,e,n,r,i,o){this.bh=t,this.yl=e,this.gl=n,this.Vl=r,this.currentUser=i,this.pl=o,this.bl={},this.vl=new tm(function(t){return Yf(t)},$f),this.Sl=new Map,this.Dl=new Set,this.Cl=new Up(Md.H),this.xl=new Map,this.Nl=new Jm,this.$l={},this.Fl=new Map,this.Ol=cm.Li(),this.onlineState="Unknown",this.kl=void 0}return Object.defineProperty(t.prototype,"Ml",{get:function(){return!0===this.kl},enumerable:!1,configurable:!0}),t}();function b_(t,e){return Object(nd.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(nd.d)(this,function(a){switch(a.label){case 0:return n=$_(t),(i=n.vl.get(e))?(n.Vl.Fa(i.targetId),r=i.view.Rl(),[3,4]):[3,1];case 1:return[4,zm(n.bh,Gf(e))];case 2:return o=a.sent(),s=n.Vl.Fa(o.targetId),[4,w_(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.Ml&&Dv(n.yl,o),a.label=4;case 4:return[2,r]}})})}function w_(t,e,n,r){return Object(nd.b)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(nd.d)(this,function(l){switch(l.label){case 0:return t.Ll=function(e,n,r){return function(t,e,n,r){return Object(nd.b)(this,void 0,void 0,function(){var i,o,s;return Object(nd.d)(this,function(a){switch(a.label){case 0:return(i=e.view.fl(n)).lc?[4,Qm(t.bh,e.query,!1).then(function(t){return e.view.fl(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.$e.get(e.targetId),s=e.view.wi(i,t.Ml,o),[2,(R_(t,e.targetId,s.Il),s.snapshot)]}})})}(t,e,n,r)},[4,Qm(t.bh,e,!0)];case 1:return i=l.sent(),o=new y_(e,i.Rc),s=o.fl(i.documents),a=sg.Le(n,r&&"Offline"!==t.onlineState),u=o.wi(s,t.Ml,a),R_(t,n,u.Il),c=new m_(e,n,o),[2,(t.vl.set(e,c),t.Sl.has(n)?t.Sl.get(n).push(e):t.Sl.set(n,[e]),u.snapshot)]}})})}function E_(t,e){return Object(nd.b)(this,void 0,void 0,function(){var n,r,i;return Object(nd.d)(this,function(o){switch(o.label){case 0:return n=fd(t),r=n.vl.get(e),(i=n.Sl.get(r.targetId)).length>1?[2,(n.Sl.set(r.targetId,i.filter(function(t){return!$f(t,e)})),void n.vl.delete(e))]:n.Ml?(n.Vl.ka(r.targetId),n.Vl.Da(r.targetId)?[3,2]:[4,Wm(n.bh,r.targetId,!1).then(function(){n.Vl.La(r.targetId),Mv(n.yl,r.targetId),P_(n,r.targetId)}).catch(Jy)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return P_(n,r.targetId),[4,Wm(n.bh,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function C_(t,e,n){return Object(nd.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(nd.d)(this,function(a){switch(a.label){case 0:r=Y_(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=fd(t),i=Ad.now(),o=e.reduce(function(t,e){return t.add(e.key)},Jp());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Tc.Xo(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Op(c,n.get(c.key));null!=l&&s.push(new xp(c.key,l,ff(l.proto.mapValue),_p.exists(!0)))}return r.zo.Ri(t,i,s,e)})}).then(function(t){var e=t.xs(n);return{batchId:t.batchId,ri:e}})}(r.bh,e)];case 2:return i=a.sent(),r.Vl.Ca(i.batchId),function(t,e,n){var r=t.$l[t.currentUser.A()];r||(r=new Up(yd)),r=r.zt(e,n),t.$l[t.currentUser.A()]=r}(r,i.batchId,n),[4,L_(r,i.ri)];case 3:return a.sent(),[4,Kv(r.yl)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=oy(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function O_(t,e){return Object(nd.b)(this,void 0,void 0,function(){var n,r;return Object(nd.d)(this,function(i){switch(i.label){case 0:n=fd(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,qm(n.bh,e)];case 2:return r=i.sent(),e.$e.forEach(function(t,e){var r=n.xl.get(e);r&&(dd(t.qe.size+t.Ue.size+t.Qe.size<=1),t.qe.size>0?r.Pl=!0:t.Ue.size>0?dd(r.Pl):t.Qe.size>0&&(dd(r.Pl),r.Pl=!1))}),[4,L_(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Jy(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function S_(t,e,n){var r=fd(t);if(r.Ml&&0===n||!r.Ml&&1===n){var i=[];r.vl.forEach(function(t,n){var r=n.view.Gh(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=fd(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Gh(e)&&(r=!0)}),r&&l_(n)}(r.gl,e),i.length&&r.bl.ah(i),r.onlineState=e,r.Ml&&r.Vl.Qa(e)}}function T_(t,e,n){return Object(nd.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(nd.d)(this,function(c){switch(c.label){case 0:return(r=fd(t)).Vl.Ba(e,"rejected",n),i=r.xl.get(e),(o=i&&i.key)?(s=(s=new Up(Md.H)).zt(o,new yf(o,jd.min())),a=Jp().add(o),u=new og(jd.min(),new Map,new Hp(yd),s,a),[4,O_(r,u)]):[3,2];case 1:return c.sent(),r.Cl=r.Cl.remove(o),r.xl.delete(e),M_(r),[3,4];case 2:return[4,Wm(r.bh,e,!1).then(function(){return P_(r,e,n)}).catch(Jy)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function I_(t,e){return Object(nd.b)(this,void 0,void 0,function(){var n,r,i;return Object(nd.d)(this,function(o){switch(o.label){case 0:n=fd(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Vm(n.bh,e)];case 2:return i=o.sent(),j_(n,r,null),A_(n,r),n.Vl.Na(r,"acknowledged"),[4,L_(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Jy(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function x_(t,e,n){return Object(nd.b)(this,void 0,void 0,function(){var r,i;return Object(nd.d)(this,function(o){switch(o.label){case 0:r=fd(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=fd(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n.zo.Pi(t,e).next(function(e){return dd(null!==e),r=e.keys(),n.zo.Ci(t,e)}).next(function(){return n.zo.$i(t)}).next(function(){return n.Tc.Xo(t,r)})})}(r.bh,e)];case 2:return i=o.sent(),j_(r,e,n),A_(r,e),r.Vl.Na(e,"rejected",n),[4,L_(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Jy(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function k_(t,e){return Object(nd.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(nd.d)(this,function(a){switch(a.label){case 0:qv((n=fd(t)).yl)||ad("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=fd(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.zo.Vi(t)})}(n.bh)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fl.get(r)||[]).push(e),n.Fl.set(r,i),[3,4]);case 3:return o=a.sent(),s=oy(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function A_(t,e){(t.Fl.get(e)||[]).forEach(function(t){t.resolve()}),t.Fl.delete(e)}function j_(t,e,n){var r=fd(t),i=r.$l[r.currentUser.A()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.$l[r.currentUser.A()]=i}}function P_(t,e,n){void 0===n&&(n=null),t.Vl.ka(e);for(var r=0,i=t.Sl.get(e);r<i.length;r++){var o=i[r];t.vl.delete(o),n&&t.bl.Bl(o,n)}t.Sl.delete(e),t.Ml&&t.Nl.Fc(e).forEach(function(e){t.Nl.Fi(e)||N_(t,e)})}function N_(t,e){t.Dl.delete(e.path.rt());var n=t.Cl.get(e);null!==n&&(Mv(t.yl,n),t.Cl=t.Cl.remove(e),t.xl.delete(n),M_(t))}function R_(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof p_?(t.Nl.nr(o.key,e),D_(t,o)):o instanceof g_?(ad("SyncEngine","Document no longer in limbo: "+o.key),t.Nl.ir(o.key,e),t.Nl.Fi(o.key)||N_(t,o.key)):hd()}}function D_(t,e){var n=e.key,r=n.path.rt();t.Cl.get(n)||t.Dl.has(r)||(ad("SyncEngine","New document in limbo: "+n),t.Dl.add(r),M_(t))}function M_(t){for(;t.Dl.size>0&&t.Cl.size<t.pl;){var e=t.Dl.values().next().value;t.Dl.delete(e);var n=new Md(Nd.ot(e)),r=t.Ol.next();t.xl.set(r,new v_(n)),t.Cl=t.Cl.zt(n,r),Dv(t.yl,new ep(Gf(Uf(n.path)),r,2,kd.q))}}function L_(t,e,n){return Object(nd.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(nd.d)(this,function(a){switch(a.label){case 0:return r=fd(t),i=[],o=[],s=[],r.vl.et()?[3,3]:(r.vl.forEach(function(t,a){s.push(r.Ll(a,e,n).then(function(t){if(t){r.Ml&&r.Vl.Ba(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Rm.oc(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.bl.ah(i),[4,function(t,e){return Object(nd.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(nd.d)(this,function(l){switch(l.label){case 0:n=fd(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Kg.forEach(e,function(e){return Kg.forEach(e.ic,function(r){return n.persistence.Ti.nr(t,e.targetId,r)}).next(function(){return Kg.forEach(e.rc,function(r){return n.persistence.Ti.ir(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!Jg(r=l.sent()))throw r;return ad("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.fc.get(a),c=u.Lt(u.Ot),n.fc=n.fc.zt(a,c));return[2]}})})}(r.bh,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function F_(t,e){return Object(nd.b)(this,void 0,void 0,function(){var n,r;return Object(nd.d)(this,function(i){switch(i.label){case 0:return(n=fd(t)).currentUser.isEqual(e)?[3,3]:(ad("SyncEngine","User change. New user:",e.A()),[4,Fm(n.bh,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fl.forEach(function(t){t.forEach(function(t){t.reject(new wd(bd.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fl.clear()}(n),n.Vl.Ua(e,r.mc,r.Ac),[4,L_(n,r.Ic)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function V_(t,e){var n=fd(t),r=n.xl.get(e);if(r&&r.Pl)return Jp().add(r.key);var i=Jp(),o=n.Sl.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.vl.get(a[s]);i=i.Pe(u.view._l)}return i}function U_(t,e){return Object(nd.b)(this,void 0,void 0,function(){var n,r,i;return Object(nd.d)(this,function(o){switch(o.label){case 0:return[4,Qm((n=fd(t)).bh,e.query,!0)];case 1:return r=o.sent(),i=e.view.Al(r),[2,(n.Ml&&R_(n,e.targetId,i.Il),i)]}})})}function q_(t){return Object(nd.b)(this,void 0,void 0,function(){var e;return Object(nd.d)(this,function(n){return[2,Km((e=fd(t)).bh).then(function(t){return L_(e,t)})]})})}function B_(t,e,n,r){return Object(nd.b)(this,void 0,void 0,function(){var i,o;return Object(nd.d)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=fd(t),r=fd(n.zo);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.yi(t,e).next(function(e){return e?n.Tc.Xo(t,e):Kg.resolve(null)})})}((i=fd(t)).bh,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Kv(i.yl)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(j_(i,e,r||null),A_(i,e),function(t,e){fd(fd(t).zo).xi(e)}(i.bh,e)):hd(),s.label=4;case 4:return[4,L_(i,o)];case 5:return s.sent(),[3,7];case 6:ad("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function H_(t,e){return Object(nd.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(nd.d)(this,function(c){switch(c.label){case 0:return $_(n=fd(t)),Y_(n),!0!==e||!0===n.kl?[3,3]:(r=n.Vl.va(),[4,z_(n,r.it())]);case 1:return i=c.sent(),n.kl=!0,[4,e_(n.yl,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)Dv(n.yl,s[o]);return[3,7];case 3:return!1!==e||!1===n.kl?[3,7]:(a=[],u=Promise.resolve(),n.Sl.forEach(function(t,e){n.Vl.Ma(e)?a.push(e):u=u.then(function(){return P_(n,e),Wm(n.bh,e,!0)}),Mv(n.yl,e)}),[4,u]);case 4:return c.sent(),[4,z_(n,a)];case 5:return c.sent(),function(t){var e=fd(t);e.xl.forEach(function(t,n){Mv(e.yl,n)}),e.Nl.Oc(),e.xl=new Map,e.Cl=new Up(Md.H)}(n),n.kl=!1,[4,e_(n.yl,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function z_(t,e,n){return Object(nd.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,d,f,p;return Object(nd.d)(this,function(g){switch(g.label){case 0:n=fd(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Sl.get(a=s[o]))&&0!==c.length?[4,zm(n.bh,Gf(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(d=n.vl.get(h[l]),[4,U_(n,d)]):[3,6];case 4:(f=g.sent()).snapshot&&i.push(f.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Gm(n.bh,a)];case 8:return p=g.sent(),[4,zm(n.bh,p)];case 9:return u=g.sent(),[4,w_(n,W_(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.bl.ah(i),r)]}})})}function W_(t){return Vf(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Q_(t){var e=fd(t);return fd(fd(e.bh).persistence).Uo()}function G_(t,e,n,r){return Object(nd.b)(this,void 0,void 0,function(){var i,o,s;return Object(nd.d)(this,function(a){switch(a.label){case 0:return(i=fd(t)).kl?(ad("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Sl.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Km(i.bh)];case 3:return o=a.sent(),s=og.Me(e,"current"===n),[4,L_(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Wm(i.bh,e,!0)];case 6:return a.sent(),P_(i,e,r),[3,8];case 7:hd(),a.label=8;case 8:return[2]}})})}function K_(t,e,n){return Object(nd.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Object(nd.d)(this,function(d){switch(d.label){case 0:if(!(r=$_(t)).kl)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?r.Sl.has(s=o[i])?(ad("SyncEngine","Adding an already active target "+s),[3,5]):[4,Gm(r.bh,s)]:[3,6];case 2:return a=d.sent(),[4,zm(r.bh,a)];case 3:return u=d.sent(),[4,w_(r,W_(a),u.targetId,!1)];case 4:d.sent(),Dv(r.yl,u),d.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(nd.d)(this,function(e){switch(e.label){case 0:return r.Sl.has(t)?[4,Wm(r.bh,t,!1).then(function(){Mv(r.yl,t),P_(r,t)}).catch(Jy)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,d.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function $_(t){var e=fd(t);return e.yl.Dh.Lh=O_.bind(null,e),e.yl.Dh.vn=V_.bind(null,e),e.yl.Dh.Mh=T_.bind(null,e),e.bl.ah=u_.bind(null,e.gl),e.bl.Bl=c_.bind(null,e.gl),e}function Y_(t){var e=fd(t);return e.yl.Dh.Bh=I_.bind(null,e),e.yl.Dh.qh=x_.bind(null,e),e}var X_=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(nd.b)(this,void 0,void 0,function(){return Object(nd.d)(this,function(e){switch(e.label){case 0:return this.Qt=Sv(t.yu.t),this.Vl=this.Wl(t),this.persistence=this.jl(t),[4,this.persistence.start()];case 1:return e.sent(),this.Gl=this.zl(t),this.bh=this.Hl(t),[2]}})})},t.prototype.zl=function(t){return null},t.prototype.Hl=function(t){return Lm(this.persistence,new Dm,t.Jl,this.Qt)},t.prototype.jl=function(t){return new ov(av.ia,this.Qt)},t.prototype.Wl=function(t){return new mv},t.prototype.terminate=function(){return Object(nd.b)(this,void 0,void 0,function(){return Object(nd.d)(this,function(t){switch(t.label){case 0:return this.Gl&&this.Gl.stop(),[4,this.Vl.ko()];case 1:return t.sent(),[4,this.persistence.ko()];case 2:return t.sent(),[2]}})})},t}(),Z_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Yl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(nd.c)(e,t),e.prototype.initialize=function(e){return Object(nd.b)(this,void 0,void 0,function(){return Object(nd.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,$m(this.bh)];case 2:return n.sent(),[4,this.Yl.initialize(this,e)];case 3:return n.sent(),[4,Y_(this.Yl._a)];case 4:return n.sent(),[4,Kv(this.Yl.yl)];case 5:return n.sent(),[2]}})})},e.prototype.Hl=function(t){return Lm(this.persistence,new Dm,t.Jl,this.Qt)},e.prototype.zl=function(t){return new ym(this.persistence.Ti.lr,t._s)},e.prototype.jl=function(t){var e=jm(t.yu.t,t.yu.persistenceKey),n=void 0!==this.cacheSizeBytes?Zy.Ys(this.cacheSizeBytes):Zy.ti;return new xm(this.synchronizeTabs,e,t.clientId,n,t._s,Cv(),Ov(),this.Qt,this.Vl,!!this.forceOwnership)},e.prototype.Wl=function(t){return new mv},e}(X_),J_=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Yl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(nd.c)(e,t),e.prototype.initialize=function(e){return Object(nd.b)(this,void 0,void 0,function(){var n,r=this;return Object(nd.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Yl._a,this.Vl instanceof yv?(this.Vl._a={eu:B_.bind(null,n),nu:G_.bind(null,n),su:K_.bind(null,n),Uo:Q_.bind(null,n),tu:q_.bind(null,n)},[4,this.Vl.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.Ro(function(t){return Object(nd.b)(r,void 0,void 0,function(){return Object(nd.d)(this,function(e){switch(e.label){case 0:return[4,H_(this.Yl._a,t)];case 1:return e.sent(),this.Gl&&(t&&!this.Gl.Er?this.Gl.start(this.bh):t||this.Gl.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Wl=function(t){var e=Cv();if(!yv.Kn(e))throw new wd(bd.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=jm(t.yu.t,t.yu.persistenceKey);return new yv(e,t._s,n,t.clientId,t.Jl)},e}(Z_),tb=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(nd.b)(this,void 0,void 0,function(){var n=this;return Object(nd.d)(this,function(r){switch(r.label){case 0:return this.bh?[3,2]:(this.bh=t.bh,this.Vl=t.Vl,this.Sh=this.Xl(e),this.yl=this.Zl(e),this.gl=this.t_(e),this._a=this.e_(e,!t.synchronizeTabs),this.Vl.fa=function(t){return S_(n._a,t,1)},this.yl.Dh.n_=F_.bind(null,this._a),[4,e_(this.yl,this._a.Ml)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.t_=function(t){return new o_},t.prototype.Xl=function(t){var e=Sv(t.yu.t),n=new Ev(t.yu);return function(t,e,n){return new Av(t,e,n)}(t.credentials,n,e)},t.prototype.Zl=function(t){var e,n,r,i,o,s=this;return e=this.bh,n=this.Sh,r=t._s,i=function(t){return S_(s._a,t,0)},o=_v.Kn()?new _v:new vv,new Pv(e,n,r,i,o)},t.prototype.e_=function(t,e){return function(t,e,n,r,i,o,s){var a=new __(t,e,n,r,i,o);return s&&(a.kl=!0),a}(this.bh,this.yl,this.gl,this.Vl,t.Jl,t.pl,e)},t.prototype.terminate=function(){return function(t){return Object(nd.b)(this,void 0,void 0,function(){var e;return Object(nd.d)(this,function(n){switch(n.label){case 0:return e=fd(t),ad("RemoteStore","RemoteStore shutting down."),e.Nh.add(5),[4,Rv(e)];case 1:return n.sent(),e.Fh.ko(),e.Oh.set("Unknown"),[2]}})})}(this.yl)},t}(),eb=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.s_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.s_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.i_=function(){this.muted=!0},t.prototype.s_=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),nb=(function(){function t(t,e){var n=this;this.r_=t,this.Qt=e,this.metadata=new Gg,this.buffer=new Uint8Array,this.o_=new TextDecoder("utf-8"),this.c_().then(function(t){t&&t.sl()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.r_.cancel()},t.prototype.getMetadata=function(){return Object(nd.b)(this,void 0,void 0,function(){return Object(nd.d)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Ql=function(){return Object(nd.b)(this,void 0,void 0,function(){return Object(nd.d)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.c_())]}})})},t.prototype.c_=function(){return Object(nd.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(nd.d)(this,function(i){switch(i.label){case 0:return[4,this.a_()];case 1:return null===(t=i.sent())?[2,null]:(e=this.o_.decode(t),n=Number(e),isNaN(n)&&this.u_("length string ("+e+") is not valid number"),[4,this.h_(n)]);case 2:return r=i.sent(),[2,new d_(JSON.parse(r),t.length+n)]}})})},t.prototype.l_=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.a_=function(){return Object(nd.b)(this,void 0,void 0,function(){var t,e;return Object(nd.d)(this,function(n){switch(n.label){case 0:return this.l_()<0?[4,this.__()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.l_())<0&&this.u_("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.h_=function(t){return Object(nd.b)(this,void 0,void 0,function(){var e;return Object(nd.d)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.__()]:[3,3];case 1:n.sent()&&this.u_("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.o_.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.u_=function(t){throw this.r_.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.__=function(){return Object(nd.b)(this,void 0,void 0,function(){var t,e;return Object(nd.d)(this,function(n){switch(n.label){case 0:return[4,this.r_.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new wd(bd.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.f_=new Dd(t)}return t.prototype.isEqual=function(t){return this.f_.isEqual(t.f_)},t}()),rb=function(t){this._methodName=t},ib=function(t){this.d_=t};function ob(t,e,n){if(!n)throw new wd(bd.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function sb(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new wd(bd.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function ab(t,e,n,r){if(!0===e&&!0===r)throw new wd(bd.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function ub(t){if(!Md.wt(t))throw new wd(bd.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function cb(t){if(Md.wt(t))throw new wd(bd.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function lb(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":hd()}function hb(t,e){if("_delegate"in t&&(t=t.d_),!(t instanceof e)){if(e.name===t.constructor.name)throw new wd(bd.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=lb(t);throw new wd(bd.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function db(t,e){if(e<=0)throw new wd(bd.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var fb=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new wd(bd.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new wd(bd.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,ab("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),pb=new Map,gb=function(){function t(t,e){this.w_="(lite)",this.E_=new fb({}),this.T_=!1,t instanceof id?(this.I_=t,this.m_=new Sd):(this.A_=t,this.I_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new wd(bd.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new id(t.options.projectId)}(t),this.m_=new Td(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.A_)throw new wd(bd.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"P_",{get:function(){return void 0!==this.y_},enumerable:!1,configurable:!0}),t.prototype.g_=function(t){if(this.T_)throw new wd(bd.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new fb(t),void 0!==t.credentials&&(this.m_=function(t){if(!t)return new Sd;switch(t.type){case"gapi":var e=t.client;return dd(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new xd(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new wd(bd.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.V_=function(){return this.E_},t.prototype.p_=function(){return this.T_=!0,this.E_},t.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},t.prototype.toJSON=function(){return{app:this.A_,t:this.I_,settings:this.E_}},t.prototype.b_=function(){return(t=pb.get(this))&&(ad("ComponentProvider","Removing Datastore"),pb.delete(this),t.terminate()),Promise.resolve();var t},t}(),yb=function(){function t(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.S_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new vb(this.firestore,this.v_,this.S_.path.X())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.S_)},t}(),mb=function(){function t(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),vb=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Uf(r))||this).firestore=e,i.D_=r,i.type="collection",i}return Object(nd.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.C_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.C_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.D_.X();return t.et()?null:new yb(this.firestore,null,new Md(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.D_)},e}(mb);function _b(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof ib&&(t=t.d_),ob("collection","path",e),t instanceof gb)return cb(n=Nd.ot.apply(Nd,Object(nd.g)([e],r))),new vb(t,null,n);if(!(t instanceof yb||t instanceof vb))throw new wd(bd.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return cb(n=Nd.ot.apply(Nd,Object(nd.g)([t.path],r)).child(Nd.ot(e))),new vb(t.firestore,null,n)}function bb(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof ib&&(t=t.d_),1===arguments.length&&(e=gd.u()),ob("doc","path",e),t instanceof gb)return ub(n=Nd.ot.apply(Nd,Object(nd.g)([e],r))),new yb(t,null,new Md(n));if(!(t instanceof yb||t instanceof vb))throw new wd(bd.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return ub(n=t.D_.child(Nd.ot.apply(Nd,Object(nd.g)([e],r)))),new yb(t.firestore,t instanceof vb?t.v_:null,new Md(n))}function wb(t,e){return t instanceof ib&&(t=t.d_),e instanceof ib&&(e=e.d_),(t instanceof yb||t instanceof vb)&&(e instanceof yb||e instanceof vb)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function Eb(t,e){return t instanceof ib&&(t=t.d_),e instanceof ib&&(e=e.d_),t instanceof mb&&e instanceof mb&&t.firestore===e.firestore&&$f(t.C_,e.C_)&&t.v_===e.v_}var Cb=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new wd(bd.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new wd(bd.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},t.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},t.prototype.U=function(t){return yd(this.x_,t.x_)||yd(this.N_,t.N_)},t}(),Ob=/^__.*__$/,Sb=function(){function t(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return null!==this.Gt?new xp(t,this.data,this.Gt,e,this.fieldTransforms):new Ip(t,this.data,e,this.fieldTransforms)},t}(),Tb=function(){function t(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return new xp(t,this.data,this.Gt,e,this.fieldTransforms)},t}();function Ib(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw hd()}}var xb=function(){function t(t,e,n,r,i,o){this.settings=t,this.t=e,this.Qt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.Gt=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),t.prototype.M_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.t,this.Qt,this.ignoreUndefinedProperties,this.fieldTransforms,this.Gt)},t.prototype.L_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.q_(t),r},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.O_(),r},t.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},t.prototype.K_=function(t){return Kb(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},t.prototype.contains=function(t){return void 0!==this.Gt.find(function(e){return t.nt(e)})||void 0!==this.fieldTransforms.find(function(e){return t.nt(e.field)})},t.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},t.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(Ib(this.k_)&&Ob.test(t))throw this.K_('Document fields cannot begin and end with "__"')},t}(),kb=function(){function t(t,e,n){this.t=t,this.ignoreUndefinedProperties=e,this.Qt=n||Sv(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new xb({k_:t,methodName:e,j_:n,path:Dd.ct(),B_:!1,W_:r},this.t,this.Qt,this.ignoreUndefinedProperties)},t}();function Ab(t){var e=t.p_(),n=Sv(t.I_);return new kb(t.I_,!!e.ignoreUndefinedProperties,n)}function jb(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);zb("Data must be an object, but it was:",s,r);var a,u,c=Bb(r,s);if(o.merge)a=new Ud(s.Gt),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,d=o.mergeFields;h<d.length;h++){var f=Wb(e,d[h],n);if(!s.contains(f))throw new wd(bd.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");$b(l,f)||l.push(f)}a=new Ud(l),u=s.fieldTransforms.filter(function(t){return a.Tt(t.field)})}else a=null,u=s.fieldTransforms;return new Sb(new hf(c),a,u)}var Pb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(nd.c)(e,t),e.prototype.z_=function(t){if(2!==t.k_)throw t.K_(1===t.k_?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.Gt.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(rb);function Nb(t,e,n){return new xb({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.t,e.Qt,e.ignoreUndefinedProperties)}var Rb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(nd.c)(e,t),e.prototype.z_=function(t){return new mp(t.path,new cp)},e.prototype.isEqual=function(t){return t instanceof e},e}(rb),Db=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Object(nd.c)(e,t),e.prototype.z_=function(t){var e=Nb(this,t,!0),n=this.H_.map(function(t){return qb(t,e)}),r=new lp(n);return new mp(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(rb),Mb=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Object(nd.c)(e,t),e.prototype.z_=function(t){var e=Nb(this,t,!0),n=this.H_.map(function(t){return qb(t,e)}),r=new dp(n);return new mp(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(rb),Lb=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).J_=n,r}return Object(nd.c)(e,t),e.prototype.z_=function(t){var e=new pp(t.Qt,ip(t.Qt,this.J_));return new mp(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(rb);function Fb(t,e,n,r){var i=t.G_(1,e,n);zb("Data must be an object, but it was:",i,r);var o=[],s=new df;Fd(r,function(t,r){var a=Gb(e,t,n);r instanceof ib&&(r=r.d_);var u=i.U_(a);if(r instanceof Pb)o.push(a);else{var c=qb(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new Ud(o);return new Tb(s.Pt(),a,i.fieldTransforms)}function Vb(t,e,n,r,i,o){var s=t.G_(1,e,n),a=[Wb(e,r,n)],u=[i];if(o.length%2!=0)throw new wd(bd.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Wb(e,o[c])),u.push(o[c+1]);for(var l=[],h=new df,d=a.length-1;d>=0;--d)if(!$b(l,a[d])){var f=a[d],p=u[d];p instanceof ib&&(p=p.d_);var g=s.U_(f);if(p instanceof Pb)l.push(f);else{var y=qb(p,g);null!=y&&(l.push(f),h.set(f,y))}}var m=new Ud(l);return new Tb(h.Pt(),m,s.fieldTransforms)}function Ub(t,e,n,r){return void 0===r&&(r=!1),qb(n,t.G_(r?4:3,e))}function qb(t,e){if(t instanceof ib&&(t=t.d_),Hb(t))return zb("Unsupported field value:",e,t),Bb(t,e);if(t instanceof rb)return function(t,e){if(!Ib(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.Gt.push(e.path),t instanceof Array){if(e.settings.B_&&4!==e.k_)throw e.K_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=qb(o[i],e.Q_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof ib&&(t=t.d_),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ip(e.Qt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Ad.fromDate(t);return{timestampValue:mg(e.Qt,n)}}if(t instanceof Ad)return n=new Ad(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:mg(e.Qt,n)};if(t instanceof Cb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ed)return{bytesValue:vg(e.Qt,t.I)};if(t instanceof yb){var r=t.firestore.I_;if(!r.isEqual(n=e.t))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:wg(t.firestore.I_||e.t,t.S_.path)}}throw e.K_("Unsupported field value: "+lb(t))}(t,e)}function Bb(t,e){var n={};return Vd(t)?e.path&&e.path.length>0&&e.Gt.push(e.path):Fd(t,function(t,r){var i=qb(r,e.L_(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function Hb(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Ad||t instanceof Cb||t instanceof Ed||t instanceof yb||t instanceof rb)}function zb(t,e,n){if(!Hb(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=lb(n);throw e.K_("an object"===r?t+" a custom object":t+" "+r)}}function Wb(t,e,n){if(e instanceof ib&&(e=e.d_),e instanceof nb)return e.f_;if("string"==typeof e)return Gb(t,e);throw Kb("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Qb=new RegExp("[~\\*/\\[\\]]");function Gb(t,e,n){if(e.search(Qb)>=0)throw Kb("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(nb.bind.apply(nb,Object(nd.g)([void 0],e.split("."))))).f_}catch(r){throw Kb("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Kb(t,e,n,r,i){var o=r&&!r.et(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new wd(bd.INVALID_ARGUMENT,(a+=". ")+t+u)}function $b(t,e){return t.some(function(t){return t.isEqual(e)})}var Yb=function(){function t(t){this.Sh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return t.prototype.ef=function(t){return Object(nd.b)(this,void 0,void 0,function(){var e,n=this;return Object(nd.d)(this,function(r){switch(r.label){case 0:if(this.nf(),this.mutations.length>0)throw new wd(bd.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(nd.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(nd.d)(this,function(u){switch(u.label){case 0:return n=fd(t),r=Ig(n.Qt)+"/documents",i={documents:e.map(function(t){return Cg(n.Qt,t)})},[4,n.Du("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){dd(!!e.found);var n=Og(t,e.found.name),r=bg(e.found.updateTime),i=new hf({mapValue:{fields:e.found.fields}});return new gf(n,r,i,{})}(t,e):"missing"in e?function(t,e){dd(!!e.missing),dd(!!e.readTime);var n=Og(t,e.missing),r=bg(e.readTime);return new yf(n,r)}(t,e):hd()}(n.Qt,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());dd(!!e),a.push(e)}),a)]}})})}(this.Sh,t)];case 1:return[2,((e=r.sent()).forEach(function(t){t instanceof yf||t instanceof gf?n.sf(t):hd()}),e)]}})})},t.prototype.set=function(t,e){this.write(e.F_(t,this.jt(t))),this.tf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},t.prototype.delete=function(t){this.write(new Dp(t,this.jt(t))),this.tf.add(t.toString())},t.prototype.commit=function(){return Object(nd.b)(this,void 0,void 0,function(){var t,e=this;return Object(nd.d)(this,function(n){switch(n.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=Md._t(n);e.mutations.push(new Mp(r,e.jt(r)))}),[4,function(t,e){return Object(nd.b)(this,void 0,void 0,function(){var n,r,i;return Object(nd.d)(this,function(o){switch(o.label){case 0:return n=fd(t),r=Ig(n.Qt)+"/documents",i={writes:e.map(function(t){return jg(n.Qt,t)})},[4,n.pu("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.Sh,this.mutations)];case 1:return n.sent(),this.X_=!0,[2]}})})},t.prototype.sf=function(t){var e;if(t instanceof gf)e=t.version;else{if(!(t instanceof yf))throw hd();e=jd.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new wd(bd.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},t.prototype.jt=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?_p.updateTime(e):_p.Kt()},t.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&e){if(e.isEqual(jd.min()))throw new wd(bd.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return _p.updateTime(e)}return _p.exists(!0)},t.prototype.write=function(t){this.nf(),this.mutations.push(t)},t.prototype.nf=function(){},t}(),Xb=function(){function t(t,e,n,r){this._s=t,this.Sh=e,this.updateFunction=n,this.Es=r,this.cf=5,this.Gu=new Tv(this._s,"transaction_retry")}return t.prototype.run=function(){this.af()},t.prototype.af=function(){var t=this;this.Gu.Lu(function(){return Object(nd.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(nd.d)(this,function(r){return t=new Yb(this.Sh),(e=this.uf(t))&&e.then(function(e){n._s.Ps(function(){return t.commit().then(function(){n.Es.resolve(e)}).catch(function(t){n.hf(t)})})}).catch(function(t){n.hf(t)}),[2]})})})},t.prototype.uf=function(t){try{var e=this.updateFunction(t);return!Kd(e)&&e.catch&&e.then?e:(this.Es.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Es.reject(t),null}},t.prototype.hf=function(t){var e=this;this.cf>0&&this.lf(t)?(this.cf-=1,this._s.Ps(function(){return e.af(),Promise.resolve()})):this.Es.reject(t)},t.prototype.lf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Fp(e)}return!1},t}(),Zb=function(){function t(t,e,n){var r=this;this.credentials=t,this._s=e,this.yu=n,this.user=Cd.UNAUTHENTICATED,this.clientId=gd.u(),this._f=function(){},this.C=new Gg,this.credentials.v(function(t){ad("FirestoreClient","Received user=",t.uid),r.user=t,r._f(t),r.C.resolve()})}return t.prototype.getConfiguration=function(){return Object(nd.b)(this,void 0,void 0,function(){return Object(nd.d)(this,function(t){switch(t.label){case 0:return[4,this.C.promise];case 1:return[2,(t.sent(),{_s:this._s,yu:this.yu,clientId:this.clientId,credentials:this.credentials,Jl:this.user,pl:100})]}})})},t.prototype.ff=function(t){var e=this;this._f=t,this.C.promise.then(function(){return e._f(e.user)})},t.prototype.df=function(){if(this._s.wf)throw new wd(bd.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this._s.Ef();var e=new Gg;return this._s.Tf(function(){return Object(nd.b)(t,void 0,void 0,function(){var t,n;return Object(nd.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.S(),e.resolve(),[3,6];case 5:return t=r.sent(),n=oy(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function Jb(t,e){return Object(nd.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(nd.d)(this,function(o){switch(o.label){case 0:return t._s.Af(),ad("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.Jl,t.ff(function(n){r.isEqual(n)||(r=n,t._s.po(function(){return Object(nd.b)(i,void 0,void 0,function(){return Object(nd.d)(this,function(t){switch(t.label){case 0:return[4,Fm(e.bh,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.Po(function(){return t.terminate()}),t.mf=e,[2]}})})}function tw(t,e){return Object(nd.b)(this,void 0,void 0,function(){var n,r;return Object(nd.d)(this,function(i){switch(i.label){case 0:return t._s.Af(),[4,ew(t)];case 1:return n=i.sent(),ad("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.ff(function(n){return t._s.po(function(){return function(t,e){return Object(nd.b)(this,void 0,void 0,function(){var n,r;return Object(nd.d)(this,function(i){switch(i.label){case 0:return(n=fd(t))._s.Af(),ad("RemoteStore","RemoteStore received new credentials"),r=qv(n),n.Nh.add(3),[4,Rv(n)];case 1:return i.sent(),r&&n.Oh.set("Unknown"),[4,n.Dh.n_(e)];case 2:return i.sent(),n.Nh.delete(3),[4,Nv(n)];case 3:return i.sent(),[2]}})})}(e.yl,n)})}),t.If=e,[2]}})})}function ew(t){return Object(nd.b)(this,void 0,void 0,function(){return Object(nd.d)(this,function(e){switch(e.label){case 0:return t.mf?[3,2]:(ad("FirestoreClient","Using default OfflineComponentProvider"),[4,Jb(t,new X_)]);case 1:e.sent(),e.label=2;case 2:return[2,t.mf]}})})}function nw(t){return Object(nd.b)(this,void 0,void 0,function(){return Object(nd.d)(this,function(e){switch(e.label){case 0:return t.If?[3,2]:(ad("FirestoreClient","Using default OnlineComponentProvider"),[4,tw(t,new tb)]);case 1:e.sent(),e.label=2;case 2:return[2,t.If]}})})}function rw(t){return ew(t).then(function(t){return t.persistence})}function iw(t){return ew(t).then(function(t){return t.bh})}function ow(t){return nw(t).then(function(t){return t.yl})}function sw(t){return nw(t).then(function(t){return t._a})}function aw(t){return Object(nd.b)(this,void 0,void 0,function(){var e,n;return Object(nd.d)(this,function(r){switch(r.label){case 0:return[4,nw(t)];case 1:return e=r.sent(),[2,((n=e.gl).jh=b_.bind(null,e._a),n.Hh=E_.bind(null,e._a),n)]}})})}function uw(t,e,n){var r=this;void 0===n&&(n={});var i=new Gg;return t._s.Ps(function(){return Object(nd.b)(r,void 0,void 0,function(){var r;return Object(nd.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new eb({next:function(o){e.Ps(function(){return a_(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new wd(bd.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new wd(bd.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new h_(Uf(n.path),o,{includeMetadataChanges:!0,nl:!0});return s_(t,s)},[4,aw(t)];case 1:return[2,r.apply(void 0,[o.sent(),t._s,e,n,i])]}})})}),i.promise}function cw(t,e,n){var r=this;void 0===n&&(n={});var i=new Gg;return t._s.Ps(function(){return Object(nd.b)(r,void 0,void 0,function(){var r;return Object(nd.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new eb({next:function(n){e.Ps(function(){return a_(t,s)}),n.fromCache&&"server"===r.source?i.reject(new wd(bd.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new h_(n,o,{includeMetadataChanges:!0,nl:!0});return s_(t,s)},[4,aw(t)];case 1:return[2,r.apply(void 0,[o.sent(),t._s,e,n,i])]}})})}),i.promise}var lw=function(){function t(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.Gu=new Tv(this,"async_queue_retry"),this.vf=function(){var e=Ov();e&&ad("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Gu.qu()};var e=Ov();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),t.prototype.Ps=function(t){this.enqueue(t)},t.prototype.Tf=function(t){this.Sf(),this.Df(t)},t.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=Ov();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf)}},t.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise(function(t){}):this.Df(t)},t.prototype.po=function(t){var e=this;this.Ps(function(){return e.Pf.push(t),e.Cf()})},t.prototype.Cf=function(){return Object(nd.b)(this,void 0,void 0,function(){var t,e=this;return Object(nd.d)(this,function(n){switch(n.label){case 0:if(0===this.Pf.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return n.sent(),this.Pf.shift(),this.Gu.reset(),[3,4];case 3:if(!Jg(t=n.sent()))throw t;return ad("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.Gu.Lu(function(){return e.Cf()}),n.label=5;case 5:return[2]}})})},t.prototype.Df=function(t){var e=this,n=this.Rf.then(function(){return e.pf=!0,t().catch(function(t){throw e.Vf=t,e.pf=!1,ud("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.pf=!1,t})});return this.Rf=n,n},t.prototype.Tr=function(t,e,n){var r=this;this.Sf(),this.bf.indexOf(t)>-1&&(e=0);var i=iy.Ts(this,t,e,n,function(t){return r.xf(t)});return this.gf.push(i),i},t.prototype.Sf=function(){this.Vf&&hd()},t.prototype.Af=function(){},t.prototype.Nf=function(){return Object(nd.b)(this,void 0,void 0,function(){var t;return Object(nd.d)(this,function(e){switch(e.label){case 0:return[4,t=this.Rf];case 1:e.sent(),e.label=2;case 2:if(t!==this.Rf)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.$f=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].fs===t)return!0;return!1},t.prototype.Ff=function(t){var e=this;return this.Nf().then(function(){e.gf.sort(function(t,e){return t.ds-e.ds});for(var n=0,r=e.gf;n<r.length;n++){var i=r[n];if(i.Rs(),"all"!==t&&i.fs===t)break}return e.Nf()})},t.prototype.Of=function(t){this.bf.push(t)},t.prototype.xf=function(t){var e=this.gf.indexOf(t);this.gf.splice(e,1)},t}();function hw(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this.kf={},this.Mf=new Gg,this.Lf={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this.kf={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this.Mf.promise.catch(t)},t.prototype.then=function(t,e){return this.Mf.promise.then(t,e)},t.prototype.ql=function(t){this.Ul(t),this.kf.complete&&this.kf.complete(),this.Mf.resolve(t)},t.prototype.Kl=function(t){this.Lf.taskState="Error",this.kf.next&&this.kf.next(this.Lf),this.kf.error&&this.kf.error(t),this.Mf.reject(t)},t.prototype.Ul=function(t){this.Lf=t,this.kf.next&&this.kf.next(t)}}();var dw=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Bf=new lw,r.w_="name"in e?e.name:"[DEFAULT]",r}return Object(nd.c)(e,t),e.prototype.b_=function(){return this.qf||pw(this),this.qf.terminate()},e}(gb);function fw(t){return t.qf||pw(t),t.qf.df(),t.qf}function pw(t){var e=t.p_(),n=function(t,e,n){return new rd(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.I_,t.w_,e);t.qf=new Zb(t.m_,t.Bf,n)}function gw(t,e,n){var r=this,i=new Gg;return t._s.enqueue(function(){return Object(nd.b)(r,void 0,void 0,function(){var r;return Object(nd.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Jb(t,n)];case 1:return o.sent(),[4,tw(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===bd.FAILED_PRECONDITION||t.code===bd.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function yw(t){if(t.R_||t.P_)throw new wd(bd.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var mw=function(){function t(){}return t.prototype.Uf=function(t,e){switch(void 0===e&&(e="none"),Xd(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Hd(t.integerValue||t.doubleValue);case 3:return this.Qf(t.timestampValue);case 4:return this.Kf(t,e);case 5:return t.stringValue;case 6:return this.Wf(zd(t.bytesValue));case 7:return this.jf(t.referenceValue);case 8:return this.Gf(t.geoPointValue);case 9:return this.zf(t.arrayValue,e);case 10:return this.Hf(t.mapValue,e);default:throw hd()}},t.prototype.Hf=function(t,e){var n=this,r={};return Fd(t.fields||{},function(t,i){r[t]=n.Uf(i,e)}),r},t.prototype.Gf=function(t){return new Cb(Hd(t.latitude),Hd(t.longitude))},t.prototype.zf=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.Uf(t,e)})},t.prototype.Kf=function(t,e){switch(e){case"previous":var n=Qd(t);return null==n?null:this.Uf(n,e);case"estimate":return this.Qf(Gd(t));default:return null}},t.prototype.Qf=function(t){var e=Bd(t);return new Ad(e.seconds,e.nanos)},t.prototype.Jf=function(t,e){var n=Nd.ot(t);dd(Qg(n));var r=new id(n.get(1),n.get(3)),i=new Md(n.Y(5));return r.isEqual(e)||ud("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),vw=function(){function t(t,e,n,r,i){this.Yf=t,this.Xf=e,this.S_=n,this.Zf=r,this.v_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new yb(this.Yf,this.v_,this.S_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.Zf},t.prototype.data=function(){if(this.Zf){if(this.v_){var t=new _w(this.Yf,this.Xf,this.S_,this.Zf,null);return this.v_.fromFirestore(t)}return this.Xf.Uf(this.Zf.bt())}},t.prototype.get=function(t){if(this.Zf){var e=this.Zf.data().field(bw("DocumentSnapshot.get",t));if(null!==e)return this.Xf.Uf(e)}},t}(),_w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(nd.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(vw);function bw(t,e){return"string"==typeof e?Gb(t,e):e instanceof ib?e.d_.f_:e.f_}function ww(t){if(Bf(t)&&0===t.xt.length)throw new wd(bd.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ew=function(){};function Cw(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.td(t)}return t}var Ow=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).ed=e,i.nd=n,i.sd=r,i.type="where",i}return Object(nd.c)(e,t),e.prototype.td=function(t){var e=Ab(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.ut()){if("array-contains"===o||"array-contains-any"===o)throw new wd(bd.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){jw(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(Aw(r,t,l[c]));a={arrayValue:{values:u}}}else a=Aw(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||jw(s,o),a=Ub(n,"where",s,"in"===o||"not-in"===o);var h=Cf.create(i,o,a);return function(t,e){if(e.Ct()){var n=zf(t);if(null!==n&&!n.isEqual(e.field))throw new wd(bd.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Hf(t);null!==r&&Pw(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new wd(bd.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t.C_,0,e,t.firestore.I_,this.ed,this.nd,this.sd);return new mb(t.firestore,t.v_,function(t,e){var n=t.filters.concat([e]);return new Ff(t.path,t.collectionGroup,t.xt.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,n))},e}(Ew),Sw=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ed=e,r.rd=n,r.type="orderBy",r}return Object(nd.c)(e,t),e.prototype.td=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new wd(bd.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new wd(bd.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Rf(e,n);return function(t,e){if(null===Hf(t)){var n=zf(t);null!==n&&Pw(0,n,e.field)}}(t,r),r}(t.C_,this.ed,this.rd);return new mb(t.firestore,t.v_,function(t,e){var n=t.xt.concat([e]);return new Ff(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,e))},e}(Ew),Tw=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.od=n,i.ad=r,i}return Object(nd.c)(e,t),e.prototype.td=function(t){return new mb(t.firestore,t.v_,Kf(t.C_,this.od,this.ad))},e}(Ew),Iw=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ud=n,i.hd=r,i}return Object(nd.c)(e,t),e.prototype.td=function(t){var e=kw(t,this.type,this.ud,this.hd);return new mb(t.firestore,t.v_,function(t,e){return new Ff(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.C_,e))},e}(Ew),xw=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ud=n,i.hd=r,i}return Object(nd.c)(e,t),e.prototype.td=function(t){var e=kw(t,this.type,this.ud,this.hd);return new mb(t.firestore,t.v_,function(t,e){return new Ff(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.C_,e))},e}(Ew);function kw(t,e,n,r){if(n[0]instanceof ib&&(n[0]=n[0].d_),n[0]instanceof vw)return function(t,e,n,r,i){if(!r)throw new wd(bd.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Qf(t);s<a.length;s++){var u=a[s];if(u.field.ut())o.push(of(e,r.key));else{var c=r.field(u.field);if(Wd(c))throw new wd(bd.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.rt();throw new wd(bd.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Pf(o,i)}(t.C_,t.firestore.I_,e,n[0].Zf,r);var i=Ab(t.firestore);return function(t,e,n,r,i,o){var s=t.xt;if(i.length>s.length)throw new wd(bd.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.ut()){if("string"!=typeof c)throw new wd(bd.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Wf(t)&&-1!==c.indexOf("/"))throw new wd(bd.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Nd.ot(c));if(!Md.wt(l))throw new wd(bd.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Md(l);a.push(of(e,h))}else{var d=Ub(n,r,c);a.push(d)}}return new Pf(a,o)}(t.C_,t.firestore.I_,i,e,n,r)}function Aw(t,e,n){if(n instanceof ib&&(n=n.d_),"string"==typeof n){if(""===n)throw new wd(bd.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Wf(e)&&-1!==n.indexOf("/"))throw new wd(bd.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Nd.ot(n));if(!Md.wt(r))throw new wd(bd.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return of(t,new Md(r))}if(n instanceof yb)return of(t,n.S_);throw new wd(bd.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+lb(n)+".")}function jw(t,e){if(!Array.isArray(t)||0===t.length)throw new wd(bd.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new wd(bd.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Pw(t,e,n){if(!n.isEqual(e))throw new wd(bd.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function Nw(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Rw=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(nd.c)(e,t),e.prototype.Wf=function(t){return new Ed(t)},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return new yb(this.firestore,null,e)},e}(mw),Dw=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Mw=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this).Yf=e,a.ld=e,a.metadata=o,a}return Object(nd.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.Zf){if(this.v_){var e=new Lw(this.Yf,this.Xf,this.S_,this.Zf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Xf.Uf(this.Zf.bt(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Zf){var n=this.Zf.data().field(bw("DocumentSnapshot.get",t));if(null!==n)return this.Xf.Uf(n,e.serverTimestamps)}},e}(vw),Lw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(nd.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Mw),Fw=function(){function t(t,e,n,r){this.Yf=t,this.Xf=e,this._d=r,this.metadata=new Dw(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._d.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._d.docs.forEach(function(r){t.call(e,new Lw(n.Yf,n.Xf,r.key,r,new Dw(n._d.De.has(r.key),n._d.fromCache),n.query.v_))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._d.xe)throw new wd(bd.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.fd&&this.dd===e||(this.fd=function(t,e){if(t._d.Se.et()){var n=0;return t._d.docChanges.map(function(e){return{type:"added",doc:new Lw(t.Yf,t.Xf,e.doc.key,e.doc,new Dw(t._d.De.has(e.doc.key),t._d.fromCache),t.query.v_),oldIndex:-1,newIndex:n++}})}var r=t._d.Se;return t._d.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new Lw(t.Yf,t.Xf,e.doc.key,e.doc,new Dw(t._d.De.has(e.doc.key),t._d.fromCache),t.query.v_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Vw(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this.dd=e),this.fd},t}();function Vw(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return hd()}}function Uw(t,e){return t instanceof Mw&&e instanceof Mw?t.Yf===e.Yf&&t.S_.isEqual(e.S_)&&(null===t.Zf?null===e.Zf:t.Zf.isEqual(e.Zf))&&t.v_===e.v_:t instanceof Fw&&e instanceof Fw&&t.Yf===e.Yf&&Eb(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._d.isEqual(e._d)}var qw=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(nd.c)(e,t),e.prototype.Wf=function(t){return new Ed(t)},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return new yb(this.firestore,null,e)},e}(mw);function Bw(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=hb(t,yb);var o=hb(t.firestore,dw),s=Ab(o);return e instanceof ib&&(e=e.d_),zw(o,[("string"==typeof e||e instanceof nb?Vb(s,"updateDoc",t.S_,e,n,r):Fb(s,"updateDoc",t.S_,e)).F_(t.S_,_p.exists(!0))])}function Hw(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof ib&&(t=t.d_);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||hw(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(hw(i[a])){var d=i[a];i[a]=null===(e=d.next)||void 0===e?void 0:e.bind(d),i[a+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),i[a+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof yb)c=hb(t.firestore,dw),l=Uf(t.S_.path),u={next:function(e){i[a]&&i[a](Ww(c,t,e))},error:i[a+1],complete:i[a+2]};else{var f=hb(t,mb);c=hb(f.firestore,dw),l=f.C_;var p=new qw(c);u={next:function(t){i[a]&&i[a](new Fw(c,p,f,t))},error:i[a+1],complete:i[a+2]},ww(t.C_)}return function(t,e,n,r){var i=this,o=new eb(r),s=new h_(e,o,n);return t._s.Ps(function(){return Object(nd.b)(i,void 0,void 0,function(){var e;return Object(nd.d)(this,function(n){switch(n.label){case 0:return e=s_,[4,aw(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.i_(),t._s.Ps(function(){return Object(nd.b)(i,void 0,void 0,function(){var e;return Object(nd.d)(this,function(n){switch(n.label){case 0:return e=a_,[4,aw(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(fw(c),l,h,u)}function zw(t,e){return function(t,e){var n=this,r=new Gg;return t._s.Ps(function(){return Object(nd.b)(n,void 0,void 0,function(){var n;return Object(nd.d)(this,function(i){switch(i.label){case 0:return n=C_,[4,sw(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(fw(t),e)}function Ww(t,e,n){var r=n.docs.get(e.S_),i=new qw(t);return new Mw(t,i,e.S_,r,new Dw(n.hasPendingWrites,n.fromCache),e.v_)}var Qw=function(){function t(t,e){this.Yf=t,this.wd=e,this.Ed=[],this.Td=!1,this.Id=Ab(t)}return t.prototype.set=function(t,e,n){this.md();var r=Gw(t,this.Yf),i=Nw(r.v_,e,n),o=jb(this.Id,"WriteBatch.set",r.S_,i,null!==r.v_,n);return this.Ed.push(o.F_(r.S_,_p.Kt())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.md();var o,s=Gw(t,this.Yf);return e instanceof ib&&(e=e.d_),o="string"==typeof e||e instanceof nb?Vb(this.Id,"WriteBatch.update",s.S_,e,n,r):Fb(this.Id,"WriteBatch.update",s.S_,e),this.Ed.push(o.F_(s.S_,_p.exists(!0))),this},t.prototype.delete=function(t){this.md();var e=Gw(t,this.Yf);return this.Ed=this.Ed.concat(new Dp(e.S_,_p.Kt())),this},t.prototype.commit=function(){return this.md(),this.Td=!0,this.Ed.length>0?this.wd(this.Ed):Promise.resolve()},t.prototype.md=function(){if(this.Td)throw new wd(bd.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Gw(t,e){if(t instanceof ib&&(t=t.d_),t.firestore!==e)throw new wd(bd.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Kw=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Yf=e,r}return Object(nd.c)(e,t),e.prototype.get=function(e){var n=this,r=Gw(e,this.Yf),i=new qw(this.Yf);return t.prototype.get.call(this,e).then(function(t){return new Mw(n.Yf,i,r.S_,t.Zf,new Dw(!1,!1),r.v_)})},e}(function(){function t(t,e){this.Yf=t,this.Ad=e,this.Id=Ab(t)}return t.prototype.get=function(t){var e=this,n=Gw(t,this.Yf),r=new Rw(this.Yf);return this.Ad.ef([n.S_]).then(function(t){if(!t||1!==t.length)return hd();var i=t[0];if(i instanceof yf)return new vw(e.Yf,r,n.S_,null,n.v_);if(i instanceof gf)return new vw(e.Yf,r,i.key,i,n.v_);throw hd()})},t.prototype.set=function(t,e,n){var r=Gw(t,this.Yf),i=Nw(r.v_,e,n),o=jb(this.Id,"Transaction.set",r.S_,i,null!==r.v_,n);return this.Ad.set(r.S_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Gw(t,this.Yf);return e instanceof ib&&(e=e.d_),o="string"==typeof e||e instanceof nb?Vb(this.Id,"Transaction.update",s.S_,e,n,r):Fb(this.Id,"Transaction.update",s.S_,e),this.Ad.update(s.S_,o),this},t.prototype.delete=function(t){var e=Gw(t,this.Yf);return this.Ad.delete(e.S_),this},t}());function $w(){if("undefined"==typeof Uint8Array)throw new wd(bd.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Yw(){if("undefined"==typeof atob)throw new wd(bd.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Xw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(nd.c)(e,t),e.fromBase64String=function(t){return Yw(),new e(Ed.fromBase64String(t))},e.fromUint8Array=function(t){return $w(),new e(Ed.fromUint8Array(t))},e.prototype.toBase64=function(){return Yw(),this.d_.toBase64()},e.prototype.toUint8Array=function(){return $w(),this.d_.toUint8Array()},e.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(ib),Zw=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){yw(t=hb(t,dw));var n=fw(t),r=t.p_(),i=new tb;return gw(n,i,new Z_(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t.d_,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){yw(t=hb(t,dw));var e=fw(t),n=t.p_(),r=new tb;return gw(e,r,new J_(r,n.cacheSizeBytes))}(t.d_)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.R_&&!t.P_)throw new wd(bd.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Gg;return t.Bf.Tf(function(){return Object(nd.b)(e,void 0,void 0,function(){var e;return Object(nd.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(nd.b)(this,void 0,void 0,function(){return Object(nd.d)(this,function(e){switch(e.label){case 0:return Yg.Kn()?[4,Yg.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(jm(t.I_,t.w_))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t.d_)},t}(),Jw=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Rd=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof id||(i.Pd=e),i}return Object(nd.c)(e,t),Object.defineProperty(e.prototype,"I_",{get:function(){return this.d_.I_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.d_.V_()),t)).merge,this.d_.g_(t)},e.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=hb(t,gb)).V_();"firestore.googleapis.com"!==r.host&&r.host!==e&&cd("Host has been set in both settings() and useEmulator(), emulator host will be used"),t.g_(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this.d_,t,e)},e.prototype.enableNetwork=function(){return function(t){var e=this;return t._s.enqueue(function(){return Object(nd.b)(e,void 0,void 0,function(){var e,n;return Object(nd.d)(this,function(r){switch(r.label){case 0:return[4,rw(t)];case 1:return e=r.sent(),[4,ow(t)];case 2:return n=r.sent(),[2,(e.yo(!0),function(t){var e=fd(t);return e.Nh.delete(0),Nv(e)}(n))]}})})})}(fw(hb(this.d_,dw)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t._s.enqueue(function(){return Object(nd.b)(e,void 0,void 0,function(){var e,n;return Object(nd.d)(this,function(r){switch(r.label){case 0:return[4,rw(t)];case 1:return e=r.sent(),[4,ow(t)];case 2:return n=r.sent(),[2,(e.yo(!1),function(t){return Object(nd.b)(this,void 0,void 0,function(){var e;return Object(nd.d)(this,function(n){switch(n.label){case 0:return(e=fd(t)).Nh.add(0),[4,Rv(e)];case 1:return n.sent(),e.Oh.set("Offline"),[2]}})})}(n))]}})})})}(fw(hb(this.d_,dw)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&ab("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Rd.enableMultiTabIndexedDbPersistence(this):this.Rd.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Rd.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.Pd&&(this.Pd._removeServiceInstance("firestore"),this.Pd._removeServiceInstance("firestore-exp")),this.d_._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Gg;return t._s.Ps(function(){return Object(nd.b)(e,void 0,void 0,function(){var e;return Object(nd.d)(this,function(r){switch(r.label){case 0:return e=k_,[4,sw(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(fw(hb(this.d_,dw)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new eb(e);return t._s.Ps(function(){return Object(nd.b)(n,void 0,void 0,function(){var e;return Object(nd.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){fd(t).Wh.add(e),e.next()},[4,aw(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.i_(),t._s.Ps(function(){return Object(nd.b)(n,void 0,void 0,function(){var e;return Object(nd.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){fd(t).Wh.delete(e)},[4,aw(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(fw(t=hb(t,dw)),hw(e)?e:{next:e})}(this.d_,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.Pd)throw new wd(bd.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Pd},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new fE(this,_b(this.d_,t))}catch(t){throw oE(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new iE(this,bb(this.d_,t))}catch(t){throw oE(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new lE(this,function(t,e){if(t=hb(t,gb),ob("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new wd(bd.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new mb(t,null,function(t){return new Ff(Nd.ct(),t)}(e))}(this.d_,t))}catch(t){throw oE(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Gg;return t._s.Ps(function(){return Object(nd.b)(n,void 0,void 0,function(){var n;return Object(nd.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return nw(t).then(function(t){return t.Sh})}(t)];case 1:return n=i.sent(),new Xb(t._s,n,e,r).run(),[2]}})})}),r.promise}(fw(t),function(n){return e(new Kw(t,n))})}(this.d_,function(n){return t(new eE(e,n))})},e.prototype.batch=function(){var t=this;return fw(this.d_),new nE(new Qw(this.d_,function(e){return zw(t.d_,e)}))},e.prototype.loadBundle=function(t){throw new wd(bd.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new wd(bd.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(ib),tE=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(nd.c)(e,t),e.prototype.Wf=function(t){return new Xw(new Ed(t))},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return iE.yd(e,this.firestore,null)},e}(mw),eE=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r.Xf=new tE(e),r}return Object(nd.c)(e,t),e.prototype.get=function(t){var e=this,n=pE(t);return this.d_.get(n).then(function(t){return new uE(e.Yf,new Mw(e.Yf.d_,e.Xf,t.S_,t.Zf,t.metadata,n.v_))})},e.prototype.set=function(t,e,n){var r=pE(t);return n?(sb("Transaction.set",n),this.d_.set(r,e,n)):this.d_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=pE(t);return 2===arguments.length?this.d_.update(s,e):(r=this.d_).update.apply(r,Object(nd.g)([s,e,n],i)),this},e.prototype.delete=function(t){var e=pE(t);return this.d_.delete(e),this},e}(ib),nE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(nd.c)(e,t),e.prototype.set=function(t,e,n){var r=pE(t);return n?(sb("WriteBatch.set",n),this.d_.set(r,e,n)):this.d_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=pE(t);return 2===arguments.length?this.d_.update(s,e):(r=this.d_).update.apply(r,Object(nd.g)([s,e,n],i)),this},e.prototype.delete=function(t){var e=pE(t);return this.d_.delete(e),this},e.prototype.commit=function(){return this.d_.commit()},e}(ib),rE=function(t){function e(e,n,r){var i=this;return(i=t.call(this,r)||this).Yf=e,i.Xf=n,i}return Object(nd.c)(e,t),e.prototype.fromFirestore=function(t,e){var n=new Lw(this.Yf.d_,this.Xf,t.S_,t.Zf,t.metadata,null);return this.d_.fromFirestore(new cE(this.Yf,n),null!=e?e:{})},e.prototype.toFirestore=function(t,e){return e?this.d_.toFirestore(t,e):this.d_.toFirestore(t)},e.gd=function(t,n){var r=e.Vd,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new tE(t),n),i.set(n,o)),o},e}(ib);rE.Vd=new WeakMap;var iE=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Xf=new tE(e),r}return Object(nd.c)(e,t),e.pd=function(t,n,r){if(t.length%2!=0)throw new wd(bd.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.rt()+" has "+t.length);return new e(n,new yb(n.d_,r,new Md(t)))},e.yd=function(t,n,r){return new e(n,new yb(n.d_,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new fE(this.firestore,this.d_.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new fE(this.firestore,_b(this.d_,t))}catch(t){throw oE(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof ib&&(t=t.d_),t instanceof yb&&wb(this.d_,t)},e.prototype.set=function(t,e){e=sb("DocumentReference.set",e);try{return function(t,e,n){t=hb(t,yb);var r=hb(t.firestore,dw),i=Nw(t.v_,e,n);return zw(r,[jb(Ab(r),"setDoc",t.S_,i,null!==t.v_,n).F_(t.S_,_p.Kt())])}(this.d_,t,e)}catch(t){throw oE(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Bw(this.d_,t):Bw.apply(void 0,Object(nd.g)([this.d_,t,e],n))}catch(t){throw oE(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return zw(hb((t=this.d_).firestore,dw),[new Dp(t.S_,_p.Kt())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=sE(e),i=aE(e,function(e){return new uE(t.firestore,new Mw(t.firestore.d_,t.Xf,e.S_,e.Zf,e.metadata,t.d_.v_))});return Hw(this.d_,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=hb(t,yb);var e=hb(t.firestore,dw),n=fw(e),r=new qw(e);return function(t,e){var n=this,r=new Gg;return t._s.Ps(function(){return Object(nd.b)(n,void 0,void 0,function(){var n;return Object(nd.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(nd.b)(this,void 0,void 0,function(){var r,i;return Object(nd.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=fd(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Tc.Ho(t,e)})}(t,e)];case 1:return(i=o.sent())instanceof gf?n.resolve(i):i instanceof yf?n.resolve(null):n.reject(new wd(bd.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=oy(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,iw(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t.S_).then(function(n){return new Mw(e,r,t.S_,n,new Dw(n instanceof gf&&n.Vt,!0),t.v_)})}(this.d_):"server"===(null==t?void 0:t.source)?function(t){t=hb(t,yb);var e=hb(t.firestore,dw);return uw(fw(e),t.S_,{source:"server"}).then(function(n){return Ww(e,t,n)})}(this.d_):function(t){t=hb(t,yb);var e=hb(t.firestore,dw);return uw(fw(e),t.S_).then(function(n){return Ww(e,t,n)})}(this.d_)).then(function(t){return new uE(e.firestore,new Mw(e.firestore.d_,e.Xf,t.S_,t.Zf,t.metadata,e.d_.v_))})},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(rE.gd(this.firestore,t)))},e}(ib);function oE(t,e,n){return t.message=t.message.replace(e,n),t}function sE(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!hw(r))return r}return{}}function aE(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=hw(t[0])?t[0]:hw(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var uE=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return Object(nd.c)(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new iE(this.Yf,this.d_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this.d_.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this.d_.data(t)},e.prototype.get=function(t,e){return this.d_.get(t,e)},e.prototype.isEqual=function(t){return Uw(this.d_,t.d_)},e}(ib),cE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(nd.c)(e,t),e.prototype.data=function(t){return this.d_.data(t)},e}(uE),lE=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Xf=new tE(e),r}return Object(nd.c)(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,Cw(this.d_,function(t,e,n){var r=e,i=bw("where",t);return new Ow(i,r,n)}(t,n,r)))}catch(t){throw oE(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,Cw(this.d_,function(t,e){void 0===e&&(e="asc");var n=e,r=bw("orderBy",t);return new Sw(r,n)}(t,n)))}catch(t){throw oE(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,Cw(this.d_,function(t){return db("limit",t),new Tw("limit",t,"F")}(t)))}catch(t){throw oE(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,Cw(this.d_,function(t){return db("limitToLast",t),new Tw("limitToLast",t,"L")}(t)))}catch(t){throw oE(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Cw(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Iw("startAt",t,!0)}).apply(void 0,t)))}catch(t){throw oE(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Cw(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Iw("startAfter",t,!1)}).apply(void 0,t)))}catch(t){throw oE(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Cw(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new xw("endBefore",t,!0)}).apply(void 0,t)))}catch(t){throw oE(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Cw(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new xw("endAt",t,!1)}).apply(void 0,t)))}catch(t){throw oE(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return Eb(this.d_,t.d_)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=hb(t,mb);var e=hb(t.firestore,dw),n=fw(e),r=new qw(e);return function(t,e){var n=this,r=new Gg;return t._s.Ps(function(){return Object(nd.b)(n,void 0,void 0,function(){var n;return Object(nd.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(nd.b)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(nd.d)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Qm(t,e,!0)];case 1:return a=u.sent(),r=new y_(e,a.Rc),i=r.fl(a.documents),o=r.wi(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=oy(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,iw(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t.C_).then(function(n){return new Fw(e,r,t,n)})}(this.d_):"server"===(null==t?void 0:t.source)?function(t){t=hb(t,mb);var e=hb(t.firestore,dw),n=fw(e),r=new qw(e);return cw(n,t.C_,{source:"server"}).then(function(n){return new Fw(e,r,t,n)})}(this.d_):function(t){t=hb(t,mb);var e=hb(t.firestore,dw),n=fw(e),r=new qw(e);return ww(t.C_),cw(n,t.C_).then(function(n){return new Fw(e,r,t,n)})}(this.d_)).then(function(t){return new dE(e.firestore,new Fw(e.firestore.d_,e.Xf,e.d_,t._d))})},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=sE(e),i=aE(e,function(e){return new dE(t.firestore,new Fw(t.firestore.d_,t.Xf,t.d_,e._d))});return Hw(this.d_,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(rE.gd(this.firestore,t)))},e}(ib),hE=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return Object(nd.c)(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this.d_.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new cE(this.Yf,this.d_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this.d_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this.d_.newIndex},enumerable:!1,configurable:!0}),e}(ib),dE=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return Object(nd.c)(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new lE(this.Yf,this.d_.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.d_.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.d_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this.d_.docs.map(function(e){return new cE(t.Yf,e)})},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this.d_.docChanges(t).map(function(t){return new hE(e.Yf,t)})},e.prototype.forEach=function(t,e){var n=this;this.d_.forEach(function(r){t.call(e,new cE(n.Yf,r))})},e.prototype.isEqual=function(t){return Uw(this.d_,t.d_)},e}(ib),fE=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r.d_=n,r}return Object(nd.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.d_.parent;return t?new iE(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new iE(this.firestore,void 0===t?bb(this.d_):bb(this.d_,t))}catch(t){throw oE(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=hb(t.firestore,dw),r=bb(t),i=Nw(t.v_,e);return zw(n,[jb(Ab(t.firestore),"addDoc",r.S_,i,null!==t.v_,{}).F_(r.S_,_p.exists(!1))]).then(function(){return r})}(this.d_,t).then(function(t){return new iE(e.firestore,t)})},e.prototype.isEqual=function(t){return wb(this.d_,t.d_)},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(rE.gd(this.firestore,t)))},e}(lE);function pE(t){return t instanceof ib&&(t=t.d_),hb(t,yb)}var gE,yE=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(nb.bind.apply(nb,Object(nd.g)([void 0],e))))||this}return Object(nd.c)(e,t),e.documentId=function(){return new e(Dd.ht().rt())},e.prototype.isEqual=function(t){return t instanceof ib&&(t=t.d_),t instanceof nb&&this.d_.f_.isEqual(t.f_)},e}(ib),mE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(nd.c)(e,t),e.serverTimestamp=function(){var t=new Rb("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new Pb("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Db("arrayUnion",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Mb("arrayRemove",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new Lb("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},e}(ib),vE=n("/6Yf"),_E={Firestore:Jw,GeoPoint:Cb,Timestamp:Ad,Blob:Xw,Transaction:eE,WriteBatch:nE,DocumentReference:iE,DocumentSnapshot:uE,Query:lE,QueryDocumentSnapshot:cE,QuerySnapshot:dE,CollectionReference:fE,FieldPath:yE,FieldValue:mE,setLogLevel:function(t){od.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function bE(t,e){return function(t,e=wt.b){return new Qt.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function wE(t,e){return bE(t,e).pipe(Object(xt.a)(t=>({payload:t,type:"query"})))}function EE(t,e){return wE(t,e).pipe(ae(void 0),Wa(),Object(xt.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function CE(t,e,n){return EE(t,n).pipe(di((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return OE(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return OE(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return OE(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),Ka(),Object(xt.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function OE(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function SE(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(function(t,e){t.INTERNAL.registerComponent(new vE.a("firestore",function(t){return function(t,e){return new Jw(t,new dw(t,e),new Zw)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},_E)))})(gE=Za.a),gE.registerVersion("@firebase/firestore","2.1.7");class TE{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=EE(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(xt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(ae(void 0),Wa(),St(([t,e])=>e.length>0||!t),Object(xt.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(di((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=SE(t);return CE(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return wE(this.query,this.afs.schedulers.outsideAngular).pipe(Object(xt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(Gr.a)(this.query.get(t)).pipe(Object(xa.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new IE(this.ref.doc(t),this.afs)}}class IE{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=NE(n,e);return new TE(r,i,this.afs)}snapshotChanges(){return bE(this.ref,this.afs.schedulers.outsideAngular).pipe(ae(void 0),Wa(),Object(xt.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(xt.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(Gr.a)(this.ref.get(t)).pipe(Object(xa.b)(this.afs.schedulers.insideAngular))}}class xE{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?EE(this.query,this.afs.schedulers.outsideAngular).pipe(Object(xt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),St(t=>t.length>0),this.afs.keepUnstableUntilFirst):EE(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(di((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=SE(t);return CE(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return wE(this.query,this.afs.schedulers.outsideAngular).pipe(Object(xt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(Gr.a)(this.query.get(t)).pipe(Object(xa.b)(this.afs.schedulers.insideAngular))}}const kE=new r.r("angularfire2.enableFirestorePersistence"),AE=new r.r("angularfire2.firestore.persistenceSettings"),jE=new r.r("angularfire2.firestore.settings"),PE=new r.r("angularfire2.firestore.use-emulator");function NE(t,e=(t=>t)){return{query:e(t),ref:t}}let RE=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new Ma.d(o),this.keepUnstableUntilFirst=Object(Ma.h)(this.schedulers);const c=Object(Ma.g)(t,o,e);!Xa.a.auth&&u&&Object(Ma.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(Ma.f)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!M(i)){const e=()=>{try{return Object(Gr.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(gE){return"undefined"!=typeof console&&console.warn(gE),Object(mt.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(mt.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=NE(n,e),o=this.schedulers.ngZone.run(()=>r);return new TE(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new xE(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new IE(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(Ma.c),r.Tb(Ma.b,8),r.Tb(kE,8),r.Tb(jE,8),r.Tb(r.C),r.Tb(r.A),r.Tb(AE,8),r.Tb(PE,8),r.Tb(La,8))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Tb)(Ma.c),Object(r.Tb)(Ma.b,8),Object(r.Tb)(kE,8),Object(r.Tb)(jE,8),Object(r.Tb)(r.C),Object(r.Tb)(r.A),Object(r.Tb)(AE,8),Object(r.Tb)(PE,8),Object(r.Tb)(La,8))},token:t,providedIn:"any"}),t})(),DE=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:kE,useValue:!0},{provide:AE,useValue:e}]}}}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},providers:[RE]}),t})(),ME=(()=>{class t{constructor(t){this.db=t,this.model=new Ta}addTask(t){if(localStorage.getItem("user"))return this.db.collection("Items").add(t)}deleteTask(t){localStorage.getItem("user")&&this.db.collection("Items").doc(t).delete().then(()=>{console.log("Document successfully deleted!")}).catch(t=>{console.error("Error removing document: ",t)})}getTasks(){var t=[];return localStorage.getItem("user")&&this.db.collection("Items").ref.where("userId","==",localStorage.getItem("uid")).get().then(e=>{e.forEach(e=>{t.push({data:e.data(),id:e.id})})}),t}check(t){this.db.collection("Items").doc("/"+t).update({status:!0}).then(()=>{console.log("done")}).catch(function(t){console.error("Error writing document: ",t)})}uncheck(t){this.db.collection("Items").doc("/"+t).update({status:!1}).then(()=>{console.log("done")}).catch(function(t){console.error("Error writing document: ",t)})}updateItem(t,e){this.db.collection("Items").doc("/"+t).update({item:e}).then(()=>{console.log("done")}).catch(function(t){console.error("Error writing document: ",t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(RE))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var LE=n("7Hc7");function FE(t){return e=>e.lift(new VE(t))}class VE{constructor(t){this.notifier=t}call(t,e){const n=new UE(t),r=Object(ui.c)(this.notifier,new ui.a(n));return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n}}class UE extends ui.b{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}var qE=n("WMd4");function BE(t,e=wt.a){var n;const r=(n=t)instanceof Date&&!isNaN(+n)?+t-e.now():Math.abs(t);return t=>t.lift(new HE(r,e))}class HE{constructor(t,e){this.delay=t,this.scheduler=e}call(t,e){return e.subscribe(new zE(t,this.delay,this.scheduler))}}class zE extends bt.a{constructor(t,e,n){super(t),this.delay=e,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}static dispatch(t){const e=t.source,n=e.queue,r=t.scheduler,i=t.destination;for(;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){const e=Math.max(0,n[0].time-r.now());this.schedule(t,e)}else this.unsubscribe(),e.active=!1}_schedule(t){this.active=!0,this.destination.add(t.schedule(zE.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}scheduleNotification(t){if(!0===this.errored)return;const e=this.scheduler,n=new WE(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}_next(t){this.scheduleNotification(qE.a.createNext(t))}_error(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}_complete(){this.scheduleNotification(qE.a.createComplete()),this.unsubscribe()}}class WE{constructor(t,e){this.time=t,this.notification=e}}class QE{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class GE extends QE{constructor(t,e,n,r){super(),this.component=t,this.viewContainerRef=e,this.injector=n,this.componentFactoryResolver=r}}class KE extends QE{constructor(t,e,n){super(),this.templateRef=t,this.viewContainerRef=e,this.context=n}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class $E extends QE{constructor(t){super(),this.element=t instanceof r.l?t.nativeElement:t}}class YE extends class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof GE?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof KE?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof $E?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(t,e,n,r,i){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=n,this._defaultInjector=r,this.attachDomPortal=t=>{const e=t.element,n=this._document.createComment("dom-portal");e.parentNode.insertBefore(n,e),this.outletElement.appendChild(e),super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(e,n)})},this._document=i}attachComponentPortal(t){const e=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let n;return t.viewContainerRef?(n=t.viewContainerRef.createComponent(e,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>n.destroy())):(n=e.create(t.injector||this._defaultInjector),this._appRef.attachView(n.hostView),this.setDisposeFn(()=>{this._appRef.detachView(n.hostView),n.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(n)),n}attachTemplatePortal(t){let e=t.viewContainerRef,n=e.createEmbeddedView(t.templateRef,t.context);return n.rootNodes.forEach(t=>this.outletElement.appendChild(t)),n.detectChanges(),this.setDisposeFn(()=>{let t=e.indexOf(n);-1!==t&&e.remove(t)}),n}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let XE=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)}}),t})();var ZE=n("n6bG");function JE(t,e,n,r){return Object(ZE.a)(n)&&(r=n,n=void 0),r?JE(t,e,n).pipe(Object(xt.a)(t=>Object(Yr.a)(t)?r(...t):r(t))):new Qt.a(r=>{tC(t,e,function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},r,n)})}function tC(t,e,n,r,i){let o;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const r=t;t.addEventListener(e,n,i),o=()=>r.removeEventListener(e,n,i)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const r=t;t.on(e,n),o=()=>r.off(e,n)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const r=t;t.addListener(e,n),o=()=>r.removeListener(e,n)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let o=0,s=t.length;o<s;o++)tC(t[o],e,n,r,i)}r.add(o)}n("3N8a"),n("IjjT");class eC{constructor(t){this.durationSelector=t}call(t,e){return e.subscribe(new nC(t,this.durationSelector))}}class nC extends ui.b{constructor(t,e){super(t),this.durationSelector=e,this.hasValue=!1}_next(t){if(this.value=t,this.hasValue=!0,!this.throttled){let n;try{const{durationSelector:e}=this;n=e(t)}catch(e){return this.destination.error(e)}const r=Object(ui.c)(n,new ui.a(this));!r||r.closed?this.clearThrottle():this.add(this.throttled=r)}}clearThrottle(){const{value:t,hasValue:e,throttled:n}=this;n&&(this.remove(n),this.throttled=void 0,n.unsubscribe()),e&&(this.value=void 0,this.hasValue=!1,this.destination.next(t))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}var rC=n("Y7HM");function iC(t){const{index:e,period:n,subscriber:r}=t;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}function oC(t,e=wt.a){return n=()=>function(t=0,e,n){let r=-1;return Object(rC.a)(e)?r=Number(e)<1?1:Number(e):Object(se.a)(e)&&(n=e),Object(se.a)(n)||(n=wt.a),new Qt.a(e=>{const i=Object(rC.a)(t)?t:+t-n.now();return n.schedule(iC,i,{index:0,period:r,subscriber:e})})}(t,e),function(t){return t.lift(new eC(n))};var n}let sC=(()=>{class t{constructor(t,e,n){this._ngZone=t,this._platform=e,this._scrolled=new gt.a,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=n}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const e=this.scrollContainers.get(t);e&&(e.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Qt.a(e=>{this._globalSubscription||this._addGlobalListener();const n=t>0?this._scrolled.pipe(oC(t)).subscribe(e):this._scrolled.subscribe(e);return this._scrolledCount++,()=>{n.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Object(mt.a)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,e)=>this.deregister(e)),this._scrolled.complete()}ancestorScrolled(t,e){const n=this.getAncestorScrollContainers(t);return this.scrolled(e).pipe(St(t=>!t||n.indexOf(t)>-1))}getAncestorScrollContainers(t){const e=[];return this.scrollContainers.forEach((n,r)=>{this._scrollableContainsElement(r,t)&&e.push(r)}),e}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,e){let n=Lt(e),r=t.getElementRef().nativeElement;do{if(n==r)return!0}while(n=n.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>JE(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(r.A),r.Tb(Bt),r.Tb(s,8))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Tb)(r.A),Object(r.Tb)(Bt),Object(r.Tb)(s,8))},token:t,providedIn:"root"}),t})(),aC=(()=>{class t{constructor(t,e,n){this._platform=t,this._change=new gt.a,this._changeListener=t=>{this._change.next(t)},this._document=n,e.runOutsideAngular(()=>{if(t.isBrowser){const t=this._getWindow();t.addEventListener("resize",this._changeListener),t.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._updateViewportSize())})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:e,height:n}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+n,right:t.left+e,height:n,width:e}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,e=this._getWindow(),n=t.documentElement,r=n.getBoundingClientRect();return{top:-r.top||t.body.scrollTop||e.scrollY||n.scrollTop||0,left:-r.left||t.body.scrollLeft||e.scrollX||n.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(oC(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(Bt),r.Tb(r.A),r.Tb(s,8))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Tb)(Bt),Object(r.Tb)(r.A),Object(r.Tb)(s,8))},token:t,providedIn:"root"}),t})(),uC=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)}}),t})(),cC=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},imports:[[ne,Ht,uC],ne,uC]}),t})();const lC=Wt();class hC{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Mt(-this._previousScrollPosition.left),t.style.top=Mt(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,e=t.style,n=this._document.body.style,r=e.scrollBehavior||"",i=n.scrollBehavior||"";this._isEnabled=!1,e.left=this._previousHTMLStyles.left,e.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),lC&&(e.scrollBehavior=n.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),lC&&(e.scrollBehavior=r,n.scrollBehavior=i)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,e=this._viewportRuler.getViewportSize();return t.scrollHeight>e.height||t.scrollWidth>e.width}}class dC{constructor(t,e,n,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class fC{enable(){}disable(){}attach(){}}function pC(t,e){return e.some(e=>t.bottom<e.top||t.top>e.bottom||t.right<e.left||t.left>e.right)}function gC(t,e){return e.some(e=>t.top<e.top||t.bottom>e.bottom||t.left<e.left||t.right>e.right)}class yC{constructor(t,e,n,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:e,height:n}=this._viewportRuler.getViewportSize();pC(t,[{width:e,height:n,bottom:n,right:e,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let mC=(()=>{class t{constructor(t,e,n,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this.noop=()=>new fC,this.close=t=>new dC(this._scrollDispatcher,this._ngZone,this._viewportRuler,t),this.block=()=>new hC(this._viewportRuler,this._document),this.reposition=t=>new yC(this._scrollDispatcher,this._viewportRuler,this._ngZone,t),this._document=r}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(sC),r.Tb(aC),r.Tb(r.A),r.Tb(s))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Tb)(sC),Object(r.Tb)(aC),Object(r.Tb)(r.A),Object(r.Tb)(s))},token:t,providedIn:"root"}),t})();class vC{constructor(t){if(this.scrollStrategy=new fC,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const n of e)void 0!==t[n]&&(this[n]=t[n])}}}class _C{constructor(t,e,n,r,i){this.offsetX=n,this.offsetY=r,this.panelClass=i,this.originX=t.originX,this.originY=t.originY,this.overlayX=e.overlayX,this.overlayY=e.overlayY}}class bC{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let wC=(()=>{class t{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const e=this._attachedOverlays.indexOf(t);e>-1&&this._attachedOverlays.splice(e,1),0===this._attachedOverlays.length&&this.detach()}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(s))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Tb)(s))},token:t,providedIn:"root"}),t})(),EC=(()=>{class t extends wC{constructor(t){super(t),this._keydownListener=t=>{const e=this._attachedOverlays;for(let n=e.length-1;n>-1;n--)if(e[n]._keydownEvents.observers.length>0){e[n]._keydownEvents.next(t);break}}}add(t){super.add(t),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(s))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Tb)(s))},token:t,providedIn:"root"}),t})(),CC=(()=>{class t extends wC{constructor(t,e){super(t),this._platform=e,this._cursorStyleIsSet=!1,this._clickListener=t=>{const e=t.composedPath?t.composedPath()[0]:t.target,n=this._attachedOverlays.slice();for(let r=n.length-1;r>-1;r--){const i=n[r];if(!(i._outsidePointerEvents.observers.length<1)&&i.hasAttached()){if(i.overlayElement.contains(e))break;i._outsidePointerEvents.next(t)}}}}add(t){super.add(t),this._isAttached||(this._document.body.addEventListener("click",this._clickListener,!0),this._document.body.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=this._document.body.style.cursor,this._document.body.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("click",this._clickListener,!0),this._document.body.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(s),r.Tb(Bt))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Tb)(s),Object(r.Tb)(Bt))},token:t,providedIn:"root"}),t})();const OC=!("undefined"==typeof window||!window||!window.__karma__&&!window.jasmine);let SC=(()=>{class t{constructor(t,e){this._platform=e,this._document=t}ngOnDestroy(){const t=this._containerElement;t&&t.parentNode&&t.parentNode.removeChild(t)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){if(this._platform.isBrowser||OC){const t=this._document.querySelectorAll('.cdk-overlay-container[platform="server"], .cdk-overlay-container[platform="test"]');for(let e=0;e<t.length;e++)t[e].parentNode.removeChild(t[e])}const t=this._document.createElement("div");t.classList.add("cdk-overlay-container"),OC?t.setAttribute("platform","test"):this._platform.isBrowser||t.setAttribute("platform","server"),this._document.body.appendChild(t),this._containerElement=t}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(s),r.Tb(Bt))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Tb)(s),Object(r.Tb)(Bt))},token:t,providedIn:"root"}),t})();class TC{constructor(t,e,n,r,i,o,s,a,u){this._portalOutlet=t,this._host=e,this._pane=n,this._config=r,this._ngZone=i,this._keyboardDispatcher=o,this._document=s,this._location=a,this._outsideClickDispatcher=u,this._backdropElement=null,this._backdropClick=new gt.a,this._attachments=new gt.a,this._detachments=new gt.a,this._locationChanges=yt.a.EMPTY,this._backdropClickHandler=t=>this._backdropClick.next(t),this._keydownEvents=new gt.a,this._outsidePointerEvents=new gt.a,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){let e=this._portalOutlet.attach(t);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(jt(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=Object.assign(Object.assign({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Object.assign(Object.assign({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=Mt(this._config.width),t.height=Mt(this._config.height),t.minWidth=Mt(this._config.minWidth),t.minHeight=Mt(this._config.minHeight),t.maxWidth=Mt(this._config.maxWidth),t.maxHeight=Mt(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add("cdk-overlay-backdrop-showing")})}):this._backdropElement.classList.add("cdk-overlay-backdrop-showing")}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let t,e=this._backdropElement;if(!e)return;let n=()=>{e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",n),e.parentNode&&e.parentNode.removeChild(e)),this._backdropElement==e&&(this._backdropElement=null),this._config.backdropClass&&this._toggleClasses(e,this._config.backdropClass,!1),clearTimeout(t)};e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",n)}),e.style.pointerEvents="none",t=this._ngZone.runOutsideAngular(()=>setTimeout(n,500))}_toggleClasses(t,e,n){const r=t.classList;Dt(e).forEach(t=>{t&&(n?r.add(t):r.remove(t))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(FE(Object(Ia.a)(this._attachments,this._detachments))).subscribe(()=>{this._pane&&this._host&&0!==this._pane.children.length||(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}}const IC=/([A-Za-z%]+)$/;class xC{constructor(t,e,n,r,i){this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=i,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new gt.a,this._resizeSubscription=yt.a.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add("cdk-overlay-connected-position-bounding-box"),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const t=this._originRect,e=this._overlayRect,n=this._viewportRect,r=[];let i;for(let o of this._preferredPositions){let s=this._getOriginPoint(t,o),a=this._getOverlayPoint(s,e,o),u=this._getOverlayFit(a,e,n,o);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(o,s);this._canFitWithFlexibleDimensions(u,a,n)?r.push({position:o,origin:s,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(s,o)}):(!i||i.overlayFit.visibleArea<u.visibleArea)&&(i={overlayFit:u,overlayPoint:a,originPoint:s,position:o,overlayRect:e})}if(r.length){let t=null,e=-1;for(const n of r){const r=n.boundingBoxRect.width*n.boundingBoxRect.height*(n.position.weight||1);r>e&&(e=r,t=n)}return this._isPushed=!1,void this._applyPosition(t.position,t.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(i.position,i.originPoint);this._applyPosition(i.position,i.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&kC(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove("cdk-overlay-connected-position-bounding-box"),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const t=this._lastPosition||this._preferredPositions[0],e=this._getOriginPoint(this._originRect,t);this._applyPosition(t,e)}}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e){let n,r;if("center"==e.originX)n=t.left+t.width/2;else{const r=this._isRtl()?t.right:t.left,i=this._isRtl()?t.left:t.right;n="start"==e.originX?r:i}return r="center"==e.originY?t.top+t.height/2:"top"==e.originY?t.top:t.bottom,{x:n,y:r}}_getOverlayPoint(t,e,n){let r,i;return r="center"==n.overlayX?-e.width/2:"start"===n.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,i="center"==n.overlayY?-e.height/2:"top"==n.overlayY?0:-e.height,{x:t.x+r,y:t.y+i}}_getOverlayFit(t,e,n,r){const i=jC(e);let{x:o,y:s}=t,a=this._getOffset(r,"x"),u=this._getOffset(r,"y");a&&(o+=a),u&&(s+=u);let c=0-s,l=s+i.height-n.height,h=this._subtractOverflows(i.width,0-o,o+i.width-n.width),d=this._subtractOverflows(i.height,c,l),f=h*d;return{visibleArea:f,isCompletelyWithinViewport:i.width*i.height===f,fitsInViewportVertically:d===i.height,fitsInViewportHorizontally:h==i.width}}_canFitWithFlexibleDimensions(t,e,n){if(this._hasFlexibleDimensions){const r=n.bottom-e.y,i=n.right-e.x,o=AC(this._overlayRef.getConfig().minHeight),s=AC(this._overlayRef.getConfig().minWidth),a=t.fitsInViewportHorizontally||null!=s&&s<=i;return(t.fitsInViewportVertically||null!=o&&o<=r)&&a}return!1}_pushOverlayOnScreen(t,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const r=jC(e),i=this._viewportRect,o=Math.max(t.x+r.width-i.width,0),s=Math.max(t.y+r.height-i.height,0),a=Math.max(i.top-n.top-t.y,0),u=Math.max(i.left-n.left-t.x,0);let c=0,l=0;return c=r.width<=i.width?u||-o:t.x<this._viewportMargin?i.left-n.left-t.x:0,l=r.height<=i.height?a||-s:t.y<this._viewportMargin?i.top-n.top-t.y:0,this._previousPushAmount={x:c,y:l},{x:t.x+c,y:t.y+l}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const e=this._getScrollVisibility(),n=new bC(t,e);this._positionChanges.next(n)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,r=t.overlayY;n="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let i=0;i<e.length;i++)e[i].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(t,e){const n=this._viewportRect,r=this._isRtl();let i,o,s,a,u,c;if("top"===e.overlayY)o=t.y,i=n.height-o+this._viewportMargin;else if("bottom"===e.overlayY)s=n.height-t.y+2*this._viewportMargin,i=n.height-s+this._viewportMargin;else{const e=Math.min(n.bottom-t.y+n.top,t.y),r=this._lastBoundingBoxSize.height;i=2*e,o=t.y-e,i>r&&!this._isInitialRender&&!this._growAfterOpen&&(o=t.y-r/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)c=n.width-t.x+this._viewportMargin,a=t.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)u=t.x,a=n.right-t.x;else{const e=Math.min(n.right-t.x+n.left,t.x),r=this._lastBoundingBoxSize.width;a=2*e,u=t.x-e,a>r&&!this._isInitialRender&&!this._growAfterOpen&&(u=t.x-r/2)}return{top:o,left:u,bottom:s,right:c,width:a,height:i}}_setBoundingBoxStyles(t,e){const n=this._calculateBoundingBoxRect(t,e);this._isInitialRender||this._growAfterOpen||(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const t=this._overlayRef.getConfig().maxHeight,i=this._overlayRef.getConfig().maxWidth;r.height=Mt(n.height),r.top=Mt(n.top),r.bottom=Mt(n.bottom),r.width=Mt(n.width),r.left=Mt(n.left),r.right=Mt(n.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",t&&(r.maxHeight=Mt(t)),i&&(r.maxWidth=Mt(i))}this._lastBoundingBoxSize=n,kC(this._boundingBox.style,r)}_resetBoundingBoxStyles(){kC(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){kC(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const n={},r=this._hasExactPosition(),i=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const r=this._viewportRuler.getViewportScrollPosition();kC(n,this._getExactOverlayY(e,t,r)),kC(n,this._getExactOverlayX(e,t,r))}else n.position="static";let s="",a=this._getOffset(e,"x"),u=this._getOffset(e,"y");a&&(s+=`translateX(${a}px) `),u&&(s+=`translateY(${u}px)`),n.transform=s.trim(),o.maxHeight&&(r?n.maxHeight=Mt(o.maxHeight):i&&(n.maxHeight="")),o.maxWidth&&(r?n.maxWidth=Mt(o.maxWidth):i&&(n.maxWidth="")),kC(this._pane.style,n)}_getExactOverlayY(t,e,n){let r={top:"",bottom:""},i=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,n));let o=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return i.y-=o,"bottom"===t.overlayY?r.bottom=this._document.documentElement.clientHeight-(i.y+this._overlayRect.height)+"px":r.top=Mt(i.y),r}_getExactOverlayX(t,e,n){let r,i={left:"",right:""},o=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,n)),r=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===r?i.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":i.left=Mt(o.x),i}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map(t=>t.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:gC(t,n),isOriginOutsideView:pC(t,n),isOverlayClipped:gC(e,n),isOverlayOutsideView:pC(e,n)}}_subtractOverflows(t,...e){return e.reduce((t,e)=>t-Math.max(e,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+t-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&Dt(t).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof r.l)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,n=t.height||0;return{top:t.y,bottom:t.y+n,left:t.x,right:t.x+e,height:n,width:e}}}function kC(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function AC(t){if("number"!=typeof t&&null!=t){const[e,n]=t.split(IC);return n&&"px"!==n?null:parseFloat(e)}return t||null}function jC(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}class PC{constructor(t,e,n,r,i,o,s){this._preferredPositions=[],this._positionStrategy=new xC(n,r,i,o,s).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(t,e),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(t){this._overlayRef=t,this._positionStrategy.attach(t),this._direction&&(t.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(t){this._positionStrategy.withScrollableContainers(t)}withFallbackPosition(t,e,n,r){const i=new _C(t,e,n,r);return this._preferredPositions.push(i),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(t){return this._overlayRef?this._overlayRef.setDirection(t):this._direction=t,this}withOffsetX(t){return this._positionStrategy.withDefaultOffsetX(t),this}withOffsetY(t){return this._positionStrategy.withDefaultOffsetY(t),this}withLockedPosition(t){return this._positionStrategy.withLockedPosition(t),this}withPositions(t){return this._preferredPositions=t.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(t){return this._positionStrategy.setOrigin(t),this}}class NC{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add("cdk-global-overlay-wrapper"),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:i,maxWidth:o,maxHeight:s}=n,a=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),u=!("100%"!==i&&"100vh"!==i||s&&"100%"!==s&&"100vh"!==s);t.position=this._cssPosition,t.marginLeft=a?"0":this._leftOffset,t.marginTop=u?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,a?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=u?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove("cdk-global-overlay-wrapper"),n.justifyContent=n.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let RC=(()=>{class t{constructor(t,e,n,r){this._viewportRuler=t,this._document=e,this._platform=n,this._overlayContainer=r}global(){return new NC}connectedTo(t,e,n){return new PC(e,n,t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(t){return new xC(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(aC),r.Tb(s),r.Tb(Bt),r.Tb(SC))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Tb)(aC),Object(r.Tb)(s),Object(r.Tb)(Bt),Object(r.Tb)(SC))},token:t,providedIn:"root"}),t})(),DC=0,MC=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u,c,l){this.scrollStrategies=t,this._overlayContainer=e,this._componentFactoryResolver=n,this._positionBuilder=r,this._keyboardDispatcher=i,this._injector=o,this._ngZone=s,this._document=a,this._directionality=u,this._location=c,this._outsideClickDispatcher=l}create(t){const e=this._createHostElement(),n=this._createPaneElement(e),r=this._createPortalOutlet(n),i=new vC(t);return i.direction=i.direction||this._directionality.value,new TC(r,e,n,i,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const e=this._document.createElement("div");return e.id="cdk-overlay-"+DC++,e.classList.add("cdk-overlay-pane"),t.appendChild(e),e}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(r.g)),new YE(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(mC),r.Tb(SC),r.Tb(r.j),r.Tb(RC),r.Tb(EC),r.Tb(r.s),r.Tb(r.A),r.Tb(s),r.Tb(ee),r.Tb(w),r.Tb(CC))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();const LC={provide:new r.r("cdk-connected-overlay-scroll-strategy"),deps:[MC],useFactory:function(t){return()=>t.scrollStrategies.reposition()}};let FC=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},providers:[MC,LC],imports:[[ne,XE,cC],cC]}),t})();const VC=["mat-menu-item",""],UC=["*"];function qC(t,e){if(1&t){const t=r.Qb();r.Pb(0,"div",0),r.Wb("keydown",function(e){return r.gc(t),r.Yb()._handleKeydown(e)})("click",function(){return r.gc(t),r.Yb().closed.emit("click")})("@transformMenu.start",function(e){return r.gc(t),r.Yb()._onAnimationStart(e)})("@transformMenu.done",function(e){return r.gc(t),r.Yb()._onAnimationDone(e)}),r.Pb(1,"div",1),r.Zb(2),r.Ob(),r.Ob()}if(2&t){const t=r.Yb();r.bc("id",t.panelId)("ngClass",t._classList)("@transformMenu",t._panelAnimationState),r.Db("aria-label",t.ariaLabel||null)("aria-labelledby",t.ariaLabelledby||null)("aria-describedby",t.ariaDescribedby||null)}}const BC={transformMenu:ce("transformMenu",[fe("void",de({opacity:0,transform:"scale(0.8)"})),pe("void => enter",le("120ms cubic-bezier(0, 0, 0.2, 1)",de({opacity:1,transform:"scale(1)"}))),pe("* => void",le("100ms 25ms linear",de({opacity:0})))]),fadeInItems:ce("fadeInItems",[fe("showing",de({opacity:1})),pe("void => *",[de({opacity:0}),le("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},HC=new r.r("MatMenuContent"),zC=new r.r("MAT_MENU_PANEL");class WC{}const QC=Mr(Dr(WC));let GC=(()=>{class t extends QC{constructor(t,e,n,r){super(),this._elementRef=t,this._focusMonitor=n,this._parentMenu=r,this.role="menuitem",this._hovered=new gt.a,this._focused=new gt.a,this._highlighted=!1,this._triggersSubmenu=!1,r&&r.addItem&&r.addItem(this)}focus(t,e){this._focusMonitor&&t?this._focusMonitor.focusVia(this._getHostElement(),t,e):this._getHostElement().focus(e),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){var t,e;const n=this._elementRef.nativeElement.cloneNode(!0),r=n.querySelectorAll("mat-icon, .material-icons");for(let i=0;i<r.length;i++){const e=r[i];null===(t=e.parentNode)||void 0===t||t.removeChild(e)}return(null===(e=n.textContent)||void 0===e?void 0:e.trim())||""}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.l),r.Mb(s),r.Mb(Xt),r.Mb(zC,8))},t.\u0275cmp=r.Gb({type:t,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(t,e){1&t&&r.Wb("click",function(t){return e._checkDisabled(t)})("mouseenter",function(){return e._handleMouseEnter()}),2&t&&(r.Db("role",e.role)("tabindex",e._getTabIndex())("aria-disabled",e.disabled.toString())("disabled",e.disabled||null),r.Eb("mat-menu-item",!0)("mat-menu-item-highlighted",e._highlighted)("mat-menu-item-submenu-trigger",e._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[r.zb],attrs:VC,ngContentSelectors:UC,decls:2,vars:2,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"]],template:function(t,e){1&t&&(r.ac(),r.Zb(0),r.Nb(1,"div",0)),2&t&&(r.Cb(1),r.bc("matRippleDisabled",e.disableRipple||e.disabled)("matRippleTrigger",e._getHostElement()))},directives:[zr],encapsulation:2,changeDetection:0}),t})();const KC=new r.r("mat-menu-default-options",{providedIn:"root",factory:function(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let $C=0,YC=(()=>{class t{constructor(t,e,n){this._elementRef=t,this._ngZone=e,this._defaultOptions=n,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new r.E,this._tabSubscription=yt.a.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new gt.a,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new r.n,this.close=this.closed,this.panelId="mat-menu-panel-"+$C++}get xPosition(){return this._xPosition}set xPosition(t){this._xPosition=t,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(t){this._yPosition=t,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(t){this._overlapTrigger=Rt(t)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=Rt(t)}set panelClass(t){const e=this._previousPanelClass;e&&e.length&&e.split(" ").forEach(t=>{this._classList[t]=!1}),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach(t=>{this._classList[t]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(t){this.panelClass=t}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new Gt(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(ae(this._directDescendantItems),ci(t=>Object(Ia.a)(...t.map(t=>t._focused)))).subscribe(t=>this._keyManager.updateActiveItem(t))}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe(ae(this._directDescendantItems),ci(t=>Object(Ia.a)(...t.map(t=>t._hovered))))}addItem(t){}removeItem(t){}_handleKeydown(t){const e=t.keyCode,n=this._keyManager;switch(e){case 27:vt(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:38!==e&&40!==e||n.setFocusOrigin("keyboard"),n.onKeydown(t)}}focusFirstItem(t="program"){this.lazyContent?this._ngZone.onStable.pipe(jt(1)).subscribe(()=>this._focusFirstItem(t)):this._focusFirstItem(t)}_focusFirstItem(t){const e=this._keyManager;if(e.setFocusOrigin(t).setFirstItemActive(),!e.activeItem&&this._directDescendantItems.length){let t=this._directDescendantItems.first._getHostElement().parentElement;for(;t;){if("menu"===t.getAttribute("role")){t.focus();break}t=t.parentElement}}}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(t){const e=`mat-elevation-z${Math.min(4+t,24)}`,n=Object.keys(this._classList).find(t=>t.startsWith("mat-elevation-z"));n&&n!==this._previousElevation||(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[e]=!0,this._previousElevation=e)}setPositionClasses(t=this.xPosition,e=this.yPosition){const n=this._classList;n["mat-menu-before"]="before"===t,n["mat-menu-after"]="after"===t,n["mat-menu-above"]="above"===e,n["mat-menu-below"]="below"===e}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(t){this._animationDone.next(t),this._isAnimating=!1}_onAnimationStart(t){this._isAnimating=!0,"enter"===t.toState&&0===this._keyManager.activeItemIndex&&(t.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(ae(this._allItems)).subscribe(t=>{this._directDescendantItems.reset(t.filter(t=>t._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.l),r.Mb(r.A),r.Mb(KC))},t.\u0275dir=r.Hb({type:t,contentQueries:function(t,e,n){if(1&t&&(r.Fb(n,HC,1),r.Fb(n,GC,1),r.Fb(n,GC,0)),2&t){let t;r.ec(t=r.Xb())&&(e.lazyContent=t.first),r.ec(t=r.Xb())&&(e._allItems=t),r.ec(t=r.Xb())&&(e.items=t)}},viewQuery:function(t,e){if(1&t&&r.oc(r.M,1),2&t){let t;r.ec(t=r.Xb())&&(e.templateRef=t.first)}},inputs:{backdropClass:"backdropClass",xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"]},outputs:{closed:"closed",close:"close"}}),t})(),XC=(()=>{class t extends YC{constructor(t,e,n){super(t,e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.l),r.Mb(r.A),r.Mb(KC))},t.\u0275cmp=r.Gb({type:t,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(t,e){2&t&&r.Db("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[r.Bb([{provide:zC,useExisting:t}]),r.zb],ngContentSelectors:UC,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(t,e){1&t&&(r.ac(),r.kc(0,qC,3,6,"ng-template"))},directives:[x],styles:['mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]{pointer-events:none}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}.mat-menu-item-submenu-trigger::after{width:0;height:0;border-style:solid;border-width:5px 0 5px 5px;border-color:transparent transparent transparent currentColor;content:"";display:inline-block;position:absolute;top:50%;right:16px;transform:translateY(-50%)}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}[dir=rtl] .mat-menu-item-submenu-trigger::after{right:auto;left:16px;transform:rotateY(180deg) translateY(-50%)}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n'],encapsulation:2,data:{animation:[BC.transformMenu,BC.fadeInItems]},changeDetection:0}),t})();const ZC=new r.r("mat-menu-scroll-strategy"),JC={provide:ZC,deps:[MC],useFactory:function(t){return()=>t.scrollStrategies.reposition()}},tO=zt({passive:!0});let eO=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this._overlay=t,this._element=e,this._viewContainerRef=n,this._menuItemInstance=s,this._dir=a,this._focusMonitor=u,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=yt.a.EMPTY,this._hoverSubscription=yt.a.EMPTY,this._menuCloseSubscription=yt.a.EMPTY,this._handleTouchStart=()=>this._openedBy="touch",this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new r.n,this.onMenuOpen=this.menuOpened,this.menuClosed=new r.n,this.onMenuClose=this.menuClosed,this._scrollStrategy=i,this._parentMaterialMenu=o instanceof YC?o:void 0,e.nativeElement.addEventListener("touchstart",this._handleTouchStart,tO),s&&(s._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(t){this.menu=t}get menu(){return this._menu}set menu(t){t!==this._menu&&(this._menu=t,this._menuCloseSubscription.unsubscribe(),t&&(this._menuCloseSubscription=t.close.subscribe(t=>{this._destroyMenu(t),"click"!==t&&"tab"!==t||!this._parentMaterialMenu||this._parentMaterialMenu.closed.emit(t)})))}ngAfterContentInit(){this._checkMenu(),this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,tO),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){if(this._menuOpen)return;this._checkMenu();const t=this._createOverlay(),e=t.getConfig();this._setPosition(e.positionStrategy),e.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,t.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(),this.menu instanceof YC&&this.menu._startAnimation()}closeMenu(){this.menu.close.emit()}focus(t,e){this._focusMonitor&&t?this._focusMonitor.focusVia(this._element,t,e):this._element.nativeElement.focus(e)}_destroyMenu(t){if(!this._overlayRef||!this.menuOpen)return;const e=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),!this.restoreFocus||"keydown"!==t&&this._openedBy&&this.triggersSubmenu()||this.focus(this._openedBy),this._openedBy=void 0,e instanceof YC?(e._resetAnimation(),e.lazyContent?e._animationDone.pipe(St(t=>"void"===t.toState),jt(1),FE(e.lazyContent._attached)).subscribe({next:()=>e.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),e.lazyContent&&e.lazyContent.detach())}_initMenu(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this.menu.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(){if(this.menu.setElevation){let t=0,e=this.menu.parentMenu;for(;e;)t++,e=e.parentMenu;this.menu.setElevation(t)}}_setIsMenuOpen(t){this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&(this._menuItemInstance._highlighted=t)}_checkMenu(){}_createOverlay(){if(!this._overlayRef){const t=this._getOverlayConfig();this._subscribeToPositions(t.positionStrategy),this._overlayRef=this._overlay.create(t),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(){return new vC({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(t){this.menu.setPositionClasses&&t.positionChanges.subscribe(t=>{this.menu.setPositionClasses("start"===t.connectionPair.overlayX?"after":"before","top"===t.connectionPair.overlayY?"below":"above")})}_setPosition(t){let[e,n]="before"===this.menu.xPosition?["end","start"]:["start","end"],[r,i]="above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],[o,s]=[r,i],[a,u]=[e,n],c=0;this.triggersSubmenu()?(u=e="before"===this.menu.xPosition?"start":"end",n=a="end"===e?"start":"end",c="bottom"===r?8:-8):this.menu.overlapTrigger||(o="top"===r?"bottom":"top",s="top"===i?"bottom":"top"),t.withPositions([{originX:e,originY:o,overlayX:a,overlayY:r,offsetY:c},{originX:n,originY:o,overlayX:u,overlayY:r,offsetY:c},{originX:e,originY:s,overlayX:a,overlayY:i,offsetY:-c},{originX:n,originY:s,overlayX:u,overlayY:i,offsetY:-c}])}_menuClosingActions(){const t=this._overlayRef.backdropClick(),e=this._overlayRef.detachments(),n=this._parentMaterialMenu?this._parentMaterialMenu.closed:Object(mt.a)(),r=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(St(t=>t!==this._menuItemInstance),St(()=>this._menuOpen)):Object(mt.a)();return Object(Ia.a)(t,n,r,e)}_handleMousedown(t){Kt(t)||(this._openedBy=0===t.button?"mouse":void 0,this.triggersSubmenu()&&t.preventDefault())}_handleKeydown(t){const e=t.keyCode;13!==e&&32!==e||(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===e&&"ltr"===this.dir||37===e&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){this.triggersSubmenu()&&this._parentMaterialMenu&&(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(St(t=>t===this._menuItemInstance&&!t.disabled),BE(0,LE.b)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof YC&&this.menu._isAnimating?this.menu._animationDone.pipe(jt(1),BE(0,LE.b),FE(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(){return this._portal&&this._portal.templateRef===this.menu.templateRef||(this._portal=new KE(this.menu.templateRef,this._viewContainerRef)),this._portal}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(MC),r.Mb(r.l),r.Mb(r.R),r.Mb(ZC),r.Mb(zC,8),r.Mb(GC,10),r.Mb(ee,8),r.Mb(Xt))},t.\u0275dir=r.Hb({type:t,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:["aria-haspopup","true",1,"mat-menu-trigger"],hostVars:2,hostBindings:function(t,e){1&t&&r.Wb("mousedown",function(t){return e._handleMousedown(t)})("keydown",function(t){return e._handleKeydown(t)})("click",function(t){return e._handleClick(t)}),2&t&&r.Db("aria-expanded",e.menuOpen||null)("aria-controls",e.menuOpen?e.menu.panelId:null)},inputs:{restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"],_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"},exportAs:["matMenuTrigger"]}),t})(),nO=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},providers:[JC],imports:[Rr]}),t})(),rO=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},providers:[JC],imports:[[D,Rr,Wr,FC,nO],uC,Rr,nO]}),t})();var iO=n("XoHu");function oO(t,e){return new Qt.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=Object(Gr.a)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}const sO=new r.r("NgValueAccessor"),aO={provide:sO,useExisting:Object(r.V)(()=>uO),multi:!0};let uO=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.F),r.Mb(r.l))},t.\u0275dir=r.Hb({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&r.Wb("change",function(t){return e.onChange(t.target.checked)})("blur",function(){return e.onTouched()})},features:[r.Bb([aO])]}),t})();const cO={provide:sO,useExisting:Object(r.V)(()=>hO),multi:!0},lO=new r.r("CompositionEventMode");let hO=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=o()?o().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.F),r.Mb(r.l),r.Mb(lO,8))},t.\u0275dir=r.Hb({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.Wb("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r.Bb([cO])]}),t})();function dO(t){return null==t||0===t.length}function fO(t){return null!=t&&"number"==typeof t.length}const pO=new r.r("NgValidators"),gO=new r.r("NgAsyncValidators"),yO=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class mO{static min(t){return e=>{if(dO(e.value)||dO(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(dO(e.value)||dO(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return dO(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return dO(t.value)||yO.test(t.value)?null:{email:!0}}static minLength(t){return e=>dO(e.value)||!fO(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}static maxLength(t){return e=>fO(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}static pattern(t){if(!t)return mO.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(dO(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(vO);return 0==e.length?null:function(t){return bO(wO(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(vO);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(Object(Yr.a)(e))return oO(e,null);if(Object(iO.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return oO(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return oO(t=1===t.length&&Object(Yr.a)(t[0])?t[0]:t,null).pipe(Object(xt.a)(t=>e(...t)))}return oO(t,null)}(wO(t,e).map(_O)).pipe(Object(xt.a)(bO))}}}function vO(t){return null!=t}function _O(t){const e=Object(r.tb)(t)?Object(Gr.a)(t):t;return Object(r.sb)(e),e}function bO(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function wO(t,e){return e.map(e=>e(t))}function EO(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function CO(t){return null!=t?mO.compose(EO(t)):null}function OO(t){return null!=t?mO.composeAsync(EO(t)):null}function SO(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}let TO=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=CO(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=OO(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Hb({type:t}),t})(),IO=(()=>{class t extends TO{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return xO(e||t)},t.\u0275dir=r.Hb({type:t,features:[r.zb]}),t})();const xO=r.Rb(IO);class kO extends TO{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let AO=(()=>{class t extends class{constructor(t){this._cd=t}is(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(kO,2))},t.\u0275dir=r.Hb({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Eb("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.zb]}),t})();const jO={provide:sO,useExisting:Object(r.V)(()=>PO),multi:!0};let PO=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.F),r.Mb(r.l))},t.\u0275dir=r.Hb({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&r.Wb("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r.Bb([jO])]}),t})();const NO={provide:sO,useExisting:Object(r.V)(()=>DO),multi:!0};let RO=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),DO=(()=>{class t{constructor(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(kO),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.F),r.Mb(r.l),r.Mb(RO),r.Mb(r.s))},t.\u0275dir=r.Hb({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&r.Wb("change",function(){return e.onChange()})("blur",function(){return e.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[r.Bb([NO])]}),t})();const MO={provide:sO,useExisting:Object(r.V)(()=>LO),multi:!0};let LO=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.F),r.Mb(r.l))},t.\u0275dir=r.Hb({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&r.Wb("change",function(t){return e.onChange(t.target.value)})("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r.Bb([MO])]}),t})();const FO={provide:sO,useExisting:Object(r.V)(()=>VO),multi:!0};let VO=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=function(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.F),r.Mb(r.l))},t.\u0275dir=r.Hb({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&r.Wb("change",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.Bb([FO])]}),t})();const UO={provide:sO,useExisting:Object(r.V)(()=>qO),multi:!0};let qO=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.F),r.Mb(r.l))},t.\u0275dir=r.Hb({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&r.Wb("change",function(t){return e.onChange(t.target)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.Bb([UO])]}),t})();function BO(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function HO(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}const zO=[uO,LO,PO,VO,qO,DO];function WO(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function QO(t){return(YO(t)?t.validators:t)||null}function GO(t){return Array.isArray(t)?CO(t):t||null}function KO(t,e){return(YO(e)?e.asyncValidators:t)||null}function $O(t){return Array.isArray(t)?OO(t):t||null}function YO(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class XO{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=GO(this._rawValidators),this._composedAsyncValidatorFn=$O(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return"VALID"===this.status}get invalid(){return"INVALID"===this.status}get pending(){return"PENDING"==this.status}get disabled(){return"DISABLED"===this.status}get enabled(){return"DISABLED"!==this.status}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=GO(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=$O(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status="PENDING",!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status="VALID",this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status="PENDING",this._hasOwnPendingAsyncValidator=!0;const e=_O(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof JO?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof tS&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.n,this.statusChanges=new r.n}_calculateStatus(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){YO(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class ZO extends XO{constructor(t=null,e,n){super(QO(e),KO(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){WO(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){WO(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class JO extends XO{constructor(t,e,n){super(QO(e),KO(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof ZO?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class tS extends XO{constructor(t,e,n){super(QO(e),KO(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof ZO?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const eS={provide:kO,useExisting:Object(r.V)(()=>rS)},nS=(()=>Promise.resolve(null))();let rS=(()=>{class t extends kO{constructor(t,e,n,i){super(),this.control=new ZO,this._registered=!1,this.update=new r.n,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{var e;t.constructor===hO?n=t:(e=t,zO.some(t=>e.constructor===t)?r=t:i=t)}),i||r||n||null}(0,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?[...this._parent.path,this.name]:[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){var t,e;(function(t,e,n){const r=function(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(SO(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const i=function(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(SO(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]);{const n=()=>t.updateValueAndValidity();BO(e._rawValidators,n),BO(e._rawAsyncValidators,n)}})(t=this.control,e=this),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&HO(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&HO(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){nS.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;nS.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(IO,9),r.Mb(pO,10),r.Mb(gO,10),r.Mb(sO,10))},t.\u0275dir=r.Hb({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r.Bb([eS]),r.zb,r.Ab]}),t})(),iS=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)}}),t})(),oS=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},providers:[RO],imports:[iS]}),t})();function sS(t,e){if(1&t){const t=r.Qb();r.Pb(0,"label",33),r.Pb(1,"a",34),r.Wb("click",function(){return r.gc(t),r.Yb().activeLogin()}),r.lc(2,"Login"),r.Ob(),r.lc(3," or "),r.Pb(4,"a",34),r.Wb("click",function(){return r.gc(t),r.Yb().activeSignup()}),r.lc(5,"Signup"),r.Ob(),r.lc(6," to save your list\n"),r.Ob()}2&t&&r.bc("@fade-left",void 0)}function aS(t,e){if(1&t&&(r.Pb(0,"section",35),r.Pb(1,"span",2),r.lc(2," account_circle "),r.Ob(),r.lc(3),r.Pb(4,"span",36),r.lc(5," arrow_drop_down "),r.Ob(),r.Ob()),2&t){const t=r.Yb(),e=r.fc(8);r.bc("@fade-left",void 0),r.Cb(3),r.nc(" ",t.userEmail," "),r.Cb(1),r.bc("matMenuTriggerFor",e)}}function uS(t,e){if(1&t){const t=r.Qb();r.Pb(0,"div",37),r.Pb(1,"div",38),r.Pb(2,"input",39),r.Wb("click",function(){r.gc(t);const n=e.$implicit,i=e.index;return r.Yb().updateStatus(n.id,n.data.status,i)}),r.Ob(),r.Nb(3,"label",40),r.Ob(),r.Pb(4,"textarea",41),r.Wb("keyup",function(){return r.gc(t),r.Yb().changing()}),r.lc(5),r.Ob(),r.Pb(6,"div",42),r.Pb(7,"button",43),r.Wb("click",function(){r.gc(t);const n=e.$implicit,i=e.index;return r.Yb().deleteItem(n.id,i)}),r.Pb(8,"span",44),r.lc(9," delete "),r.Ob(),r.Ob(),r.Ob(),r.Ob()}if(2&t){const t=e.$implicit;r.bc("@fade",void 0),r.Cb(2),r.cc("id",t.id),r.bc("checked",t.data.status),r.Cb(1),r.cc("for",t.id),r.Cb(1),r.dc("id","",t.id,"textarea"),r.Cb(1),r.mc(t.data.item)}}const cS=[{path:"",component:(()=>{class t{constructor(t,e){this.firebaseService=t,this.crudService=e,this.isSignedIn=!1,this.itemStatus=!1,this.firstkey=!1,this.model=new Ta}ngOnInit(){null!==localStorage.getItem("user")?(this.isSignedIn=!0,this.userEmail=localStorage.getItem("email"),this.myTasks=this.crudService.getTasks(),console.log(this.myTasks)):this.isSignedIn=!1}onSignup(t,e){return Sa(this,void 0,void 0,function*(){yield this.firebaseService.signup(t,e),this.firebaseService.isLoggedIn&&(this.isSignedIn=!0),this.userEmail=localStorage.getItem("email"),this.myTasks=this.crudService.getTasks(),this.deactiveSignup()})}onSignin(t,e){return Sa(this,void 0,void 0,function*(){yield this.firebaseService.signin(t,e),this.firebaseService.isLoggedIn?(this.isSignedIn=!0,this.userEmail=localStorage.getItem("email"),this.myTasks=this.crudService.getTasks(),this.deactiveLogin(),document.getElementById("message").innerHTML=""):document.getElementById("message").innerHTML="Invalid user information"})}Signout(){this.firebaseService.logout(),this.ngOnInit(),this.model.items=null}getItems(){return this.myTasks}deleteItem(t,e){this.crudService.deleteTask(t),this.myTasks.splice(e,1)}addItem(){let t={};t.userId=localStorage.getItem("uid"),t.item=this.item,t.status=this.itemStatus,localStorage.getItem("user")?(this.crudService.addTask(t).then(t=>{}).catch(t=>{console.log(t)}),this.ngOnInit(),console.log(this.myTasks)):alert("Please login or signup")}updateStatus(t,e,n){!1===this.myTasks[n].data.status?(this.crudService.check(t),this.myTasks[n].data.status=!0):(this.crudService.uncheck(t),this.myTasks[n].data.status=!1),console.log(this.myTasks[n].data.status)}setDisabledValue(t,e){var n=document.getElementById(t+"button"),r=document.getElementById(t+"textarea");return!0===this.model.disabled?(this.model.disabled=!1,n.classList.add("editing"),r.classList.add("txtedit"),r.removeAttribute("disabled")):(this.model.disabled=!0,n.classList.remove("editing"),r.classList.remove("txtedit"),r.setAttribute("disabled","disabled"),r.innerHTML!=this.myTasks[e].data.item?(console.log(this.myTasks[e].data.item),console.log("itemchenged")):(console.log("not working"),console.log(this.myTasks[e].data.item),console.log(r.innerHTML)),this.firstkey=!1),this.model.disabled}changing(){!1===this.firstkey&&(this.firstkey=!0)}activeLogin(){document.getElementById("login").classList.add("is-active")}deactiveLogin(){document.getElementById("login").classList.remove("is-active")}activeSignup(){document.getElementById("signup").classList.add("is-active")}deactiveSignup(){document.getElementById("signup").classList.remove("is-active")}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(za),r.Mb(ME))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-list"]],decls:59,vars:7,consts:[[1,"heading-section"],[1,"title","is-1","has-text-centered"],[1,"material-icons"],["class","label","id","lgn","class","label",4,"ngIf"],["class","label","id","logout",4,"ngIf"],["id","menu"],["menu","matMenu"],["mat-menu-item","",1,"logoutbtn",3,"click"],["id","login",1,"modal"],[1,"modal-background"],[1,"modal-content"],[1,"field"],["type","email","placeholder","Email",1,"input"],["loginemail",""],["type","password","placeholder","Password",1,"input"],["loginpassword",""],[1,"control"],["on","","id","loginbtn",1,"button",3,"click"],["id","message"],["aria-label","close",1,"modal-close","is-large",3,"click"],["id","signup",1,"modal"],["email",""],["password",""],["id","loginbtn",1,"button",3,"click"],[1,"container"],[1,"add-todo-box"],["id","titlee","is-5","",1,"title"],[1,"field","is-grouped"],[1,"control","is-expanded"],["type","text","placeholder","Add a new task here",1,"input",3,"ngModel","ngModelChange"],["textbox",""],[1,"button",3,"disabled","click"],["class","container","id","container",4,"ngFor","ngForOf"],["id","lgn",1,"label"],[3,"click"],["id","logout",1,"label"],["id","down",1,"material-icons",3,"matMenuTriggerFor"],["id","container",1,"container"],[1,"round"],["type","checkbox",3,"id","checked","click"],[3,"for"],["disabled","","for","checkbox",1,"text",3,"id","keyup"],[1,"button-container"],[1,"buttons",3,"click"],[1,"material-icons","fix"]],template:function(t,e){if(1&t){const t=r.Qb();r.Pb(0,"section",0),r.Pb(1,"h1",1),r.lc(2," To do list "),r.Pb(3,"i",2),r.lc(4," done "),r.Ob(),r.Ob(),r.Ob(),r.kc(5,sS,7,1,"label",3),r.kc(6,aS,6,3,"section",4),r.Pb(7,"mat-menu",5,6),r.Pb(9,"button",7),r.Wb("click",function(){return e.Signout()}),r.lc(10,"Sign-out"),r.Ob(),r.Ob(),r.Pb(11,"div",8),r.Nb(12,"div",9),r.Pb(13,"div",10),r.Pb(14,"h1"),r.lc(15,"Login"),r.Ob(),r.Pb(16,"div",11),r.Nb(17,"input",12,13),r.Ob(),r.Pb(19,"div",11),r.Nb(20,"input",14,15),r.Ob(),r.Pb(22,"div",11),r.Pb(23,"p",16),r.Pb(24,"button",17),r.Wb("click",function(){r.gc(t);const n=r.fc(18),i=r.fc(21);return e.onSignin(n.value,i.value)}),r.lc(25," Login "),r.Ob(),r.Ob(),r.Nb(26,"label",18),r.Ob(),r.Ob(),r.Pb(27,"button",19),r.Wb("click",function(){return e.deactiveLogin()}),r.Ob(),r.Ob(),r.Pb(28,"div",20),r.Nb(29,"div",9),r.Pb(30,"div",10),r.Pb(31,"h1"),r.lc(32,"Sign-up"),r.Ob(),r.Pb(33,"div",11),r.Nb(34,"input",12,21),r.Ob(),r.Pb(36,"div",11),r.Nb(37,"input",14,22),r.Ob(),r.Pb(39,"div",11),r.Pb(40,"p",16),r.Pb(41,"button",23),r.Wb("click",function(){r.gc(t);const n=r.fc(35),i=r.fc(38);return e.onSignup(n.value,i.value)}),r.lc(42," Signup "),r.Ob(),r.Ob(),r.Nb(43,"label",18),r.Ob(),r.Ob(),r.Pb(44,"button",19),r.Wb("click",function(){return e.deactiveSignup()}),r.Ob(),r.Ob(),r.Pb(45,"div",24),r.Pb(46,"div",25),r.Pb(47,"h2",26),r.lc(48,"New Task"),r.Ob(),r.Pb(49,"div",27),r.Pb(50,"p",28),r.Pb(51,"input",29,30),r.Wb("ngModelChange",function(t){return e.item=t}),r.Ob(),r.Ob(),r.Pb(53,"p",16),r.Pb(54,"button",31),r.Wb("click",function(){r.gc(t);const n=r.fc(52);return e.addItem(),n.value=""}),r.Pb(55,"i",2),r.lc(56,"add"),r.Ob(),r.lc(57," Add "),r.Ob(),r.Ob(),r.Ob(),r.Ob(),r.Ob(),r.kc(58,uS,10,6,"div",32)}2&t&&(r.Cb(1),r.bc("@fade",void 0),r.Cb(4),r.bc("ngIf",!e.isSignedIn),r.Cb(1),r.bc("ngIf",e.isSignedIn),r.Cb(5),r.bc("@fade",void 0),r.Cb(40),r.bc("ngModel",e.item),r.Cb(3),r.bc("disabled",!e.item),r.Cb(4),r.bc("ngForOf",e.getItems()))},directives:[P,XC,GC,hO,AO,rS,A,eO],styles:['.heading-section[_ngcontent-%COMP%]{background-image:linear-gradient(180deg,#1f79be,#1968a2,#145688,#10466e,#0d3655);padding:100px}.heading-section[_ngcontent-%COMP%]   h1.title[_ngcontent-%COMP%]{font-weight:700;color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.9);font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.container[_ngcontent-%COMP%]{width:800px}.modal-content[_ngcontent-%COMP%]{width:500px;background-color:#fff;box-sizing:border-box;padding:60px 20px;border-radius:10px}.modal-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:35px;margin-bottom:35px;text-align:center;width:100%}.modal-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{text-align:center}.add-todo-box[_ngcontent-%COMP%]{padding:25px;box-shadow:0 4px 12px rgba(0,0,0,.4);border-radius:4px;background-color:#fff;margin-top:-80px}.button[_ngcontent-%COMP%]{background-color:#1f79be;color:#fff;border:1px solid #000;transition:.4s}.item[_ngcontent-%COMP%]{display:flex;font-size:18px;cursor:pointer}.todo-text[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap;align-items:center}.item[_ngcontent-%COMP%]   .check-box[_ngcontent-%COMP%]{display:flex;margin-right:20px;border:2px solid #eee;border-radius:50%;height:28px;width:28px;transition:.5s}.item[_ngcontent-%COMP%]   .check-box[_ngcontent-%COMP%]   i.material-icons[_ngcontent-%COMP%]{font-size:20px;margin:auto;opacity:0}.items[_ngcontent-%COMP%]:hover   .check-box[_ngcontent-%COMP%]{background-color:#1f79be;color:#fff}.items[_ngcontent-%COMP%]:hover   .check-box[_ngcontent-%COMP%]   i.material-icons[_ngcontent-%COMP%]{opacity:1}h1[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:35px}#container[_ngcontent-%COMP%]{padding:20px;margin-top:20px;width:790px;background-color:#fff;display:flex;flex-direction:row;border-bottom:1px solid rgba(0,0,0,.178);transition:.5s}#container[_ngcontent-%COMP%]:hover   .buttons[_ngcontent-%COMP%]{opacity:1}.round[_ngcontent-%COMP%]{position:relative}.round[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ccc;border-radius:50%;cursor:pointer;height:28px;left:0;position:absolute;top:0;width:28px;transition:.5s}.round[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:hover{background-color:#1f79be;border-color:#1f79be}.round[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:after{transition:.5s;border:2px solid #fff;border-top:none;border-right:none;content:"";height:6px;left:7px;opacity:0;position:absolute;top:8px;transform:rotate(-45deg);width:12px}.round[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{visibility:hidden}.round[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{background-color:#1f79be;border-color:#1f79be}.round[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:after{opacity:1}.text[_ngcontent-%COMP%]{border:1px solid #fff;box-sizing:border-box;padding:5px}.text[_ngcontent-%COMP%], .txtedit[_ngcontent-%COMP%]{font-size:18px;margin-left:30px;min-height:55px;outline:none;background-color:#fff;min-width:85%;max-width:85%;transition:.5s}.txtedit[_ngcontent-%COMP%]{border:1px solid #afafaf;border-radius:8px}.label[_ngcontent-%COMP%]{box-shadow:0 4px 12px rgba(0,0,0,.4);position:fixed;color:#fff;padding:20px;background-color:rgba(44,44,44,.685);margin-top:-240px;float:right;border-radius:0 50px 50px 0;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;z-index:1}.label[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:underline}.fix[_ngcontent-%COMP%]{color:#bdbdbd;font-size:19px}.buttons[_ngcontent-%COMP%]{float:right;opacity:0;background:#fff;margin:0 0 0 5px;transition:.5s;border-radius:100%;padding:4px;border:1px solid #dadada;outline:none}.buttons[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#a1a1a1}.buttons[_ngcontent-%COMP%]:hover   .fix[_ngcontent-%COMP%]{color:#fff}.editing[_ngcontent-%COMP%]{float:right;opacity:1;background-color:#a1a1a1;margin:0 0 0 5px;transition:.5s;border-radius:100%;padding:4px;border:1px solid #dadada;outline:none}.editing[_ngcontent-%COMP%]   .fix[_ngcontent-%COMP%]{color:#fff}#loginbtn[_ngcontent-%COMP%]{width:100%}#logout[_ngcontent-%COMP%]{cursor:default}#logout[_ngcontent-%COMP%], #logout[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;flex-wrap:wrap}#logout[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:100%;margin-right:10px}#logout[_ngcontent-%COMP%]   #down[_ngcontent-%COMP%]:hover{cursor:pointer}.logoutbtn[_ngcontent-%COMP%]{padding:2px;text-align:center}'],data:{animation:[ce("fade",[pe("void => *",[de({backgroundColor:"rgb(0, 0, 0,0)",opacity:0}),le(900)]),pe("* => void",[le(0,de({backgroundColor:"white",opacity:0}))])]),ce("fade-left",[pe("void => *",[de({marginLeft:"-300px"}),le(200)])])]}}),t})()}];let lS=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},imports:[[ya.forRoot(cS)],ya]}),t})(),hS=(()=>{class t{constructor(){this.title="To-do"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Gb({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(t,e){1&t&&r.Nb(0,"router-outlet")},directives:[sa],styles:[""]}),t})();var dS=n("w1tV");class fS{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new pS(t,this.observables,this.project))}}class pS extends Xr{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add(ti(this,e[i],void 0,i))}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class gS{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new yS(t,this.predicate))}}class yS extends bt.a{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}function mS(t){return null==t}function vS(t){return"function"==typeof t.set}function _S(t,e){return vS(e)?e:t.ref(e)}function bS(t,e){if("string"==typeof t)return e.stringCase();if(vS(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function wS(t,e,n="on",r=wt.b){return new Qt.a(i=>{let o=null;return o=t[n](e,(t,e)=>{r.schedule(()=>{i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(()=>i.complete())},t=>{r.schedule(()=>i.error(t))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(Object(xt.a)(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),Object(dS.a)())}function ES(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function CS(t,e){const{payload:n,prevKey:r,key:i}=e,o=ES(t,i),s=function(t,e){if(mS(e))return 0;{const n=ES(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(o>-1){const i=t[o-1];(i&&i.key||null)!==r&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===i?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function OS(t){return(mS(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function SS(t,e,n){return function(t,e,n){return wS(t,"value","once",n).pipe(ci(r=>{const i=[Object(mt.a)(r)];return e.forEach(e=>i.push(wS(t,e,"on",n))),Object(Ia.a)(...i).pipe(di(CS,[]))}),Ka())}(t,e=OS(e),n)}function TS(t,e,n){const r=(e=OS(e)).map(e=>wS(t,e,"on",n));return Object(Ia.a)(...r)}function IS(t,e){return function(n,r){return bS(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function xS(t,e){return function(){return wS(t,"value","on",e)}}n("6Uf2");const kS=new r.r("angularfire2.realtimeDatabaseURL"),AS=new r.r("angularfire2.database.use-emulator");let jS=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new Ma.d(i),this.keepUnstableUntilFirst=Object(Ma.h)(this.schedulers);const a=o,u=Object(Ma.g)(t,i,e);!Xa.a.auth&&s&&Object(Ma.j)(),this.database=Object(Ma.f)(`${u.name}.database.${n}`,"AngularFireDatabase",u,()=>{const t=i.runOutsideAngular(()=>u.database(n||void 0));return a&&t.useEmulator(...a),t},[a])}list(t,e){const n=this.schedulers.ngZone.runOutsideAngular(()=>_S(this.database,t));let r=n;return e&&(r=e(n)),function(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:IS(r,"update"),set:IS(r,"set"),push:t=>r.push(t),remove:(i=r,function(t){return t?bS(t,{stringCase:()=>i.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):i.remove()}),snapshotChanges:r=>SS(t,r,n).pipe(e.keepUnstableUntilFirst),stateChanges:r=>TS(t,r,n).pipe(e.keepUnstableUntilFirst),auditTrail:r=>function(t,e,n){return function(t,e,n){return function(t,e){return wS(t,"value","on",e).pipe(Object(xt.a)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(function(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new fS(t,n))}}(e),Object(xt.a)(([t,e])=>{const n=t.lastKeyToLoad,r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(r=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new gS(r))),Object(xt.a)(t=>t.actions));var r}(t,TS(t,e).pipe(di((t,e)=>[...t,e],[])),n)}(t,r,n).pipe(e.keepUnstableUntilFirst),valueChanges:(r,i)=>SS(t,r,n).pipe(Object(xt.a)(t=>t.map(t=>i&&i.idField?Object.assign(Object.assign({},t.payload.val()),{[i.idField]:t.key}):t.payload.val())),e.keepUnstableUntilFirst)};var i}(r,this)}object(t){const e=this.schedulers.ngZone.runOutsideAngular(()=>_S(this.database,t));return r=this,{query:n=e,snapshotChanges:()=>xS(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>xS(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst,Object(xt.a)(t=>t.payload.exists()?t.payload.val():null))};var n,r}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(Ma.c),r.Tb(Ma.b,8),r.Tb(kS,8),r.Tb(r.C),r.Tb(r.A),r.Tb(AS,8),r.Tb(La,8))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Tb)(Ma.c),Object(r.Tb)(Ma.b,8),Object(r.Tb)(kS,8),Object(r.Tb)(r.C),Object(r.Tb)(r.A),Object(r.Tb)(AS,8),Object(r.Tb)(La,8))},token:t,providedIn:"any"}),t})(),PS=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},providers:[jS]}),t})();const NS={apiKey:"",authDomain:"",projectId:"",storageBucket:"",messagingSenderId:"",appId:"",measurementId:""};let RS=(()=>{class t{}return t.\u0275mod=r.Kb({type:t,bootstrap:[hS]}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},providers:[za,ME],imports:[[Qr,rO,pt,lS,Ar,PS,DE,oS,Ma.a.initializeApp(NS)]]}),t})();Object(r.U)(),dt().bootstrapModule(RS).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(!e.closed)return t instanceof i.a?t.subscribe(e):Object(o.a)(t)(e)}}},[[0,0]]]);